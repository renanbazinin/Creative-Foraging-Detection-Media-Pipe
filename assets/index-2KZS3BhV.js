(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var id={exports:{}},al={},od={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=Symbol.for("react.element"),rp=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),dp=Symbol.for("react.memo"),fp=Symbol.for("react.lazy"),Du=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ad={};function Kr(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ud(){}ud.prototype=Kr.prototype;function ua(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}var ca=ua.prototype=new ud;ca.constructor=ua;sd(ca,Kr.prototype);ca.isPureReactComponent=!0;var $u=Array.isArray,cd=Object.prototype.hasOwnProperty,da={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)cd.call(t,r)&&!dd.hasOwnProperty(r)&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var h=Array(f),y=0;y<f;y++)h[y]=arguments[y+2];o.children=h}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return{$$typeof:Gi,type:e,key:l,ref:a,props:o,_owner:da.current}}function pp(e,t){return{$$typeof:Gi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gi}function mp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uu=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mp(""+e.key):t.toString(36)}function Co(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Gi:case rp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Dl(a,0):r,$u(o)?(n="",e!=null&&(n=e.replace(Uu,"$&/")+"/"),Co(o,t,n,"",function(y){return y})):o!=null&&(fa(o)&&(o=pp(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Uu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",$u(e))for(var f=0;f<e.length;f++){l=e[f];var h=r+Dl(l,f);a+=Co(l,t,n,h,o)}else if(h=hp(e),typeof h=="function")for(e=h.call(e),f=0;!(l=e.next()).done;)l=l.value,h=r+Dl(l,f++),a+=Co(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function so(e,t,n){if(e==null)return e;var r=[],o=0;return Co(e,r,"","",function(l){return t.call(n,l,o++)}),r}function vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},No={transition:null},yp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:No,ReactCurrentOwner:da};function hd(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:so,forEach:function(e,t,n){so(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return so(e,function(){t++}),t},toArray:function(e){return so(e,function(t){return t})||[]},only:function(e){if(!fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ae.Component=Kr;Ae.Fragment=ip;Ae.Profiler=lp;Ae.PureComponent=ua;Ae.StrictMode=op;Ae.Suspense=cp;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp;Ae.act=hd;Ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=da.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(h in t)cd.call(t,h)&&!dd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&f!==void 0?f[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){f=Array(h);for(var y=0;y<h;y++)f[y]=arguments[y+2];r.children=f}return{$$typeof:Gi,type:e.type,key:o,ref:l,props:r,_owner:a}};Ae.createContext=function(e){return e={$$typeof:ap,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sp,_context:e},e.Consumer=e};Ae.createElement=fd;Ae.createFactory=function(e){var t=fd.bind(null,e);return t.type=e,t};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(e){return{$$typeof:up,render:e}};Ae.isValidElement=fa;Ae.lazy=function(e){return{$$typeof:fp,_payload:{_status:-1,_result:e},_init:vp}};Ae.memo=function(e,t){return{$$typeof:dp,type:e,compare:t===void 0?null:t}};Ae.startTransition=function(e){var t=No.transition;No.transition={};try{e()}finally{No.transition=t}};Ae.unstable_act=hd;Ae.useCallback=function(e,t){return Ct.current.useCallback(e,t)};Ae.useContext=function(e){return Ct.current.useContext(e)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};Ae.useEffect=function(e,t){return Ct.current.useEffect(e,t)};Ae.useId=function(){return Ct.current.useId()};Ae.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};Ae.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};Ae.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};Ae.useMemo=function(e,t){return Ct.current.useMemo(e,t)};Ae.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};Ae.useRef=function(e){return Ct.current.useRef(e)};Ae.useState=function(e){return Ct.current.useState(e)};Ae.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};Ae.useTransition=function(){return Ct.current.useTransition()};Ae.version="18.3.1";od.exports=Ae;var P=od.exports;const gp=np(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=P,xp=Symbol.for("react.element"),Sp=Symbol.for("react.fragment"),kp=Object.prototype.hasOwnProperty,Ep=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function pd(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kp.call(t,r)&&!jp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:xp,type:e,key:l,ref:a,props:o,_owner:Ep.current}}al.Fragment=Sp;al.jsx=pd;al.jsxs=pd;id.exports=al;var d=id.exports,ps={},md={exports:{}},Ut={},vd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,se){var oe=J.length;J.push(se);e:for(;0<oe;){var we=oe-1>>>1,ke=J[we];if(0<o(ke,se))J[we]=se,J[oe]=ke,oe=we;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var se=J[0],oe=J.pop();if(oe!==se){J[0]=oe;e:for(var we=0,ke=J.length,Re=ke>>>1;we<Re;){var Oe=2*(we+1)-1,B=J[Oe],ue=Oe+1,z=J[ue];if(0>o(B,oe))ue<ke&&0>o(z,B)?(J[we]=z,J[ue]=oe,we=ue):(J[we]=B,J[Oe]=oe,we=Oe);else if(ue<ke&&0>o(z,oe))J[we]=z,J[ue]=oe,we=ue;else break e}}return se}function o(J,se){var oe=J.sortIndex-se.sortIndex;return oe!==0?oe:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,f=a.now();e.unstable_now=function(){return a.now()-f}}var h=[],y=[],C=1,A=null,N=3,O=!1,D=!1,$=!1,he=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var se=n(y);se!==null;){if(se.callback===null)r(y);else if(se.startTime<=J)r(y),se.sortIndex=se.expirationTime,t(h,se);else break;se=n(y)}}function R(J){if($=!1,k(J),!D)if(n(h)!==null)D=!0,je(W);else{var se=n(y);se!==null&&Me(R,se.startTime-J)}}function W(J,se){D=!1,$&&($=!1,S(V),V=-1),O=!0;var oe=N;try{for(k(se),A=n(h);A!==null&&(!(A.expirationTime>se)||J&&!fe());){var we=A.callback;if(typeof we=="function"){A.callback=null,N=A.priorityLevel;var ke=we(A.expirationTime<=se);se=e.unstable_now(),typeof ke=="function"?A.callback=ke:A===n(h)&&r(h),k(se)}else r(h);A=n(h)}if(A!==null)var Re=!0;else{var Oe=n(y);Oe!==null&&Me(R,Oe.startTime-se),Re=!1}return Re}finally{A=null,N=oe,O=!1}}var q=!1,K=null,V=-1,me=5,Y=-1;function fe(){return!(e.unstable_now()-Y<me)}function te(){if(K!==null){var J=e.unstable_now();Y=J;var se=!0;try{se=K(!0,J)}finally{se?pe():(q=!1,K=null)}}else q=!1}var pe;if(typeof w=="function")pe=function(){w(te)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ee=de.port2;de.port1.onmessage=te,pe=function(){Ee.postMessage(null)}}else pe=function(){he(te,0)};function je(J){K=J,q||(q=!0,pe())}function Me(J,se){V=he(function(){J(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,je(W))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(J){switch(N){case 1:case 2:case 3:var se=3;break;default:se=N}var oe=N;N=se;try{return J()}finally{N=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var oe=N;N=J;try{return se()}finally{N=oe}},e.unstable_scheduleCallback=function(J,se,oe){var we=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?we+oe:we):oe=we,J){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=oe+ke,J={id:C++,callback:se,priorityLevel:J,startTime:oe,expirationTime:ke,sortIndex:-1},oe>we?(J.sortIndex=oe,t(y,J),n(h)===null&&J===n(y)&&($?(S(V),V=-1):$=!0,Me(R,oe-we))):(J.sortIndex=ke,t(h,J),D||O||(D=!0,je(W))),J},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(J){var se=N;return function(){var oe=N;N=se;try{return J.apply(this,arguments)}finally{N=oe}}}})(yd);vd.exports=yd;var Cp=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=P,$t=Cp;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Ai={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Ai[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=Object.prototype.hasOwnProperty,Pp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},Wu={};function Ap(e){return ms.call(Wu,e)?!0:ms.call(Hu,e)?!1:Pp.test(e)?Wu[e]=!0:(Hu[e]=!0,!1)}function Mp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ip(e,t,n,r){if(t===null||typeof t>"u"||Mp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ha=/[\-:]([a-z])/g;function pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ma(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ip(t,n,o,r)&&(n=null),r||o===null?Ap(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ao=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),va=Symbol.for("react.strict_mode"),vs=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),ya=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),gs=Symbol.for("react.suspense_list"),ga=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Vu=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=Vu&&e[Vu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,$l;function pi(e){if($l===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$l=t&&t[1]||""}return`
`+$l+e}var Ul=!1;function Hl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,f=l.length-1;1<=a&&0<=f&&o[a]!==l[f];)f--;for(;1<=a&&0<=f;a--,f--)if(o[a]!==l[f]){if(a!==1||f!==1)do if(a--,f--,0>f||o[a]!==l[f]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=f);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pi(e):""}function _p(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=Hl(e.type,!1),e;case 11:return e=Hl(e.type.render,!1),e;case 1:return e=Hl(e.type,!0),e;default:return""}}function ws(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case vs:return"Profiler";case va:return"StrictMode";case ys:return"Suspense";case gs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case wd:return(e._context.displayName||"Context")+".Provider";case ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ga:return t=e.displayName||null,t!==null?t:ws(e.type)||"Memo";case Dn:t=e._payload,e=e._init;try{return ws(e(t))}catch{}}return null}function Tp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ws(t);case 8:return t===va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rp(e){var t=kd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uo(e){e._valueTracker||(e._valueTracker=Rp(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xs(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jd(e,t){t=t.checked,t!=null&&ma(e,"checked",t,!1)}function Ss(e,t){jd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ks(e,t.type,n):t.hasOwnProperty("defaultValue")&&ks(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ks(e,t,n){(t!=="number"||Bo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Es(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(mi(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Cd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function js(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var co,Pd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zp=["Webkit","ms","Moz","O"];Object.keys(gi).forEach(function(e){zp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gi[t]=gi[e]})});function Ad(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gi.hasOwnProperty(e)&&gi[e]?(""+t).trim():t+"px"}function Md(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Ad(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Lp=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cs(e,t){if(t){if(Lp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Ns(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Or=null,Br=null;function Ku(e){if(e=Yi(e)){if(typeof As!="function")throw Error(X(280));var t=e.stateNode;t&&(t=hl(t),As(e.stateNode,e.type,t))}}function Id(e){Or?Br?Br.push(e):Br=[e]:Or=e}function _d(){if(Or){var e=Or,t=Br;if(Br=Or=null,Ku(e),t)for(e=0;e<t.length;e++)Ku(t[e])}}function Td(e,t){return e(t)}function Rd(){}var Wl=!1;function zd(e,t,n){if(Wl)return e(t,n);Wl=!0;try{return Td(e,t,n)}finally{Wl=!1,(Or!==null||Br!==null)&&(Rd(),_d())}}function Ii(e,t){var n=e.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var Ms=!1;if(Mn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Ms=!1}function Op(e,t,n,r,o,l,a,f,h){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var wi=!1,Fo=null,Do=!1,Is=null,Bp={onError:function(e){wi=!0,Fo=e}};function Fp(e,t,n,r,o,l,a,f,h){wi=!1,Fo=null,Op.apply(Bp,arguments)}function Dp(e,t,n,r,o,l,a,f,h){if(Fp.apply(this,arguments),wi){if(wi){var y=Fo;wi=!1,Fo=null}else throw Error(X(198));Do||(Do=!0,Is=y)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(e){if(gr(e)!==e)throw Error(X(188))}function $p(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Xu(o),e;if(l===r)return Xu(o),t;l=l.sibling}throw Error(X(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,f=o.child;f;){if(f===n){a=!0,n=o,r=l;break}if(f===r){a=!0,r=o,n=l;break}f=f.sibling}if(!a){for(f=l.child;f;){if(f===n){a=!0,n=l,r=o;break}if(f===r){a=!0,r=l,n=o;break}f=f.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function Od(e){return e=$p(e),e!==null?Bd(e):null}function Bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=$t.unstable_scheduleCallback,Ju=$t.unstable_cancelCallback,Up=$t.unstable_shouldYield,Hp=$t.unstable_requestPaint,nt=$t.unstable_now,Wp=$t.unstable_getCurrentPriorityLevel,xa=$t.unstable_ImmediatePriority,Dd=$t.unstable_UserBlockingPriority,$o=$t.unstable_NormalPriority,Vp=$t.unstable_LowPriority,$d=$t.unstable_IdlePriority,ul=null,kn=null;function Gp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(ul,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Yp,bp=Math.log,Qp=Math.LN2;function Yp(e){return e>>>=0,e===0?32:31-(bp(e)/Qp|0)|0}var fo=64,ho=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Uo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var f=a&~o;f!==0?r=vi(f):(l&=a,l!==0&&(r=vi(l)))}else a=n&~o,a!==0?r=vi(a):l!==0&&(r=vi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Kp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),f=1<<a,h=o[a];h===-1?(!(f&n)||f&r)&&(o[a]=Kp(f,t)):h<=t&&(e.expiredLanes|=f),l&=~f}}function _s(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=fo;return fo<<=1,!(fo&4194240)&&(fo=64),e}function Vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Jp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var De=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wd,ka,Vd,Gd,bd,Ts=!1,po=[],Gn=null,bn=null,Qn=null,_i=new Map,Ti=new Map,Un=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function li(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Yi(t),t!==null&&ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function qp(e,t,n,r,o){switch(t){case"focusin":return Gn=li(Gn,e,t,n,r,o),!0;case"dragenter":return bn=li(bn,e,t,n,r,o),!0;case"mouseover":return Qn=li(Qn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return _i.set(l,li(_i.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Ti.set(l,li(Ti.get(l)||null,e,t,n,r,o)),!0}return!1}function Qd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ld(n),t!==null){e.blockedOn=t,bd(e.priority,function(){Vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ps=r,n.target.dispatchEvent(r),Ps=null}else return t=Yi(n),t!==null&&ka(t),e.blockedOn=n,!1;t.shift()}return!0}function qu(e,t,n){Po(e)&&n.delete(t)}function em(){Ts=!1,Gn!==null&&Po(Gn)&&(Gn=null),bn!==null&&Po(bn)&&(bn=null),Qn!==null&&Po(Qn)&&(Qn=null),_i.forEach(qu),Ti.forEach(qu)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Ts||(Ts=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,em)))}function Ri(e){function t(o){return si(o,e)}if(0<po.length){si(po[0],e);for(var n=1;n<po.length;n++){var r=po[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&si(Gn,e),bn!==null&&si(bn,e),Qn!==null&&si(Qn,e),_i.forEach(t),Ti.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Qd(n),n.blockedOn===null&&Un.shift()}var Fr=Rn.ReactCurrentBatchConfig,Ho=!0;function tm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=1,Ea(e,t,n,r)}finally{De=o,Fr.transition=l}}function nm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=4,Ea(e,t,n,r)}finally{De=o,Fr.transition=l}}function Ea(e,t,n,r){if(Ho){var o=Rs(e,t,n,r);if(o===null)es(e,t,r,Wo,n),Zu(e,r);else if(qp(o,e,t,n,r))r.stopPropagation();else if(Zu(e,r),t&4&&-1<Zp.indexOf(e)){for(;o!==null;){var l=Yi(o);if(l!==null&&Wd(l),l=Rs(e,t,n,r),l===null&&es(e,t,r,Wo,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else es(e,t,r,null,n)}}var Wo=null;function Rs(e,t,n,r){if(Wo=null,e=wa(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wo=e,null}function Yd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wp()){case xa:return 1;case Dd:return 4;case $o:case Vp:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Wn=null,ja=null,Ao=null;function Kd(){if(Ao)return Ao;var e,t=ja,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Ao=o.slice(e,1<r?1-r:void 0)}function Mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mo(){return!0}function ec(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?mo:ec,this.isPropagationStopped=ec,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(Xr),Qi=Ze({},Xr,{view:0,detail:0}),rm=Ht(Qi),Gl,bl,ai,cl=Ze({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(Gl=e.screenX-ai.screenX,bl=e.screenY-ai.screenY):bl=Gl=0,ai=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:bl}}),tc=Ht(cl),im=Ze({},cl,{dataTransfer:0}),om=Ht(im),lm=Ze({},Qi,{relatedTarget:0}),Ql=Ht(lm),sm=Ze({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Ht(sm),um=Ze({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=Ht(um),dm=Ze({},Xr,{data:0}),nc=Ht(dm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pm[e])?!!t[e]:!1}function Na(){return mm}var vm=Ze({},Qi,{key:function(e){if(e.key){var t=fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ym=Ht(vm),gm=Ze({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Ht(gm),wm=Ze({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),xm=Ht(wm),Sm=Ze({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=Ht(Sm),Em=Ze({},cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=Ht(Em),Cm=[9,13,27,32],Pa=Mn&&"CompositionEvent"in window,xi=null;Mn&&"documentMode"in document&&(xi=document.documentMode);var Nm=Mn&&"TextEvent"in window&&!xi,Xd=Mn&&(!Pa||xi&&8<xi&&11>=xi),ic=" ",oc=!1;function Jd(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Pm(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(oc=!0,ic);case"textInput":return e=t.data,e===ic&&oc?null:e;default:return null}}function Am(e,t){if(Cr)return e==="compositionend"||!Pa&&Jd(e,t)?(e=Kd(),Ao=ja=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xd&&t.locale!=="ko"?null:t.data;default:return null}}var Mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mm[e.type]:t==="textarea"}function qd(e,t,n,r){Id(r),t=Vo(t,"onChange"),0<t.length&&(n=new Ca("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Si=null,zi=null;function Im(e){df(e,0)}function dl(e){var t=Ar(e);if(Ed(t))return e}function _m(e,t){if(e==="change")return t}var ef=!1;if(Mn){var Yl;if(Mn){var Kl="oninput"in document;if(!Kl){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),Kl=typeof sc.oninput=="function"}Yl=Kl}else Yl=!1;ef=Yl&&(!document.documentMode||9<document.documentMode)}function ac(){Si&&(Si.detachEvent("onpropertychange",tf),zi=Si=null)}function tf(e){if(e.propertyName==="value"&&dl(zi)){var t=[];qd(t,zi,e,wa(e)),zd(Im,t)}}function Tm(e,t,n){e==="focusin"?(ac(),Si=t,zi=n,Si.attachEvent("onpropertychange",tf)):e==="focusout"&&ac()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dl(zi)}function zm(e,t){if(e==="click")return dl(t)}function Lm(e,t){if(e==="input"||e==="change")return dl(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Om;function Li(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ms.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cc(e,t){var n=uc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uc(n)}}function nf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rf(){for(var e=window,t=Bo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bo(e.document)}return t}function Aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bm(e){var t=rf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(r!==null&&Aa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=cc(n,l);var a=cc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=Mn&&"documentMode"in document&&11>=document.documentMode,Nr=null,zs=null,ki=null,Ls=!1;function dc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ls||Nr==null||Nr!==Bo(r)||(r=Nr,"selectionStart"in r&&Aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ki&&Li(ki,r)||(ki=r,r=Vo(zs,"onSelect"),0<r.length&&(t=new Ca("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function vo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},Xl={},of={};Mn&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function fl(e){if(Xl[e])return Xl[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in of)return Xl[e]=t[n];return e}var lf=fl("animationend"),sf=fl("animationiteration"),af=fl("animationstart"),uf=fl("transitionend"),cf=new Map,fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){cf.set(e,t),yr(t,[e])}for(var Jl=0;Jl<fc.length;Jl++){var Zl=fc[Jl],Dm=Zl.toLowerCase(),$m=Zl[0].toUpperCase()+Zl.slice(1);tr(Dm,"on"+$m)}tr(lf,"onAnimationEnd");tr(sf,"onAnimationIteration");tr(af,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(uf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Um=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function hc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Dp(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var f=r[a],h=f.instance,y=f.currentTarget;if(f=f.listener,h!==l&&o.isPropagationStopped())break e;hc(o,f,y),l=h}else for(a=0;a<r.length;a++){if(f=r[a],h=f.instance,y=f.currentTarget,f=f.listener,h!==l&&o.isPropagationStopped())break e;hc(o,f,y),l=h}}}if(Do)throw e=Is,Do=!1,Is=null,e}function Ge(e,t){var n=t[$s];n===void 0&&(n=t[$s]=new Set);var r=e+"__bubble";n.has(r)||(ff(t,e,2,!1),n.add(r))}function ql(e,t,n){var r=0;t&&(r|=4),ff(n,e,r,t)}var yo="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){if(!e[yo]){e[yo]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Um.has(n)||ql(n,!1,e),ql(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yo]||(t[yo]=!0,ql("selectionchange",!1,t))}}function ff(e,t,n,r){switch(Yd(t)){case 1:var o=tm;break;case 4:o=nm;break;default:o=Ea}n=o.bind(null,t,n,e),o=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function es(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var f=r.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;f!==null;){if(a=sr(f),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}f=f.parentNode}}r=r.return}zd(function(){var y=l,C=wa(n),A=[];e:{var N=cf.get(e);if(N!==void 0){var O=Ca,D=e;switch(e){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":O=ym;break;case"focusin":D="focus",O=Ql;break;case"focusout":D="blur",O=Ql;break;case"beforeblur":case"afterblur":O=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=xm;break;case lf:case sf:case af:O=am;break;case uf:O=km;break;case"scroll":O=rm;break;case"wheel":O=jm;break;case"copy":case"cut":case"paste":O=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=rc}var $=(t&4)!==0,he=!$&&e==="scroll",S=$?N!==null?N+"Capture":null:N;$=[];for(var w=y,k;w!==null;){k=w;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,S!==null&&(R=Ii(w,S),R!=null&&$.push(Bi(w,R,k)))),he)break;w=w.return}0<$.length&&(N=new O(N,D,null,n,C),A.push({event:N,listeners:$}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",N&&n!==Ps&&(D=n.relatedTarget||n.fromElement)&&(sr(D)||D[In]))break e;if((O||N)&&(N=C.window===C?C:(N=C.ownerDocument)?N.defaultView||N.parentWindow:window,O?(D=n.relatedTarget||n.toElement,O=y,D=D?sr(D):null,D!==null&&(he=gr(D),D!==he||D.tag!==5&&D.tag!==6)&&(D=null)):(O=null,D=y),O!==D)){if($=tc,R="onMouseLeave",S="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&($=rc,R="onPointerLeave",S="onPointerEnter",w="pointer"),he=O==null?N:Ar(O),k=D==null?N:Ar(D),N=new $(R,w+"leave",O,n,C),N.target=he,N.relatedTarget=k,R=null,sr(C)===y&&($=new $(S,w+"enter",D,n,C),$.target=k,$.relatedTarget=he,R=$),he=R,O&&D)t:{for($=O,S=D,w=0,k=$;k;k=kr(k))w++;for(k=0,R=S;R;R=kr(R))k++;for(;0<w-k;)$=kr($),w--;for(;0<k-w;)S=kr(S),k--;for(;w--;){if($===S||S!==null&&$===S.alternate)break t;$=kr($),S=kr(S)}$=null}else $=null;O!==null&&pc(A,N,O,$,!1),D!==null&&he!==null&&pc(A,he,D,$,!0)}}e:{if(N=y?Ar(y):window,O=N.nodeName&&N.nodeName.toLowerCase(),O==="select"||O==="input"&&N.type==="file")var W=_m;else if(lc(N))if(ef)W=Lm;else{W=Rm;var q=Tm}else(O=N.nodeName)&&O.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(W=zm);if(W&&(W=W(e,y))){qd(A,W,n,C);break e}q&&q(e,N,y),e==="focusout"&&(q=N._wrapperState)&&q.controlled&&N.type==="number"&&ks(N,"number",N.value)}switch(q=y?Ar(y):window,e){case"focusin":(lc(q)||q.contentEditable==="true")&&(Nr=q,zs=y,ki=null);break;case"focusout":ki=zs=Nr=null;break;case"mousedown":Ls=!0;break;case"contextmenu":case"mouseup":case"dragend":Ls=!1,dc(A,n,C);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":dc(A,n,C)}var K;if(Pa)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Cr?Jd(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Xd&&n.locale!=="ko"&&(Cr||V!=="onCompositionStart"?V==="onCompositionEnd"&&Cr&&(K=Kd()):(Wn=C,ja="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),q=Vo(y,V),0<q.length&&(V=new nc(V,e,null,n,C),A.push({event:V,listeners:q}),K?V.data=K:(K=Zd(n),K!==null&&(V.data=K)))),(K=Nm?Pm(e,n):Am(e,n))&&(y=Vo(y,"onBeforeInput"),0<y.length&&(C=new nc("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:y}),C.data=K))}df(A,t)})}function Bi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Ii(e,n),l!=null&&r.unshift(Bi(e,l,o)),l=Ii(e,t),l!=null&&r.push(Bi(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var f=n,h=f.alternate,y=f.stateNode;if(h!==null&&h===r)break;f.tag===5&&y!==null&&(f=y,o?(h=Ii(n,l),h!=null&&a.unshift(Bi(n,h,f))):o||(h=Ii(n,l),h!=null&&a.push(Bi(n,h,f)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(Hm,`
`).replace(Wm,"")}function go(e,t,n){if(t=mc(t),mc(e)!==t&&n)throw Error(X(425))}function Go(){}var Os=null,Bs=null;function Fs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ds=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(bm)}:Ds;function bm(e){setTimeout(function(){throw e})}function ts(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ri(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ri(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jr,Fi="__reactProps$"+Jr,In="__reactContainer$"+Jr,$s="__reactEvents$"+Jr,Qm="__reactListeners$"+Jr,Ym="__reactHandles$"+Jr;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yc(e);e!==null;){if(n=e[Sn])return n;e=yc(e)}return t}e=n,n=e.parentNode}return null}function Yi(e){return e=e[Sn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function hl(e){return e[Fi]||null}var Us=[],Mr=-1;function nr(e){return{current:e}}function be(e){0>Mr||(e.current=Us[Mr],Us[Mr]=null,Mr--)}function Ue(e,t){Mr++,Us[Mr]=e.current,e.current=t}var er={},xt=nr(er),_t=nr(!1),fr=er;function Wr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Tt(e){return e=e.childContextTypes,e!=null}function bo(){be(_t),be(xt)}function gc(e,t,n){if(xt.current!==er)throw Error(X(168));Ue(xt,t),Ue(_t,n)}function hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(X(108,Tp(e)||"Unknown",o));return Ze({},n,r)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Ue(xt,e),Ue(_t,_t.current),!0}function wc(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=hf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,be(_t),be(xt),Ue(xt,e)):be(_t),Ue(_t,n)}var Cn=null,pl=!1,ns=!1;function pf(e){Cn===null?Cn=[e]:Cn.push(e)}function Km(e){pl=!0,pf(e)}function rr(){if(!ns&&Cn!==null){ns=!0;var e=0,t=De;try{var n=Cn;for(De=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,pl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Fd(xa,rr),o}finally{De=t,ns=!1}}return null}var Ir=[],_r=0,Yo=null,Ko=0,Gt=[],bt=0,hr=null,Nn=1,Pn="";function or(e,t){Ir[_r++]=Ko,Ir[_r++]=Yo,Yo=e,Ko=t}function mf(e,t,n){Gt[bt++]=Nn,Gt[bt++]=Pn,Gt[bt++]=hr,hr=e;var r=Nn;e=Pn;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,Pn=l+e}else Nn=1<<l|n<<o|r,Pn=e}function Ma(e){e.return!==null&&(or(e,1),mf(e,1,0))}function Ia(e){for(;e===Yo;)Yo=Ir[--_r],Ir[_r]=null,Ko=Ir[--_r],Ir[_r]=null;for(;e===hr;)hr=Gt[--bt],Gt[bt]=null,Pn=Gt[--bt],Gt[bt]=null,Nn=Gt[--bt],Gt[bt]=null}var Dt=null,Ft=null,Qe=!1,ln=null;function vf(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ft=null,!0):!1;default:return!1}}function Hs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ws(e){if(Qe){var t=Ft;if(t){var n=t;if(!xc(e,t)){if(Hs(e))throw Error(X(418));t=Yn(n.nextSibling);var r=Dt;t&&xc(e,t)?vf(r,n):(e.flags=e.flags&-4097|2,Qe=!1,Dt=e)}}else{if(Hs(e))throw Error(X(418));e.flags=e.flags&-4097|2,Qe=!1,Dt=e}}}function Sc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function wo(e){if(e!==Dt)return!1;if(!Qe)return Sc(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fs(e.type,e.memoizedProps)),t&&(t=Ft)){if(Hs(e))throw yf(),Error(X(418));for(;t;)vf(e,t),t=Yn(t.nextSibling)}if(Sc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Dt?Yn(e.stateNode.nextSibling):null;return!0}function yf(){for(var e=Ft;e;)e=Yn(e.nextSibling)}function Vr(){Ft=Dt=null,Qe=!1}function _a(e){ln===null?ln=[e]:ln.push(e)}var Xm=Rn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var f=o.refs;a===null?delete f[l]:f[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function xo(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kc(e){var t=e._init;return t(e._payload)}function gf(e){function t(S,w){if(e){var k=S.deletions;k===null?(S.deletions=[w],S.flags|=16):k.push(w)}}function n(S,w){if(!e)return null;for(;w!==null;)t(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function o(S,w){return S=Zn(S,w),S.index=0,S.sibling=null,S}function l(S,w,k){return S.index=k,e?(k=S.alternate,k!==null?(k=k.index,k<w?(S.flags|=2,w):k):(S.flags|=2,w)):(S.flags|=1048576,w)}function a(S){return e&&S.alternate===null&&(S.flags|=2),S}function f(S,w,k,R){return w===null||w.tag!==6?(w=us(k,S.mode,R),w.return=S,w):(w=o(w,k),w.return=S,w)}function h(S,w,k,R){var W=k.type;return W===jr?C(S,w,k.props.children,R,k.key):w!==null&&(w.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Dn&&kc(W)===w.type)?(R=o(w,k.props),R.ref=ui(S,w,k),R.return=S,R):(R=Oo(k.type,k.key,k.props,null,S.mode,R),R.ref=ui(S,w,k),R.return=S,R)}function y(S,w,k,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=cs(k,S.mode,R),w.return=S,w):(w=o(w,k.children||[]),w.return=S,w)}function C(S,w,k,R,W){return w===null||w.tag!==7?(w=dr(k,S.mode,R,W),w.return=S,w):(w=o(w,k),w.return=S,w)}function A(S,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=us(""+w,S.mode,k),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ao:return k=Oo(w.type,w.key,w.props,null,S.mode,k),k.ref=ui(S,null,w),k.return=S,k;case Er:return w=cs(w,S.mode,k),w.return=S,w;case Dn:var R=w._init;return A(S,R(w._payload),k)}if(mi(w)||ii(w))return w=dr(w,S.mode,k,null),w.return=S,w;xo(S,w)}return null}function N(S,w,k,R){var W=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return W!==null?null:f(S,w,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ao:return k.key===W?h(S,w,k,R):null;case Er:return k.key===W?y(S,w,k,R):null;case Dn:return W=k._init,N(S,w,W(k._payload),R)}if(mi(k)||ii(k))return W!==null?null:C(S,w,k,R,null);xo(S,k)}return null}function O(S,w,k,R,W){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(k)||null,f(w,S,""+R,W);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ao:return S=S.get(R.key===null?k:R.key)||null,h(w,S,R,W);case Er:return S=S.get(R.key===null?k:R.key)||null,y(w,S,R,W);case Dn:var q=R._init;return O(S,w,k,q(R._payload),W)}if(mi(R)||ii(R))return S=S.get(k)||null,C(w,S,R,W,null);xo(w,R)}return null}function D(S,w,k,R){for(var W=null,q=null,K=w,V=w=0,me=null;K!==null&&V<k.length;V++){K.index>V?(me=K,K=null):me=K.sibling;var Y=N(S,K,k[V],R);if(Y===null){K===null&&(K=me);break}e&&K&&Y.alternate===null&&t(S,K),w=l(Y,w,V),q===null?W=Y:q.sibling=Y,q=Y,K=me}if(V===k.length)return n(S,K),Qe&&or(S,V),W;if(K===null){for(;V<k.length;V++)K=A(S,k[V],R),K!==null&&(w=l(K,w,V),q===null?W=K:q.sibling=K,q=K);return Qe&&or(S,V),W}for(K=r(S,K);V<k.length;V++)me=O(K,S,V,k[V],R),me!==null&&(e&&me.alternate!==null&&K.delete(me.key===null?V:me.key),w=l(me,w,V),q===null?W=me:q.sibling=me,q=me);return e&&K.forEach(function(fe){return t(S,fe)}),Qe&&or(S,V),W}function $(S,w,k,R){var W=ii(k);if(typeof W!="function")throw Error(X(150));if(k=W.call(k),k==null)throw Error(X(151));for(var q=W=null,K=w,V=w=0,me=null,Y=k.next();K!==null&&!Y.done;V++,Y=k.next()){K.index>V?(me=K,K=null):me=K.sibling;var fe=N(S,K,Y.value,R);if(fe===null){K===null&&(K=me);break}e&&K&&fe.alternate===null&&t(S,K),w=l(fe,w,V),q===null?W=fe:q.sibling=fe,q=fe,K=me}if(Y.done)return n(S,K),Qe&&or(S,V),W;if(K===null){for(;!Y.done;V++,Y=k.next())Y=A(S,Y.value,R),Y!==null&&(w=l(Y,w,V),q===null?W=Y:q.sibling=Y,q=Y);return Qe&&or(S,V),W}for(K=r(S,K);!Y.done;V++,Y=k.next())Y=O(K,S,V,Y.value,R),Y!==null&&(e&&Y.alternate!==null&&K.delete(Y.key===null?V:Y.key),w=l(Y,w,V),q===null?W=Y:q.sibling=Y,q=Y);return e&&K.forEach(function(te){return t(S,te)}),Qe&&or(S,V),W}function he(S,w,k,R){if(typeof k=="object"&&k!==null&&k.type===jr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ao:e:{for(var W=k.key,q=w;q!==null;){if(q.key===W){if(W=k.type,W===jr){if(q.tag===7){n(S,q.sibling),w=o(q,k.props.children),w.return=S,S=w;break e}}else if(q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Dn&&kc(W)===q.type){n(S,q.sibling),w=o(q,k.props),w.ref=ui(S,q,k),w.return=S,S=w;break e}n(S,q);break}else t(S,q);q=q.sibling}k.type===jr?(w=dr(k.props.children,S.mode,R,k.key),w.return=S,S=w):(R=Oo(k.type,k.key,k.props,null,S.mode,R),R.ref=ui(S,w,k),R.return=S,S=R)}return a(S);case Er:e:{for(q=k.key;w!==null;){if(w.key===q)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(S,w.sibling),w=o(w,k.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else t(S,w);w=w.sibling}w=cs(k,S.mode,R),w.return=S,S=w}return a(S);case Dn:return q=k._init,he(S,w,q(k._payload),R)}if(mi(k))return D(S,w,k,R);if(ii(k))return $(S,w,k,R);xo(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(S,w.sibling),w=o(w,k),w.return=S,S=w):(n(S,w),w=us(k,S.mode,R),w.return=S,S=w),a(S)):n(S,w)}return he}var Gr=gf(!0),wf=gf(!1),Xo=nr(null),Jo=null,Tr=null,Ta=null;function Ra(){Ta=Tr=Jo=null}function za(e){var t=Xo.current;be(Xo),e._currentValue=t}function Vs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Dr(e,t){Jo=e,Ta=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(Jo===null)throw Error(X(308));Tr=e,Jo.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var ar=null;function La(e){ar===null?ar=[e]:ar.push(e)}function xf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,_n(e,r)}function _n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,_n(e,n)}return o=r.interleaved,o===null?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,_n(e,n)}function Io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}function Ec(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var h=f,y=h.next;h.next=null,a===null?l=y:a.next=y,a=h;var C=e.alternate;C!==null&&(C=C.updateQueue,f=C.lastBaseUpdate,f!==a&&(f===null?C.firstBaseUpdate=y:f.next=y,C.lastBaseUpdate=h))}if(l!==null){var A=o.baseState;a=0,C=y=h=null,f=l;do{var N=f.lane,O=f.eventTime;if((r&N)===N){C!==null&&(C=C.next={eventTime:O,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var D=e,$=f;switch(N=t,O=n,$.tag){case 1:if(D=$.payload,typeof D=="function"){A=D.call(O,A,N);break e}A=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=$.payload,N=typeof D=="function"?D.call(O,A,N):D,N==null)break e;A=Ze({},A,N);break e;case 2:$n=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,N=o.effects,N===null?o.effects=[f]:N.push(f))}else O={eventTime:O,lane:N,tag:f.tag,payload:f.payload,callback:f.callback,next:null},C===null?(y=C=O,h=A):C=C.next=O,a|=N;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;N=f,f=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(!0);if(C===null&&(h=A),o.baseState=h,o.firstBaseUpdate=y,o.lastBaseUpdate=C,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=A}}function jc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var Ki={},En=nr(Ki),Di=nr(Ki),$i=nr(Ki);function ur(e){if(e===Ki)throw Error(X(174));return e}function Ba(e,t){switch(Ue($i,t),Ue(Di,e),Ue(En,Ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:js(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=js(t,e)}be(En),Ue(En,t)}function br(){be(En),be(Di),be($i)}function kf(e){ur($i.current);var t=ur(En.current),n=js(t,e.type);t!==n&&(Ue(Di,e),Ue(En,n))}function Fa(e){Di.current===e&&(be(En),be(Di))}var Xe=nr(0);function qo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function Da(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var _o=Rn.ReactCurrentDispatcher,is=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,el=!1,Ei=!1,Ui=0,Jm=0;function yt(){throw Error(X(321))}function $a(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_o.current=e===null||e.memoizedState===null?tv:nv,e=n(r,o),Ei){l=0;do{if(Ei=!1,Ui=0,25<=l)throw Error(X(301));l+=1,ct=lt=null,t.updateQueue=null,_o.current=rv,e=n(r,o)}while(Ei)}if(_o.current=tl,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,el=!1,t)throw Error(X(300));return e}function Ha(){var e=Ui!==0;return Ui=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function Xt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(X(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function Hi(e,t){return typeof t=="function"?t(e):t}function os(e){var t=Xt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var f=a=null,h=null,y=l;do{var C=y.lane;if((pr&C)===C)h!==null&&(h=h.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var A={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};h===null?(f=h=A,a=r):h=h.next=A,Je.lanes|=C,mr|=C}y=y.next}while(y!==null&&y!==l);h===null?a=r:h.next=f,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ls(e){var t=Xt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Ef(){}function jf(e,t){var n=Je,r=Xt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,It=!0),r=r.queue,Wa(Pf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Wi(9,Nf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(X(349));pr&30||Cf(n,t,o)}return o}function Cf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nf(e,t,n,r){t.value=n,t.getSnapshot=r,Af(t)&&Mf(e)}function Pf(e,t,n){return n(function(){Af(t)&&Mf(e)})}function Af(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function Mf(e){var t=_n(e,1);t!==null&&un(t,e,1,-1)}function Cc(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=ev.bind(null,Je,e),[t.memoizedState,e]}function Wi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function If(){return Xt().memoizedState}function To(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Wi(1|t,n,void 0,r===void 0?null:r)}function ml(e,t,n,r){var o=Xt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&$a(r,a.deps)){o.memoizedState=Wi(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Wi(1|t,n,l,r)}function Nc(e,t){return To(8390656,8,e,t)}function Wa(e,t){return ml(2048,8,e,t)}function _f(e,t){return ml(4,2,e,t)}function Tf(e,t){return ml(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zf(e,t,n){return n=n!=null?n.concat([e]):null,ml(4,4,Rf.bind(null,t,e),n)}function Va(){}function Lf(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Of(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bf(e,t,n){return pr&21?(cn(n,t)||(n=Ud(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function Zm(e,t){var n=De;De=n!==0&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{De=n,is.transition=r}}function Ff(){return Xt().memoizedState}function qm(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Df(e))$f(t,n);else if(n=xf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Uf(n,t,r)}}function ev(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Df(e))$f(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,f=l(a,n);if(o.hasEagerState=!0,o.eagerState=f,cn(f,a)){var h=t.interleaved;h===null?(o.next=o,La(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=xf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Uf(n,t,r))}}function Df(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function $f(e,t){Ei=el=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}var tl={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},tv={readContext:Kt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Nc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:Cc,useDebugValue:Va,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=Cc(!1),t=e[0];return e=Zm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(Qe){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),dt===null)throw Error(X(349));pr&30||Cf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Nc(Pf.bind(null,r,l,e),[e]),r.flags|=2048,Wi(9,Nf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(Qe){var n=Pn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ui++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nv={readContext:Kt,useCallback:Lf,useContext:Kt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:_f,useLayoutEffect:Tf,useMemo:Of,useReducer:os,useRef:If,useState:function(){return os(Hi)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return Bf(t,lt.memoizedState,e)},useTransition:function(){var e=os(Hi)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1},rv={readContext:Kt,useCallback:Lf,useContext:Kt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:_f,useLayoutEffect:Tf,useMemo:Of,useReducer:ls,useRef:If,useState:function(){return ls(Hi)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return lt===null?t.memoizedState=e:Bf(t,lt.memoizedState,e)},useTransition:function(){var e=ls(Hi)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vl={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=An(n,r);o.tag=2,t!=null&&(o.callback=t),t=Kn(e,o,r),t!==null&&(un(t,e,r,n),Io(t,e,r))}};function Pc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Li(n,r)||!Li(o,l):!0}function Hf(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(o=Tt(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ac(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oa(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Kt(l):(l=Tt(t)?fr:xt.current,o.context=Wr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Gs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vl.enqueueReplaceState(o,o.state,null),Zo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",r=t;do n+=_p(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iv=typeof WeakMap=="function"?WeakMap:Map;function Wf(e,t,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rl||(rl=!0,ra=r),Qs(e,t)},n}function Vf(e,t,n){n=An(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Qs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qs(e,t),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Mc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gv.bind(null,e,t,n),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _c(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=An(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var ov=Rn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?wf(t,null,n,r):Gr(t,e.child,n,r)}function Tc(e,t,n,r,o){n=n.render;var l=t.ref;return Dr(t,o),r=Ua(e,t,n,r,l,o),n=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(Qe&&n&&Ma(t),t.flags|=1,Et(e,t,r,o),t.child)}function Rc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Za(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Gf(e,t,l,r,o)):(e=Oo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(a,r)&&e.ref===t.ref)return Tn(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Gf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(Li(l,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,Tn(e,t,o)}return Ys(e,t,n,r,o)}function bf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(zr,Bt),Bt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(zr,Bt),Bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ue(zr,Bt),Bt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ue(zr,Bt),Bt|=r;return Et(e,t,o,n),t.child}function Qf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,n,r,o){var l=Tt(n)?fr:xt.current;return l=Wr(t,l),Dr(t,o),n=Ua(e,t,n,r,l,o),r=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(Qe&&r&&Ma(t),t.flags|=1,Et(e,t,n,o),t.child)}function zc(e,t,n,r,o){if(Tt(n)){var l=!0;Qo(t)}else l=!1;if(Dr(t,o),t.stateNode===null)Ro(e,t),Hf(t,n,r),bs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,f=t.memoizedProps;a.props=f;var h=a.context,y=n.contextType;typeof y=="object"&&y!==null?y=Kt(y):(y=Tt(n)?fr:xt.current,y=Wr(t,y));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==r||h!==y)&&Ac(t,a,r,y),$n=!1;var N=t.memoizedState;a.state=N,Zo(t,r,a,o),h=t.memoizedState,f!==r||N!==h||_t.current||$n?(typeof C=="function"&&(Gs(t,n,C,r),h=t.memoizedState),(f=$n||Pc(t,n,f,r,N,h,y))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=y,r=f):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Sf(e,t),f=t.memoizedProps,y=t.type===t.elementType?f:rn(t.type,f),a.props=y,A=t.pendingProps,N=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Kt(h):(h=Tt(n)?fr:xt.current,h=Wr(t,h));var O=n.getDerivedStateFromProps;(C=typeof O=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==A||N!==h)&&Ac(t,a,r,h),$n=!1,N=t.memoizedState,a.state=N,Zo(t,r,a,o);var D=t.memoizedState;f!==A||N!==D||_t.current||$n?(typeof O=="function"&&(Gs(t,n,O,r),D=t.memoizedState),(y=$n||Pc(t,n,y,r,N,D,h)||!1)?(C||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,D,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,D,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=D),a.props=r,a.state=D,a.context=h,r=y):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return Ks(e,t,n,r,l,o)}function Ks(e,t,n,r,o,l){Qf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&wc(t,n,!1),Tn(e,t,l);r=t.stateNode,ov.current=t;var f=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,l),t.child=Gr(t,null,f,l)):Et(e,t,f,l),t.memoizedState=r.state,o&&wc(t,n,!0),t.child}function Yf(e){var t=e.stateNode;t.pendingContext?gc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gc(e,t.context,!1),Ba(e,t.containerInfo)}function Lc(e,t,n,r,o){return Vr(),_a(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function Js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kf(e,t,n){var r=t.pendingProps,o=Xe.current,l=!1,a=(t.flags&128)!==0,f;if((f=a)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ue(Xe,o&1),e===null)return Ws(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=wl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Js(n),t.memoizedState=Xs,e):Ga(t,a));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return lv(e,t,a,r,f,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,f=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),f!==null?l=Zn(f,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Js(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ga(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function So(e,t,n,r){return r!==null&&_a(r),Gr(t,e.child,null,n),e=Ga(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lv(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ss(Error(X(422))),So(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=wl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Gr(t,e.child,null,a),t.child.memoizedState=Js(a),t.memoizedState=Xs,l);if(!(t.mode&1))return So(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(X(419)),r=ss(l,r,void 0),So(e,t,a,r)}if(f=(a&e.childLanes)!==0,It||f){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,_n(e,o),un(r,e,o,-1))}return Ja(),r=ss(Error(X(421))),So(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=wv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ft=Yn(o.nextSibling),Dt=t,Qe=!0,ln=null,e!==null&&(Gt[bt++]=Nn,Gt[bt++]=Pn,Gt[bt++]=hr,Nn=e.id,Pn=e.overflow,hr=t),t=Ga(t,r.children),t.flags|=4096,t)}function Oc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vs(e.return,t,n)}function as(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Xf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=Xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,n,t);else if(e.tag===19)Oc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Xe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&qo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),as(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&qo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}as(t,!0,n,null,l);break;case"together":as(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ro(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sv(e,t,n){switch(t.tag){case 3:Yf(t),Vr();break;case 5:kf(t);break;case 1:Tt(t.type)&&Qo(t);break;case 4:Ba(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ue(Xo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Xe,Xe.current&1),t.flags|=128,null):n&t.child.childLanes?Kf(e,t,n):(Ue(Xe,Xe.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Ue(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ue(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,bf(e,t,n)}return Tn(e,t,n)}var Jf,Zs,Zf,qf;Jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zs=function(){};Zf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=xs(e,o),r=xs(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=Es(e,o),r=Es(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Go)}Cs(n,r);var a;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var f=o[y];for(a in f)f.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Ai.hasOwnProperty(y)?l||(l=[]):(l=l||[]).push(y,null));for(y in r){var h=r[y];if(f=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&h!==f&&(h!=null||f!=null))if(y==="style")if(f){for(a in f)!f.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&f[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(y,n)),n=h;else y==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,f=f?f.__html:void 0,h!=null&&f!==h&&(l=l||[]).push(y,h)):y==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(y,""+h):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(y)?(h!=null&&y==="onScroll"&&Ge("scroll",e),l||f===h||(l=[])):(l=l||[]).push(y,h))}n&&(l=l||[]).push("style",n);var y=l;(t.updateQueue=y)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function av(e,t,n){var r=t.pendingProps;switch(Ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Tt(t.type)&&bo(),gt(t),null;case 3:return r=t.stateNode,br(),be(_t),be(xt),Da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(la(ln),ln=null))),Zs(e,t),gt(t),null;case 5:Fa(t);var o=ur($i.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return gt(t),null}if(e=ur(En.current),wo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Fi]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<yi.length;o++)Ge(yi[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Gu(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":Qu(r,l),Ge("invalid",r)}Cs(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var f=l[a];a==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&go(r.textContent,f,e),o=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&go(r.textContent,f,e),o=["children",""+f]):Ai.hasOwnProperty(a)&&f!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":uo(r),bu(r,l,!0);break;case"textarea":uo(r),Yu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Go)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Fi]=r,Jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ns(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<yi.length;o++)Ge(yi[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":Gu(e,r),o=xs(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":Qu(e,r),o=Es(e,r),Ge("invalid",e);break;default:o=r}Cs(n,o),f=o;for(l in f)if(f.hasOwnProperty(l)){var h=f[l];l==="style"?Md(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pd(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Mi(e,h):typeof h=="number"&&Mi(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ai.hasOwnProperty(l)?h!=null&&l==="onScroll"&&Ge("scroll",e):h!=null&&ma(e,l,h,a))}switch(n){case"input":uo(e),bu(e,r,!1);break;case"textarea":uo(e),Yu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=ur($i.current),ur(En.current),wo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:go(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&go(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(be(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&Ft!==null&&t.mode&1&&!(t.flags&128))yf(),Vr(),t.flags|=98560,l=!1;else if(l=wo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(X(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(X(317));l[Sn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(la(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?st===0&&(st=3):Ja())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return br(),Zs(e,t),e===null&&Oi(t.stateNode.containerInfo),gt(t),null;case 10:return za(t.type._context),gt(t),null;case 17:return Tt(t.type)&&bo(),gt(t),null;case 19:if(be(Xe),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ci(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qo(e),a!==null){for(t.flags|=128,ci(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(Xe,Xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Yr&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304)}else{if(!r)if(e=qo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Qe)return gt(t),null}else 2*nt()-l.renderingStartTime>Yr&&n!==1073741824&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=Xe.current,Ue(Xe,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Xa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function uv(e,t){switch(Ia(t),t.tag){case 1:return Tt(t.type)&&bo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return br(),be(_t),be(xt),Da(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fa(t),null;case 13:if(be(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Xe),null;case 4:return br(),null;case 10:return za(t.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var ko=!1,wt=!1,cv=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function qs(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Bc=!1;function dv(e,t){if(Os=Ho,e=rf(),Aa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,f=-1,h=-1,y=0,C=0,A=e,N=null;t:for(;;){for(var O;A!==n||o!==0&&A.nodeType!==3||(f=a+o),A!==l||r!==0&&A.nodeType!==3||(h=a+r),A.nodeType===3&&(a+=A.nodeValue.length),(O=A.firstChild)!==null;)N=A,A=O;for(;;){if(A===e)break t;if(N===n&&++y===o&&(f=a),N===l&&++C===r&&(h=a),(O=A.nextSibling)!==null)break;A=N,N=A.parentNode}A=O}n=f===-1||h===-1?null:{start:f,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bs={focusedElem:e,selectionRange:n},Ho=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var $=D.memoizedProps,he=D.memoizedState,S=t.stateNode,w=S.getSnapshotBeforeUpdate(t.elementType===t.type?$:rn(t.type,$),he);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(R){tt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return D=Bc,Bc=!1,D}function ji(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&qs(t,n,l)}o=o.next}while(o!==r)}}function yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ea(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eh(e){var t=e.alternate;t!==null&&(e.alternate=null,eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Fi],delete t[$s],delete t[Qm],delete t[Ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function th(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Go));else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}var pt=null,on=!1;function Fn(e,t,n){for(n=n.child;n!==null;)nh(e,t,n),n=n.sibling}function nh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(ul,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Fn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?ts(e.parentNode,n):e.nodeType===1&&ts(e,n),Ri(e)):ts(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Fn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&qs(n,t,a),o=o.next}while(o!==r)}Fn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){tt(n,t,f)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Fn(e,t,n),wt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cv),t.forEach(function(r){var o=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,f=a;e:for(;f!==null;){switch(f.tag){case 5:pt=f.stateNode,on=!1;break e;case 3:pt=f.stateNode.containerInfo,on=!0;break e;case 4:pt=f.stateNode.containerInfo,on=!0;break e}f=f.return}if(pt===null)throw Error(X(160));nh(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(y){tt(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{ji(3,e,e.return),yl(3,e)}catch($){tt(e,e.return,$)}try{ji(5,e,e.return)}catch($){tt(e,e.return,$)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{Mi(o,"")}catch($){tt(e,e.return,$)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,f=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&jd(o,l),Ns(f,a);var y=Ns(f,l);for(a=0;a<h.length;a+=2){var C=h[a],A=h[a+1];C==="style"?Md(o,A):C==="dangerouslySetInnerHTML"?Pd(o,A):C==="children"?Mi(o,A):ma(o,C,A,y)}switch(f){case"input":Ss(o,l);break;case"textarea":Cd(o,l);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var O=l.value;O!=null?Lr(o,!!l.multiple,O,!1):N!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Fi]=l}catch($){tt(e,e.return,$)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch($){tt(e,e.return,$)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch($){tt(e,e.return,$)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=nt())),r&4&&Dc(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(y=wt)||C,nn(t,e),wt=y):nn(t,e),yn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(ce=e,C=e.child;C!==null;){for(A=ce=C;ce!==null;){switch(N=ce,O=N.child,N.tag){case 0:case 11:case 14:case 15:ji(4,N,N.return);break;case 1:Rr(N,N.return);var D=N.stateNode;if(typeof D.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch($){tt(r,n,$)}}break;case 5:Rr(N,N.return);break;case 22:if(N.memoizedState!==null){Uc(A);continue}}O!==null?(O.return=N,ce=O):Uc(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{o=A.stateNode,y?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=A.stateNode,h=A.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,f.style.display=Ad("display",a))}catch($){tt(e,e.return,$)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=y?"":A.memoizedProps}catch($){tt(e,e.return,$)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Dc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(th(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Mi(o,""),r.flags&=-33);var l=Fc(e);na(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,f=Fc(e);ta(e,f,a);break;default:throw Error(X(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fv(e,t,n){ce=e,ih(e)}function ih(e,t,n){for(var r=(e.mode&1)!==0;ce!==null;){var o=ce,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||ko;if(!a){var f=o.alternate,h=f!==null&&f.memoizedState!==null||wt;f=ko;var y=wt;if(ko=a,(wt=h)&&!y)for(ce=o;ce!==null;)a=ce,h=a.child,a.tag===22&&a.memoizedState!==null?Hc(o):h!==null?(h.return=a,ce=h):Hc(o);for(;l!==null;)ce=l,ih(l),l=l.sibling;ce=o,ko=f,wt=y}$c(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ce=l):$c(e)}}function $c(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&jc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jc(t,a,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&Ri(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}wt||t.flags&512&&ea(t)}catch(N){tt(t,t.return,N)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Uc(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Hc(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yl(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{ea(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{ea(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){ce=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ce=f;break}ce=t.return}}var hv=Math.ceil,nl=Rn.ReactCurrentDispatcher,ba=Rn.ReactCurrentOwner,Yt=Rn.ReactCurrentBatchConfig,Te=0,dt=null,ot=null,mt=0,Bt=0,zr=nr(0),st=0,Vi=null,mr=0,gl=0,Qa=0,Ci=null,Mt=null,Ya=0,Yr=1/0,jn=null,rl=!1,ra=null,Xn=null,Eo=!1,Vn=null,il=0,Ni=0,ia=null,zo=-1,Lo=0;function jt(){return Te&6?nt():zo!==-1?zo:zo=nt()}function Jn(e){return e.mode&1?Te&2&&mt!==0?mt&-mt:Xm.transition!==null?(Lo===0&&(Lo=Ud()),Lo):(e=De,e!==0||(e=window.event,e=e===void 0?16:Yd(e.type)),e):1}function un(e,t,n,r){if(50<Ni)throw Ni=0,ia=null,Error(X(185));bi(e,n,r),(!(Te&2)||e!==dt)&&(e===dt&&(!(Te&2)&&(gl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&Te===0&&!(t.mode&1)&&(Yr=nt()+500,pl&&rr()))}function Rt(e,t){var n=e.callbackNode;Xp(e,t);var r=Uo(e,e===dt?mt:0);if(r===0)n!==null&&Ju(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ju(n),t===1)e.tag===0?Km(Wc.bind(null,e)):pf(Wc.bind(null,e)),Gm(function(){!(Te&6)&&rr()}),n=null;else{switch(Hd(r)){case 1:n=xa;break;case 4:n=Dd;break;case 16:n=$o;break;case 536870912:n=$d;break;default:n=$o}n=fh(n,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oh(e,t){if(zo=-1,Lo=0,Te&6)throw Error(X(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=Uo(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ol(e,r);else{t=r;var o=Te;Te|=2;var l=sh();(dt!==e||mt!==t)&&(jn=null,Yr=nt()+500,cr(e,t));do try{vv();break}catch(f){lh(e,f)}while(!0);Ra(),nl.current=l,Te=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=_s(e),o!==0&&(r=o,t=oa(e,o))),t===1)throw n=Vi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!pv(o)&&(t=ol(e,r),t===2&&(l=_s(e),l!==0&&(r=l,t=oa(e,l))),t===1))throw n=Vi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:lr(e,Mt,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ya+500-nt(),10<t)){if(Uo(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),t);break}lr(e,Mt,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hv(r/1960))-r,10<r){e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),r);break}lr(e,Mt,jn);break;case 5:lr(e,Mt,jn);break;default:throw Error(X(329))}}}return Rt(e,nt()),e.callbackNode===n?oh.bind(null,e):null}function oa(e,t){var n=Ci;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=ol(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&la(t)),e}function la(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function pv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Qa,t&=~gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Wc(e){if(Te&6)throw Error(X(327));$r();var t=Uo(e,0);if(!(t&1))return Rt(e,nt()),null;var n=ol(e,t);if(e.tag!==0&&n===2){var r=_s(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=Vi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Mt,jn),Rt(e,nt()),null}function Ka(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(Yr=nt()+500,pl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(Te&6)&&$r();var t=Te;Te|=1;var n=Yt.transition,r=De;try{if(Yt.transition=null,De=1,e)return e()}finally{De=r,Yt.transition=n,Te=t,!(Te&6)&&rr()}}function Xa(){Bt=zr.current,be(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Ia(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bo();break;case 3:br(),be(_t),be(xt),Da();break;case 5:Fa(r);break;case 4:br();break;case 13:be(Xe);break;case 19:be(Xe);break;case 10:za(r.type._context);break;case 22:case 23:Xa()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Bt=t,st=0,Vi=null,Qa=gl=mr=0,Mt=Ci=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function lh(e,t){do{var n=ot;try{if(Ra(),_o.current=tl,el){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}el=!1}if(pr=0,ct=lt=Je=null,Ei=!1,Ui=0,ba.current=null,n===null||n.return===null){st=1,Vi=t,ot=null;break}e:{var l=e,a=n.return,f=n,h=t;if(t=mt,f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var y=h,C=f,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var N=C.alternate;N?(C.updateQueue=N.updateQueue,C.memoizedState=N.memoizedState,C.lanes=N.lanes):(C.updateQueue=null,C.memoizedState=null)}var O=Ic(a);if(O!==null){O.flags&=-257,_c(O,a,f,l,t),O.mode&1&&Mc(l,y,t),t=O,h=y;var D=t.updateQueue;if(D===null){var $=new Set;$.add(h),t.updateQueue=$}else D.add(h);break e}else{if(!(t&1)){Mc(l,y,t),Ja();break e}h=Error(X(426))}}else if(Qe&&f.mode&1){var he=Ic(a);if(he!==null){!(he.flags&65536)&&(he.flags|=256),_c(he,a,f,l,t),_a(Qr(h,f));break e}}l=h=Qr(h,f),st!==4&&(st=2),Ci===null?Ci=[l]:Ci.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=Wf(l,h,t);Ec(l,S);break e;case 1:f=h;var w=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Xn===null||!Xn.has(k)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=Vf(l,f,t);Ec(l,R);break e}}l=l.return}while(l!==null)}uh(n)}catch(W){t=W,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function sh(){var e=nl.current;return nl.current=tl,e===null?tl:e}function Ja(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(gl&268435455)||Hn(dt,mt)}function ol(e,t){var n=Te;Te|=2;var r=sh();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{mv();break}catch(o){lh(e,o)}while(!0);if(Ra(),Te=n,nl.current=r,ot!==null)throw Error(X(261));return dt=null,mt=0,st}function mv(){for(;ot!==null;)ah(ot)}function vv(){for(;ot!==null&&!Up();)ah(ot)}function ah(e){var t=dh(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,t===null?uh(e):ot=t,ba.current=null}function uh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=av(n,t,Bt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=De,o=Yt.transition;try{Yt.transition=null,De=1,yv(e,t,n,r)}finally{Yt.transition=o,De=r}return null}function yv(e,t,n,r){do $r();while(Vn!==null);if(Te&6)throw Error(X(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Jp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eo||(Eo=!0,fh($o,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Yt.transition,Yt.transition=null;var a=De;De=1;var f=Te;Te|=4,ba.current=null,dv(e,n),rh(n,e),Bm(Bs),Ho=!!Os,Bs=Os=null,e.current=n,fv(n),Hp(),Te=f,De=a,Yt.transition=l}else e.current=n;if(Eo&&(Eo=!1,Vn=e,il=o),l=e.pendingLanes,l===0&&(Xn=null),Gp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(rl)throw rl=!1,e=ra,ra=null,e;return il&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===ia?Ni++:(Ni=0,ia=e):Ni=0,rr(),null}function $r(){if(Vn!==null){var e=Hd(il),t=Yt.transition,n=De;try{if(Yt.transition=null,De=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,il=0,Te&6)throw Error(X(331));var o=Te;for(Te|=4,ce=e.current;ce!==null;){var l=ce,a=l.child;if(ce.flags&16){var f=l.deletions;if(f!==null){for(var h=0;h<f.length;h++){var y=f[h];for(ce=y;ce!==null;){var C=ce;switch(C.tag){case 0:case 11:case 15:ji(8,C,l)}var A=C.child;if(A!==null)A.return=C,ce=A;else for(;ce!==null;){C=ce;var N=C.sibling,O=C.return;if(eh(C),C===y){ce=null;break}if(N!==null){N.return=O,ce=N;break}ce=O}}}var D=l.alternate;if(D!==null){var $=D.child;if($!==null){D.child=null;do{var he=$.sibling;$.sibling=null,$=he}while($!==null)}}ce=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ce=a;else e:for(;ce!==null;){if(l=ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ji(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,ce=S;break e}ce=l.return}}var w=e.current;for(ce=w;ce!==null;){a=ce;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,ce=k;else e:for(a=w;ce!==null;){if(f=ce,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:yl(9,f)}}catch(W){tt(f,f.return,W)}if(f===a){ce=null;break e}var R=f.sibling;if(R!==null){R.return=f.return,ce=R;break e}ce=f.return}}if(Te=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(ul,e)}catch{}r=!0}return r}finally{De=n,Yt.transition=t}}return!1}function Vc(e,t,n){t=Qr(n,t),t=Wf(e,t,1),e=Kn(e,t,1),t=jt(),e!==null&&(bi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Vc(e,e,n);else for(;t!==null;){if(t.tag===3){Vc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){e=Qr(n,e),e=Vf(t,e,1),t=Kn(t,e,1),e=jt(),t!==null&&(bi(t,1,e),Rt(t,e));break}}t=t.return}}function gv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ya?cr(e,0):Qa|=n),Rt(e,t)}function ch(e,t){t===0&&(e.mode&1?(t=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):t=1);var n=jt();e=_n(e,t),e!==null&&(bi(e,t,n),Rt(e,n))}function wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),ch(e,n)}var dh;dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,sv(e,t,n);It=!!(e.flags&131072)}else It=!1,Qe&&t.flags&1048576&&mf(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ro(e,t),e=t.pendingProps;var o=Wr(t,xt.current);Dr(t,n),o=Ua(null,t,r,e,o,n);var l=Ha();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(r)?(l=!0,Qo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Oa(t),o.updater=vl,t.stateNode=o,o._reactInternals=t,bs(t,r,e,n),t=Ks(null,t,r,!0,l,n)):(t.tag=0,Qe&&l&&Ma(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ro(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=kv(r),e=rn(r,e),o){case 0:t=Ys(null,t,r,e,n);break e;case 1:t=zc(null,t,r,e,n);break e;case 11:t=Tc(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,rn(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ys(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),zc(e,t,r,o,n);case 3:e:{if(Yf(t),e===null)throw Error(X(387));r=t.pendingProps,l=t.memoizedState,o=l.element,Sf(e,t),Zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Qr(Error(X(423)),t),t=Lc(e,t,r,n,o);break e}else if(r!==o){o=Qr(Error(X(424)),t),t=Lc(e,t,r,n,o);break e}else for(Ft=Yn(t.stateNode.containerInfo.firstChild),Dt=t,Qe=!0,ln=null,n=wf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===o){t=Tn(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&Ws(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Fs(r,o)?a=null:l!==null&&Fs(r,l)&&(t.flags|=32),Qf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Ws(t),null;case 13:return Kf(e,t,n);case 4:return Ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Tc(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Ue(Xo,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!_t.current){t=Tn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var f=l.dependencies;if(f!==null){a=l.child;for(var h=f.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=An(-1,n&-n),h.tag=2;var y=l.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?h.next=h:(h.next=C.next,C.next=h),y.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Vs(l.return,n,t),f.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(X(341));a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Vs(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Dr(t,n),o=Kt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),Rc(e,t,r,o,n);case 15:return Gf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ro(e,t),t.tag=1,Tt(r)?(e=!0,Qo(t)):e=!1,Dr(t,n),Hf(t,r,o),bs(t,r,o,n),Ks(null,t,r,!0,e,n);case 19:return Xf(e,t,n);case 22:return bf(e,t,n)}throw Error(X(156,t.tag))};function fh(e,t){return Fd(e,t)}function Sv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new Sv(e,t,n,r)}function Za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kv(e){if(typeof e=="function")return Za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ya)return 11;if(e===ga)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Za(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case va:a=8,o|=8;break;case vs:return e=Qt(12,n,t,o|2),e.elementType=vs,e.lanes=l,e;case ys:return e=Qt(13,n,t,o),e.elementType=ys,e.lanes=l,e;case gs:return e=Qt(19,n,t,o),e.elementType=gs,e.lanes=l,e;case Sd:return wl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wd:a=10;break e;case xd:a=9;break e;case ya:a=11;break e;case ga:a=14;break e;case Dn:a=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Qt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function wl(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=Sd,e.lanes=n,e.stateNode={isHidden:!1},e}function us(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function cs(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ev(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qa(e,t,n,r,o,l,a,f,h){return e=new Ev(e,t,n,f,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Qt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(l),e}function jv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hh(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(Tt(n))return hf(e,n,t)}return t}function ph(e,t,n,r,o,l,a,f,h){return e=qa(n,r,!0,e,o,l,a,f,h),e.context=hh(null),n=e.current,r=jt(),o=Jn(n),l=An(r,o),l.callback=t??null,Kn(n,l,o),e.current.lanes=o,bi(e,o,r),Rt(e,r),e}function xl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=hh(n),t.context===null?t.context=n:t.pendingContext=n,t=An(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(o,t,a),e!==null&&(un(e,o,a,l),Io(e,o,a)),a}function ll(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eu(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}function Cv(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}Sl.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));xl(e,t,null,null)};Sl.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){xl(null,e,null,null)}),t[In]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Qd(e)}};function nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bc(){}function Nv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var y=ll(a);l.call(y)}}var a=ph(t,r,e,0,null,!1,!1,"",bc);return e._reactRootContainer=a,e[In]=a.current,Oi(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var f=r;r=function(){var y=ll(h);f.call(y)}}var h=qa(e,0,!1,null,null,!1,!1,"",bc);return e._reactRootContainer=h,e[In]=h.current,Oi(e.nodeType===8?e.parentNode:e),vr(function(){xl(t,h,n,r)}),h}function El(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var f=o;o=function(){var h=ll(a);f.call(h)}}xl(t,a,e,o)}else a=Nv(n,t,e,o,r);return ll(a)}Wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vi(t.pendingLanes);n!==0&&(Sa(t,n|1),Rt(t,nt()),!(Te&6)&&(Yr=nt()+500,rr()))}break;case 13:vr(function(){var r=_n(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),eu(e,1)}};ka=function(e){if(e.tag===13){var t=_n(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}eu(e,134217728)}};Vd=function(e){if(e.tag===13){var t=Jn(e),n=_n(e,t);if(n!==null){var r=jt();un(n,e,t,r)}eu(e,t)}};Gd=function(){return De};bd=function(e,t){var n=De;try{return De=e,t()}finally{De=n}};As=function(e,t,n){switch(t){case"input":if(Ss(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=hl(r);if(!o)throw Error(X(90));Ed(r),Ss(r,o)}}}break;case"textarea":Cd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Td=Ka;Rd=vr;var Pv={usingClientEntryPoint:!1,Events:[Yi,Ar,hl,Id,_d,Ka]},di={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Av={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jo.isDisabled&&jo.supportsFiber)try{ul=jo.inject(Av),kn=jo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(t))throw Error(X(200));return jv(e,t,null,n)};Ut.createRoot=function(e,t){if(!nu(e))throw Error(X(299));var n=!1,r="",o=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qa(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,Oi(e.nodeType===8?e.parentNode:e),new tu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!kl(t))throw Error(X(200));return El(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=mh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ph(t,null,e,1,n??null,o,!1,l,a),e[In]=t.current,Oi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Sl(t)};Ut.render=function(e,t,n){if(!kl(t))throw Error(X(200));return El(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!kl(e))throw Error(X(40));return e._reactRootContainer?(vr(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Ut.unstable_batchedUpdates=Ka;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kl(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return El(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),md.exports=Ut;var Mv=md.exports,Qc=Mv;ps.createRoot=Qc.createRoot,ps.hydrateRoot=Qc.hydrateRoot;const Ur={},yh="production",Yc={development:{baseUrl:"http://localhost:4000/api",healthUrl:"http://localhost:4000/health"},production:{baseUrl:"https://cfg-server.onrender.com/api",healthUrl:"https://cfg-server.onrender.com/health"}},gh=Yc[yh]||Yc.development,ru=()=>{if(!(Ur!=null&&Ur.VITE_API_BASE_URL))return gh.baseUrl},Iv=()=>{if(!(Ur!=null&&Ur.VITE_HEALTH_URL))return gh.healthUrl},_v=async()=>{try{const e=await fetch(Iv(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Health check failed: ${e.status}`);const t=await e.json();return{status:t.status||"unknown",version:t.version||"unknown",commit:t.commit||"unknown",healthy:t.status==="ok"}}catch(e){return console.error("[API Config] Health check error:",e),{status:"error",version:"unknown",commit:"unknown",healthy:!1,error:e.message}}},Tv=()=>yh;function Rv({onStart:e}){const[t,n]=P.useState("1"),[r,o]=P.useState("individual"),[l,a]=P.useState("15"),[f,h]=P.useState({status:"checking",version:"...",commit:"...",healthy:!1});P.useEffect(()=>{const N=async()=>{const D=await _v();h(D),console.log("[StartDialog] Server health:",D)};N();const O=setInterval(N,3e4);return()=>clearInterval(O)},[]);const y=()=>{if(!t||!l){alert("Please fill in all fields");return}const N={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(N)},C=()=>{window.close()},A=()=>f.status==="checking"?"checking":f.healthy?"healthy":"unhealthy";return d.jsx("div",{className:"dialog-overlay",children:d.jsxs("div",{className:"dialog-box",children:[d.jsxs("div",{className:"dialog-header",children:[d.jsx("h2",{children:"The Creative Game"}),d.jsxs("div",{className:`server-health-indicator ${A()}`,title:`Server: ${f.status}
Version: ${f.version}
Commit: ${f.commit}
Environment: ${Tv()}`,children:[d.jsx("span",{className:"health-light"}),d.jsx("span",{className:"health-text",children:"Server"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"ID:"}),d.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value)})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Condition:"}),d.jsxs("select",{value:r,onChange:N=>o(N.target.value),children:[d.jsx("option",{value:"individual",children:"individual"}),d.jsx("option",{value:"group",children:"group"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Time (in minutes):"}),d.jsx("input",{type:"number",value:l,onChange:N=>a(N.target.value),min:"1"})]}),d.jsxs("div",{className:"dialog-buttons",children:[d.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),d.jsx("button",{className:"dialog-button ok",onClick:y,children:"OK"}),d.jsx("button",{className:"dialog-button cancel",onClick:C,children:"Cancel"})]})]})})}class Kc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}clear(){this.logs=[]}}const zv=.035;class Lv{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=ru(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var o;const{colorA:n,colorB:r}=this.getCalibrationColors();this.sessionInfo={...t,colorA:n,colorB:r,startedAt:((o=this.sessionInfo)==null?void 0:o.startedAt)||new Date(this.startTime).toISOString()},console.log("[GameTracker] Session info set with colors:",{colorA:n,colorB:r}),await this.initializeSession()}hsvToHex(t){if(!t||typeof t.h>"u")return null;const n=(t.h||0)*2,r=(t.s||0)/255,o=(t.v||0)/255,l=o*r,a=l*(1-Math.abs(n/60%2-1)),f=o-l;let h=0,y=0,C=0;n>=0&&n<60?(h=l,y=a,C=0):n<120?(h=a,y=l,C=0):n<180?(h=0,y=l,C=a):n<240?(h=0,y=a,C=l):n<300?(h=a,y=0,C=l):(h=l,y=0,C=a);const A=N=>{const O=Math.round((N+f)*255).toString(16);return O.length===1?"0"+O:O};return`#${A(h)}${A(y)}${A(C)}`.toUpperCase()}getCalibrationColors(){try{const t=JSON.parse(localStorage.getItem("calibrationA")||"null"),n=JSON.parse(localStorage.getItem("calibrationB")||"null");return{colorA:this.hsvToHex(t),colorB:this.hsvToHex(n)}}catch(t){return console.warn("[GameTracker] Error reading calibration colors:",t),{colorA:null,colorB:null}}}async initializeSession(){var o;if(this.sessionInitialized||!((o=this.sessionInfo)!=null&&o.sessionGameId))return;const{colorA:t,colorB:n}=this.getCalibrationColors(),r={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,colorA:t,colorB:n,metadata:{config:this.sessionInfo}};console.log("[GameTracker] Initializing session with colors:",{colorA:t,colorB:n});try{const l=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){const f=(await l.json().catch(()=>({}))).message||`Failed to initialize session (${l.status})`;throw l.status===409?(alert(` Session ID Conflict

${f}

Please choose a different Session ID.`),this.stop(),new Error(f)):new Error(f)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(l){throw console.error("[GameTracker] Failed to initialize session:",l),l}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/zv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),f=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(N=>this.relativeToGrid(N)):null),y={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:f,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:f,grid_all_positions:h};(r||t.camera_frame)&&(y.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(y.gallery_shape_number=t.gallery_shape_number,y.gallery=t.gallery,y.gallery_normalized=t.gallery_normalized,y.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(N=>this.relativeToGrid(N)):null),y.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(N=>this.relativeToGrid(N)):null)),this.moves.push(y),this.persistMove(y).catch(N=>{console.error("[GameTracker] Failed to persist move to server:",N)});const C=this.getCurrentBraceletStatus(),A=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:f,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:C,lastKnownPlayer:A,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(N=>({status:N.status,elapsed:N.elapsed.toFixed(2)}))}})}async persistMove(t){var r;if(!this.sessionInitialized||!((r=this.sessionInfo)!=null&&r.sessionGameId)){console.warn("[GameTracker] Cannot persist move - session not initialized");return}const n=`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`;console.log(`[GameTracker] Persisting move to: ${n}`);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){const a=await o.text();throw console.error(`[GameTracker] Server error (${o.status}):`,a),new Error(`Failed to persist move (${o.status}): ${a}`)}const l=await o.json();return console.log("[GameTracker]  Move persisted successfully:",l),l}catch(o){throw console.error("[GameTracker]  persistMove error:",o),o}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(f=>f.timestamp>=o&&f.timestamp<=l);if(a.length>0){const f={};a.forEach(y=>{(y.status==="Player A"||y.status==="Player B")&&(f[y.status]=(f[y.status]||0)+1)});const h=Object.keys(f).reduce((y,C)=>f[y]>f[C]?y:C,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let ds=null;const Xc=()=>(ds||(ds=new Lv),ds),sn=.07,Pi=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Ke=e=>Math.round(e*1e3)/1e3,Ov=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Ke(l.position[0]-sn),Ke(l.position[1])],[Ke(l.position[0]+sn),Ke(l.position[1])],[Ke(l.position[0]),Ke(l.position[1]-sn)],[Ke(l.position[0]),Ke(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Bv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},sa=e=>e.map(t=>{const n=[],r=[[Ke(t.position[0]-sn),Ke(t.position[1])],[Ke(t.position[0]+sn),Ke(t.position[1])],[Ke(t.position[0]),Ke(t.position[1]-sn)],[Ke(t.position[0]),Ke(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Ke(o.position[0])===l[0]&&Ke(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Fv=e=>{const t=new Set;if(e.forEach((a,f)=>{a.forEach((h,y)=>{h&&t.add(`${f},${y}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,f]=l.shift(),h=`${a},${f}`;o.has(h)||(o.add(h),n.forEach(([y,C])=>{const A=`${a+y},${f+C}`;t.has(A)&&!o.has(A)&&l.push([a+y,f+C])}))}return o.size===t.size},Dv=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Ke(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Ke(l));for(let l=0;l<=.77;l+=sn)r.push(Ke(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const f=n.findIndex(y=>Math.abs(y-l[0])<.001),h=r.findIndex(y=>Math.abs(y-l[1])<.001);f!==-1&&h!==-1&&(o[h][f]=!0)}}),Fv(o)},aa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=Dv(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},Jc=e=>{if(e.length===0)return null;try{const t=e.map(C=>C[0]),n=e.map(C=>C[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(C=>{const A=Math.sqrt(Math.pow(C[0]-r,2)+Math.pow(C[1]-o,2));A<l&&(l=A,a=C)});const f=-a[0],h=-a[1],y=e.map(C=>[Ke(C[0]+f),Ke(C[1]+h)]);return y.sort((C,A)=>C[0]-A[0]||C[1]-A[1]),y}catch{return null}},$v=60,Zc=.07,fs=120;function Uv({config:e,interfaceHidden:t=!1}){const[n,r]=P.useState(Pi()),[o,l]=P.useState(null),[a,f]=P.useState({x:0,y:0}),[h,y]=P.useState(!0),[C,A]=P.useState(e.timeSeconds),[N,O]=P.useState(0),[D,$]=P.useState(null),[he,S]=P.useState(!0),[w,k]=P.useState(""),[R,W]=P.useState(!1),[q,K]=P.useState({blockSize:$v,bottomPadding:fs}),V=P.useRef(null),me=P.useRef(new Kc(e)),Y=P.useRef(Xc()),fe=P.useRef(null),te=P.useRef(Date.now()),pe=P.useRef(fs),de=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,Ee=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,je="The experiment is done. Thank you very much for your participation!",Me=P.useCallback(()=>{const F=V.current;if(!F)return;const b=F.offsetWidth,G=F.offsetHeight;if(!b||!G)return;const re=pe.current||fs;let T=Math.max(1,Math.min(b,G-re)),p=Math.max(38,Math.min(T*Zc*.95,T/4)),M=Math.max(p*2.5,110);T=Math.max(1,Math.min(b,G-M)),p=Math.max(38,Math.min(T*Zc*.95,T/4)),M=Math.max(p*2.5,110),pe.current=M,K(E=>{const x=Math.abs(E.blockSize-p),I=Math.abs(E.bottomPadding-M);return x<.5&&I<.5?E:{blockSize:p,bottomPadding:M}})},[]);P.useEffect(()=>(k(de),(async()=>{try{Y.current.start(),await Y.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(b){console.error("[GameCanvas] Failed to initialize tracker:",b),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),window.endGameExperience=()=>{S(!0),k(je),W(!0),Y.current.stop(),console.log("[GameCanvas] Game ended via endGameExperience(). All data saved to server.")},()=>{window.endGameExperience&&delete window.endGameExperience,Y.current.stop()}),[]),P.useEffect(()=>{Me()},[Me,t]),P.useEffect(()=>{const F=()=>{Me()};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[Me]),P.useEffect(()=>{if(!h&&C>0){const F=setInterval(()=>{A(b=>b<=1?(clearInterval(F),S(!0),k(je),W(!0),console.log("[GameCanvas] Game ended by timer. All data saved to server."),0):b-1)},1e3);return()=>clearInterval(F)}},[h,C]),P.useEffect(()=>{r(F=>aa(sa(F),h))},[h]);const J=()=>(Date.now()-te.current)/1e3,se=(F,b)=>{const G=V.current;if(!G)return 0;const re=G.offsetHeight-pe.current,T=Math.min(G.offsetWidth,re),p=b==="x"?(G.offsetWidth-T)/2:(G.offsetHeight-pe.current-T)/2;return(F-p)/T-.5},oe=(F,b)=>{const G=V.current;if(!G)return 0;const re=G.offsetHeight-pe.current,T=Math.min(G.offsetWidth,re),p=b==="x"?(G.offsetWidth-T)/2:(G.offsetHeight-pe.current-T)/2;return(F+.5)*T+p},we=F=>{var T,p,M,E;const b=V.current.getBoundingClientRect(),G=F.clientX!==void 0?F.clientX:(p=(T=F.touches)==null?void 0:T[0])==null?void 0:p.clientX,re=F.clientY!==void 0?F.clientY:(E=(M=F.touches)==null?void 0:M[0])==null?void 0:E.clientY;return{x:G-b.left,y:re-b.top}},ke=(F,b)=>{const G=n.find(M=>M.id===b);if(!G||!G.canMove)return;F.preventDefault();const re=we(F),T=oe(G.position[0],"x"),p=oe(G.position[1],"y");fe.current=Date.now(),l(b),f({x:re.x-T,y:re.y-p})},Re=F=>{if(o===null)return;F.preventDefault();const b=we(F),G=se(b.x-a.x,"x"),re=se(b.y-a.y,"y");r(T=>T.map(p=>p.id===o?{...p,position:[G,re]}:p))},Oe=()=>{try{const F=window.braceletDetectorVideo;if(!F||!F.videoWidth||F.videoWidth===0)return console.warn("[GameCanvas] No raw video source available for frame capture"),null;const b=document.createElement("canvas"),G=640,re=480;let T=F.videoWidth,p=F.videoHeight;const M=T/p;return T>G&&(T=G,p=T/M),p>re&&(p=re,T=p*M),b.width=Math.floor(T),b.height=Math.floor(p),b.getContext("2d").drawImage(F,0,0,b.width,b.height),b.toDataURL("image/jpeg",.6)}catch(F){return console.error("[GameCanvas] Error capturing camera frame:",F),null}},B=()=>{if(o===null)return;const F=n.find(x=>x.id===o),b=Ov(n,o),G=Bv(b,F.position),re=fe.current?(Date.now()-fe.current)/1e3:0,T=n.map(x=>x.id===o?{...x,position:G}:x),p=Oe(),M=window.currentBraceletStatus||"Unknown",E={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:J(),unit:o,end_position:G,all_positions:T.map(x=>x.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:p,player:M};me.current.write(E),Y.current.recordMove(E,re,p),r(x=>{const I=x.map(L=>L.id===o?{...L,position:G}:L);return aa(sa(I),h)}),l(null),fe.current=null},ue=()=>{const F=n.map(E=>E.position),b=Jc(F),G=N+1,re=Oe(),T=window.currentBraceletStatus||"Unknown",p={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:J(),unit:null,end_position:null,all_positions:null,gallery_shape_number:G,gallery:F,gallery_normalized:b,camera_frame:re,player:T};me.current.write(p),Y.current.recordMove(p,0,re);const M=z();$(M),O(G)},z=()=>{const F=document.createElement("canvas");F.width=400,F.height=400;const b=F.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,400,400);const G=n.map(T=>T.position),re=Jc(G);return re&&re.forEach(T=>{const p=(T[0]+.5)*400,M=(T[1]+.5)*400;b.fillStyle="green",b.fillRect(p-15,M-15,30,30)}),F.toDataURL()},H=P.useCallback(F=>{F.key==="p"&&h?(y(!1),S(!0),k(Ee),te.current=Date.now(),r(Pi()),$(null),O(0),me.current=new Kc(e),Y.current.stop(),Y.current=Xc(),Y.current.start(),Y.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):F.key==="q"&&!h&&(S(!0),k(je),W(!0),console.log("[GameCanvas] Game ended manually (q key). All data saved to server."))},[h,e.id]);P.useEffect(()=>(window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)),[H]);const Z=()=>{if(R&&w===je){console.log("[GameCanvas] Game ended - redirecting to start dialog"),window.toggleInterface&&window.toggleInterface(!1),window.location.hash="#/",window.location.reload();return}if(!h&&w===Ee)try{const F=new(window.AudioContext||window.webkitAudioContext),b=F.createOscillator(),G=F.createGain();b.connect(G),G.connect(F.destination),b.frequency.setValueAtTime(800,F.currentTime),b.frequency.setValueAtTime(600,F.currentTime+.15),G.gain.setValueAtTime(.3,F.currentTime),G.gain.exponentialRampToValueAtTime(.01,F.currentTime+.3),b.start(F.currentTime),b.stop(F.currentTime+.3),console.log("[GameCanvas] Playing start sound - Real experiment begins!")}catch(F){console.error("[GameCanvas] Error playing sound:",F)}S(!1)},ee=F=>{F.preventDefault()};return d.jsxs("div",{className:"game-canvas",ref:V,style:{"--block-size":`${q.blockSize}px`,"--bottom-padding":`${q.bottomPadding}px`},onMouseMove:Re,onMouseUp:B,onMouseLeave:B,onTouchMove:Re,onTouchEnd:B,onTouchCancel:B,onContextMenu:ee,children:[d.jsx("div",{className:"gallery",onClick:ue,children:d.jsx("div",{className:"gallery-frame",children:D?d.jsx("img",{src:D,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&d.jsxs("div",{className:"timer",children:["Time: ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),n.map(F=>d.jsx("div",{className:`block ${F.canMove?"movable":""}`,style:{left:`${oe(F.position[0],"x")}px`,top:`${oe(F.position[1],"y")}px`,backgroundColor:F.color||"green",cursor:F.canMove?"grab":"default"},onMouseDown:b=>ke(b,F.id),onTouchStart:b=>ke(b,F.id)},F.id)),he&&d.jsx("div",{className:"message-overlay",onClick:Z,children:d.jsxs("div",{className:"message-box",children:[w,d.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var sl={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var m=i[c];if(!(m in u))break e;u=u[m]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(g||"")+"_"+m++,g)}function u(g,v){this.h=g,n(this,"description",{configurable:!0,writable:!0,value:v})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",m=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function f(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=f(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var y=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(i[m]=c[m])}return i};l("Object.assign",function(i){return i||y});var C=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},A;if(typeof Object.setPrototypeOf=="function")A=Object.setPrototypeOf;else{var N;e:{var O={a:!0},D={};try{D.__proto__=O,N=D.a;break e}catch{}N=!1}A=N?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var $=A;function he(i,s){if(i.prototype=C(s.prototype),i.prototype.constructor=i,$)$(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}S.prototype.u=function(i){this.i=i};function k(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}S.prototype.return=function(i){this.l={return:i},this.h=this.v};function R(i,s,u){return i.h=u,{value:s}}function W(i){this.h=new S,this.i=i}function q(i,s){w(i.h);var u=i.h.j;return u?K(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),V(i))}function K(i,s,u,c){try{var m=s.call(i.h.j,u);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return i.h.m=!1,m;var g=m.value}catch(v){return i.h.j=null,k(i.h,v),V(i)}return i.h.j=null,c.call(i.h,g),V(i)}function V(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,k(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function me(i){this.next=function(s){return w(i.h),i.h.j?s=K(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=V(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=K(i,i.h.j.throw,s,i.h.u):(k(i.h,s),s=V(i)),s},this.return=function(s){return q(i,s)},this[Symbol.iterator]=function(){return this}}function Y(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,m){function g(v){v.done?c(v.value):Promise.resolve(v.value).then(s,u).then(g,m)}g(i.next())})}function fe(i){return Y(new me(new W(i)))}l("Promise",function(i){function s(v){this.i=0,this.j=void 0,this.h=[],this.u=!1;var j=this.l();try{v(j.resolve,j.reject)}catch(_){j.reject(_)}}function u(){this.h=null}function c(v){return v instanceof s?v:new s(function(j){j(v)})}if(i)return i;u.prototype.i=function(v){if(this.h==null){this.h=[];var j=this;this.j(function(){j.m()})}this.h.push(v)};var m=o.setTimeout;u.prototype.j=function(v){m(v,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var v=this.h;this.h=[];for(var j=0;j<v.length;++j){var _=v[j];v[j]=null;try{_()}catch(Q){this.l(Q)}}}this.h=null},u.prototype.l=function(v){this.j(function(){throw v})},s.prototype.l=function(){function v(Q){return function(ne){_||(_=!0,Q.call(j,ne))}}var j=this,_=!1;return{resolve:v(this.I),reject:v(this.m)}},s.prototype.I=function(v){if(v===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof s)this.L(v);else{e:switch(typeof v){case"object":var j=v!=null;break e;case"function":j=!0;break e;default:j=!1}j?this.F(v):this.s(v)}},s.prototype.F=function(v){var j=void 0;try{j=v.then}catch(_){this.m(_);return}typeof j=="function"?this.M(j,v):this.s(v)},s.prototype.m=function(v){this.v(2,v)},s.prototype.s=function(v){this.v(1,v)},s.prototype.v=function(v,j){if(this.i!=0)throw Error("Cannot settle("+v+", "+j+"): Promise already settled in state"+this.i);this.i=v,this.j=j,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var v=this;m(function(){if(v.D()){var j=o.console;typeof j<"u"&&j.error(v.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var v=o.CustomEvent,j=o.Event,_=o.dispatchEvent;return typeof _>"u"?!0:(typeof v=="function"?v=new v("unhandledrejection",{cancelable:!0}):typeof j=="function"?v=new j("unhandledrejection",{cancelable:!0}):(v=o.document.createEvent("CustomEvent"),v.initCustomEvent("unhandledrejection",!1,!0,v)),v.promise=this,v.reason=this.j,_(v))},s.prototype.H=function(){if(this.h!=null){for(var v=0;v<this.h.length;++v)g.i(this.h[v]);this.h=null}};var g=new u;return s.prototype.L=function(v){var j=this.l();v.T(j.resolve,j.reject)},s.prototype.M=function(v,j){var _=this.l();try{v.call(j,_.resolve,_.reject)}catch(Q){_.reject(Q)}},s.prototype.then=function(v,j){function _(ve,le){return typeof ve=="function"?function(Se){try{Q(ve(Se))}catch(Ne){ne(Ne)}}:le}var Q,ne,xe=new s(function(ve,le){Q=ve,ne=le});return this.T(_(v,Q),_(j,ne)),xe},s.prototype.catch=function(v){return this.then(void 0,v)},s.prototype.T=function(v,j){function _(){switch(Q.i){case 1:v(Q.j);break;case 2:j(Q.j);break;default:throw Error("Unexpected state: "+Q.i)}}var Q=this;this.h==null?g.i(_):this.h.push(_),this.u=!0},s.resolve=c,s.reject=function(v){return new s(function(j,_){_(v)})},s.race=function(v){return new s(function(j,_){for(var Q=f(v),ne=Q.next();!ne.done;ne=Q.next())c(ne.value).T(j,_)})},s.all=function(v){var j=f(v),_=j.next();return _.done?c([]):new s(function(Q,ne){function xe(Se){return function(Ne){ve[Se]=Ne,le--,le==0&&Q(ve)}}var ve=[],le=0;do ve.push(void 0),le++,c(_.value).T(xe(ve.length-1),ne),_=j.next();while(!_.done)})},s});function te(i,s){i instanceof String&&(i+="");var u=0,c=!1,m={next:function(){if(!c&&u<i.length){var g=u++;return{value:s(g,i[g]),done:!1}}return c=!0,{done:!0,value:void 0}}};return m[Symbol.iterator]=function(){return m},m}l("Array.prototype.keys",function(i){return i||function(){return te(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var m=this.length||0;for(0>u&&(u=Math.max(0,m+u)),(c==null||c>m)&&(c=m),c=Number(c),0>c&&(c=Math.max(0,m+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function pe(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",pe),l("Uint8Array.prototype.fill",pe),l("Uint8ClampedArray.prototype.fill",pe),l("Int16Array.prototype.fill",pe),l("Uint16Array.prototype.fill",pe),l("Int32Array.prototype.fill",pe),l("Uint32Array.prototype.fill",pe),l("Float32Array.prototype.fill",pe),l("Float64Array.prototype.fill",pe),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var m=c.length;for(u=u||0,0>u&&(u=Math.max(u+m,0));u<m;u++){var g=c[u];if(g===s||Object.is(g,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var de=this||self;function Ee(i,s){i=i.split(".");var u=de;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function je(i){var s;e:{if((s=de.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var Me=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),m=typeof i=="string"?i.split(""):i,g=0;g<u;g++)g in m&&(c[g]=s.call(void 0,m[g],g,i));return c},J={},se=null;function oe(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),m=0;return we(i,function(g){c[m++]=g}),m!==u?c.subarray(0,m):c}function we(i,s){function u(_){for(;c<i.length;){var Q=i.charAt(c++),ne=se[Q];if(ne!=null)return ne;if(!/^[\s\xa0]*$/.test(Q))throw Error("Unknown base64 encoding at char: "+Q)}return _}ke();for(var c=0;;){var m=u(-1),g=u(0),v=u(64),j=u(64);if(j===64&&m===-1)break;s(m<<2|g>>4),v!=64&&(s(g<<4&240|v>>2),j!=64&&s(v<<6&192|j))}}function ke(){if(!se){se={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));J[u]=c;for(var m=0;m<c.length;m++){var g=c[m];se[g]===void 0&&(se[g]=m)}}}}var Re=typeof Uint8Array<"u",Oe=!(je("Trident")||je("MSIE"))&&typeof de.btoa=="function";function B(i){if(!Oe){var s;s===void 0&&(s=0),ke(),s=J[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",m=0,g=0;m<i.length-2;m+=3){var v=i[m],j=i[m+1],_=i[m+2],Q=s[v>>2];v=s[(v&3)<<4|j>>4],j=s[(j&15)<<2|_>>6],_=s[_&63],u[g++]=Q+v+j+_}switch(Q=0,_=c,i.length-m){case 2:Q=i[m+1],_=s[(Q&15)<<2]||c;case 1:i=i[m],u[g]=s[i>>2]+s[(i&3)<<4|Q>>4]+_+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var ue=RegExp("[-_.]","g");function z(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function H(i){if(!Oe)return oe(i);ue.test(i)&&(i=i.replace(ue,z)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var Z;function ee(){return Z||(Z=new Uint8Array(0))}var F={},b=typeof Uint8Array.prototype.slice=="function",G=0,re=0;function T(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=f(M(u,i)),s=u.next().value,i=u.next().value,u=s),G=u>>>0,re=i>>>0}var p=typeof BigInt=="function";function M(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function E(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return I||(I=new E(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)T(Number(i));else if(p)i=BigInt(i),G=Number(i&BigInt(4294967295))>>>0,re=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");re=G=0;for(var u=i.length,c=s,m=(u-s)%6+s;m<=u;c=m,m+=6)c=Number(i.slice(c,m)),re*=1e6,G=1e6*G+c,4294967296<=G&&(re+=G/4294967296|0,G%=4294967296);s&&(s=f(M(G,re)),i=s.next().value,s=s.next().value,G=i,re=s)}return new E(G,re)}var I;function L(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function U(){return Error("Failed to read varint, encoding is invalid.")}function ie(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function ae(){throw Error("Invalid UTF8")}function ye(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var ge=void 0,Pe,Be=typeof TextDecoder<"u",Fe,He=typeof TextEncoder<"u",We;function Ie(i){if(i!==F)throw Error("illegal external caller")}function Ce(i,s){if(Ie(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function _e(){return We||(We=new Ce(null,F))}function ze(i){Ie(F);var s=i.V;return s=s==null||Re&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?H(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:H(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Ce)return{buffer:ze(i)||ee(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ye(this,i,s)}function Ye(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw ie(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],m=c&127;if(c&128&&(c=s[u++],m|=(c&127)<<7,c&128&&(c=s[u++],m|=(c&127)<<14,c&128&&(c=s[u++],m|=(c&127)<<21,c&128&&(c=s[u++],m|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw U();return at(i,u),m}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw ie(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Ye(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw L(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw U()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw L(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Xi(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,ze(s[u])||ee())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Zr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function jl(i){return fn(i,1),i}function xh(i,s){hn(s,(i|0)&-51)}function Ji(i,s){hn(s,(i|18)&-41)}var Cl={};function Zi(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var qr,iu=[];hn(iu,23),qr=Object.freeze(iu);function Nl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Pl(i){var s=i.length;(s=s?i[s-1]:void 0)&&Zi(s)?s.g=1:(s={},i.push((s.g=1,s)))}function ou(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){Nl(i),ei(i,s,u,c)}function ei(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?ou(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Al(i,s,u,c){var m=en(i,s);Array.isArray(m)||(m=qr);var g=qe(m);if(g&1||jl(m),c)g&2||fn(m,2),u&1||Object.freeze(m);else{c=!(u&2);var v=g&2;u&1||!v?c&&g&16&&!v&&Zr(m,16):(m=jl(Array.prototype.slice.call(m)),ei(i,s,m))}return m}function Ml(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&ei(i,s,c),c}function lu(i,s,u,c,m){i.h||(i.h={});var g=i.h[u],v=Al(i,u,3,m);if(!g){var j=v;g=[];var _=!!(qe(i.o)&16);v=!!(qe(j)&2);var Q=j;!m&&v&&(j=Array.prototype.slice.call(j));for(var ne=v,xe=0;xe<j.length;xe++){var ve=j[xe],le=s,Se=!1;if(Se=Se===void 0?!1:Se,ve=Array.isArray(ve)?new le(ve):Se?new le:void 0,ve!==void 0){le=ve.o;var Ne=Se=qe(le);v&&(Ne|=2),_&&(Ne|=16),Ne!=Se&&hn(le,Ne),le=Ne,ne=ne||!!(2&le),g.push(ve)}}return i.h[u]=g,_=qe(j),s=_|33,s=ne?s&-9:s|8,_!=s&&(ne=j,Object.isFrozen(ne)&&(ne=Array.prototype.slice.call(ne)),hn(ne,s),j=ne),Q!==j&&ei(i,u,j),(m||c&&v)&&fn(g,2),c&&Object.freeze(g),g}return m||(m=Object.isFrozen(g),c&&!m?Object.freeze(g):!c&&m&&(g=Array.prototype.slice.call(g),i.h[u]=g)),g}function qi(i,s,u){var c=!!(qe(i.o)&2);if(s=lu(i,s,u,c,c),i=Al(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var m=fu(u,!1);m.j=u}else m=u;u!==m&&(s[c]=m,i[c]=m.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function su(i,s,u,c,m){Nl(i);var g=lu(i,u,s,!1,!1);return u=c??new u,i=Al(i,s,2,!1),m!=null?(g.splice(m,0,u),i.splice(m,0,u.o)):(g.push(u),i.push(u.o)),u.C()&&Zr(i,8),u}function eo(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,eo(Ml(i,s),u)}var to;function Sh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Pl(i),i}else{if(Re&&i!=null&&i instanceof Uint8Array)return B(i);if(i instanceof Ce){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=B(s)}}}return i}function au(i,s,u,c){if(i!=null){if(Array.isArray(i))i=Il(i,s,u,c!==void 0);else if(Zi(i)){var m={},g;for(g in i)m[g]=au(i[g],s,u,c);i=m}else i=s(i,c);return i}}function Il(i,s,u,c){var m=qe(i);c=c?!!(m&16):void 0,i=Array.prototype.slice.call(i);for(var g=0;g<i.length;g++)i[g]=au(i[g],s,u,c);return u(m,i),i}function kh(i){return i.ja===Cl?i.toJSON():Sh(i)}function Eh(i,s){i&128&&Pl(s)}function uu(i,s,u){if(u=u===void 0?Ji:u,i!=null){if(Re&&i instanceof Uint8Array)return i.length?new Ce(new Uint8Array(i),F):_e();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=Il(i,uu,c&4?Ji:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===Cl?du(i):i}}function cu(i,s,u,c,m,g,v){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(g=Me(i,du),Ji(c,g),Object.freeze(g),c=g),Nl(s),v=c==null?qr:jl([]),c!=null){for(g=!!c.length,i=0;i<c.length;i++){var j=c[i];g=g&&!(qe(j.o)&2),v[i]=j.o}g=(g?8:0)|1,i=qe(v),(i&g)!==g&&(Object.isFrozen(v)&&(v=Array.prototype.slice.call(v)),hn(v,i|g)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);ei(s,u,v,m)}else pn(s,u,uu(c,g,v),m)}function du(i){return qe(i.o)&2||(i=fu(i,!0),fn(i.o,2)),i}function fu(i,s){var u=i.o,c=[];fn(c,16);var m=i.constructor.h;if(m&&c.push(m),m=i.B,m){c.length=u.length,c.fill(void 0,c.length,u.length);var g={};c[c.length-1]=g}qe(u)&128&&Pl(c),s=s||i.C()?Ji:xh,g=i.constructor,to=c,c=new g(c),to=void 0,i.R&&(c.R=i.R.slice()),g=!!(qe(u)&16);for(var v=m?u.length-1:u.length,j=0;j<v;j++)cu(i,c,j-i.G,u[j],!1,g,s);if(m)for(var _ in m)cu(i,c,+_,m[_],!0,g,s);return c}function Pt(i,s,u){i==null&&(i=to),to=void 0;var c=this.constructor.i||0,m=0<c,g=this.constructor.h,v=!1;if(i==null){i=g?[g]:[];var j=48,_=!0;m&&(c=0,j|=128),hn(i,j)}else{if(!Array.isArray(i)||g&&g!==i[0])throw Error();var Q=j=fn(i,0);if((_=(16&Q)!==0)&&((v=(32&Q)!==0)||(Q|=32)),m){if(128&Q)c=0;else if(0<i.length){var ne=i[i.length-1];if(Zi(ne)&&"g"in ne){c=0,Q|=128,delete ne.g;var xe=!0,ve;for(ve in ne){xe=!1;break}xe&&i.pop()}}}else if(128&Q)throw Error();j!==Q&&hn(i,Q)}this.G=(g?0:-1)-c,this.h=void 0,this.o=i;e:{if(g=this.o.length,c=g-1,g&&(g=this.o[c],Zi(g))){this.B=g,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!m&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=_&&!v&&!0,m=this.i;var le;for(_=0;_<u.length;_++)v=u[_],v<m?(v+=this.G,(c=i[v])?hu(c,s):i[v]=qr):(le||(le=ou(this)),(c=le[v])?hu(c,s):le[v]=qr)}}Pt.prototype.toJSON=function(){return Il(this.o,kh,Eh)},Pt.prototype.C=function(){return!!(qe(this.o)&2)};function hu(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}Pt.prototype.ja=Cl,Pt.prototype.toString=function(){return this.o.toString()};function pu(i,s,u){if(u){var c={},m;for(m in u){var g=u[m],v=g.qa;v||(c.J=g.wa||g.oa.W,g.ia?(c.aa=wu(g.ia),v=function(j){return function(_,Q,ne){return j.J(_,Q,ne,j.aa)}}(c)):g.ka?(c.Z=xu(g.da.P,g.ka),v=function(j){return function(_,Q,ne){return j.J(_,Q,ne,j.Z)}}(c)):v=c.J,g.qa=v),v(s,i,g.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Xi(s,i)}var no=Symbol();function mu(i,s,u){return i[no]||(i[no]=function(c,m){return s(c,m,u)})}function vu(i){var s=i[no];if(!s){var u=Tl(i);s=function(c,m){return Su(c,m,u)},i[no]=s}return s}function jh(i){var s=i.ia;if(s)return vu(s);if(s=i.va)return mu(i.da.P,s,i.ka)}function Ch(i){var s=jh(i),u=i.da,c=i.oa.U;return s?function(m,g){return c(m,g,u,s)}:function(m,g){return c(m,g,u)}}function yu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ni in u||ti in u||0<u.length&&typeof u[0]=="function")?u:void 0}function gu(i,s,u,c,m,g){s.P=i[0];var v=1;if(i.length>v&&typeof i[v]!="number"){var j=i[v++];u(s,j)}for(;v<i.length;){u=i[v++];for(var _=v+1;_<i.length&&typeof i[_]!="number";)_++;switch(j=i[v++],_-=v,_){case 0:c(s,u,j);break;case 1:(_=yu(i,v))?(v++,m(s,u,j,_)):c(s,u,j,i[v++]);break;case 2:_=v++,_=yu(i,_),m(s,u,j,_,i[v++]);break;case 3:g(s,u,j,i[v++],i[v++],i[v++]);break;case 4:g(s,u,j,i[v++],i[v++],i[v++],i[v++]);break;default:throw Error("unexpected number of binary field arguments: "+_)}}return s}var ro=Symbol();function wu(i){var s=i[ro];if(!s){var u=_l(i);s=function(c,m){return ku(c,m,u)},i[ro]=s}return s}function xu(i,s){var u=i[ro];return u||(u=function(c,m){return pu(c,m,s)},i[ro]=u),u}var ti=Symbol();function Nh(i,s){i.push(s)}function Ph(i,s,u){i.push(s,u.W)}function Ah(i,s,u,c){var m=wu(c),g=_l(c).P,v=u.W;i.push(s,function(j,_,Q){return v(j,_,Q,g,m)})}function Mh(i,s,u,c,m,g){var v=xu(c,g),j=u.W;i.push(s,function(_,Q,ne){return j(_,Q,ne,c,v)})}function _l(i){var s=i[ti];return s||(s=gu(i,i[ti]=[],Nh,Ph,Ah,Mh),ni in i&&ti in i&&(i.length=0),s)}var ni=Symbol();function Ih(i,s){i[0]=s}function _h(i,s,u,c){var m=u.U;i[s]=c?function(g,v,j){return m(g,v,j,c)}:m}function Th(i,s,u,c,m){var g=u.U,v=vu(c),j=Tl(c).P;i[s]=function(_,Q,ne){return g(_,Q,ne,j,v,m)}}function Rh(i,s,u,c,m,g,v){var j=u.U,_=mu(c,m,g);i[s]=function(Q,ne,xe){return j(Q,ne,xe,c,_,v)}}function Tl(i){var s=i[ni];return s||(s=gu(i,i[ni]={},Ih,_h,Th,Rh),ni in i&&ti in i&&(i.length=0),s)}function Su(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,m=u[c];if(!m){var g=u[0];g&&(g=g[c])&&(m=u[c]=Ch(g))}if(!m||!m(s,i,c)){m=s,c=i,g=m.j,Ln(m);var v=m;if(!v.ca){if(m=v.h.h-g,v.h.h=g,v=v.h,m==0)m=_e();else{if(g=St(v,m),v.S&&v.m)m=v.i.subarray(g,g+m);else{v=v.i;var j=g;m=g+m,m=j===m?ee():b?v.slice(j,m):new Uint8Array(v.subarray(j,m))}m=m.length==0?_e():new Ce(m,F)}(g=c.R)?g.push(m):c.R=[m]}}}return i}function ku(i,s,u){for(var c=u.length,m=c%2==1,g=m?1:0;g<c;g+=2)(0,u[g+1])(s,i,u[g]);pu(i,s,m?u[0]:void 0)}function ri(i,s){return{U:i,W:s}}var tn=ri(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,m=i.h,g=c[m],v=c[m+1],j=c[m+2];return c=c[m+3],at(i,i.h+4),v=(g<<0|v<<8|j<<16|c<<24)>>>0,i=2*(v>>31)+1,g=v>>>23&255,v&=8388607,pn(s,u,g==255?v?NaN:1/0*i:g==0?i*Math.pow(2,-149)*v:i*Math.pow(2,g-150)*(v+Math.pow(2,23))),!0},function(i,s,u){if(s=Ml(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?G=re=0:(re=0,G=2147483648):isNaN(c)?(re=0,G=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(re=0,G=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),re=0,G=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,re=0,G=(u|s+127<<23|c&8388607)>>>0)),u=G,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),zh=ri(function(i,s,u){if(i.i!==0)return!1;var c=i.h,m=0,g=i=0,v=c.i,j=c.h;do{var _=v[j++];m|=(_&127)<<g,g+=7}while(32>g&&_&128);for(32<g&&(i|=(_&127)>>4),g=3;32>g&&_&128;g+=7)_=v[j++],i|=(_&127)<<g;if(at(c,j),128>_)c=m>>>0,_=i>>>0,(i=_&2147483648)&&(c=~c+1>>>0,_=~_>>>0,c==0&&(_=_+1>>>0)),c=4294967296*_+(c>>>0);else throw U();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,T(s),dn(i,G,re)):(u=x(s),dn(i.h,u.i,u.h))))}),Lh=ri(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),Eu=ri(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var m=St(i,c);if(i=i.i,Be){var g=i,v;(v=Pe)||(v=Pe=new TextDecoder("utf-8",{fatal:!0})),i=m+c,g=m===0&&i===g.length?g:g.subarray(m,i);try{var j=v.decode(g)}catch(xe){if(ge===void 0){try{v.decode(new Uint8Array([128]))}catch{}try{v.decode(new Uint8Array([97])),ge=!0}catch{ge=!1}}throw!ge&&(Pe=void 0),xe}}else{j=m,c=j+c,m=[];for(var _=null,Q,ne;j<c;)Q=i[j++],128>Q?m.push(Q):224>Q?j>=c?ae():(ne=i[j++],194>Q||(ne&192)!==128?(j--,ae()):m.push((Q&31)<<6|ne&63)):240>Q?j>=c-1?ae():(ne=i[j++],(ne&192)!==128||Q===224&&160>ne||Q===237&&160<=ne||((g=i[j++])&192)!==128?(j--,ae()):m.push((Q&15)<<12|(ne&63)<<6|g&63)):244>=Q?j>=c-2?ae():(ne=i[j++],(ne&192)!==128||(Q<<28)+(ne-144)>>30||((g=i[j++])&192)!==128||((v=i[j++])&192)!==128?(j--,ae()):(Q=(Q&7)<<18|(ne&63)<<12|(g&63)<<6|v&63,Q-=65536,m.push((Q>>10&1023)+55296,(Q&1023)+56320))):ae(),8192<=m.length&&(_=ye(_,m),m.length=0);j=ye(_,m)}return pn(s,u,j),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,He){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Fe||(Fe=new TextEncoder)).encode(s)}else{for(var m=0,g=new Uint8Array(3*s.length),v=0;v<s.length;v++){var j=s.charCodeAt(v);if(128>j)g[m++]=j;else{if(2048>j)g[m++]=j>>6|192;else{if(55296<=j&&57343>=j){if(56319>=j&&v<s.length){var _=s.charCodeAt(++v);if(56320<=_&&57343>=_){j=1024*(j-55296)+_-56320+65536,g[m++]=j>>18|240,g[m++]=j>>12&63|128,g[m++]=j>>6&63|128,g[m++]=j&63|128;continue}else v--}if(c)throw Error("Found an unpaired surrogate");j=65533}g[m++]=j>>12|224,g[m++]=j>>6&63|128}g[m++]=j&63|128}}s=m===g.length?g:g.subarray(0,m)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),ju=ri(function(i,s,u,c,m){if(i.i!==2)return!1;s=su(s,u,c),u=i.h.j,c=it(i.h)>>>0;var g=i.h.h+c,v=g-u;if(0>=v&&(i.h.j=g,m(s,i,void 0,void 0,void 0),v=g-i.h.h),v)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-v)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=g,i.h.j=u,!0},function(i,s,u,c,m){if(s=qi(s,c,u),s!=null)for(c=0;c<s.length;c++){var g=i;Wt(g.h,8*u+2);var v=g.h.end();Zt(g,v),v.push(g.i),g=v,m(s[c],i),v=i;var j=g.pop();for(j=v.i+v.h.length()-j;127<j;)g.push(j&127|128),j>>>=7,v.i++;g.push(j),v.i++}});function Rl(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Ye(c.h,s,u),s=c}else s=new ir(s,u);try{var m=Tl(i),g=Su(new m.P,s,m);break e}finally{m=s.h,m.i=null,m.m=!1,m.l=0,m.j=0,m.h=0,m.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}g=void 0}return g}}function zl(i){return function(){var s=new wr;ku(this,s,_l(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,m=c.length,g=0,v=0;v<m;v++){var j=c[v];u.set(j,g),g+=j.length}return s.j=[u],u}}function xr(i){Pt.call(this,i)}he(xr,Pt);var Cu=[xr,1,Lh,2,tn,3,Eu,4,Eu];xr.prototype.l=zl(Cu);function Ll(i){Pt.call(this,i,-1,Oh)}he(Ll,Pt),Ll.prototype.addClassification=function(i,s){return su(this,1,xr,i,s),this};var Oh=[1],Nu=Rl([Ll,1,ju,Cu]);function Sr(i){Pt.call(this,i)}he(Sr,Pt);var Pu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=zl(Pu);function Au(i){Pt.call(this,i,-1,Bh)}he(Au,Pt);var Bh=[1],Mu=Rl([Au,1,ju,Pu]);function io(i){Pt.call(this,i)}he(io,Pt);var Iu=[io,1,tn,2,tn,3,tn,4,tn,5,tn,6,zh],Fh=Rl(Iu);io.prototype.l=zl(Iu);function _u(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Tu(i){return qi(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?eo(en(s,3),""):void 0,displayName:en(s,4)!=null?eo(en(s,4),""):void 0}})}function Ru(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:Ml(i,4)!=null?vn(i,4):void 0}}function zu(i){return i.map(function(s){return qi(Mu(s),Sr,1).map(Ru)})}function Ol(i,s){this.i=i,this.h=s,this.m=0}function Lu(i,s,u){return Dh(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function Dh(i,s){var u=i.h;if(i.s===void 0){var c=_u(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),m=_u(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),g=u.createProgram();if(u.attachShader(g,c),u.attachShader(g,m),u.linkProgram(g),!u.getProgramParameter(g,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(g));c=i.s=g,u.useProgram(c),m=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:m},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(m,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function $h(i){this.h=i}var Uh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Hh(i,s){return s+i}function Ou(i,s){window[i]=s}function Wh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Vh(){return fe(function(i){switch(i.h){case 1:return i.s=2,R(i,WebAssembly.instantiate(Uh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Bl(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Hh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=f(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Bl.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Gh(i){var s,u,c,m,g,v,j,_,Q,ne,xe;return fe(function(ve){switch(ve.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,R(ve,Vh(),2)):ve.return();case 2:if(u=ve.i,typeof window=="object")return Ou("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),Ou("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),v=s.filter(function(le){return le.data!==void 0}),j=s.filter(function(le){return le.data===void 0}),_=Promise.all(v.map(function(le){var Se=oo(i,le.url);if(le.path!==void 0){var Ne=le.path;Se=Se.then(function(Ve){return i.overrideFile(Ne,Ve),Promise.resolve(Ve)})}return Se})),Q=Promise.all(j.map(function(le){return le.simd===void 0||le.simd&&u||!le.simd&&!u?Wh(i.locateFile(le.url,i.ha)):Promise.resolve()})).then(function(){var le,Se,Ne;return fe(function(Ve){if(Ve.h==1)return le=window.createMediapipeSolutionsWasm,Se=window.createMediapipeSolutionsPackedAssets,Ne=i,R(Ve,le(Se),2);Ne.i=Ve.i,Ve.h=0})}),ne=function(){return fe(function(le){return i.h.graph&&i.h.graph.url?le=R(le,oo(i,i.h.graph.url),0):(le.h=0,le=void 0),le})}(),R(ve,Promise.all([Q,_,ne]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(le){return le.simd===void 0||le.simd&&u||!le.simd&&!u}).map(function(le){return i.locateFile(le.url,i.ha)}),importScripts.apply(null,h(c)),m=i,R(ve,createMediapipeSolutionsWasm(Module),6);case 6:m.i=ve.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,g=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(g),ve.h=4;break;case 7:if(i.m=document.createElement("canvas"),xe=i.m.getContext("webgl2",{}),!xe&&(xe=i.m.getContext("webgl",{}),!xe))return alert("Failed to create WebGL canvas context when passing video frame."),ve.return();i.K=xe,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,ve.h=0}})}function bh(i){var s,u,c,m,g,v,j,_;return fe(function(Q){if(Q.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return Q.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){Q.h=2;return}return i.fa=i.h.graph.url,R(Q,oo(i,i.h.graph.url),3)}for(Q.h!=2&&(s=Q.i,i.j.loadGraph(s)),u=f(Object.keys(i.D)),c=u.next();!c.done;c=u.next())m=c.value,i.j.overrideFile(m,i.D[m]);if(i.D={},i.h.listeners)for(g=f(i.h.listeners),v=g.next();!v.done;v=g.next())j=v.value,Xh(i,j);_=i.l,i.l={},i.setOptions(_),Q.h=0})}e.reset=function(){var i=this;return fe(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],m=[],g={},v=f(Object.keys(i)),j=v.next();!j.done;g={X:g.X,Y:g.Y},j=v.next())if(j=j.value,!(j in this.l&&this.l[j]===i[j])){this.l[j]=i[j];var _=s[j];_!==void 0&&(_.onChange&&(g.X=_.onChange,g.Y=i[j],c.push(function(Q){return function(){var ne;return fe(function(xe){if(xe.h==1)return R(xe,Q.X(Q.Y),2);ne=xe.i,ne===!0&&(u.u=!0),xe.h=0})}}(g))),_.graphOptionXref&&(j=Object.assign({},{calculatorName:"",calculatorIndex:0},_.graphOptionXref,{valueNumber:_.type===1?i[j]:0,valueBoolean:_.type===0?i[j]:!1,valueString:_.type===2?i[j]:""}),m.push(j)))}(c.length!==0||m.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(m),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Qh(i){var s,u,c,m,g,v,j;return fe(function(_){switch(_.h){case 1:if(!i.u)return _.return();if(!i.F){_.h=2;break}s=f(i.F),u=s.next();case 3:if(u.done){_.h=5;break}return c=u.value,R(_,c(),4);case 4:u=s.next(),_.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(m=new i.i.GraphOptionChangeRequestList,g=f(i.H),v=g.next();!v.done;v=g.next())j=v.value,m.push_back(j);i.j.changeOptions(m),m.delete(),i.H=void 0}i.u=!1,_.h=0}})}e.initialize=function(){var i=this;return fe(function(s){return s.h==1?R(s,Gh(i),2):s.h!=3?R(s,bh(i),3):R(s,Qh(i),0)})};function oo(i,s){var u,c;return fe(function(m){return s in i.L?m.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(g){return g.arrayBuffer()}),i.L[s]=c,m.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,m,g,v,j,_,Q,ne,xe;return fe(function(ve){switch(ve.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),R(ve,u.I,2)):ve.return();case 2:return R(ve,u.initialize(),3);case 3:for(m=new u.i.PacketDataList,g=f(Object.keys(i)),v=g.next();!v.done;v=g.next())if(j=v.value,_=u.h.inputs[j]){e:{var le=i[j];switch(_.type){case"video":var Se=u.s[_.stream];if(Se||(Se=new Ol(u.i,u.K),u.s[_.stream]=Se),Se.m===0&&(Se.m=Se.i.createTexture()),typeof HTMLVideoElement<"u"&&le instanceof HTMLVideoElement)var Ne=le.videoWidth,Ve=le.videoHeight;else typeof HTMLImageElement<"u"&&le instanceof HTMLImageElement?(Ne=le.naturalWidth,Ve=le.naturalHeight):(Ne=le.width,Ve=le.height);Ve={glName:Se.m,width:Ne,height:Ve},Ne=Se.h,Ne.canvas.width=Ve.width,Ne.canvas.height=Ve.height,Ne.activeTexture(Ne.TEXTURE0),Se.i.bindTexture2d(Se.m),Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Ne.RGBA,Ne.UNSIGNED_BYTE,le),Se.i.bindTexture2d(0),Se=Ve;break e;case"detections":for(Se=u.s[_.stream],Se||(Se=new $h(u.i),u.s[_.stream]=Se),Se.data||(Se.data=new Se.h.DetectionListData),Se.data.reset(le.length),Ve=0;Ve<le.length;++Ve){Ne=le[Ve];var $e=Se.data,ft=$e.setBoundingBox,Vt=Ve,At=Ne.la,Le=new io;if(mn(Le,1,At.ra),mn(Le,2,At.sa),mn(Le,3,At.height),mn(Le,4,At.width),mn(Le,5,At.rotation),pn(Le,6,At.pa),At=Le.l(),ft.call($e,Vt,At),Ne.ea)for($e=0;$e<Ne.ea.length;++$e){Le=Ne.ea[$e],ft=Se.data,Vt=ft.addNormalizedLandmark,At=Ve,Le=Object.assign({},Le,{visibility:Le.visibility?Le.visibility:0});var ht=new Sr;mn(ht,1,Le.x),mn(ht,2,Le.y),mn(ht,3,Le.z),Le.visibility&&mn(ht,4,Le.visibility),Le=ht.l(),Vt.call(ft,At,Le)}if(Ne.ba)for($e=0;$e<Ne.ba.length;++$e)ft=Se.data,Vt=ft.addClassification,At=Ve,Le=Ne.ba[$e],ht=new xr,mn(ht,2,Le.score),Le.index&&pn(ht,1,Le.index),Le.label&&pn(ht,3,Le.label),Le.displayName&&pn(ht,4,Le.displayName),Le=ht.l(),Vt.call(ft,At,Le)}Se=Se.data;break e;default:Se={}}}switch(Q=Se,ne=_.stream,_.type){case"video":m.pushTexture2d(Object.assign({},Q,{stream:ne,timestamp:c}));break;case"detections":xe=Q,xe.stream=ne,xe.timestamp=c,m.pushDetectionList(xe);break;default:throw Error("Unknown input config type: '"+_.type+"'")}}return u.j.send(m),R(ve,u.I,4);case 4:m.delete(),ve.h=0}})};function Yh(i,s,u){var c,m,g,v,j,_,Q,ne,xe,ve,le,Se,Ne,Ve;return fe(function($e){switch($e.h){case 1:if(!u)return $e.return(s);for(c={},m=0,g=f(Object.keys(u)),v=g.next();!v.done;v=g.next())j=v.value,_=u[j],typeof _!="string"&&_.type==="texture"&&s[_.stream]!==void 0&&++m;1<m&&(i.M=!1),Q=f(Object.keys(u)),v=Q.next();case 2:if(v.done){$e.h=4;break}if(ne=v.value,xe=u[ne],typeof xe=="string")return Ne=c,Ve=ne,R($e,Kh(i,ne,s[xe]),14);if(ve=s[xe.stream],xe.type==="detection_list"){if(ve){for(var ft=ve.getRectList(),Vt=ve.getLandmarksList(),At=ve.getClassificationsList(),Le=[],ht=0;ht<ft.size();++ht){var Bn=Fh(ft.get(ht)),Jh=vn(Bn,1),Zh=vn(Bn,2),qh=vn(Bn,3),ep=vn(Bn,4),tp=vn(Bn,5,0),lo=void 0;lo=lo===void 0?0:lo,Bn={la:{ra:Jh,sa:Zh,height:qh,width:ep,rotation:tp,pa:eo(en(Bn,6),lo)},ea:qi(Mu(Vt.get(ht)),Sr,1).map(Ru),ba:Tu(Nu(At.get(ht)))},Le.push(Bn)}ft=Le}else ft=[];c[ne]=ft,$e.h=7;break}if(xe.type==="proto_list"){if(ve){for(ft=Array(ve.size()),Vt=0;Vt<ve.size();Vt++)ft[Vt]=ve.get(Vt);ve.delete()}else ft=[];c[ne]=ft,$e.h=7;break}if(ve===void 0){$e.h=3;break}if(xe.type==="float_list"){c[ne]=ve,$e.h=7;break}if(xe.type==="proto"){c[ne]=ve,$e.h=7;break}if(xe.type!=="texture")throw Error("Unknown output config type: '"+xe.type+"'");return le=i.v[ne],le||(le=new Ol(i.i,i.K),i.v[ne]=le),R($e,Lu(le,ve,i.M),13);case 13:Se=$e.i,c[ne]=Se;case 7:xe.transform&&c[ne]&&(c[ne]=xe.transform(c[ne])),$e.h=3;break;case 14:Ne[Ve]=$e.i;case 3:v=Q.next(),$e.h=2;break;case 4:return $e.return(c)}})}function Kh(i,s,u){var c;return fe(function(m){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?m.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new Ol(i.i,i.K),i.v[s]=c),m.return(Lu(c,u,i.M))):m.return(void 0)})}function Xh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),m=new i.i.StringList,g=f(s.wants),v=g.next();!v.done;v=g.next())m.push_back(v.value);g=i.i.PacketListener.implement({onResults:function(j){for(var _={},Q=0;Q<s.wants.length;++Q)_[c[Q]]=j.get(Q);var ne=i.listeners[u];ne&&(i.I=Yh(i,_,s.outs).then(function(xe){xe=ne(xe);for(var ve=0;ve<s.wants.length;++ve){var le=_[c[ve]];typeof le=="object"&&le.hasOwnProperty&&le.hasOwnProperty("delete")&&le.delete()}xe&&(i.I=xe)}))}}),i.j.attachMultiListener(m,g),m.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},Ee("Solution",Bl),Ee("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Bu(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Fu(i){var s=this;i=i||{},this.h=new Bl({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Bu(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:zu},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:zu},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Tu(Nu(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,m,g;return fe(function(v){return v.h==1?(c=Bu(u),m="third_party/mediapipe/modules/hand_landmark/"+c,R(v,oo(s.h,c),2)):(g=v.i,s.h.overrideFile(m,g),v.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Fu.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return fe(function(s){return R(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return fe(function(u){return R(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},Ee("Hands",Fu),Ee("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Ee("VERSION","0.4.1675469240")}).call(Fl);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function qc({hidden:e=!1}){const t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),[l,a]=P.useState(!1),[f,h]=P.useState("None"),[y,C]=P.useState([]),[A,N]=P.useState(null),[O,D]=P.useState(null),[$,he]=P.useState(null),[S,w]=P.useState({a:null,b:null}),k=P.useRef(null),R=P.useRef(null),W=(T,p)=>{const M=localStorage.getItem(T);if(M===null)return p;const E=parseFloat(M);return Number.isFinite(E)?E:p},[q,K]=P.useState(()=>({roiSize:(()=>{const T=W(et.roiSize,44);return T>10?T:44})(),hueWeight:W(et.hueWeight,4),satWeight:W(et.satWeight,2),valWeight:W(et.valWeight,1),sensitivity:W(et.sensitivity,0)})),V=P.useRef(q),me=P.useRef(null),Y=P.useRef(!1),fe=P.useRef(0),te=P.useRef(null),[pe,de]=P.useState([]),Ee=P.useRef([]),[je,Me]=P.useState(()=>localStorage.getItem(et.selectedCamera)||""),J=P.useCallback(async()=>{try{const p=(await navigator.mediaDevices.enumerateDevices()).filter(M=>M.kind==="videoinput");return de(p),Ee.current=p,p}catch{return[]}},[]),se=P.useCallback(T=>{},[Ot]),oe=P.useCallback(async(T=null)=>{const p=t.current;if(!p)return;me.current&&(me.current.getTracks().forEach(x=>x.stop()),me.current=null),F();const M=++fe.current;te.current=null;const E=T!==null?T:je;try{const x=E?{video:{deviceId:{exact:E}}}:{video:!0};if(E){const U=Ee.current.find(ie=>ie.deviceId===E);console.log("[Detector]  Loading SELECTED camera:",{deviceId:E,label:(U==null?void 0:U.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const I=await navigator.mediaDevices.getUserMedia(x);if(!Y.current||M!==fe.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),I.getTracks().forEach(U=>U.stop());return}me.current=I;const L=I.getVideoTracks();if(Ot("getUserMedia success. Tracks:",L),L.length>0){const U=L[0];console.log("[Detector]  Camera loaded successfully:",{label:U.label,deviceId:U.getSettings().deviceId,resolution:`${U.getSettings().width}x${U.getSettings().height}`,frameRate:U.getSettings().frameRate})}if(p.srcObject=I,await new Promise(U=>{if(p.readyState>=1&&p.videoWidth>0&&p.videoHeight>0)return U();const ae=()=>{p.removeEventListener("loadedmetadata",ae),U()};p.addEventListener("loadedmetadata",ae,{once:!0}),setTimeout(()=>{p.removeEventListener("loadedmetadata",ae),U()},1500)}),!Y.current||M!==fe.current){Ot("Stale request before play(). Stopping stream."),I.getTracks().forEach(U=>U.stop());return}try{await p.play(),Ot("video.play() promise resolved. Video should be playing.")}catch(U){if(console.error("[Detector] video.play() promise rejected:",U),Ot("video.play() promise rejected:",U.name,U.message),M!==fe.current){Ot("play() aborted due to newer request."),I.getTracks().forEach(ie=>ie.stop());return}}if(te.current!==M&&(te.current=M,Ot("Initializing MediaPipe for request id",M),B()),Y.current){const U=await J();if(!E||!T){const ie=U.find(ae=>ae.deviceId);ie&&ie.deviceId&&ie.deviceId!==je&&(Me(ie.deviceId),localStorage.setItem(et.selectedCamera,ie.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,J,se,je]),we=(T,p,M)=>{const E=(T||0)*2,x=(p||0)/255,I=(M||0)/255,L=I*x,U=L*(1-Math.abs(E/60%2-1)),ie=I-L;let ae=0,ye=0,ge=0;E>=0&&E<60?(ae=L,ye=U,ge=0):E<120?(ae=U,ye=L,ge=0):E<180?(ae=0,ye=L,ge=U):E<240?(ae=0,ye=U,ge=L):E<300?(ae=U,ye=0,ge=L):(ae=L,ye=0,ge=U);const Pe=Math.round((ae+ie)*255),Be=Math.round((ye+ie)*255),Fe=Math.round((ge+ie)*255);return`rgb(${Pe}, ${Be}, ${Fe})`},ke=T=>T?we(T.h,T.s,T.v):"#ffffff",Re=T=>T==="Player A"&&O?ke(O):T==="Player B"&&$?ke($):T==="Red"?"#ff0000":T==="Blue"?"#0000ff":"#ffffff";P.useEffect(()=>{Y.current=!0;const T=()=>{try{const E=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");E&&D({h:E.h,s:E.s,v:E.v}),x&&he({h:x.h,s:x.s,v:x.v})}catch{}},p=E=>{!E||!E.key||(["calibrationA","calibrationB"].includes(E.key)&&T(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(E.key)&&K(x=>({roiSize:(()=>{const I=W(et.roiSize,(x==null?void 0:x.roiSize)??44);return I>10?I:(x==null?void 0:x.roiSize)??44})(),hueWeight:W(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:W(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:W(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:W(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const E=await J();if(!Y.current)return;const x=localStorage.getItem(et.selectedCamera);let I="";if(x&&E.some(L=>L.deviceId&&L.deviceId===x)){const L=E.find(U=>U.deviceId===x);I=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(L==null?void 0:L.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const L=E.find(U=>U.deviceId);L&&L.deviceId?(I=L.deviceId,localStorage.setItem(et.selectedCamera,L.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:L.deviceId,label:L.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",L.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}Me(I?L=>L===I?L:I:L=>L||""),T()})(),window.addEventListener("storage",p),()=>{Y.current=!1,fe.current+=1,te.current=null,o.current&&(o.current.stop(),o.current=null),me.current&&(me.current.getTracks().forEach(x=>x.stop()),me.current=null);const E=t.current;E&&(E.srcObject=null,se(E)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",p)}},[]),P.useEffect(()=>{k.current=O},[O]),P.useEffect(()=>{R.current=$},[$]),P.useEffect(()=>{V.current=q},[q]),P.useEffect(()=>{oe(je||null)},[je,oe]),P.useEffect(()=>{const T=setInterval(()=>{h(p=>(Oe(p),p))},1e3);return()=>clearInterval(T)},[]);const Oe=T=>{const M={timestamp:new Date().toISOString(),status:T};C(x=>[...x,M]);const E=JSON.parse(localStorage.getItem("braceletDetections")||"[]");E.push(M),localStorage.setItem("braceletDetections",JSON.stringify(E))},B=async()=>{try{const T=await(async()=>{try{if(typeof sl.Hands=="function")return sl.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((M,E)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return M();const I=document.createElement("script");I.id=x,I.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",I.async=!0,I.onload=()=>M(),I.onerror=L=>E(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(I)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),p=new T({locateFile:M=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${M}`});if(p.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),p.onResults(ue),r.current=p,t.current){const M=t.current;console.log("[Detector]  Starting manual frame capture from video element");let E;const x=async()=>{if(M.readyState>=2&&M.videoWidth>0)try{await p.send({image:M})}catch(I){console.error("[Detector] Error sending frame to MediaPipe:",I)}E=requestAnimationFrame(x)};x(),o.current={stop:()=>{E&&(cancelAnimationFrame(E),console.log("[Detector]  Stopped frame capture"))}}}}catch(T){console.error("MediaPipe initialization error:",T),N(`MediaPipe error: ${T.message}`)}},ue=T=>{var L;const p=n.current,M=t.current;if(!p||!M)return;const E=p.getContext("2d");p.width=M.videoWidth,p.height=M.videoHeight,E.drawImage(M,0,0,p.width,p.height);let x="None";if(T.multiHandLandmarks&&T.multiHandLandmarks.length>0){Ot("onResults: hands=",T.multiHandLandmarks.length);let U=null,ie=0;if(T.multiHandLandmarks.forEach(ae=>{const ye=ae[0];ye.y>ie&&(ie=ye.y,U=ae)}),T.multiHandLandmarks.forEach(ae=>{z(E,ae,p.width,p.height)}),U){const ae=U[0],ye=ae.x*p.width,ge=ae.y*p.height;E.fillStyle="lime",E.beginPath(),E.arc(ye,ge,10,0,2*Math.PI),E.fill(),E.fillStyle="lime",E.font="16px Arial",E.fillText("SELECTED",ye-40,ge-15);const Be=Math.max(10,Math.min(300,Math.floor(((L=V.current)==null?void 0:L.roiSize)||60)))/2,Fe=Math.max(0,ye-Be),He=Math.max(0,ge-Be),We=Math.min(p.width,ye+Be),Ie=Math.min(p.height,ge+Be);E.strokeStyle="lime",E.lineWidth=3,E.strokeRect(Fe,He,We-Fe,Ie-He);const Ce=We-Fe,_e=Ie-He;if(Ce>0&&_e>0)try{const ze=E.getImageData(Fe,He,Ce,_e),rt=k.current,Jt=R.current,Ye=Z(ze,rt,Jt);x=Ye.status,w({a:Ye.percentA,b:Ye.percentB}),Ot("Detection result:",x,{roi:{x1:Fe,y1:He,w:Ce,h:_e}})}catch(ze){console.warn("[Detector] Failed to get ROI image data:",ze.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:Ce,height:_e}),x="None",w({a:null,b:null})}}let I="#ffffff";x==="Player A"&&k.current?I=ke(k.current):x==="Player B"&&R.current&&(I=ke(R.current)),E.fillStyle=I,E.font="bold 32px Arial",E.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=p,window.braceletDetectorVideo=M)},z=(T,p,M,E)=>{T.strokeStyle="white",T.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([I,L])=>{const U=p[I],ie=p[L];T.beginPath(),T.moveTo(U.x*M,U.y*E),T.lineTo(ie.x*M,ie.y*E),T.stroke()}),p.forEach(I=>{T.fillStyle="red",T.beginPath(),T.arc(I.x*M,I.y*E,5,0,2*Math.PI),T.fill()})},H=T=>{const p=T.data;let M=0,E=0;for(let x=0;x<p.length;x+=4){const I=p[x],L=p[x+1],U=p[x+2],ie=ee(I,L,U);(ie[0]>=gn.red.lower1[0]&&ie[0]<=gn.red.upper1[0]||ie[0]>=gn.red.lower2[0]&&ie[0]<=gn.red.upper2[0])&&ie[1]>=gn.red.lower1[1]&&ie[2]>=gn.red.lower1[2]&&M++,ie[0]>=gn.blue.lower[0]&&ie[0]<=gn.blue.upper[0]&&ie[1]>=gn.blue.lower[1]&&ie[2]>=gn.blue.lower[2]&&E++}return{redCount:M,blueCount:E}},Z=(T,p,M)=>{var Be,Fe,He,We;const E=T.data;if(p&&!M)return{status:"Player A",percentA:null,percentB:null};if(M&&!p)return{status:"Player B",percentA:null,percentB:null};const x=((Be=V.current)==null?void 0:Be.hueWeight)??4,I=((Fe=V.current)==null?void 0:Fe.satWeight)??2,L=((He=V.current)==null?void 0:He.valWeight)??1,U=((We=V.current)==null?void 0:We.sensitivity)??0;if(p&&M){let Ie=0,Ce=0,_e=0;for(let Ye=0;Ye<E.length;Ye+=4){const at=E[Ye],it=E[Ye+1],St=E[Ye+2],[zt,Lt,dn]=ee(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-p.h),180-Math.abs(zt-p.h)),On=Math.min(Math.abs(zt-M.h),180-Math.abs(zt-M.h)),wr=Math.abs(Lt-p.s),Zt=Math.abs(Lt-M.s),Xi=Math.abs(dn-p.v),qt=Math.abs(dn-M.v),fn=Ln*x+wr*I+Xi*L,Zr=On*x+Zt*I+qt*L;Math.min(fn,Zr)>180||(fn<=Zr?Ie+=zn:Ce+=zn,_e+=zn)}if(_e===0)return{status:"None",percentA:0,percentB:0};const ze=Ie/Math.max(1e-6,_e),rt=Ce/Math.max(1e-6,_e),Jt=.12*(1+.8*Math.max(0,Math.min(1,U)));return ze>=Jt&&ze>=rt?{status:"Player A",percentA:ze,percentB:rt}:rt>=Jt&&rt>ze?{status:"Player B",percentA:ze,percentB:rt}:{status:"None",percentA:ze,percentB:rt}}const{redCount:ie,blueCount:ae}=H(T),ye=ie+ae;if(ye===0)return{status:"None",percentA:0,percentB:0};const ge=ie/ye,Pe=ae/ye;return ge>=.15&&ge>=Pe?{status:"Player A",percentA:ge,percentB:Pe}:Pe>=.15&&Pe>ge?{status:"Player B",percentA:ge,percentB:Pe}:{status:"None",percentA:ge,percentB:Pe}},ee=(T,p,M)=>{T/=255,p/=255,M/=255;const E=Math.max(T,p,M),x=Math.min(T,p,M),I=E-x;let L=0;I!==0&&(E===T?L=60*((p-M)/I%6):E===p?L=60*((M-T)/I+2):L=60*((T-p)/I+4)),L<0&&(L+=360);const U=E===0?0:I/E*255,ie=E*255;return[L/2,U,ie]},F=T=>{},b=T=>{Me(T),T?localStorage.setItem(et.selectedCamera,T):localStorage.removeItem(et.selectedCamera)},G=()=>{const T=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),p=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),M=URL.createObjectURL(p),E=document.createElement("a");E.href=M,E.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,E.click();const x=T.map(ie=>`${ie.timestamp}: ${ie.status}`).join(`
`),I=new Blob([x],{type:"text/plain"}),L=URL.createObjectURL(I),U=document.createElement("a");U.href=L,U.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,U.click()},re=()=>{localStorage.removeItem("braceletDetections"),C([])};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:G,title:"Download Logs",children:""}),d.jsx("button",{onClick:re,title:"Clear Logs",children:""}),d.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),d.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{children:"Camera:"}),d.jsxs("select",{value:je,onChange:T=>b(T.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[d.jsx("option",{value:"",children:"System Default"}),pe.map((T,p)=>{var U;const M=!!T.deviceId,E=M?T.deviceId:"",x=M?T.deviceId:`camera-${p}`,I=((U=T.label)==null?void 0:U.trim())||`Camera ${p+1}`,L=M?`  ${T.deviceId.slice(0,8)}`:" (needs permission)";return d.jsxs("option",{value:E,disabled:!M,children:[I,L]},x)})]})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),d.jsx("canvas",{ref:n,className:"output_canvas"}),d.jsxs("div",{className:"detector-info",children:[d.jsxs("div",{className:"status-display",children:["Status: ",d.jsx("span",{style:{color:Re(f),fontWeight:700},children:f})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:O?ke(O):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:S.a==null?"":`${Math.round(Math.max(0,Math.min(1,S.a))*100)}%`})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:$?ke($):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:S.b==null?"":`${Math.round(Math.max(0,Math.min(1,S.b))*100)}%`})]})]}),d.jsxs("div",{className:"log-count",children:["Logs: ",y?y.length:0]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",O?`h${Math.round(O.h)} s${Math.round(O.s)} v${Math.round(O.v)}`:""]}),d.jsxs("div",{children:["B: ",$?`h${Math.round($.h)} s${Math.round($.s)} v${Math.round($.v)}`:""]})]})]})]})]})})}const hs=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},Hv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,f=a*(1-Math.abs(r/60%2-1)),h=l-a;let y=0,C=0,A=0;r>=0&&r<60?(y=a,C=f,A=0):r<120?(y=f,C=a,A=0):r<180?(y=0,C=a,A=f):r<240?(y=0,C=f,A=a):r<300?(y=f,C=0,A=a):(y=a,C=0,A=f);const N=Math.round((y+h)*255),O=Math.round((C+h)*255),D=Math.round((A+h)*255);return`rgb(${N}, ${O}, ${D})`},ed=e=>e?Hv(e.h,e.s,e.v):"#444";function Wv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(!1),o=P.useRef(0),[l,a]=P.useState(!1),[f,h]=P.useState(""),[y,C]=P.useState(null),[A,N]=P.useState(null),O=(z,H)=>{const Z=localStorage.getItem(z);if(Z===null)return H;const ee=parseFloat(Z);return Number.isFinite(ee)?ee:H},[D,$]=P.useState(()=>{const z=O(wn.roiSize,44);return z>10?z:44}),[he,S]=P.useState(()=>O(wn.hueWeight,4)),[w,k]=P.useState(()=>O(wn.satWeight,2)),[R,W]=P.useState(()=>O(wn.valWeight,1)),[q,K]=P.useState(()=>O(wn.sensitivity,0)),[V,me]=P.useState(!1),[Y,fe]=P.useState("idle"),[te,pe]=P.useState(5),de=P.useRef({A:[],B:[]});P.useEffect(()=>{r.current=!0;try{const z=JSON.parse(localStorage.getItem("calibrationA")||"null"),H=JSON.parse(localStorage.getItem("calibrationB")||"null");z&&C(z),H&&N(H)}catch{}return(async()=>await Ee())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(H=>H.stop()),n.current=null);const z=e.current;z&&(z.srcObject=null)}},[]),P.useEffect(()=>{localStorage.setItem(wn.roiSize,String(D))},[D]),P.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(he))},[he]),P.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),P.useEffect(()=>{localStorage.setItem(wn.valWeight,String(R))},[R]),P.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(q))},[q]);const Ee=P.useCallback(async()=>{const z=e.current;if(!z)return;n.current&&(n.current.getTracks().forEach(Z=>Z.stop()),n.current=null);const H=++o.current;a(!1),h("Requesting camera...");try{const Z=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||H!==o.current){Z.getTracks().forEach(ee=>ee.stop());return}if(n.current=Z,z.srcObject=Z,await new Promise(ee=>{if(z.readyState>=1&&z.videoWidth>0)return ee();const b=()=>{z.removeEventListener("loadedmetadata",b),ee()};z.addEventListener("loadedmetadata",b,{once:!0}),setTimeout(()=>{z.removeEventListener("loadedmetadata",b),ee()},1500)}),!r.current||H!==o.current){Z.getTracks().forEach(ee=>ee.stop());return}try{await z.play(),hs("video.play resolved")}catch(ee){hs("video.play rejected",ee)}a(!0),h("")}catch(Z){h(`Camera error: ${(Z==null?void 0:Z.message)||Z}`),hs("getUserMedia error",Z)}},[]),je=(z,H,Z)=>{z/=255,H/=255,Z/=255;const ee=Math.max(z,H,Z),F=Math.min(z,H,Z),b=ee-F;let G=0;b!==0&&(ee===z?G=60*((H-Z)/b%6):ee===H?G=60*((Z-z)/b+2):G=60*((z-H)/b+4)),G<0&&(G+=360);const re=ee===0?0:b/ee*255,T=ee*255;return[G/2,re,T]},Me=()=>{const z=e.current,H=t.current;if(!z||!H||z.videoWidth===0)return null;const Z=z.videoWidth,ee=z.videoHeight;H.width=Z,H.height=ee;const F=H.getContext("2d");F.drawImage(z,0,0,Z,ee);const b=Math.max(10,Math.min(300,Math.floor(D))),G=Math.floor(Z/2-b/2),re=Math.floor(ee/2-b/2),p=F.getImageData(G,re,b,b).data;let M=0,E=0,x=0,I=0,L=0;for(let Fe=0;Fe<p.length;Fe+=4){const[He,We,Ie]=je(p[Fe],p[Fe+1],p[Fe+2]),Ce=He*2*(Math.PI/180);M+=Math.cos(Ce),E+=Math.sin(Ce),x+=We,I+=Ie,L++}if(L===0)return null;const U=x/L,ie=I/L,ae=M/L,ye=E/L;let Pe=Math.atan2(ye,ae)*(180/Math.PI);return Pe<0&&(Pe+=360),{h:Pe/2,s:U,v:ie}},J=z=>{const H=Me();if(!H){h("Could not sample video frame.");return}z==="A"?(localStorage.setItem("calibrationA",JSON.stringify(H)),C(H),h(`Saved Player A: h${H.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(H)),N(H),h(`Saved Player B: h${H.h.toFixed(0)}`))},se=z=>{z==="A"?(localStorage.removeItem("calibrationA"),C(null)):(localStorage.removeItem("calibrationB"),N(null)),h("Cleared")},oe=()=>{me(!0),fe("playerA"),pe(5),de.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};P.useEffect(()=>{if(!(!V||Y==="idle"||Y==="optimizing"||Y==="complete"))if(te>0){const z=setTimeout(()=>{pe(te-1)},1e3);return()=>clearTimeout(z)}else Y==="playerA"?(fe("switching"),pe(3),h("Switch to Player B... Get ready!")):Y==="switching"?(fe("playerB"),pe(5),h("Hold Player B bracelet in center square...")):Y==="playerB"&&(fe("optimizing"),we())},[V,Y,te]),P.useEffect(()=>{if(!V||Y==="idle"||Y==="switching"||Y==="optimizing"||Y==="complete")return;const z=setInterval(()=>{const H=Me();H&&(Y==="playerA"?de.current.A.push(H):Y==="playerB"&&de.current.B.push(H))},200);return()=>clearInterval(z)},[V,Y]);const we=()=>{h("Optimizing parameters...");const z=de.current.A,H=de.current.B;if(z.length===0||H.length===0){h("Error: Not enough samples collected!"),me(!1),fe("idle");return}const Z=ke(z),ee=ke(H),F=Math.min(Math.abs(Z.h-ee.h),180-Math.abs(Z.h-ee.h)),b=Math.abs(Z.s-ee.s),G=Math.abs(Z.v-ee.v),re=F/90,T=b/255,p=G/255,M=Re(z),E=Re(H),x={h:(M.h+E.h)/2,s:(M.s+E.s)/2,v:(M.v+E.v)/2},I=re+T+p,L=I>0?re/I*(1/(1+x.h/20))*6:2,U=I>0?T/I*(1/(1+x.s/50))*4:1,ie=I>0?p/I*(1/(1+x.v/50))*3:.5;S(Math.max(.5,Math.min(6,L))),k(Math.max(.1,Math.min(4,U))),W(Math.max(.1,Math.min(3,ie)));const ae=Oe(z,H,Z,ee),ye=Math.max(0,Math.min(.8,ae*.5));K(ye),localStorage.setItem("calibrationA",JSON.stringify(Z)),localStorage.setItem("calibrationB",JSON.stringify(ee)),C(Z),N(ee),fe("complete"),h(` Auto-calibration complete! Collected ${z.length+H.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{me(!1),fe("idle")},3e3)},ke=z=>{const H=z.map(E=>E.h),Z=z.map(E=>E.s).sort((E,x)=>E-x),ee=z.map(E=>E.v).sort((E,x)=>E-x);let F=0,b=0;H.forEach(E=>{const x=E*2*(Math.PI/180);F+=Math.cos(x),b+=Math.sin(x)});let re=Math.atan2(b/H.length,F/H.length)*(180/Math.PI);re<0&&(re+=360);const T=re/2,p=Z[Math.floor(Z.length/2)],M=ee[Math.floor(ee.length/2)];return{h:T,s:p,v:M}},Re=z=>{const H=z.reduce((ee,F)=>({h:ee.h+F.h,s:ee.s+F.s,v:ee.v+F.v}),{h:0,s:0,v:0});H.h/=z.length,H.s/=z.length,H.v/=z.length;const Z=z.reduce((ee,F)=>({h:ee.h+Math.pow(F.h-H.h,2),s:ee.s+Math.pow(F.s-H.s,2),v:ee.v+Math.pow(F.v-H.v,2)}),{h:0,s:0,v:0});return{h:Z.h/z.length,s:Z.s/z.length,v:Z.v/z.length}},Oe=(z,H,Z,ee)=>{let F=0;const b=Math.min(z.length,H.length)*2;return z.forEach(G=>{const re=B(G,Z);B(G,ee)<re*1.5&&F++}),H.forEach(G=>{const re=B(G,Z),T=B(G,ee);re<T*1.5&&F++}),F/b},B=(z,H)=>{const Z=Math.min(Math.abs(z.h-H.h),180-Math.abs(z.h-H.h)),ee=Math.abs(z.s-H.s),F=Math.abs(z.v-H.v);return Math.sqrt(Z*Z+ee*ee+F*F)},ue=()=>{me(!1),fe("idle"),pe(5),h("Generic mode cancelled")};return d.jsxs("div",{className:"calib-root",children:[d.jsxs("div",{className:"calib-header",children:[d.jsx("h2",{children:"Color Calibration"}),d.jsxs("div",{className:"calib-actions",children:[d.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),d.jsx("button",{onClick:Ee,children:"Restart Camera"})]})]}),f&&d.jsx("div",{className:"calib-message",children:f}),d.jsxs("div",{className:"calib-content",children:[d.jsx("div",{children:d.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[d.jsx("div",{className:"label",children:"Live Preview"}),d.jsx("div",{className:"value",style:{marginBottom:8},children:V?`Generic Mode Active: ${Y==="playerA"?"Player A":Y==="switching"?"Switching...":Y==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),d.jsxs("div",{className:"calib-video-wrap",children:[d.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),d.jsx("div",{className:"calib-center-box",style:{width:D,height:D,borderColor:"#22d3ee",borderWidth:V?"4px":"3px",boxShadow:V?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),V&&te>0&&d.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:te})]})]})}),d.jsxs("div",{className:"calib-controls",children:[d.jsxs("div",{className:"calib-block",style:{background:V?"#1a2332":"#0f172a",border:V?"2px solid #22d3ee":"1px solid #1f2937"},children:[d.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),d.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),V?d.jsxs("div",{style:{marginTop:8},children:[d.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[Y==="playerA"&&`Player A: Hold bracelet steady... ${te}s`,Y==="switching"&&`Switch hands! Get Player B ready... ${te}s`,Y==="playerB"&&`Player B: Hold bracelet steady... ${te}s`,Y==="optimizing"&&"Optimizing parameters...",Y==="complete"&&" Complete!"]}),d.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[Y==="playerA"&&`Samples collected: ${de.current.A.length}`,Y==="switching"&&`Player A: ${de.current.A.length} samples collected`,Y==="playerB"&&`Samples collected: ${de.current.B.length}`]}),Y!=="complete"&&d.jsx("button",{onClick:ue,style:{background:"#ef4444"},children:"Cancel"})]}):d.jsx("div",{className:"buttons",children:d.jsx("button",{onClick:oe,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Detector Settings"}),d.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Detection square size"}),d.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:D,onChange:z=>$(Number(z.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[D,"px"]})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Hue weight"}),d.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:he,onChange:z=>S(Number(z.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:he.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Saturation weight"}),d.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:z=>k(Number(z.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Value weight"}),d.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:R,onChange:z=>W(Number(z.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:R.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:q,onChange:z=>K(Number(z.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[(q*100).toFixed(0),"%"]})]}),d.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player A"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:ed(y)}}),d.jsx("span",{children:y?`h${y.h.toFixed(0)} s${y.s.toFixed(0)} v${y.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>J("A"),disabled:!l,children:"Save A"}),d.jsx("button",{onClick:()=>se("A"),children:"Clear A"})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player B"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:ed(A)}}),d.jsx("span",{children:A?`h${A.h.toFixed(0)} s${A.s.toFixed(0)} v${A.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>J("B"),disabled:!l,children:"Save B"}),d.jsx("button",{onClick:()=>se("B"),children:"Clear B"})]})]})]})]}),d.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function wh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var T;const[a,f]=P.useState(e),[h,y]=P.useState(0),[C,A]=P.useState(!1),[N,O]=P.useState(1),[D,$]=P.useState(Pi()),[he,S]=P.useState(!0),[w,k]=P.useState([]),[R,W]=P.useState(null),[q,K]=P.useState(!1),V=P.useRef(null),me=P.useRef(null),Y=P.useRef(null),fe=n&&!e,te=["summary-container",r].filter(Boolean).join(" "),pe=(p,M)=>{const E=Y.current;if(!E)return 0;const x=E.offsetHeight;return(p+.5)*x},de=P.useCallback((p,M=null)=>{const E=M||a;if(!E)return;let x=Pi(),I=!0;const L=[];let U=null;for(let ie=0;ie<=p&&ie<E.moves.length;ie++){const ae=E.moves[ie];ae.phase==="experiment"&&I&&(I=!1,x=Pi());const ye=ae.all_positions||(ae.allPositions?ae.allPositions.map(ge=>[ge[0]*.07,ge[1]*.07]):null);if(ae.type==="moveblock"&&ye)ye.length===10&&x.length===10?x=x.map((ge,Pe)=>{const Be=ye[Pe];return Be&&Array.isArray(Be)&&Be.length===2?{...ge,position:[Be[0],Be[1]]}:ge}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${ye==null?void 0:ye.length}`),x=aa(sa(x),I),U=ae.blockId!==void 0?ae.blockId:ae.unit;else if(ae.type==="added shape to gallery"&&ae.gallery_normalized){const ge=document.createElement("canvas");ge.width=400,ge.height=400;const Pe=ge.getContext("2d");Pe.fillStyle="#000",Pe.fillRect(0,0,400,400),ae.gallery_normalized.forEach(Be=>{const Fe=(Be[0]+.5)*400,He=(Be[1]+.5)*400;Pe.fillStyle="green";const We=60;Pe.fillRect(Fe-We/2,He-We/2,We,We)}),L.push({number:ae.gallery_shape_number,image:ge.toDataURL()}),U=null}}$(x),S(I),k(L),W(U)},[a]),Ee=p=>{f(p),y(0),A(!1),setTimeout(()=>{de(0,p)},0)},je=p=>{if(!fe)return;const M=p.target.files[0];if(!M)return;const E=new FileReader;E.onload=x=>{try{const I=JSON.parse(x.target.result);Ee(I)}catch(I){alert("Failed to parse JSON file: "+I.message)}},E.readAsText(M)};P.useEffect(()=>{e&&Ee(e)},[e]),P.useEffect(()=>{a&&h>=0&&de(h)},[a,h,de]),P.useEffect(()=>{const p=()=>{a&&h>=0&&setTimeout(()=>{de(h)},100)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[a,h,de]);const Me=p=>{a&&(p<0||p>=a.moves.length||(de(p),y(p)))},J=()=>{if(!a||C)return;A(!0),y(0),de(0);let p=0;me.current=setInterval(()=>{if(p>=a.moves.length){se();return}p++,de(p),y(p)},1e3/N)},se=()=>{me.current&&(clearInterval(me.current),me.current=null),A(!1)};if(P.useEffect(()=>()=>{me.current&&clearInterval(me.current)},[]),P.useEffect(()=>{if(C&&me.current){clearInterval(me.current),me.current=null;const p=h;y(0),A(!1),setTimeout(()=>{y(p),J()},0)}},[N]),!a)return fe?d.jsx("div",{className:te,children:d.jsxs("div",{className:"summary-upload",children:[d.jsx("h1",{children:t}),d.jsx("p",{children:"Load a game session JSON file to view the replay"}),d.jsx("input",{ref:V,type:"file",accept:".json",onChange:je,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var p;return(p=V.current)==null?void 0:p.click()},children:"Load JSON File"})]})}):null;const oe=a.moves[h],we=a.moves.length,ke=((T=a.summary)==null?void 0:T.movesByPlayer)||{},Re=Object.entries(ke||{}),Oe=(p,M=1)=>Number.isFinite(p)?p.toFixed(M):"",B=a.sessionInfo||{},ue=B.subjectId||B.id||a.subjectId||a.id||null,z=B.sessionGameId||a.sessionGameId||ue||null,H=B.condition||a.condition||null,Z=a.startTime||B.startedAt||B.date||null,ee=a.endTime||B.endedAt||null,F=p=>{if(!p)return null;try{const M=new Date(p);if(!Number.isNaN(M.getTime()))return M.toLocaleString()}catch{}return p},b=[];z&&b.push({label:"Session ID",value:z}),ue&&ue!==z&&b.push({label:"Participant",value:ue}),H&&b.push({label:"Condition",value:H});const G=F(Z);G&&b.push({label:"Start",value:G});const re=F(ee);return re&&b.push({label:"End",value:re}),d.jsxs("div",{className:te,children:[d.jsxs("div",{className:"summary-header",children:[d.jsx("h1",{children:t}),b.length>0&&d.jsx("div",{className:"summary-session-info",children:b.map(p=>d.jsxs("div",{className:"summary-session-info-item",children:[d.jsx("span",{className:"summary-session-info-label",children:p.label}),d.jsx("span",{className:"summary-session-info-value",children:p.value})]},`${p.label}-${p.value}`))})]}),d.jsxs("div",{className:"summary-main",children:[d.jsxs("div",{className:"summary-left",children:[d.jsx("div",{className:"summary-game-area",children:d.jsxs("div",{className:"game-canvas",ref:Y,children:[d.jsx("div",{className:"gallery",children:d.jsx("div",{className:"gallery-frame",children:w.length>0?d.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),D.map((p,M)=>{const E=p.position||[0,0];return!Array.isArray(E)||E.length!==2||!Number.isFinite(E[0])||!Number.isFinite(E[1])?(console.warn(`Invalid position for block ${p.id}:`,E),null):d.jsx("div",{className:`block ${p.canMove?"movable":""} ${p.id===R?"highlighted":""}`,style:{left:`${pe(E[0])}px`,top:`${pe(E[1])}px`,backgroundColor:p.color||"green",cursor:p.canMove?"grab":"default",zIndex:p.id===R?20:M+1}},p.id)})]})}),d.jsxs("div",{className:"summary-progress",children:[d.jsx("input",{type:"range",min:"0",max:Math.max(0,we-1),value:h,onChange:p=>Me(parseInt(p.target.value)),style:{width:"100%"}}),d.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",we,oe&&d.jsxs("span",{className:"move-info",children:[" "," Player: ",oe.player,Array.isArray(oe.position)&&oe.position.length===2&&`  Position: (${oe.position[0]}, ${oe.position[1]})`,Number.isFinite(oe.holdTime)&&`  Hold: ${Oe(oe.holdTime,2)}s`," "," Time: ",Oe(oe.elapsed,1),"s"]})]})]})]}),d.jsxs("div",{className:"summary-right",children:[d.jsxs("div",{className:"summary-stats",children:[d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Duration"}),d.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),d.jsx("span",{className:"summary-stats-value",children:we})]}),d.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[d.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),d.jsx("div",{className:"summary-stats-value",children:Re.length===0?d.jsx("span",{children:""}):Re.map(([p,M])=>d.jsxs("div",{children:[p,": ",M]},p))})]})]}),d.jsxs("div",{className:"summary-controls",children:[d.jsx("button",{onClick:()=>Me(0),disabled:h===0,children:" First"}),d.jsx("button",{onClick:()=>Me(h-1),disabled:h===0,children:" Previous"}),d.jsx("button",{onClick:C?se:J,children:C?" Pause":" Play"}),d.jsx("button",{onClick:()=>Me(h+1),disabled:h>=we-1,children:" Next"}),d.jsx("button",{onClick:()=>Me(we-1),disabled:h>=we-1,children:" Last"}),d.jsxs("div",{className:"speed-control",children:[d.jsx("label",{children:"Speed:"}),d.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:N,onChange:p=>O(parseFloat(p.target.value))}),d.jsxs("span",{children:[N,"x"]})]}),fe&&d.jsxs(d.Fragment,{children:[d.jsx("input",{ref:V,type:"file",accept:".json",onChange:je,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var p;return(p=V.current)==null?void 0:p.click()},children:" Load New File"})]})]}),d.jsxs("div",{className:"summary-moves-list",children:[d.jsxs("div",{className:"move-list-header",children:[d.jsx("h2",{children:"Move History"}),l&&d.jsx("button",{className:`edit-mode-toggle ${q?"active":""}`,onClick:()=>K(!q),children:q?" Done Editing":"Edit Players"})]}),d.jsx("div",{className:"moves-scroll",children:a.moves.map((p,M)=>d.jsxs("div",{className:`move-item ${M===h?"active":""} ${q?"edit-mode":""}`,onClick:()=>!q&&Me(M),children:[d.jsx("div",{className:"move-number",children:M+1}),p.camera_frame&&d.jsx("div",{className:"move-camera-frame",children:d.jsx("img",{src:p.camera_frame,alt:`Camera frame for move ${M+1}`,className:"camera-frame-thumbnail"})}),d.jsxs("div",{className:"move-details",children:[d.jsx("div",{className:"move-type",children:p.type}),q&&l?d.jsxs("div",{className:"move-player-edit",children:[d.jsx("label",{children:"Player:"}),d.jsxs("select",{value:p.player||"Unknown",onChange:E=>{const x=E.target.value;l(p._id,x)},onClick:E=>E.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):d.jsxs("div",{className:"move-player",children:["Player: ",p.player]}),p.blockId!==null&&p.blockId!==void 0||p.unit!==null&&p.unit!==void 0?d.jsxs("div",{className:"move-unit",children:["Block: ",p.blockId!==void 0?p.blockId:p.unit]}):null,Array.isArray(p.position)&&p.position.length===2&&d.jsxs("div",{className:"move-position",children:["Position: (",p.position[0],", ",p.position[1],")"]}),Number.isFinite(p.holdTime)&&p.holdTime>0&&d.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",Oe(p.holdTime,2),"s"]}),d.jsxs("div",{className:"move-time",children:["Time: ",Oe(p.elapsed,1),"s"]})]})]},M))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Vv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),l=P.useRef(null),a=P.useRef(null),f=P.useRef(null),h=P.useRef(null),[y,C]=P.useState(""),[A,N]=P.useState(!1),[O,D]=P.useState({camA:"None",camB:"None",merged:"None"}),[$,he]=P.useState(!0),[S,w]=P.useState(null),[k,R]=P.useState(null),W=P.useRef(null),q=P.useRef(null),K=(p,M)=>{const E=localStorage.getItem(p);if(E===null)return M;const x=parseFloat(E);return Number.isFinite(x)?x:M},[V,me]=P.useState(()=>({roiSize:(()=>{const p=K(kt.roiSize,44);return p>10?p:44})(),hueWeight:K(kt.hueWeight,4),satWeight:K(kt.satWeight,2),valWeight:K(kt.valWeight,1),sensitivity:K(kt.sensitivity,0)})),Y=P.useRef(V),[fe,te]=P.useState([]),[pe,de]=P.useState(""),[Ee,je]=P.useState("");P.useEffect(()=>{let p=!0;(async()=>{try{const I=(await navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="videoinput");if(I.length===0){C("No cameras found");return}te(I);const L=I.slice(0,2).map(U=>U.deviceId);de(L[0]||""),je(L[1]||L[0]||""),await Me(L[0],e,f),L[1]?await Me(L[1],t,h):await Me(L[0],t,h),await Oe(),await B("A",e,l),await B("B",t,a)}catch(x){if(!p)return;C((x==null?void 0:x.message)||String(x))}})();const M=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),I=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),I&&R({h:I.h,s:I.s,v:I.v})}catch{ut("No existing calibrations")}};M();const E=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&M(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&me(I=>({roiSize:(()=>{const L=K(kt.roiSize,(I==null?void 0:I.roiSize)??44);return L>10?L:(I==null?void 0:I.roiSize)??44})(),hueWeight:K(kt.hueWeight,(I==null?void 0:I.hueWeight)??4),satWeight:K(kt.satWeight,(I==null?void 0:I.satWeight)??2),valWeight:K(kt.valWeight,(I==null?void 0:I.valWeight)??1),sensitivity:K(kt.sensitivity,(I==null?void 0:I.sensitivity)??0)})))};return window.addEventListener("storage",E),()=>{if(p=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),f.current&&(f.current.getTracks().forEach(L=>L.stop()),f.current=null),h.current&&(h.current.getTracks().forEach(L=>L.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const I=t.current;I&&(I.srcObject=null),window.removeEventListener("storage",E)}},[]);const Me=async(p,M,E)=>{const x={video:{deviceId:{exact:p}}};ut("Starting camera with deviceId:",p);const I=await navigator.mediaDevices.getUserMedia(x);E.current=I;const L=M.current;if(!L){ut("Video element not found!");return}L.srcObject=I,ut("Stream assigned to video element, waiting for metadata..."),await new Promise(U=>{if(L.readyState>=2&&L.videoWidth>0&&L.videoHeight>0)return ut("Video already ready:",L.videoWidth,"x",L.videoHeight),U();const ae=()=>{ut("loadedmetadata event fired:",L.videoWidth,"x",L.videoHeight),L.removeEventListener("loadedmetadata",ae),U()};L.addEventListener("loadedmetadata",ae,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),L.removeEventListener("loadedmetadata",ae),U()},2e3)});try{await L.play(),ut("Video play() succeeded")}catch(U){ut("Video play() failed:",U)}},J=P.useRef(null),se=P.useRef(null),oe=P.useRef(null),we=P.useRef(!1),ke=async()=>{if(!we.current){we.current=!0;try{for(;se.current||oe.current;){const p=o.current;if(!p)break;let M=null,E=null;if(se.current?(M="A",E=se.current,se.current=null):oe.current&&(M="B",E=oe.current,oe.current=null),!!E){J.current=M;try{await p.send({image:E})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{we.current=!1}}},Re=(p,M)=>{p==="A"?se.current=M:oe.current=M,Promise.resolve().then(ke)},Oe=async()=>{if(o.current)return o.current;try{const p=await(async()=>{try{if(typeof sl.Hands=="function")return sl.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const E=document.getElementById("mp-hands-cdn-script");if(E&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const I=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(I),x())},50);setTimeout(()=>{clearInterval(I),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(E||await new Promise((x,I)=>{const L=document.createElement("script");L.id="mp-hands-cdn-script",L.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",L.async=!0,L.onload=()=>x(),L.onerror=U=>I(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(L)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),M=new p({locateFile:E=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${E}`});return M.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),M.onResults(E=>{const x=J.current;x==="A"?H(E):x==="B"&&Z(E)}),o.current=M,M}catch(p){return console.error("MediaPipe initialization error:",p),C(`MediaPipe error: ${p.message}`),null}},B=async(p,M,E)=>{if(!await Oe())return;const I=M.current;if(!I){ut(`Video ref for ${p} not found`);return}ut(`Initializing manual frame capture for camera ${p}, video dimensions:`,I.videoWidth,"x",I.videoHeight);let L=null;const U=()=>{const ie=M.current;ie&&ie.readyState>=2&&ie.videoWidth>0&&Re(p,ie),L=requestAnimationFrame(U)};L=requestAnimationFrame(U),E.current={stop:()=>{L&&(cancelAnimationFrame(L),L=null,ut(`Stopped manual frame capture for camera ${p}`))}},ut(`Manual frame capture started for camera ${p}`)},ue=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),z=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null});P.useEffect(()=>{W.current=S},[S]),P.useEffect(()=>{q.current=k},[k]),P.useEffect(()=>{Y.current=V},[V]);const H=p=>ee(p,n,"A"),Z=p=>ee(p,r,"B"),ee=(p,M,E)=>{var We;const x=M.current;if(!x)return;const I=x.getContext("2d");if(!I)return;const L=E==="A"?e.current:t.current;if(!L||L.videoWidth===0||L.videoHeight===0){E==="A"?ue.current={wristY:null,wristX:null,landmarks:null,player:"None"}:z.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=L.videoWidth,x.height=L.videoHeight,I.drawImage(L,0,0,x.width,x.height),I.fillStyle="rgba(0, 0, 0, 0.6)",I.fillRect(x.width-80,5,75,20),I.fillStyle="white",I.font="bold 14px Arial",I.fillText(`Camera ${E}`,x.width-75,20);let U=null,ie=null,ae=null,ye=[];if(p.multiHandLandmarks&&p.multiHandLandmarks.length>0)for(const Ie of p.multiHandLandmarks){const Ce=Ie[0],_e=Ce.x*x.width,ze=Ce.y*x.height;ye.push({x:_e,y:ze,landmarks:Ie}),(U===null||($?ze<U:ze>U))&&(U=ze,ie=Ie,ae=_e)}ye.forEach(({x:Ie,y:Ce})=>{I.fillStyle="orange",I.beginPath(),I.arc(Ie,Ce,8,0,Math.PI*2),I.fill()});let ge="None";if(ie){I.fillStyle="lime",I.beginPath(),I.arc(ae,U,10,0,2*Math.PI),I.fill(),I.fillStyle="lime",I.font="16px Arial",I.fillText("SELECTED",ae-40,U-15);const Ce=Math.max(10,Math.min(300,Math.floor(((We=Y.current)==null?void 0:We.roiSize)||60)))/2,_e=Math.max(0,ae-Ce),ze=Math.max(0,U-Ce),rt=Math.min(x.width,ae+Ce),Jt=Math.min(x.height,U+Ce),Ye=Math.max(0,Math.floor(_e)),at=Math.max(0,Math.floor(ze));let it=Math.floor(rt-_e),St=Math.floor(Jt-ze);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Ye),St=Math.min(St,x.height-at),it>0&&St>0){I.strokeStyle="lime",I.lineWidth=3,I.strokeRect(Ye,at,it,St);try{const zt=I.getImageData(Ye,at,it,St),Lt=W.current,dn=q.current;ge=b(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),ge="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Ye,top:at})}if(ye.length>=1){let Ie=ye[0].y,Ce=ye[0].y;ye.forEach(rt=>{rt.y<Ie&&(Ie=rt.y),rt.y>Ce&&(Ce=rt.y)}),I.strokeStyle="yellow",I.setLineDash([6,4]),I.beginPath(),I.moveTo(0,$?Ie:Ce),I.lineTo(x.width,$?Ie:Ce),I.stroke(),I.strokeStyle="cyan",I.beginPath(),I.moveTo(0,$?Ce:Ie),I.lineTo(x.width,$?Ce:Ie),I.stroke(),I.setLineDash([]);const _e=$?"A (top)":"A (bottom)",ze=$?"B (bottom)":"B (top)";I.fillStyle="lime",I.font="16px Arial",I.fillText(_e,6,Math.max(14,($?Ie:Ce)-6)),I.fillStyle="dodgerblue",I.fillText(ze,6,Math.min(x.height-6,($?Ce:Ie)+18))}const Pe={wristY:U,wristX:ae,landmarks:ie,player:ge};E==="A"?ue.current=Pe:z.current=Pe;const Be=ue.current.wristY,Fe=z.current.wristY;let He="None";if(Be!=null||Fe!=null){const Ie=$?(_e,ze)=>_e==null?ze:Math.min(_e,ze):(_e,ze)=>_e==null?ze:Math.max(_e,ze);[Be,Fe].filter(_e=>_e!=null).reduce(Ie,null)===Be?He=ue.current.player:He=z.current.player}D({camA:ue.current.player,camB:z.current.player,merged:He})},F=(p,M,E)=>{p/=255,M/=255,E/=255;const x=Math.max(p,M,E),I=Math.min(p,M,E),L=x-I;let U=0;L!==0&&(x===p?U=60*((M-E)/L%6):x===M?U=60*((E-p)/L+2):U=60*((p-M)/L+4)),U<0&&(U+=360);const ie=x===0?0:L/x*255,ae=x*255;return[U/2,ie,ae]},b=(p,M,E)=>{var ae,ye,ge,Pe;const x=p.data;if(M&&!E)return{status:"Player A",percentA:null,percentB:null};if(E&&!M)return{status:"Player B",percentA:null,percentB:null};const I=((ae=Y.current)==null?void 0:ae.hueWeight)??4,L=((ye=Y.current)==null?void 0:ye.satWeight)??2,U=((ge=Y.current)==null?void 0:ge.valWeight)??1,ie=((Pe=Y.current)==null?void 0:Pe.sensitivity)??0;if(M&&E){let Be=0,Fe=0,He=0;for(let _e=0;_e<x.length;_e+=4){const ze=x[_e],rt=x[_e+1],Jt=x[_e+2],[Ye,at,it]=F(ze,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Ye-M.h),180-Math.abs(Ye-M.h)),Wt=Math.min(Math.abs(Ye-E.h),180-Math.abs(Ye-E.h)),ir=Math.abs(at-M.s),zn=Math.abs(at-E.s),Ln=Math.abs(it-M.v),On=Math.abs(it-E.v),wr=dn*I+ir*L+Ln*U,Zt=Wt*I+zn*L+On*U;Math.min(wr,Zt)>180||(wr<=Zt?Be+=Lt:Fe+=Lt,He+=Lt)}if(He===0)return{status:"None",percentA:0,percentB:0};const We=Be/Math.max(1e-6,He),Ie=Fe/Math.max(1e-6,He),Ce=.12*(1+.8*Math.max(0,Math.min(1,ie)));return We>=Ce&&We>=Ie?{status:"Player A",percentA:We,percentB:Ie}:Ie>=Ce&&Ie>We?{status:"Player B",percentA:We,percentB:Ie}:{status:"None",percentA:We,percentB:Ie}}return{status:"None",percentA:0,percentB:0}},G=(p,M,E)=>{const x=(p||0)*2,I=(M||0)/255,L=(E||0)/255,U=L*I,ie=U*(1-Math.abs(x/60%2-1)),ae=L-U;let ye=0,ge=0,Pe=0;x>=0&&x<60?(ye=U,ge=ie,Pe=0):x<120?(ye=ie,ge=U,Pe=0):x<180?(ye=0,ge=U,Pe=ie):x<240?(ye=0,ge=ie,Pe=U):x<300?(ye=ie,ge=0,Pe=U):(ye=U,ge=0,Pe=ie);const Be=Math.round((ye+ae)*255),Fe=Math.round((ge+ae)*255),He=Math.round((Pe+ae)*255);return`rgb(${Be}, ${Fe}, ${He})`},re=p=>p?G(p.h,p.s,p.v):"#ffffff",T=async(p,M)=>{try{if(p==="A"){if(de(M),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}f.current&&(f.current.getTracks().forEach(x=>x.stop()),f.current=null);const E=e.current;E&&(E.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Me(M,e,f),await new Promise(x=>setTimeout(x,200)),await Oe(),await B("A",e,l),ut("Camera A switched to:",M)}else{if(je(M),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const E=t.current;E&&(E.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Me(M,t,h),await new Promise(x=>setTimeout(x,200)),await Oe(),await B("B",t,a),ut("Camera B switched to:",M)}}catch(E){console.error("[Detector2] Camera switch error:",E),C(`Camera switch error: ${E.message}`)}};return d.jsxs("div",{className:`detector-window ${A?"minimized":""}`,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:()=>N(!A),children:A?"":""}),d.jsx("button",{onClick:()=>he(!$),title:"Toggle A criterion",children:$?"A=Top":"A=Bottom"})]})]}),d.jsxs("div",{className:"detector-content",style:{display:A?"none":"block"},children:[d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera A:"}),d.jsx("select",{value:pe,onChange:p=>T("A",p.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(p=>d.jsx("option",{value:p.deviceId,children:p.label||`Camera ${p.deviceId.slice(0,8)}`},p.deviceId))})]}),d.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:n,className:"output_canvas"})]}),d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera B:"}),d.jsx("select",{value:Ee,onChange:p=>T("B",p.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(p=>d.jsx("option",{value:p.deviceId,children:p.label||`Camera ${p.deviceId.slice(0,8)}`},p.deviceId))})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),d.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[d.jsxs("div",{className:"status-display",children:["Merged: ",d.jsx("strong",{children:O.merged})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:S?re(S):"#444"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:k?re(k):"#444"}})]})]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",S?`h${Math.round(S.h)} s${Math.round(S.s)} v${Math.round(S.v)}`:""]}),d.jsxs("div",{children:["B: ",k?`h${Math.round(k.h)} s${Math.round(k.s)} v${Math.round(k.v)}`:""]})]}),y&&d.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",y]}),d.jsxs("div",{style:{fontSize:12,marginTop:6},children:[d.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const fi=ru(),td=e=>{var l,a,f,h,y;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((C,A)=>typeof A.elapsed=="number"&&A.elapsed>C?A.elapsed:C,0),r={},o={};return t.forEach(C=>{const A=(C==null?void 0:C.player)||"Unknown";r[A]=(r[A]||0)+1;const N=(C==null?void 0:C.phase)||"unknown";o[N]=(o[N]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((f=(a=e.metadata)==null?void 0:a.config)==null?void 0:f.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((y=e.metadata)==null?void 0:y.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Gv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e},nd="adminPassword";function bv(){var fe;const[e,t]=P.useState([]),[n,r]=P.useState(!0),[o,l]=P.useState(null),[a,f]=P.useState(null),[h,y]=P.useState(null),[C,A]=P.useState(!1),[N,O]=P.useState(null),[D,$]=P.useState(!1),[he,S]=P.useState(""),[w,k]=P.useState(!1);P.useEffect(()=>{const te=localStorage.getItem(nd);te&&S(te)},[]);const R=P.useCallback(async()=>{if(!he){l("Password required"),r(!1);return}r(!0),l(null),k(!1);try{const te=await fetch(`${fi}/sessions`,{headers:{"x-admin-password":he}});if(te.status===401||te.status===403)throw k(!0),new Error("Invalid password");if(!te.ok)throw new Error(`Failed to load sessions (${te.status})`);const pe=await te.json(),de=Array.isArray(pe)?pe:[];localStorage.setItem(nd,he),t(de),f(Ee=>Ee&&de.some(je=>je.sessionGameId===Ee)?Ee:de.length>0?de[0].sessionGameId:null)}catch(te){console.error("[Admin] Error fetching sessions:",te),l(te.message||"Failed to load sessions"),t([]),f(null)}finally{r(!1)}},[he]);P.useEffect(()=>{R()},[R]),P.useEffect(()=>{if(!a){y(null);return}let te=!1;return(async()=>{if(he){A(!0),O(null);try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}`,{headers:{"x-admin-password":he}});if(!de.ok)throw de.status===404?new Error("Session not found"):new Error(`Failed to load session (${de.status})`);const Ee=await de.json();te||y(td(Ee))}catch(de){console.error("[Admin] Error fetching session detail:",de),te||(O(de.message||"Failed to load session"),y(null))}finally{te||A(!1)}}})(),()=>{te=!0}},[a]);const W=te=>{f(te),$(!1)},q=async()=>{if(!a||!he)return;const te=!D;$(te),A(!0),O(null);try{const pe=te?`${fi}/sessions/${encodeURIComponent(a)}/experiment-only`:`${fi}/sessions/${encodeURIComponent(a)}`,de=await fetch(pe,{headers:{"x-admin-password":he}});if(!de.ok)throw new Error(`Failed to load session data (${de.status})`);const Ee=await de.json();y(td(Ee))}catch(pe){console.error("[Admin] Error loading session data:",pe),O(pe.message||"Failed to load session data"),$(!te)}finally{A(!1)}},K=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},V=()=>{if(!h)return;const te=JSON.stringify(h,null,2),pe=new Blob([te],{type:"application/json"}),de=URL.createObjectURL(pe),Ee=document.createElement("a");Ee.href=de;const je=`${a}_${new Date().toISOString().split("T")[0]}.json`;Ee.download=je,Ee.click(),URL.revokeObjectURL(de),console.log("[Admin] Downloaded JSON:",je)},me=()=>{if(!h||!h.moves||h.moves.length===0){alert("No moves to export");return}const te=new Set;h.moves.forEach(oe=>{Object.keys(oe).forEach(we=>{we!=="camera_frame"&&we!=="__v"&&te.add(we)})});const pe=Array.from(te),de=[pe.join(",")];h.moves.forEach(oe=>{const we=pe.map(ke=>{const Re=oe[ke];return Re==null||Re===""?"":Array.isArray(Re)||typeof Re=="object"?`"${JSON.stringify(Re).replace(/"/g,'""')}"`:`"${String(Re).replace(/"/g,'""')}"`});de.push(we.join(","))});const Ee=de.join(`
`),je=new Blob([Ee],{type:"text/csv;charset=utf-8;"}),Me=URL.createObjectURL(je),J=document.createElement("a");J.href=Me;const se=`${a}_${new Date().toISOString().split("T")[0]}.csv`;J.download=se,J.click(),URL.revokeObjectURL(Me),console.log("[Admin] Downloaded CSV:",se)},Y=async(te,pe)=>{if(!(!a||!te||!he))try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(te)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":he},body:JSON.stringify({player:pe})});if(!de.ok)throw new Error(`Failed to update player (${de.status})`);y(Ee=>Ee&&{...Ee,moves:Ee.moves.map(je=>je._id===te?{...je,player:pe}:je)}),console.log("[Admin] Player updated:",te,pe)}catch(de){console.error("[Admin] Error updating player:",de),alert("Failed to update player: "+de.message)}};return d.jsxs("div",{className:"admin-container",children:[d.jsxs("aside",{className:"admin-sidebar",children:[d.jsxs("div",{className:"admin-sidebar-header",children:[d.jsx("h1",{children:"Admin"}),d.jsxs("div",{className:"admin-password-row",children:[d.jsx("input",{type:"password",className:`admin-password-input ${w?"error":""}`,placeholder:"Password",value:he,onChange:te=>S(te.target.value),onKeyPress:te=>{te.key==="Enter"&&R()}}),d.jsx("button",{className:"admin-refresh-button",onClick:R,disabled:n||!he,children:n?"Refreshing":"Refresh"})]})]}),o&&d.jsx("div",{className:"admin-error",children:o}),d.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&d.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&d.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(te=>{const pe=typeof te.movesCount=="number"?te.movesCount:Array.isArray(te.moves)?te.moves.length:0,de=te.sessionGameId===a;return d.jsxs("button",{className:`admin-session-card ${de?"active":""}`,onClick:()=>W(te.sessionGameId),children:[d.jsx("div",{className:"admin-session-id",children:te.sessionGameId}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Participant: ",te.subjectId||""]}),d.jsxs("span",{children:["Condition: ",te.condition||""]})]}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Moves: ",pe]}),d.jsxs("span",{children:["Updated: ",Gv(te.updatedAt)]})]})]},te.sessionGameId)})]})]}),d.jsxs("main",{className:"admin-content",children:[C&&d.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),N&&d.jsx("div",{className:"admin-error admin-error--content",children:N}),!C&&!N&&h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"admin-toolbar",children:[d.jsx("button",{className:`admin-toolbar-button experiment-toggle ${D?"active":""}`,onClick:q,title:D?"Show all moves (including practice)":"Show only experiment phase moves",children:D?"Show All Moves":"Experiment Only"}),d.jsx("button",{className:"admin-toolbar-button edit-players",onClick:K,title:"Open dedicated editor for player assignments",children:"Edit Players"}),d.jsx("div",{className:"admin-toolbar-divider"}),d.jsx("button",{className:"admin-toolbar-button download-json",onClick:V,title:"Download session data as JSON",children:"Download JSON"}),d.jsx("button",{className:"admin-toolbar-button download-csv",onClick:me,title:"Download moves as CSV",children:"Download CSV"})]}),d.jsx("div",{className:"admin-summary-wrapper",children:d.jsx(wh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((fe=h.sessionInfo)==null?void 0:fe.sessionGameId)||a||""}${D?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:Y})})]}),!C&&!N&&!h&&d.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const hi=ru(),Qv="adminPassword",rd=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Yv({sessionGameId:e}){var we,ke,Re,Oe;const[t,n]=P.useState(null),[r,o]=P.useState(!0),[l,a]=P.useState(null),[f,h]=P.useState(null),[y,C]=P.useState(null),[A,N]=P.useState("all"),[O,D]=P.useState(""),[$,he]=P.useState(!1),[S,w]=P.useState({}),[k,R]=P.useState({current:0,total:0}),[W,q]=P.useState("#FF0000"),[K,V]=P.useState("#0000FF"),[me,Y]=P.useState(!1);P.useEffect(()=>{const B=localStorage.getItem(Qv);B&&D(B)},[]),P.useEffect(()=>{e&&O&&te()},[e,O]);const fe=B=>{if(!B||typeof B.h>"u")return null;const ue=(B.h||0)*2,z=(B.s||0)/255,H=(B.v||0)/255,Z=H*z,ee=Z*(1-Math.abs(ue/60%2-1)),F=H-Z;let b=0,G=0,re=0;ue>=0&&ue<60?(b=Z,G=ee,re=0):ue<120?(b=ee,G=Z,re=0):ue<180?(b=0,G=Z,re=ee):ue<240?(b=0,G=ee,re=Z):ue<300?(b=ee,G=0,re=Z):(b=Z,G=0,re=ee);const T=p=>{const M=Math.round((p+F)*255).toString(16);return M.length===1?"0"+M:M};return`#${T(b)}${T(G)}${T(re)}`.toUpperCase()},te=async()=>{var B,ue,z,H;if(O){o(!0),a(null);try{const Z=await fetch(`${hi}/sessions/${encodeURIComponent(e)}`,{headers:{"x-admin-password":O}});if(!Z.ok)throw new Error(`Failed to load session (${Z.status})`);const ee=await Z.json();n(ee);let F=null,b=null,G="";if(ee.colorA&&ee.colorB?(F=ee.colorA,b=ee.colorB,G="session root"):(ue=(B=ee.metadata)==null?void 0:B.config)!=null&&ue.colorA&&((H=(z=ee.metadata)==null?void 0:z.config)!=null&&H.colorB)&&(F=ee.metadata.config.colorA,b=ee.metadata.config.colorB,G="session metadata"),F&&b)q(F),V(b),console.log(`[MoveHistoryEditor]  Loaded colors from ${G}:`,F,b);else try{const re=JSON.parse(localStorage.getItem("calibrationA")||"null"),T=JSON.parse(localStorage.getItem("calibrationB")||"null");if(re&&T){const p=fe(re),M=fe(T);p&&M?(q(p),V(M),console.log("[MoveHistoryEditor]  Session has no colors, loaded from localStorage calibration:",p,M)):console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}else console.log("[MoveHistoryEditor]  No calibration found, using default colors (red/blue)")}catch(re){console.warn("[MoveHistoryEditor] Error reading calibration from localStorage:",re),console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}}catch(Z){console.error("[MoveHistoryEditor] Error loading session:",Z),a(Z.message)}finally{o(!1)}}},pe=async(B,ue)=>{if(!(!e||!B||!O))try{const z=await fetch(`${hi}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent(B)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({player:ue})});if(!z.ok)throw new Error(`Failed to update player (${z.status})`);n(H=>H&&{...H,moves:H.moves.map(Z=>Z._id===B?{...Z,player:ue}:Z)}),w(H=>{const Z={...H};return delete Z[B],Z}),console.log("[MoveHistoryEditor] Player updated:",B,ue)}catch(z){console.error("[MoveHistoryEditor] Error updating player:",z),alert("Failed to update player: "+z.message)}},de=async()=>{if(!(!e||!O)){he(!0),w({});try{console.log("[MoveHistoryEditor] Starting AI identification for all moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",W,"Player B:",K);const B=J.filter(z=>z.camera_frame);if(B.length===0){alert("No moves with camera frames to process");return}R({current:0,total:B.length}),console.log(`[MoveHistoryEditor] Processing ${B.length} moves one by one...`);let ue=0;for(const z of B){R({current:ue+1,total:B.length});try{const H=await fetch(`${hi}/ai/identify-move`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({sessionGameId:e,moveId:z._id,colorA:W,colorB:K})});if(H.ok){const Z=await H.json();w(ee=>({...ee,[z._id]:{player:Z.suggestion==="A"?"Player A":Z.suggestion==="B"?"Player B":"None",confidence:Z.confidence,rawResponse:Z.rawResponse}})),ue++,console.log(`[MoveHistoryEditor]  Processed ${ue}/${B.length}: ${Z.suggestion}`)}else console.warn(`[MoveHistoryEditor]  Failed to process move ${z._id}`)}catch(H){console.error(`[MoveHistoryEditor] Error processing move ${z._id}:`,H)}}console.log("[MoveHistoryEditor] AI identification complete:",ue,"moves processed"),alert(`AI identified ${ue} moves. Review and confirm suggestions below.`)}catch(B){console.error("[MoveHistoryEditor] Error in AI identification:",B),alert("AI identification failed: "+B.message)}finally{he(!1),R({current:0,total:0})}}},Ee=async()=>{if(!(!e||!O)){he(!0),w({});try{console.log("[MoveHistoryEditor] Starting AI identification for unknown moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",W,"Player B:",K);const B=J.filter(z=>z.camera_frame&&(!z.player||z.player==="Unknown"||z.player==="None"));if(B.length===0){alert("No unknown moves with camera frames to process");return}R({current:0,total:B.length}),console.log(`[MoveHistoryEditor] Processing ${B.length} unknown moves one by one...`);let ue=0;for(const z of B){R({current:ue+1,total:B.length});try{const H=await fetch(`${hi}/ai/identify-move`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({sessionGameId:e,moveId:z._id,colorA:W,colorB:K})});if(H.ok){const Z=await H.json();w(ee=>({...ee,[z._id]:{player:Z.suggestion==="A"?"Player A":Z.suggestion==="B"?"Player B":"None",confidence:Z.confidence,rawResponse:Z.rawResponse}})),ue++,console.log(`[MoveHistoryEditor]  Processed ${ue}/${B.length}: ${Z.suggestion}`)}else console.warn(`[MoveHistoryEditor]  Failed to process move ${z._id}`)}catch(H){console.error(`[MoveHistoryEditor] Error processing move ${z._id}:`,H)}}console.log("[MoveHistoryEditor] AI identification complete:",ue,"unknown moves processed"),alert(`AI identified ${ue} unknown moves. Review and confirm suggestions below.`)}catch(B){console.error("[MoveHistoryEditor] Error in AI identification:",B),alert("AI identification failed: "+B.message)}finally{he(!1),R({current:0,total:0})}}},je=async B=>{const ue=S[B];ue&&await pe(B,ue.player)},Me=async B=>{if(!(!e||!O))try{console.log(`[MoveHistoryEditor] Identifying single move: ${B}`);const ue=await fetch(`${hi}/ai/identify-move`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({sessionGameId:e,moveId:B,colorA:W,colorB:K})});if(ue.ok){const z=await ue.json();w(H=>({...H,[B]:{player:z.suggestion==="A"?"Player A":z.suggestion==="B"?"Player B":"None",confidence:z.confidence,rawResponse:z.rawResponse}})),console.log(`[MoveHistoryEditor]  Move identified: ${z.suggestion}`)}else{const z=await ue.json();alert(`Failed to identify move: ${z.message}`)}}catch(ue){console.error("[MoveHistoryEditor] Error identifying move:",ue),alert("AI identification failed: "+ue.message)}},J=((we=t==null?void 0:t.moves)==null?void 0:we.filter(B=>A==="all"?!0:B.phase===A))||[];if(r)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return d.jsx("div",{className:"move-editor-container",children:d.jsxs("div",{className:"move-editor-error",children:[d.jsx("h2",{children:"Error Loading Session"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-error",children:"Session not found"})});const se=((ke=t.moves)==null?void 0:ke.filter(B=>B.phase==="practice").length)||0,oe=((Re=t.moves)==null?void 0:Re.filter(B=>B.phase==="experiment").length)||0;return d.jsxs("div",{className:"move-editor-container",children:[d.jsxs("header",{className:"move-editor-header",children:[d.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),d.jsxs("div",{className:"move-editor-title",children:[d.jsx("h1",{children:"Move History Editor"}),d.jsxs("div",{className:"session-info",children:[d.jsxs("span",{className:"session-id",children:["Session: ",e]}),d.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),d.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),d.jsxs("div",{className:"phase-filter",children:[d.jsxs("button",{className:`filter-btn ${A==="all"?"active":""}`,onClick:()=>N("all"),children:["All (",((Oe=t.moves)==null?void 0:Oe.length)||0,")"]}),d.jsxs("button",{className:`filter-btn ${A==="practice"?"active":""}`,onClick:()=>N("practice"),children:["Practice (",se,")"]}),d.jsxs("button",{className:`filter-btn ${A==="experiment"?"active":""}`,onClick:()=>N("experiment"),children:["Experiment (",oe,")"]})]}),d.jsxs("div",{className:"ai-controls",children:[d.jsx("button",{className:"color-picker-toggle",onClick:()=>Y(!me),children:"Bracelet Colors"}),me&&d.jsxs("div",{className:"color-picker-panel",children:[d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player A:"}),d.jsx("input",{type:"color",value:W,onChange:B=>q(B.target.value)}),d.jsx("span",{children:W})]}),d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player B:"}),d.jsx("input",{type:"color",value:K,onChange:B=>V(B.target.value)}),d.jsx("span",{children:K})]})]}),d.jsx("button",{className:"ai-btn ai-btn-all",onClick:de,disabled:$,children:$&&k.total>0?`Processing ${k.current}/${k.total}...`:"AI Identify All"}),d.jsx("button",{className:"ai-btn ai-btn-unknown",onClick:Ee,disabled:$,children:$&&k.total>0?`Processing ${k.current}/${k.total}...`:"AI Identify Unknown"})]})]}),d.jsxs("div",{className:"move-editor-content",children:[d.jsx("div",{className:"moves-grid",children:J.map((B,ue)=>{var z;return d.jsxs("div",{className:`move-card ${(f==null?void 0:f._id)===B._id?"selected":""}`,onClick:()=>h(B),children:[d.jsxs("div",{className:"move-card-header",children:[d.jsxs("span",{className:"move-number",children:["#",ue+1]}),d.jsx("span",{className:`move-phase ${B.phase}`,children:B.phase})]}),B.camera_frame&&d.jsxs("div",{className:"move-image",onClick:H=>{H.stopPropagation(),C(B.camera_frame)},children:[d.jsx("img",{src:B.camera_frame,alt:`Move ${ue+1}`}),d.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),d.jsxs("div",{className:"move-card-body",children:[d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Type:"}),d.jsx("span",{className:"value",children:B.type})]}),S[B._id]&&d.jsxs("div",{className:"ai-suggestion-banner",children:[d.jsxs("div",{className:"ai-suggestion-content",children:[d.jsx("span",{className:"ai-icon",children:""}),d.jsxs("span",{className:"ai-text",children:["AI suggests: ",d.jsx("strong",{children:S[B._id].player})]})]}),d.jsx("button",{className:"ai-confirm-btn",onClick:H=>{H.stopPropagation(),je(B._id)},children:" Confirm"})]}),d.jsxs("div",{className:"move-info-row player-row",style:{borderColor:B.player==="Player A"?W:B.player==="Player B"?K:B.player==="None"?"#9E9E9E":"#FFC107"},children:[d.jsx("span",{className:"label",children:"Player:"}),d.jsxs("div",{style:{display:"flex",gap:"8px",flex:1,alignItems:"center"},children:[d.jsxs("select",{className:`player-select ${(z=B.player)==null?void 0:z.toLowerCase().replace(" ","-")}`,value:B.player||"Unknown",onChange:H=>pe(B._id,H.target.value),onClick:H=>H.stopPropagation(),style:{flex:1,borderColor:B.player==="Player A"?W:B.player==="Player B"?K:B.player==="None"?"#9E9E9E":"#FFC107"},children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]}),B.camera_frame&&d.jsx("button",{className:"ai-single-btn",onClick:H=>{H.stopPropagation(),Me(B._id)},title:"Identify this move with AI",children:""})]})]}),B.blockId!==null&&B.blockId!==void 0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Block:"}),d.jsx("span",{className:"value",children:B.blockId})]}),Array.isArray(B.position)&&B.position.length===2&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Position:"}),d.jsxs("span",{className:"value",children:["(",B.position[0],", ",B.position[1],")"]})]}),d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Time:"}),d.jsxs("span",{className:"value",children:[rd(B.elapsed,1),"s"]})]}),Number.isFinite(B.holdTime)&&B.holdTime>0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Hold:"}),d.jsxs("span",{className:"value",children:[rd(B.holdTime,2),"s"]})]})]})]},B._id||ue)})}),J.length===0&&d.jsx("div",{className:"no-moves",children:d.jsx("p",{children:"No moves found for selected filter."})})]}),y&&d.jsx("div",{className:"image-modal",onClick:()=>C(null),children:d.jsxs("div",{className:"image-modal-content",onClick:B=>B.stopPropagation(),children:[d.jsx("button",{className:"close-modal",onClick:()=>C(null),children:""}),d.jsx("img",{src:y,alt:"Expanded view"})]})})]})}const Kv=!1;function Xv(){const[e,t]=P.useState(!1),[n,r]=P.useState(null),[o,l]=P.useState(null),[a,f]=P.useState(window.location.hash),[h,y]=P.useState(!1);P.useEffect(()=>{const D=()=>{f(window.location.hash)};return window.addEventListener("hashchange",D),()=>window.removeEventListener("hashchange",D)},[]),P.useEffect(()=>(window.toggleInterface=D=>{y(D),console.log("[App] Interface "+(D?"hidden":"shown"))},()=>{window.toggleInterface&&delete window.toggleInterface}),[]);const C=D=>{r(D),t(!0)},A=()=>{o&&!o.closed&&o.close();const D=window.location.origin+window.location.pathname+"#/detector",$=window.open(D,"BraceletDetector","width=700,height=600,left=100,top=100");l($)};P.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),P.useEffect(()=>(window.secEnd=()=>{try{console.log("[App] secEnd() called - triggering game end"),window.endGameExperience?window.endGameExperience():(console.warn("[App] endGameExperience() not available - game may not be running"),alert("Game is not currently running or already ended."))}catch(D){console.error("Error ending experience:",D),alert("Error ending experience: "+D.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let N=null;const O=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")N=d.jsx(qc,{});else if(a==="#/calibrate")N=d.jsx(Wv,{});else if(a==="#/detector2")N=d.jsx(Vv,{});else if(a==="#/summary")N=d.jsx(wh,{});else if(a==="#/admin")N=d.jsx(bv,{});else if(O){const D=decodeURIComponent(O[1]);N=d.jsx(Yv,{sessionGameId:D},D)}else N=e?d.jsxs(d.Fragment,{children:[d.jsx(Uv,{config:n,interfaceHidden:h}),d.jsx(qc,{hidden:h}),Kv,!h&&d.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[d.jsx("button",{onClick:A,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),d.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),d.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&d.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:d.jsx("button",{onClick:()=>y(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):d.jsx(Rv,{onStart:C});return d.jsx("div",{className:"App",children:N})}ps.createRoot(document.getElementById("root")).render(d.jsx(gp.StrictMode,{children:d.jsx(Xv,{})}));
