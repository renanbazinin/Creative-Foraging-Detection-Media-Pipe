(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var id={exports:{}},al={},od={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),rp=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),dp=Symbol.for("react.memo"),fp=Symbol.for("react.lazy"),Du=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ad={};function Kr(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ud(){}ud.prototype=Kr.prototype;function ua(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}var ca=ua.prototype=new ud;ca.constructor=ua;sd(ca,Kr.prototype);ca.isPureReactComponent=!0;var $u=Array.isArray,cd=Object.prototype.hasOwnProperty,da={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)cd.call(t,r)&&!dd.hasOwnProperty(r)&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var h=Array(f),y=0;y<f;y++)h[y]=arguments[y+2];o.children=h}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return{$$typeof:Vi,type:e,key:l,ref:a,props:o,_owner:da.current}}function pp(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function mp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uu=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mp(""+e.key):t.toString(36)}function Co(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vi:case rp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Dl(a,0):r,$u(o)?(n="",e!=null&&(n=e.replace(Uu,"$&/")+"/"),Co(o,t,n,"",function(y){return y})):o!=null&&(fa(o)&&(o=pp(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Uu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",$u(e))for(var f=0;f<e.length;f++){l=e[f];var h=r+Dl(l,f);a+=Co(l,t,n,h,o)}else if(h=hp(e),typeof h=="function")for(e=h.call(e),f=0;!(l=e.next()).done;)l=l.value,h=r+Dl(l,f++),a+=Co(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function lo(e,t,n){if(e==null)return e;var r=[],o=0;return Co(e,r,"","",function(l){return t.call(n,l,o++)}),r}function vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},No={transition:null},yp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:No,ReactCurrentOwner:da};function hd(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Kr;Ie.Fragment=ip;Ie.Profiler=lp;Ie.PureComponent=ua;Ie.StrictMode=op;Ie.Suspense=cp;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp;Ie.act=hd;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=da.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(h in t)cd.call(t,h)&&!dd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&f!==void 0?f[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){f=Array(h);for(var y=0;y<h;y++)f[y]=arguments[y+2];r.children=f}return{$$typeof:Vi,type:e.type,key:o,ref:l,props:r,_owner:a}};Ie.createContext=function(e){return e={$$typeof:ap,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sp,_context:e},e.Consumer=e};Ie.createElement=fd;Ie.createFactory=function(e){var t=fd.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:up,render:e}};Ie.isValidElement=fa;Ie.lazy=function(e){return{$$typeof:fp,_payload:{_status:-1,_result:e},_init:vp}};Ie.memo=function(e,t){return{$$typeof:dp,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=No.transition;No.transition={};try{e()}finally{No.transition=t}};Ie.unstable_act=hd;Ie.useCallback=function(e,t){return Ct.current.useCallback(e,t)};Ie.useContext=function(e){return Ct.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return Ct.current.useEffect(e,t)};Ie.useId=function(){return Ct.current.useId()};Ie.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return Ct.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};Ie.useRef=function(e){return Ct.current.useRef(e)};Ie.useState=function(e){return Ct.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return Ct.current.useTransition()};Ie.version="18.3.1";od.exports=Ie;var P=od.exports;const gp=np(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=P,xp=Symbol.for("react.element"),Sp=Symbol.for("react.fragment"),kp=Object.prototype.hasOwnProperty,Ep=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function pd(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kp.call(t,r)&&!jp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:xp,type:e,key:l,ref:a,props:o,_owner:Ep.current}}al.Fragment=Sp;al.jsx=pd;al.jsxs=pd;id.exports=al;var d=id.exports,ps={},md={exports:{}},Ut={},vd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,oe){var ne=J.length;J.push(oe);e:for(;0<ne;){var xe=ne-1>>>1,Ee=J[xe];if(0<o(Ee,oe))J[xe]=oe,J[ne]=Ee,ne=xe;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var oe=J[0],ne=J.pop();if(ne!==oe){J[0]=ne;e:for(var xe=0,Ee=J.length,ze=Ee>>>1;xe<ze;){var $=2*(xe+1)-1,ce=J[$],me=$+1,L=J[me];if(0>o(ce,ne))me<Ee&&0>o(L,ce)?(J[xe]=L,J[me]=ne,xe=me):(J[xe]=ce,J[$]=ne,xe=$);else if(me<Ee&&0>o(L,ne))J[xe]=L,J[me]=ne,xe=me;else break e}}return oe}function o(J,oe){var ne=J.sortIndex-oe.sortIndex;return ne!==0?ne:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,f=a.now();e.unstable_now=function(){return a.now()-f}}var h=[],y=[],C=1,A=null,N=3,O=!1,F=!1,D=!1,he=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var oe=n(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=J)r(y),oe.sortIndex=oe.expirationTime,t(h,oe);else break;oe=n(y)}}function T(J){if(D=!1,k(J),!F)if(n(h)!==null)F=!0,Ce(W);else{var oe=n(y);oe!==null&&Ne(T,oe.startTime-J)}}function W(J,oe){F=!1,D&&(D=!1,S(V),V=-1),O=!0;var ne=N;try{for(k(oe),A=n(h);A!==null&&(!(A.expirationTime>oe)||J&&!fe());){var xe=A.callback;if(typeof xe=="function"){A.callback=null,N=A.priorityLevel;var Ee=xe(A.expirationTime<=oe);oe=e.unstable_now(),typeof Ee=="function"?A.callback=Ee:A===n(h)&&r(h),k(oe)}else r(h);A=n(h)}if(A!==null)var ze=!0;else{var $=n(y);$!==null&&Ne(T,$.startTime-oe),ze=!1}return ze}finally{A=null,N=ne,O=!1}}var Z=!1,X=null,V=-1,ve=5,Q=-1;function fe(){return!(e.unstable_now()-Q<ve)}function q(){if(X!==null){var J=e.unstable_now();Q=J;var oe=!0;try{oe=X(!0,J)}finally{oe?pe():(Z=!1,X=null)}}else Z=!1}var pe;if(typeof w=="function")pe=function(){w(q)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,je=de.port2;de.port1.onmessage=q,pe=function(){je.postMessage(null)}}else pe=function(){he(q,0)};function Ce(J){X=J,Z||(Z=!0,pe())}function Ne(J,oe){V=he(function(){J(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){F||O||(F=!0,Ce(W))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(J){switch(N){case 1:case 2:case 3:var oe=3;break;default:oe=N}var ne=N;N=oe;try{return J()}finally{N=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=N;N=J;try{return oe()}finally{N=ne}},e.unstable_scheduleCallback=function(J,oe,ne){var xe=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?xe+ne:xe):ne=xe,J){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ne+Ee,J={id:C++,callback:oe,priorityLevel:J,startTime:ne,expirationTime:Ee,sortIndex:-1},ne>xe?(J.sortIndex=ne,t(y,J),n(h)===null&&J===n(y)&&(D?(S(V),V=-1):D=!0,Ne(T,ne-xe))):(J.sortIndex=Ee,t(h,J),F||O||(F=!0,Ce(W))),J},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(J){var oe=N;return function(){var ne=N;N=oe;try{return J.apply(this,arguments)}finally{N=ne}}}})(yd);vd.exports=yd;var Cp=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=P,$t=Cp;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Pi={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Pi[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=Object.prototype.hasOwnProperty,Pp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},Wu={};function Ap(e){return ms.call(Wu,e)?!0:ms.call(Hu,e)?!1:Pp.test(e)?Wu[e]=!0:(Hu[e]=!0,!1)}function Mp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ip(e,t,n,r){if(t===null||typeof t>"u"||Mp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ha=/[\-:]([a-z])/g;function pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ma(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ip(t,n,o,r)&&(n=null),r||o===null?Ap(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),va=Symbol.for("react.strict_mode"),vs=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),ya=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),gs=Symbol.for("react.suspense_list"),ga=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Vu=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=Vu&&e[Vu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,$l;function hi(e){if($l===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$l=t&&t[1]||""}return`
`+$l+e}var Ul=!1;function Hl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,f=l.length-1;1<=a&&0<=f&&o[a]!==l[f];)f--;for(;1<=a&&0<=f;a--,f--)if(o[a]!==l[f]){if(a!==1||f!==1)do if(a--,f--,0>f||o[a]!==l[f]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=f);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function _p(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=Hl(e.type,!1),e;case 11:return e=Hl(e.type.render,!1),e;case 1:return e=Hl(e.type,!0),e;default:return""}}function ws(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case vs:return"Profiler";case va:return"StrictMode";case ys:return"Suspense";case gs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case wd:return(e._context.displayName||"Context")+".Provider";case ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ga:return t=e.displayName||null,t!==null?t:ws(e.type)||"Memo";case Dn:t=e._payload,e=e._init;try{return ws(e(t))}catch{}}return null}function Tp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ws(t);case 8:return t===va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rp(e){var t=kd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=Rp(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xs(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jd(e,t){t=t.checked,t!=null&&ma(e,"checked",t,!1)}function Ss(e,t){jd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ks(e,t.type,n):t.hasOwnProperty("defaultValue")&&ks(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ks(e,t,n){(t!=="number"||Bo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Es(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(pi(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Cd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function js(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uo,Pd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ai(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zp=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(e){zp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yi[t]=yi[e]})});function Ad(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yi.hasOwnProperty(e)&&yi[e]?(""+t).trim():t+"px"}function Md(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Ad(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Lp=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cs(e,t){if(t){if(Lp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Ns(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Or=null,Br=null;function Ku(e){if(e=Qi(e)){if(typeof As!="function")throw Error(K(280));var t=e.stateNode;t&&(t=hl(t),As(e.stateNode,e.type,t))}}function Id(e){Or?Br?Br.push(e):Br=[e]:Or=e}function _d(){if(Or){var e=Or,t=Br;if(Br=Or=null,Ku(e),t)for(e=0;e<t.length;e++)Ku(t[e])}}function Td(e,t){return e(t)}function Rd(){}var Wl=!1;function zd(e,t,n){if(Wl)return e(t,n);Wl=!0;try{return Td(e,t,n)}finally{Wl=!1,(Or!==null||Br!==null)&&(Rd(),_d())}}function Mi(e,t){var n=e.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var Ms=!1;if(Mn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Ms=!1}function Op(e,t,n,r,o,l,a,f,h){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var gi=!1,Fo=null,Do=!1,Is=null,Bp={onError:function(e){gi=!0,Fo=e}};function Fp(e,t,n,r,o,l,a,f,h){gi=!1,Fo=null,Op.apply(Bp,arguments)}function Dp(e,t,n,r,o,l,a,f,h){if(Fp.apply(this,arguments),gi){if(gi){var y=Fo;gi=!1,Fo=null}else throw Error(K(198));Do||(Do=!0,Is=y)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(e){if(gr(e)!==e)throw Error(K(188))}function $p(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Xu(o),e;if(l===r)return Xu(o),t;l=l.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,f=o.child;f;){if(f===n){a=!0,n=o,r=l;break}if(f===r){a=!0,r=o,n=l;break}f=f.sibling}if(!a){for(f=l.child;f;){if(f===n){a=!0,n=l,r=o;break}if(f===r){a=!0,r=l,n=o;break}f=f.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function Od(e){return e=$p(e),e!==null?Bd(e):null}function Bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=$t.unstable_scheduleCallback,Ju=$t.unstable_cancelCallback,Up=$t.unstable_shouldYield,Hp=$t.unstable_requestPaint,nt=$t.unstable_now,Wp=$t.unstable_getCurrentPriorityLevel,xa=$t.unstable_ImmediatePriority,Dd=$t.unstable_UserBlockingPriority,$o=$t.unstable_NormalPriority,Vp=$t.unstable_LowPriority,$d=$t.unstable_IdlePriority,ul=null,kn=null;function Gp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(ul,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Yp,bp=Math.log,Qp=Math.LN2;function Yp(e){return e>>>=0,e===0?32:31-(bp(e)/Qp|0)|0}var co=64,fo=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Uo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var f=a&~o;f!==0?r=mi(f):(l&=a,l!==0&&(r=mi(l)))}else a=n&~o,a!==0?r=mi(a):l!==0&&(r=mi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Kp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),f=1<<a,h=o[a];h===-1?(!(f&n)||f&r)&&(o[a]=Kp(f,t)):h<=t&&(e.expiredLanes|=f),l&=~f}}function _s(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function Vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Jp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var De=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wd,ka,Vd,Gd,bd,Ts=!1,ho=[],Gn=null,bn=null,Qn=null,Ii=new Map,_i=new Map,Un=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(t.pointerId)}}function li(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Qi(t),t!==null&&ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function qp(e,t,n,r,o){switch(t){case"focusin":return Gn=li(Gn,e,t,n,r,o),!0;case"dragenter":return bn=li(bn,e,t,n,r,o),!0;case"mouseover":return Qn=li(Qn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Ii.set(l,li(Ii.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,_i.set(l,li(_i.get(l)||null,e,t,n,r,o)),!0}return!1}function Qd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ld(n),t!==null){e.blockedOn=t,bd(e.priority,function(){Vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ps=r,n.target.dispatchEvent(r),Ps=null}else return t=Qi(n),t!==null&&ka(t),e.blockedOn=n,!1;t.shift()}return!0}function qu(e,t,n){Po(e)&&n.delete(t)}function em(){Ts=!1,Gn!==null&&Po(Gn)&&(Gn=null),bn!==null&&Po(bn)&&(bn=null),Qn!==null&&Po(Qn)&&(Qn=null),Ii.forEach(qu),_i.forEach(qu)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Ts||(Ts=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,em)))}function Ti(e){function t(o){return si(o,e)}if(0<ho.length){si(ho[0],e);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&si(Gn,e),bn!==null&&si(bn,e),Qn!==null&&si(Qn,e),Ii.forEach(t),_i.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Qd(n),n.blockedOn===null&&Un.shift()}var Fr=Rn.ReactCurrentBatchConfig,Ho=!0;function tm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=1,Ea(e,t,n,r)}finally{De=o,Fr.transition=l}}function nm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=4,Ea(e,t,n,r)}finally{De=o,Fr.transition=l}}function Ea(e,t,n,r){if(Ho){var o=Rs(e,t,n,r);if(o===null)es(e,t,r,Wo,n),Zu(e,r);else if(qp(o,e,t,n,r))r.stopPropagation();else if(Zu(e,r),t&4&&-1<Zp.indexOf(e)){for(;o!==null;){var l=Qi(o);if(l!==null&&Wd(l),l=Rs(e,t,n,r),l===null&&es(e,t,r,Wo,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else es(e,t,r,null,n)}}var Wo=null;function Rs(e,t,n,r){if(Wo=null,e=wa(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wo=e,null}function Yd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wp()){case xa:return 1;case Dd:return 4;case $o:case Vp:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Wn=null,ja=null,Ao=null;function Kd(){if(Ao)return Ao;var e,t=ja,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Ao=o.slice(e,1<r?1-r:void 0)}function Mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function po(){return!0}function ec(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?po:ec,this.isPropagationStopped=ec,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(Xr),bi=Ze({},Xr,{view:0,detail:0}),rm=Ht(bi),Gl,bl,ai,cl=Ze({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(Gl=e.screenX-ai.screenX,bl=e.screenY-ai.screenY):bl=Gl=0,ai=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:bl}}),tc=Ht(cl),im=Ze({},cl,{dataTransfer:0}),om=Ht(im),lm=Ze({},bi,{relatedTarget:0}),Ql=Ht(lm),sm=Ze({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Ht(sm),um=Ze({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=Ht(um),dm=Ze({},Xr,{data:0}),nc=Ht(dm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pm[e])?!!t[e]:!1}function Na(){return mm}var vm=Ze({},bi,{key:function(e){if(e.key){var t=fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ym=Ht(vm),gm=Ze({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Ht(gm),wm=Ze({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),xm=Ht(wm),Sm=Ze({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=Ht(Sm),Em=Ze({},cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=Ht(Em),Cm=[9,13,27,32],Pa=Mn&&"CompositionEvent"in window,wi=null;Mn&&"documentMode"in document&&(wi=document.documentMode);var Nm=Mn&&"TextEvent"in window&&!wi,Xd=Mn&&(!Pa||wi&&8<wi&&11>=wi),ic=" ",oc=!1;function Jd(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Pm(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(oc=!0,ic);case"textInput":return e=t.data,e===ic&&oc?null:e;default:return null}}function Am(e,t){if(Cr)return e==="compositionend"||!Pa&&Jd(e,t)?(e=Kd(),Ao=ja=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xd&&t.locale!=="ko"?null:t.data;default:return null}}var Mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mm[e.type]:t==="textarea"}function qd(e,t,n,r){Id(r),t=Vo(t,"onChange"),0<t.length&&(n=new Ca("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xi=null,Ri=null;function Im(e){df(e,0)}function dl(e){var t=Ar(e);if(Ed(t))return e}function _m(e,t){if(e==="change")return t}var ef=!1;if(Mn){var Yl;if(Mn){var Kl="oninput"in document;if(!Kl){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),Kl=typeof sc.oninput=="function"}Yl=Kl}else Yl=!1;ef=Yl&&(!document.documentMode||9<document.documentMode)}function ac(){xi&&(xi.detachEvent("onpropertychange",tf),Ri=xi=null)}function tf(e){if(e.propertyName==="value"&&dl(Ri)){var t=[];qd(t,Ri,e,wa(e)),zd(Im,t)}}function Tm(e,t,n){e==="focusin"?(ac(),xi=t,Ri=n,xi.attachEvent("onpropertychange",tf)):e==="focusout"&&ac()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dl(Ri)}function zm(e,t){if(e==="click")return dl(t)}function Lm(e,t){if(e==="input"||e==="change")return dl(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Om;function zi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ms.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cc(e,t){var n=uc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uc(n)}}function nf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rf(){for(var e=window,t=Bo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bo(e.document)}return t}function Aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bm(e){var t=rf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(r!==null&&Aa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=cc(n,l);var a=cc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=Mn&&"documentMode"in document&&11>=document.documentMode,Nr=null,zs=null,Si=null,Ls=!1;function dc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ls||Nr==null||Nr!==Bo(r)||(r=Nr,"selectionStart"in r&&Aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&zi(Si,r)||(Si=r,r=Vo(zs,"onSelect"),0<r.length&&(t=new Ca("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Xl={},of={};Mn&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function fl(e){if(Xl[e])return Xl[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in of)return Xl[e]=t[n];return e}var lf=fl("animationend"),sf=fl("animationiteration"),af=fl("animationstart"),uf=fl("transitionend"),cf=new Map,fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){cf.set(e,t),yr(t,[e])}for(var Jl=0;Jl<fc.length;Jl++){var Zl=fc[Jl],Dm=Zl.toLowerCase(),$m=Zl[0].toUpperCase()+Zl.slice(1);tr(Dm,"on"+$m)}tr(lf,"onAnimationEnd");tr(sf,"onAnimationIteration");tr(af,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(uf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Um=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function hc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Dp(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var f=r[a],h=f.instance,y=f.currentTarget;if(f=f.listener,h!==l&&o.isPropagationStopped())break e;hc(o,f,y),l=h}else for(a=0;a<r.length;a++){if(f=r[a],h=f.instance,y=f.currentTarget,f=f.listener,h!==l&&o.isPropagationStopped())break e;hc(o,f,y),l=h}}}if(Do)throw e=Is,Do=!1,Is=null,e}function Ge(e,t){var n=t[$s];n===void 0&&(n=t[$s]=new Set);var r=e+"__bubble";n.has(r)||(ff(t,e,2,!1),n.add(r))}function ql(e,t,n){var r=0;t&&(r|=4),ff(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[vo]){e[vo]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Um.has(n)||ql(n,!1,e),ql(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,ql("selectionchange",!1,t))}}function ff(e,t,n,r){switch(Yd(t)){case 1:var o=tm;break;case 4:o=nm;break;default:o=Ea}n=o.bind(null,t,n,e),o=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function es(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var f=r.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;f!==null;){if(a=sr(f),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}f=f.parentNode}}r=r.return}zd(function(){var y=l,C=wa(n),A=[];e:{var N=cf.get(e);if(N!==void 0){var O=Ca,F=e;switch(e){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":O=ym;break;case"focusin":F="focus",O=Ql;break;case"focusout":F="blur",O=Ql;break;case"beforeblur":case"afterblur":O=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=xm;break;case lf:case sf:case af:O=am;break;case uf:O=km;break;case"scroll":O=rm;break;case"wheel":O=jm;break;case"copy":case"cut":case"paste":O=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=rc}var D=(t&4)!==0,he=!D&&e==="scroll",S=D?N!==null?N+"Capture":null:N;D=[];for(var w=y,k;w!==null;){k=w;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,S!==null&&(T=Mi(w,S),T!=null&&D.push(Oi(w,T,k)))),he)break;w=w.return}0<D.length&&(N=new O(N,F,null,n,C),A.push({event:N,listeners:D}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",N&&n!==Ps&&(F=n.relatedTarget||n.fromElement)&&(sr(F)||F[In]))break e;if((O||N)&&(N=C.window===C?C:(N=C.ownerDocument)?N.defaultView||N.parentWindow:window,O?(F=n.relatedTarget||n.toElement,O=y,F=F?sr(F):null,F!==null&&(he=gr(F),F!==he||F.tag!==5&&F.tag!==6)&&(F=null)):(O=null,F=y),O!==F)){if(D=tc,T="onMouseLeave",S="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(D=rc,T="onPointerLeave",S="onPointerEnter",w="pointer"),he=O==null?N:Ar(O),k=F==null?N:Ar(F),N=new D(T,w+"leave",O,n,C),N.target=he,N.relatedTarget=k,T=null,sr(C)===y&&(D=new D(S,w+"enter",F,n,C),D.target=k,D.relatedTarget=he,T=D),he=T,O&&F)t:{for(D=O,S=F,w=0,k=D;k;k=kr(k))w++;for(k=0,T=S;T;T=kr(T))k++;for(;0<w-k;)D=kr(D),w--;for(;0<k-w;)S=kr(S),k--;for(;w--;){if(D===S||S!==null&&D===S.alternate)break t;D=kr(D),S=kr(S)}D=null}else D=null;O!==null&&pc(A,N,O,D,!1),F!==null&&he!==null&&pc(A,he,F,D,!0)}}e:{if(N=y?Ar(y):window,O=N.nodeName&&N.nodeName.toLowerCase(),O==="select"||O==="input"&&N.type==="file")var W=_m;else if(lc(N))if(ef)W=Lm;else{W=Rm;var Z=Tm}else(O=N.nodeName)&&O.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(W=zm);if(W&&(W=W(e,y))){qd(A,W,n,C);break e}Z&&Z(e,N,y),e==="focusout"&&(Z=N._wrapperState)&&Z.controlled&&N.type==="number"&&ks(N,"number",N.value)}switch(Z=y?Ar(y):window,e){case"focusin":(lc(Z)||Z.contentEditable==="true")&&(Nr=Z,zs=y,Si=null);break;case"focusout":Si=zs=Nr=null;break;case"mousedown":Ls=!0;break;case"contextmenu":case"mouseup":case"dragend":Ls=!1,dc(A,n,C);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":dc(A,n,C)}var X;if(Pa)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Cr?Jd(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Xd&&n.locale!=="ko"&&(Cr||V!=="onCompositionStart"?V==="onCompositionEnd"&&Cr&&(X=Kd()):(Wn=C,ja="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),Z=Vo(y,V),0<Z.length&&(V=new nc(V,e,null,n,C),A.push({event:V,listeners:Z}),X?V.data=X:(X=Zd(n),X!==null&&(V.data=X)))),(X=Nm?Pm(e,n):Am(e,n))&&(y=Vo(y,"onBeforeInput"),0<y.length&&(C=new nc("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:y}),C.data=X))}df(A,t)})}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Mi(e,n),l!=null&&r.unshift(Oi(e,l,o)),l=Mi(e,t),l!=null&&r.push(Oi(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var f=n,h=f.alternate,y=f.stateNode;if(h!==null&&h===r)break;f.tag===5&&y!==null&&(f=y,o?(h=Mi(n,l),h!=null&&a.unshift(Oi(n,h,f))):o||(h=Mi(n,l),h!=null&&a.push(Oi(n,h,f)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(Hm,`
`).replace(Wm,"")}function yo(e,t,n){if(t=mc(t),mc(e)!==t&&n)throw Error(K(425))}function Go(){}var Os=null,Bs=null;function Fs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ds=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(bm)}:Ds;function bm(e){setTimeout(function(){throw e})}function ts(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ti(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ti(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jr,Bi="__reactProps$"+Jr,In="__reactContainer$"+Jr,$s="__reactEvents$"+Jr,Qm="__reactListeners$"+Jr,Ym="__reactHandles$"+Jr;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yc(e);e!==null;){if(n=e[Sn])return n;e=yc(e)}return t}e=n,n=e.parentNode}return null}function Qi(e){return e=e[Sn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function hl(e){return e[Bi]||null}var Us=[],Mr=-1;function nr(e){return{current:e}}function be(e){0>Mr||(e.current=Us[Mr],Us[Mr]=null,Mr--)}function Ue(e,t){Mr++,Us[Mr]=e.current,e.current=t}var er={},xt=nr(er),_t=nr(!1),fr=er;function Wr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Tt(e){return e=e.childContextTypes,e!=null}function bo(){be(_t),be(xt)}function gc(e,t,n){if(xt.current!==er)throw Error(K(168));Ue(xt,t),Ue(_t,n)}function hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,Tp(e)||"Unknown",o));return Ze({},n,r)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Ue(xt,e),Ue(_t,_t.current),!0}function wc(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=hf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,be(_t),be(xt),Ue(xt,e)):be(_t),Ue(_t,n)}var Cn=null,pl=!1,ns=!1;function pf(e){Cn===null?Cn=[e]:Cn.push(e)}function Km(e){pl=!0,pf(e)}function rr(){if(!ns&&Cn!==null){ns=!0;var e=0,t=De;try{var n=Cn;for(De=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,pl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Fd(xa,rr),o}finally{De=t,ns=!1}}return null}var Ir=[],_r=0,Yo=null,Ko=0,Gt=[],bt=0,hr=null,Nn=1,Pn="";function or(e,t){Ir[_r++]=Ko,Ir[_r++]=Yo,Yo=e,Ko=t}function mf(e,t,n){Gt[bt++]=Nn,Gt[bt++]=Pn,Gt[bt++]=hr,hr=e;var r=Nn;e=Pn;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,Pn=l+e}else Nn=1<<l|n<<o|r,Pn=e}function Ma(e){e.return!==null&&(or(e,1),mf(e,1,0))}function Ia(e){for(;e===Yo;)Yo=Ir[--_r],Ir[_r]=null,Ko=Ir[--_r],Ir[_r]=null;for(;e===hr;)hr=Gt[--bt],Gt[bt]=null,Pn=Gt[--bt],Gt[bt]=null,Nn=Gt[--bt],Gt[bt]=null}var Dt=null,Ft=null,Qe=!1,ln=null;function vf(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ft=null,!0):!1;default:return!1}}function Hs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ws(e){if(Qe){var t=Ft;if(t){var n=t;if(!xc(e,t)){if(Hs(e))throw Error(K(418));t=Yn(n.nextSibling);var r=Dt;t&&xc(e,t)?vf(r,n):(e.flags=e.flags&-4097|2,Qe=!1,Dt=e)}}else{if(Hs(e))throw Error(K(418));e.flags=e.flags&-4097|2,Qe=!1,Dt=e}}}function Sc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function go(e){if(e!==Dt)return!1;if(!Qe)return Sc(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fs(e.type,e.memoizedProps)),t&&(t=Ft)){if(Hs(e))throw yf(),Error(K(418));for(;t;)vf(e,t),t=Yn(t.nextSibling)}if(Sc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Dt?Yn(e.stateNode.nextSibling):null;return!0}function yf(){for(var e=Ft;e;)e=Yn(e.nextSibling)}function Vr(){Ft=Dt=null,Qe=!1}function _a(e){ln===null?ln=[e]:ln.push(e)}var Xm=Rn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var f=o.refs;a===null?delete f[l]:f[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kc(e){var t=e._init;return t(e._payload)}function gf(e){function t(S,w){if(e){var k=S.deletions;k===null?(S.deletions=[w],S.flags|=16):k.push(w)}}function n(S,w){if(!e)return null;for(;w!==null;)t(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function o(S,w){return S=Zn(S,w),S.index=0,S.sibling=null,S}function l(S,w,k){return S.index=k,e?(k=S.alternate,k!==null?(k=k.index,k<w?(S.flags|=2,w):k):(S.flags|=2,w)):(S.flags|=1048576,w)}function a(S){return e&&S.alternate===null&&(S.flags|=2),S}function f(S,w,k,T){return w===null||w.tag!==6?(w=us(k,S.mode,T),w.return=S,w):(w=o(w,k),w.return=S,w)}function h(S,w,k,T){var W=k.type;return W===jr?C(S,w,k.props.children,T,k.key):w!==null&&(w.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Dn&&kc(W)===w.type)?(T=o(w,k.props),T.ref=ui(S,w,k),T.return=S,T):(T=Oo(k.type,k.key,k.props,null,S.mode,T),T.ref=ui(S,w,k),T.return=S,T)}function y(S,w,k,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=cs(k,S.mode,T),w.return=S,w):(w=o(w,k.children||[]),w.return=S,w)}function C(S,w,k,T,W){return w===null||w.tag!==7?(w=dr(k,S.mode,T,W),w.return=S,w):(w=o(w,k),w.return=S,w)}function A(S,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=us(""+w,S.mode,k),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case so:return k=Oo(w.type,w.key,w.props,null,S.mode,k),k.ref=ui(S,null,w),k.return=S,k;case Er:return w=cs(w,S.mode,k),w.return=S,w;case Dn:var T=w._init;return A(S,T(w._payload),k)}if(pi(w)||ii(w))return w=dr(w,S.mode,k,null),w.return=S,w;wo(S,w)}return null}function N(S,w,k,T){var W=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return W!==null?null:f(S,w,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case so:return k.key===W?h(S,w,k,T):null;case Er:return k.key===W?y(S,w,k,T):null;case Dn:return W=k._init,N(S,w,W(k._payload),T)}if(pi(k)||ii(k))return W!==null?null:C(S,w,k,T,null);wo(S,k)}return null}function O(S,w,k,T,W){if(typeof T=="string"&&T!==""||typeof T=="number")return S=S.get(k)||null,f(w,S,""+T,W);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case so:return S=S.get(T.key===null?k:T.key)||null,h(w,S,T,W);case Er:return S=S.get(T.key===null?k:T.key)||null,y(w,S,T,W);case Dn:var Z=T._init;return O(S,w,k,Z(T._payload),W)}if(pi(T)||ii(T))return S=S.get(k)||null,C(w,S,T,W,null);wo(w,T)}return null}function F(S,w,k,T){for(var W=null,Z=null,X=w,V=w=0,ve=null;X!==null&&V<k.length;V++){X.index>V?(ve=X,X=null):ve=X.sibling;var Q=N(S,X,k[V],T);if(Q===null){X===null&&(X=ve);break}e&&X&&Q.alternate===null&&t(S,X),w=l(Q,w,V),Z===null?W=Q:Z.sibling=Q,Z=Q,X=ve}if(V===k.length)return n(S,X),Qe&&or(S,V),W;if(X===null){for(;V<k.length;V++)X=A(S,k[V],T),X!==null&&(w=l(X,w,V),Z===null?W=X:Z.sibling=X,Z=X);return Qe&&or(S,V),W}for(X=r(S,X);V<k.length;V++)ve=O(X,S,V,k[V],T),ve!==null&&(e&&ve.alternate!==null&&X.delete(ve.key===null?V:ve.key),w=l(ve,w,V),Z===null?W=ve:Z.sibling=ve,Z=ve);return e&&X.forEach(function(fe){return t(S,fe)}),Qe&&or(S,V),W}function D(S,w,k,T){var W=ii(k);if(typeof W!="function")throw Error(K(150));if(k=W.call(k),k==null)throw Error(K(151));for(var Z=W=null,X=w,V=w=0,ve=null,Q=k.next();X!==null&&!Q.done;V++,Q=k.next()){X.index>V?(ve=X,X=null):ve=X.sibling;var fe=N(S,X,Q.value,T);if(fe===null){X===null&&(X=ve);break}e&&X&&fe.alternate===null&&t(S,X),w=l(fe,w,V),Z===null?W=fe:Z.sibling=fe,Z=fe,X=ve}if(Q.done)return n(S,X),Qe&&or(S,V),W;if(X===null){for(;!Q.done;V++,Q=k.next())Q=A(S,Q.value,T),Q!==null&&(w=l(Q,w,V),Z===null?W=Q:Z.sibling=Q,Z=Q);return Qe&&or(S,V),W}for(X=r(S,X);!Q.done;V++,Q=k.next())Q=O(X,S,V,Q.value,T),Q!==null&&(e&&Q.alternate!==null&&X.delete(Q.key===null?V:Q.key),w=l(Q,w,V),Z===null?W=Q:Z.sibling=Q,Z=Q);return e&&X.forEach(function(q){return t(S,q)}),Qe&&or(S,V),W}function he(S,w,k,T){if(typeof k=="object"&&k!==null&&k.type===jr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case so:e:{for(var W=k.key,Z=w;Z!==null;){if(Z.key===W){if(W=k.type,W===jr){if(Z.tag===7){n(S,Z.sibling),w=o(Z,k.props.children),w.return=S,S=w;break e}}else if(Z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Dn&&kc(W)===Z.type){n(S,Z.sibling),w=o(Z,k.props),w.ref=ui(S,Z,k),w.return=S,S=w;break e}n(S,Z);break}else t(S,Z);Z=Z.sibling}k.type===jr?(w=dr(k.props.children,S.mode,T,k.key),w.return=S,S=w):(T=Oo(k.type,k.key,k.props,null,S.mode,T),T.ref=ui(S,w,k),T.return=S,S=T)}return a(S);case Er:e:{for(Z=k.key;w!==null;){if(w.key===Z)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(S,w.sibling),w=o(w,k.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else t(S,w);w=w.sibling}w=cs(k,S.mode,T),w.return=S,S=w}return a(S);case Dn:return Z=k._init,he(S,w,Z(k._payload),T)}if(pi(k))return F(S,w,k,T);if(ii(k))return D(S,w,k,T);wo(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(S,w.sibling),w=o(w,k),w.return=S,S=w):(n(S,w),w=us(k,S.mode,T),w.return=S,S=w),a(S)):n(S,w)}return he}var Gr=gf(!0),wf=gf(!1),Xo=nr(null),Jo=null,Tr=null,Ta=null;function Ra(){Ta=Tr=Jo=null}function za(e){var t=Xo.current;be(Xo),e._currentValue=t}function Vs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Dr(e,t){Jo=e,Ta=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(Jo===null)throw Error(K(308));Tr=e,Jo.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var ar=null;function La(e){ar===null?ar=[e]:ar.push(e)}function xf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,_n(e,r)}function _n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,_n(e,n)}return o=r.interleaved,o===null?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,_n(e,n)}function Io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}function Ec(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var h=f,y=h.next;h.next=null,a===null?l=y:a.next=y,a=h;var C=e.alternate;C!==null&&(C=C.updateQueue,f=C.lastBaseUpdate,f!==a&&(f===null?C.firstBaseUpdate=y:f.next=y,C.lastBaseUpdate=h))}if(l!==null){var A=o.baseState;a=0,C=y=h=null,f=l;do{var N=f.lane,O=f.eventTime;if((r&N)===N){C!==null&&(C=C.next={eventTime:O,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var F=e,D=f;switch(N=t,O=n,D.tag){case 1:if(F=D.payload,typeof F=="function"){A=F.call(O,A,N);break e}A=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=D.payload,N=typeof F=="function"?F.call(O,A,N):F,N==null)break e;A=Ze({},A,N);break e;case 2:$n=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,N=o.effects,N===null?o.effects=[f]:N.push(f))}else O={eventTime:O,lane:N,tag:f.tag,payload:f.payload,callback:f.callback,next:null},C===null?(y=C=O,h=A):C=C.next=O,a|=N;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;N=f,f=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(!0);if(C===null&&(h=A),o.baseState=h,o.firstBaseUpdate=y,o.lastBaseUpdate=C,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=A}}function jc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var Yi={},En=nr(Yi),Fi=nr(Yi),Di=nr(Yi);function ur(e){if(e===Yi)throw Error(K(174));return e}function Ba(e,t){switch(Ue(Di,t),Ue(Fi,e),Ue(En,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:js(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=js(t,e)}be(En),Ue(En,t)}function br(){be(En),be(Fi),be(Di)}function kf(e){ur(Di.current);var t=ur(En.current),n=js(t,e.type);t!==n&&(Ue(Fi,e),Ue(En,n))}function Fa(e){Fi.current===e&&(be(En),be(Fi))}var Xe=nr(0);function qo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function Da(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var _o=Rn.ReactCurrentDispatcher,is=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,el=!1,ki=!1,$i=0,Jm=0;function yt(){throw Error(K(321))}function $a(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_o.current=e===null||e.memoizedState===null?tv:nv,e=n(r,o),ki){l=0;do{if(ki=!1,$i=0,25<=l)throw Error(K(301));l+=1,ct=lt=null,t.updateQueue=null,_o.current=rv,e=n(r,o)}while(ki)}if(_o.current=tl,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,el=!1,t)throw Error(K(300));return e}function Ha(){var e=$i!==0;return $i=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function Xt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(K(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function Ui(e,t){return typeof t=="function"?t(e):t}function os(e){var t=Xt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var f=a=null,h=null,y=l;do{var C=y.lane;if((pr&C)===C)h!==null&&(h=h.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var A={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};h===null?(f=h=A,a=r):h=h.next=A,Je.lanes|=C,mr|=C}y=y.next}while(y!==null&&y!==l);h===null?a=r:h.next=f,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ls(e){var t=Xt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Ef(){}function jf(e,t){var n=Je,r=Xt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,It=!0),r=r.queue,Wa(Pf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Nf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(K(349));pr&30||Cf(n,t,o)}return o}function Cf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nf(e,t,n,r){t.value=n,t.getSnapshot=r,Af(t)&&Mf(e)}function Pf(e,t,n){return n(function(){Af(t)&&Mf(e)})}function Af(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function Mf(e){var t=_n(e,1);t!==null&&un(t,e,1,-1)}function Cc(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=ev.bind(null,Je,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function If(){return Xt().memoizedState}function To(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function ml(e,t,n,r){var o=Xt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&$a(r,a.deps)){o.memoizedState=Hi(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Hi(1|t,n,l,r)}function Nc(e,t){return To(8390656,8,e,t)}function Wa(e,t){return ml(2048,8,e,t)}function _f(e,t){return ml(4,2,e,t)}function Tf(e,t){return ml(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zf(e,t,n){return n=n!=null?n.concat([e]):null,ml(4,4,Rf.bind(null,t,e),n)}function Va(){}function Lf(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Of(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bf(e,t,n){return pr&21?(cn(n,t)||(n=Ud(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function Zm(e,t){var n=De;De=n!==0&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{De=n,is.transition=r}}function Ff(){return Xt().memoizedState}function qm(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Df(e))$f(t,n);else if(n=xf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Uf(n,t,r)}}function ev(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Df(e))$f(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,f=l(a,n);if(o.hasEagerState=!0,o.eagerState=f,cn(f,a)){var h=t.interleaved;h===null?(o.next=o,La(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=xf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Uf(n,t,r))}}function Df(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function $f(e,t){ki=el=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}var tl={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},tv={readContext:Kt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Nc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:Cc,useDebugValue:Va,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=Cc(!1),t=e[0];return e=Zm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(Qe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),dt===null)throw Error(K(349));pr&30||Cf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Nc(Pf.bind(null,r,l,e),[e]),r.flags|=2048,Hi(9,Nf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(Qe){var n=Pn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$i++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nv={readContext:Kt,useCallback:Lf,useContext:Kt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:_f,useLayoutEffect:Tf,useMemo:Of,useReducer:os,useRef:If,useState:function(){return os(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return Bf(t,lt.memoizedState,e)},useTransition:function(){var e=os(Ui)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1},rv={readContext:Kt,useCallback:Lf,useContext:Kt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:_f,useLayoutEffect:Tf,useMemo:Of,useReducer:ls,useRef:If,useState:function(){return ls(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return lt===null?t.memoizedState=e:Bf(t,lt.memoizedState,e)},useTransition:function(){var e=ls(Ui)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vl={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=An(n,r);o.tag=2,t!=null&&(o.callback=t),t=Kn(e,o,r),t!==null&&(un(t,e,r,n),Io(t,e,r))}};function Pc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(o,l):!0}function Hf(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(o=Tt(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ac(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oa(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Kt(l):(l=Tt(t)?fr:xt.current,o.context=Wr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Gs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vl.enqueueReplaceState(o,o.state,null),Zo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",r=t;do n+=_p(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iv=typeof WeakMap=="function"?WeakMap:Map;function Wf(e,t,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rl||(rl=!0,ra=r),Qs(e,t)},n}function Vf(e,t,n){n=An(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Qs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qs(e,t),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Mc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gv.bind(null,e,t,n),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _c(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=An(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var ov=Rn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?wf(t,null,n,r):Gr(t,e.child,n,r)}function Tc(e,t,n,r,o){n=n.render;var l=t.ref;return Dr(t,o),r=Ua(e,t,n,r,l,o),n=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(Qe&&n&&Ma(t),t.flags|=1,Et(e,t,r,o),t.child)}function Rc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Za(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Gf(e,t,l,r,o)):(e=Oo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(a,r)&&e.ref===t.ref)return Tn(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Gf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(zi(l,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,Tn(e,t,o)}return Ys(e,t,n,r,o)}function bf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(zr,Bt),Bt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(zr,Bt),Bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ue(zr,Bt),Bt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ue(zr,Bt),Bt|=r;return Et(e,t,o,n),t.child}function Qf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,n,r,o){var l=Tt(n)?fr:xt.current;return l=Wr(t,l),Dr(t,o),n=Ua(e,t,n,r,l,o),r=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(Qe&&r&&Ma(t),t.flags|=1,Et(e,t,n,o),t.child)}function zc(e,t,n,r,o){if(Tt(n)){var l=!0;Qo(t)}else l=!1;if(Dr(t,o),t.stateNode===null)Ro(e,t),Hf(t,n,r),bs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,f=t.memoizedProps;a.props=f;var h=a.context,y=n.contextType;typeof y=="object"&&y!==null?y=Kt(y):(y=Tt(n)?fr:xt.current,y=Wr(t,y));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==r||h!==y)&&Ac(t,a,r,y),$n=!1;var N=t.memoizedState;a.state=N,Zo(t,r,a,o),h=t.memoizedState,f!==r||N!==h||_t.current||$n?(typeof C=="function"&&(Gs(t,n,C,r),h=t.memoizedState),(f=$n||Pc(t,n,f,r,N,h,y))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=y,r=f):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Sf(e,t),f=t.memoizedProps,y=t.type===t.elementType?f:rn(t.type,f),a.props=y,A=t.pendingProps,N=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Kt(h):(h=Tt(n)?fr:xt.current,h=Wr(t,h));var O=n.getDerivedStateFromProps;(C=typeof O=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==A||N!==h)&&Ac(t,a,r,h),$n=!1,N=t.memoizedState,a.state=N,Zo(t,r,a,o);var F=t.memoizedState;f!==A||N!==F||_t.current||$n?(typeof O=="function"&&(Gs(t,n,O,r),F=t.memoizedState),(y=$n||Pc(t,n,y,r,N,F,h)||!1)?(C||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,F,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,F,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),a.props=r,a.state=F,a.context=h,r=y):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return Ks(e,t,n,r,l,o)}function Ks(e,t,n,r,o,l){Qf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&wc(t,n,!1),Tn(e,t,l);r=t.stateNode,ov.current=t;var f=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,l),t.child=Gr(t,null,f,l)):Et(e,t,f,l),t.memoizedState=r.state,o&&wc(t,n,!0),t.child}function Yf(e){var t=e.stateNode;t.pendingContext?gc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gc(e,t.context,!1),Ba(e,t.containerInfo)}function Lc(e,t,n,r,o){return Vr(),_a(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function Js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kf(e,t,n){var r=t.pendingProps,o=Xe.current,l=!1,a=(t.flags&128)!==0,f;if((f=a)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ue(Xe,o&1),e===null)return Ws(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=wl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Js(n),t.memoizedState=Xs,e):Ga(t,a));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return lv(e,t,a,r,f,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,f=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),f!==null?l=Zn(f,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Js(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ga(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xo(e,t,n,r){return r!==null&&_a(r),Gr(t,e.child,null,n),e=Ga(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lv(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ss(Error(K(422))),xo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=wl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Gr(t,e.child,null,a),t.child.memoizedState=Js(a),t.memoizedState=Xs,l);if(!(t.mode&1))return xo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(K(419)),r=ss(l,r,void 0),xo(e,t,a,r)}if(f=(a&e.childLanes)!==0,It||f){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,_n(e,o),un(r,e,o,-1))}return Ja(),r=ss(Error(K(421))),xo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=wv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ft=Yn(o.nextSibling),Dt=t,Qe=!0,ln=null,e!==null&&(Gt[bt++]=Nn,Gt[bt++]=Pn,Gt[bt++]=hr,Nn=e.id,Pn=e.overflow,hr=t),t=Ga(t,r.children),t.flags|=4096,t)}function Oc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vs(e.return,t,n)}function as(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Xf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=Xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,n,t);else if(e.tag===19)Oc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Xe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&qo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),as(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&qo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}as(t,!0,n,null,l);break;case"together":as(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ro(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sv(e,t,n){switch(t.tag){case 3:Yf(t),Vr();break;case 5:kf(t);break;case 1:Tt(t.type)&&Qo(t);break;case 4:Ba(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ue(Xo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Xe,Xe.current&1),t.flags|=128,null):n&t.child.childLanes?Kf(e,t,n):(Ue(Xe,Xe.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Ue(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ue(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,bf(e,t,n)}return Tn(e,t,n)}var Jf,Zs,Zf,qf;Jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zs=function(){};Zf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=xs(e,o),r=xs(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=Es(e,o),r=Es(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Go)}Cs(n,r);var a;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var f=o[y];for(a in f)f.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Pi.hasOwnProperty(y)?l||(l=[]):(l=l||[]).push(y,null));for(y in r){var h=r[y];if(f=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&h!==f&&(h!=null||f!=null))if(y==="style")if(f){for(a in f)!f.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&f[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(y,n)),n=h;else y==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,f=f?f.__html:void 0,h!=null&&f!==h&&(l=l||[]).push(y,h)):y==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(y,""+h):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(y)?(h!=null&&y==="onScroll"&&Ge("scroll",e),l||f===h||(l=[])):(l=l||[]).push(y,h))}n&&(l=l||[]).push("style",n);var y=l;(t.updateQueue=y)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function av(e,t,n){var r=t.pendingProps;switch(Ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Tt(t.type)&&bo(),gt(t),null;case 3:return r=t.stateNode,br(),be(_t),be(xt),Da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(go(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(la(ln),ln=null))),Zs(e,t),gt(t),null;case 5:Fa(t);var o=ur(Di.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return gt(t),null}if(e=ur(En.current),go(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Bi]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Gu(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":Qu(r,l),Ge("invalid",r)}Cs(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var f=l[a];a==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",""+f]):Pi.hasOwnProperty(a)&&f!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ao(r),bu(r,l,!0);break;case"textarea":ao(r),Yu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Go)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Bi]=r,Jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ns(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":Gu(e,r),o=xs(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":Qu(e,r),o=Es(e,r),Ge("invalid",e);break;default:o=r}Cs(n,o),f=o;for(l in f)if(f.hasOwnProperty(l)){var h=f[l];l==="style"?Md(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pd(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ai(e,h):typeof h=="number"&&Ai(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Pi.hasOwnProperty(l)?h!=null&&l==="onScroll"&&Ge("scroll",e):h!=null&&ma(e,l,h,a))}switch(n){case"input":ao(e),bu(e,r,!1);break;case"textarea":ao(e),Yu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=ur(Di.current),ur(En.current),go(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(be(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&Ft!==null&&t.mode&1&&!(t.flags&128))yf(),Vr(),t.flags|=98560,l=!1;else if(l=go(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(K(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(K(317));l[Sn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(la(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?st===0&&(st=3):Ja())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return br(),Zs(e,t),e===null&&Li(t.stateNode.containerInfo),gt(t),null;case 10:return za(t.type._context),gt(t),null;case 17:return Tt(t.type)&&bo(),gt(t),null;case 19:if(be(Xe),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ci(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qo(e),a!==null){for(t.flags|=128,ci(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(Xe,Xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Yr&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304)}else{if(!r)if(e=qo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Qe)return gt(t),null}else 2*nt()-l.renderingStartTime>Yr&&n!==1073741824&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=Xe.current,Ue(Xe,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Xa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function uv(e,t){switch(Ia(t),t.tag){case 1:return Tt(t.type)&&bo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return br(),be(_t),be(xt),Da(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fa(t),null;case 13:if(be(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Xe),null;case 4:return br(),null;case 10:return za(t.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var So=!1,wt=!1,cv=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function qs(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Bc=!1;function dv(e,t){if(Os=Ho,e=rf(),Aa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,f=-1,h=-1,y=0,C=0,A=e,N=null;t:for(;;){for(var O;A!==n||o!==0&&A.nodeType!==3||(f=a+o),A!==l||r!==0&&A.nodeType!==3||(h=a+r),A.nodeType===3&&(a+=A.nodeValue.length),(O=A.firstChild)!==null;)N=A,A=O;for(;;){if(A===e)break t;if(N===n&&++y===o&&(f=a),N===l&&++C===r&&(h=a),(O=A.nextSibling)!==null)break;A=N,N=A.parentNode}A=O}n=f===-1||h===-1?null:{start:f,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bs={focusedElem:e,selectionRange:n},Ho=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var D=F.memoizedProps,he=F.memoizedState,S=t.stateNode,w=S.getSnapshotBeforeUpdate(t.elementType===t.type?D:rn(t.type,D),he);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(T){tt(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return F=Bc,Bc=!1,F}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&qs(t,n,l)}o=o.next}while(o!==r)}}function yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ea(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eh(e){var t=e.alternate;t!==null&&(e.alternate=null,eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Bi],delete t[$s],delete t[Qm],delete t[Ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function th(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Go));else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}var pt=null,on=!1;function Fn(e,t,n){for(n=n.child;n!==null;)nh(e,t,n),n=n.sibling}function nh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(ul,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Fn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?ts(e.parentNode,n):e.nodeType===1&&ts(e,n),Ti(e)):ts(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Fn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&qs(n,t,a),o=o.next}while(o!==r)}Fn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){tt(n,t,f)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Fn(e,t,n),wt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cv),t.forEach(function(r){var o=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,f=a;e:for(;f!==null;){switch(f.tag){case 5:pt=f.stateNode,on=!1;break e;case 3:pt=f.stateNode.containerInfo,on=!0;break e;case 4:pt=f.stateNode.containerInfo,on=!0;break e}f=f.return}if(pt===null)throw Error(K(160));nh(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(y){tt(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{Ei(3,e,e.return),yl(3,e)}catch(D){tt(e,e.return,D)}try{Ei(5,e,e.return)}catch(D){tt(e,e.return,D)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{Ai(o,"")}catch(D){tt(e,e.return,D)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,f=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&jd(o,l),Ns(f,a);var y=Ns(f,l);for(a=0;a<h.length;a+=2){var C=h[a],A=h[a+1];C==="style"?Md(o,A):C==="dangerouslySetInnerHTML"?Pd(o,A):C==="children"?Ai(o,A):ma(o,C,A,y)}switch(f){case"input":Ss(o,l);break;case"textarea":Cd(o,l);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var O=l.value;O!=null?Lr(o,!!l.multiple,O,!1):N!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Bi]=l}catch(D){tt(e,e.return,D)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(D){tt(e,e.return,D)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(t.containerInfo)}catch(D){tt(e,e.return,D)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=nt())),r&4&&Dc(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(y=wt)||C,nn(t,e),wt=y):nn(t,e),yn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(ue=e,C=e.child;C!==null;){for(A=ue=C;ue!==null;){switch(N=ue,O=N.child,N.tag){case 0:case 11:case 14:case 15:Ei(4,N,N.return);break;case 1:Rr(N,N.return);var F=N.stateNode;if(typeof F.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(D){tt(r,n,D)}}break;case 5:Rr(N,N.return);break;case 22:if(N.memoizedState!==null){Uc(A);continue}}O!==null?(O.return=N,ue=O):Uc(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{o=A.stateNode,y?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=A.stateNode,h=A.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,f.style.display=Ad("display",a))}catch(D){tt(e,e.return,D)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=y?"":A.memoizedProps}catch(D){tt(e,e.return,D)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Dc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(th(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ai(o,""),r.flags&=-33);var l=Fc(e);na(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,f=Fc(e);ta(e,f,a);break;default:throw Error(K(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fv(e,t,n){ue=e,ih(e)}function ih(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var o=ue,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||So;if(!a){var f=o.alternate,h=f!==null&&f.memoizedState!==null||wt;f=So;var y=wt;if(So=a,(wt=h)&&!y)for(ue=o;ue!==null;)a=ue,h=a.child,a.tag===22&&a.memoizedState!==null?Hc(o):h!==null?(h.return=a,ue=h):Hc(o);for(;l!==null;)ue=l,ih(l),l=l.sibling;ue=o,So=f,wt=y}$c(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ue=l):$c(e)}}function $c(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&jc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jc(t,a,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&Ti(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}wt||t.flags&512&&ea(t)}catch(N){tt(t,t.return,N)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Uc(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Hc(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yl(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{ea(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{ea(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){ue=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ue=f;break}ue=t.return}}var hv=Math.ceil,nl=Rn.ReactCurrentDispatcher,ba=Rn.ReactCurrentOwner,Yt=Rn.ReactCurrentBatchConfig,Re=0,dt=null,ot=null,mt=0,Bt=0,zr=nr(0),st=0,Wi=null,mr=0,gl=0,Qa=0,ji=null,Mt=null,Ya=0,Yr=1/0,jn=null,rl=!1,ra=null,Xn=null,ko=!1,Vn=null,il=0,Ci=0,ia=null,zo=-1,Lo=0;function jt(){return Re&6?nt():zo!==-1?zo:zo=nt()}function Jn(e){return e.mode&1?Re&2&&mt!==0?mt&-mt:Xm.transition!==null?(Lo===0&&(Lo=Ud()),Lo):(e=De,e!==0||(e=window.event,e=e===void 0?16:Yd(e.type)),e):1}function un(e,t,n,r){if(50<Ci)throw Ci=0,ia=null,Error(K(185));Gi(e,n,r),(!(Re&2)||e!==dt)&&(e===dt&&(!(Re&2)&&(gl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&Re===0&&!(t.mode&1)&&(Yr=nt()+500,pl&&rr()))}function Rt(e,t){var n=e.callbackNode;Xp(e,t);var r=Uo(e,e===dt?mt:0);if(r===0)n!==null&&Ju(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ju(n),t===1)e.tag===0?Km(Wc.bind(null,e)):pf(Wc.bind(null,e)),Gm(function(){!(Re&6)&&rr()}),n=null;else{switch(Hd(r)){case 1:n=xa;break;case 4:n=Dd;break;case 16:n=$o;break;case 536870912:n=$d;break;default:n=$o}n=fh(n,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oh(e,t){if(zo=-1,Lo=0,Re&6)throw Error(K(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=Uo(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ol(e,r);else{t=r;var o=Re;Re|=2;var l=sh();(dt!==e||mt!==t)&&(jn=null,Yr=nt()+500,cr(e,t));do try{vv();break}catch(f){lh(e,f)}while(!0);Ra(),nl.current=l,Re=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=_s(e),o!==0&&(r=o,t=oa(e,o))),t===1)throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!pv(o)&&(t=ol(e,r),t===2&&(l=_s(e),l!==0&&(r=l,t=oa(e,l))),t===1))throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:lr(e,Mt,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ya+500-nt(),10<t)){if(Uo(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),t);break}lr(e,Mt,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hv(r/1960))-r,10<r){e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),r);break}lr(e,Mt,jn);break;case 5:lr(e,Mt,jn);break;default:throw Error(K(329))}}}return Rt(e,nt()),e.callbackNode===n?oh.bind(null,e):null}function oa(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=ol(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&la(t)),e}function la(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function pv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Qa,t&=~gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Wc(e){if(Re&6)throw Error(K(327));$r();var t=Uo(e,0);if(!(t&1))return Rt(e,nt()),null;var n=ol(e,t);if(e.tag!==0&&n===2){var r=_s(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=Wi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Mt,jn),Rt(e,nt()),null}function Ka(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(Yr=nt()+500,pl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(Re&6)&&$r();var t=Re;Re|=1;var n=Yt.transition,r=De;try{if(Yt.transition=null,De=1,e)return e()}finally{De=r,Yt.transition=n,Re=t,!(Re&6)&&rr()}}function Xa(){Bt=zr.current,be(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Ia(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bo();break;case 3:br(),be(_t),be(xt),Da();break;case 5:Fa(r);break;case 4:br();break;case 13:be(Xe);break;case 19:be(Xe);break;case 10:za(r.type._context);break;case 22:case 23:Xa()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Bt=t,st=0,Wi=null,Qa=gl=mr=0,Mt=ji=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function lh(e,t){do{var n=ot;try{if(Ra(),_o.current=tl,el){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}el=!1}if(pr=0,ct=lt=Je=null,ki=!1,$i=0,ba.current=null,n===null||n.return===null){st=1,Wi=t,ot=null;break}e:{var l=e,a=n.return,f=n,h=t;if(t=mt,f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var y=h,C=f,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var N=C.alternate;N?(C.updateQueue=N.updateQueue,C.memoizedState=N.memoizedState,C.lanes=N.lanes):(C.updateQueue=null,C.memoizedState=null)}var O=Ic(a);if(O!==null){O.flags&=-257,_c(O,a,f,l,t),O.mode&1&&Mc(l,y,t),t=O,h=y;var F=t.updateQueue;if(F===null){var D=new Set;D.add(h),t.updateQueue=D}else F.add(h);break e}else{if(!(t&1)){Mc(l,y,t),Ja();break e}h=Error(K(426))}}else if(Qe&&f.mode&1){var he=Ic(a);if(he!==null){!(he.flags&65536)&&(he.flags|=256),_c(he,a,f,l,t),_a(Qr(h,f));break e}}l=h=Qr(h,f),st!==4&&(st=2),ji===null?ji=[l]:ji.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=Wf(l,h,t);Ec(l,S);break e;case 1:f=h;var w=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Xn===null||!Xn.has(k)))){l.flags|=65536,t&=-t,l.lanes|=t;var T=Vf(l,f,t);Ec(l,T);break e}}l=l.return}while(l!==null)}uh(n)}catch(W){t=W,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function sh(){var e=nl.current;return nl.current=tl,e===null?tl:e}function Ja(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(gl&268435455)||Hn(dt,mt)}function ol(e,t){var n=Re;Re|=2;var r=sh();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{mv();break}catch(o){lh(e,o)}while(!0);if(Ra(),Re=n,nl.current=r,ot!==null)throw Error(K(261));return dt=null,mt=0,st}function mv(){for(;ot!==null;)ah(ot)}function vv(){for(;ot!==null&&!Up();)ah(ot)}function ah(e){var t=dh(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,t===null?uh(e):ot=t,ba.current=null}function uh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=av(n,t,Bt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=De,o=Yt.transition;try{Yt.transition=null,De=1,yv(e,t,n,r)}finally{Yt.transition=o,De=r}return null}function yv(e,t,n,r){do $r();while(Vn!==null);if(Re&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Jp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ko||(ko=!0,fh($o,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Yt.transition,Yt.transition=null;var a=De;De=1;var f=Re;Re|=4,ba.current=null,dv(e,n),rh(n,e),Bm(Bs),Ho=!!Os,Bs=Os=null,e.current=n,fv(n),Hp(),Re=f,De=a,Yt.transition=l}else e.current=n;if(ko&&(ko=!1,Vn=e,il=o),l=e.pendingLanes,l===0&&(Xn=null),Gp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(rl)throw rl=!1,e=ra,ra=null,e;return il&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===ia?Ci++:(Ci=0,ia=e):Ci=0,rr(),null}function $r(){if(Vn!==null){var e=Hd(il),t=Yt.transition,n=De;try{if(Yt.transition=null,De=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,il=0,Re&6)throw Error(K(331));var o=Re;for(Re|=4,ue=e.current;ue!==null;){var l=ue,a=l.child;if(ue.flags&16){var f=l.deletions;if(f!==null){for(var h=0;h<f.length;h++){var y=f[h];for(ue=y;ue!==null;){var C=ue;switch(C.tag){case 0:case 11:case 15:Ei(8,C,l)}var A=C.child;if(A!==null)A.return=C,ue=A;else for(;ue!==null;){C=ue;var N=C.sibling,O=C.return;if(eh(C),C===y){ue=null;break}if(N!==null){N.return=O,ue=N;break}ue=O}}}var F=l.alternate;if(F!==null){var D=F.child;if(D!==null){F.child=null;do{var he=D.sibling;D.sibling=null,D=he}while(D!==null)}}ue=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ue=a;else e:for(;ue!==null;){if(l=ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ei(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,ue=S;break e}ue=l.return}}var w=e.current;for(ue=w;ue!==null;){a=ue;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,ue=k;else e:for(a=w;ue!==null;){if(f=ue,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:yl(9,f)}}catch(W){tt(f,f.return,W)}if(f===a){ue=null;break e}var T=f.sibling;if(T!==null){T.return=f.return,ue=T;break e}ue=f.return}}if(Re=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(ul,e)}catch{}r=!0}return r}finally{De=n,Yt.transition=t}}return!1}function Vc(e,t,n){t=Qr(n,t),t=Wf(e,t,1),e=Kn(e,t,1),t=jt(),e!==null&&(Gi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Vc(e,e,n);else for(;t!==null;){if(t.tag===3){Vc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){e=Qr(n,e),e=Vf(t,e,1),t=Kn(t,e,1),e=jt(),t!==null&&(Gi(t,1,e),Rt(t,e));break}}t=t.return}}function gv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ya?cr(e,0):Qa|=n),Rt(e,t)}function ch(e,t){t===0&&(e.mode&1?(t=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):t=1);var n=jt();e=_n(e,t),e!==null&&(Gi(e,t,n),Rt(e,n))}function wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),ch(e,n)}var dh;dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,sv(e,t,n);It=!!(e.flags&131072)}else It=!1,Qe&&t.flags&1048576&&mf(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ro(e,t),e=t.pendingProps;var o=Wr(t,xt.current);Dr(t,n),o=Ua(null,t,r,e,o,n);var l=Ha();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(r)?(l=!0,Qo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Oa(t),o.updater=vl,t.stateNode=o,o._reactInternals=t,bs(t,r,e,n),t=Ks(null,t,r,!0,l,n)):(t.tag=0,Qe&&l&&Ma(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ro(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=kv(r),e=rn(r,e),o){case 0:t=Ys(null,t,r,e,n);break e;case 1:t=zc(null,t,r,e,n);break e;case 11:t=Tc(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,rn(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ys(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),zc(e,t,r,o,n);case 3:e:{if(Yf(t),e===null)throw Error(K(387));r=t.pendingProps,l=t.memoizedState,o=l.element,Sf(e,t),Zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Qr(Error(K(423)),t),t=Lc(e,t,r,n,o);break e}else if(r!==o){o=Qr(Error(K(424)),t),t=Lc(e,t,r,n,o);break e}else for(Ft=Yn(t.stateNode.containerInfo.firstChild),Dt=t,Qe=!0,ln=null,n=wf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===o){t=Tn(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&Ws(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Fs(r,o)?a=null:l!==null&&Fs(r,l)&&(t.flags|=32),Qf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Ws(t),null;case 13:return Kf(e,t,n);case 4:return Ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Tc(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Ue(Xo,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!_t.current){t=Tn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var f=l.dependencies;if(f!==null){a=l.child;for(var h=f.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=An(-1,n&-n),h.tag=2;var y=l.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?h.next=h:(h.next=C.next,C.next=h),y.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Vs(l.return,n,t),f.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(K(341));a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Vs(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Dr(t,n),o=Kt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),Rc(e,t,r,o,n);case 15:return Gf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ro(e,t),t.tag=1,Tt(r)?(e=!0,Qo(t)):e=!1,Dr(t,n),Hf(t,r,o),bs(t,r,o,n),Ks(null,t,r,!0,e,n);case 19:return Xf(e,t,n);case 22:return bf(e,t,n)}throw Error(K(156,t.tag))};function fh(e,t){return Fd(e,t)}function Sv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new Sv(e,t,n,r)}function Za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kv(e){if(typeof e=="function")return Za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ya)return 11;if(e===ga)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Za(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case va:a=8,o|=8;break;case vs:return e=Qt(12,n,t,o|2),e.elementType=vs,e.lanes=l,e;case ys:return e=Qt(13,n,t,o),e.elementType=ys,e.lanes=l,e;case gs:return e=Qt(19,n,t,o),e.elementType=gs,e.lanes=l,e;case Sd:return wl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wd:a=10;break e;case xd:a=9;break e;case ya:a=11;break e;case ga:a=14;break e;case Dn:a=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Qt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function wl(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=Sd,e.lanes=n,e.stateNode={isHidden:!1},e}function us(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function cs(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ev(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qa(e,t,n,r,o,l,a,f,h){return e=new Ev(e,t,n,f,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Qt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(l),e}function jv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hh(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Tt(n))return hf(e,n,t)}return t}function ph(e,t,n,r,o,l,a,f,h){return e=qa(n,r,!0,e,o,l,a,f,h),e.context=hh(null),n=e.current,r=jt(),o=Jn(n),l=An(r,o),l.callback=t??null,Kn(n,l,o),e.current.lanes=o,Gi(e,o,r),Rt(e,r),e}function xl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=hh(n),t.context===null?t.context=n:t.pendingContext=n,t=An(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(o,t,a),e!==null&&(un(e,o,a,l),Io(e,o,a)),a}function ll(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eu(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}function Cv(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}Sl.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));xl(e,t,null,null)};Sl.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){xl(null,e,null,null)}),t[In]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Qd(e)}};function nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bc(){}function Nv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var y=ll(a);l.call(y)}}var a=ph(t,r,e,0,null,!1,!1,"",bc);return e._reactRootContainer=a,e[In]=a.current,Li(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var f=r;r=function(){var y=ll(h);f.call(y)}}var h=qa(e,0,!1,null,null,!1,!1,"",bc);return e._reactRootContainer=h,e[In]=h.current,Li(e.nodeType===8?e.parentNode:e),vr(function(){xl(t,h,n,r)}),h}function El(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var f=o;o=function(){var h=ll(a);f.call(h)}}xl(t,a,e,o)}else a=Nv(n,t,e,o,r);return ll(a)}Wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(Sa(t,n|1),Rt(t,nt()),!(Re&6)&&(Yr=nt()+500,rr()))}break;case 13:vr(function(){var r=_n(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),eu(e,1)}};ka=function(e){if(e.tag===13){var t=_n(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}eu(e,134217728)}};Vd=function(e){if(e.tag===13){var t=Jn(e),n=_n(e,t);if(n!==null){var r=jt();un(n,e,t,r)}eu(e,t)}};Gd=function(){return De};bd=function(e,t){var n=De;try{return De=e,t()}finally{De=n}};As=function(e,t,n){switch(t){case"input":if(Ss(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=hl(r);if(!o)throw Error(K(90));Ed(r),Ss(r,o)}}}break;case"textarea":Cd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Td=Ka;Rd=vr;var Pv={usingClientEntryPoint:!1,Events:[Qi,Ar,hl,Id,_d,Ka]},di={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Av={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{ul=Eo.inject(Av),kn=Eo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(t))throw Error(K(200));return jv(e,t,null,n)};Ut.createRoot=function(e,t){if(!nu(e))throw Error(K(299));var n=!1,r="",o=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qa(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,Li(e.nodeType===8?e.parentNode:e),new tu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!kl(t))throw Error(K(200));return El(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=mh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ph(t,null,e,1,n??null,o,!1,l,a),e[In]=t.current,Li(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Sl(t)};Ut.render=function(e,t,n){if(!kl(t))throw Error(K(200));return El(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!kl(e))throw Error(K(40));return e._reactRootContainer?(vr(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Ut.unstable_batchedUpdates=Ka;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kl(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return El(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),md.exports=Ut;var Mv=md.exports,Qc=Mv;ps.createRoot=Qc.createRoot,ps.hydrateRoot=Qc.hydrateRoot;const Ur={},yh="production",Yc={development:{baseUrl:"http://localhost:4000/api",healthUrl:"http://localhost:4000/health"},production:{baseUrl:"https://cfg-server.onrender.com/api",healthUrl:"https://cfg-server.onrender.com/health"}},gh=Yc[yh]||Yc.development,ru=()=>{if(!(Ur!=null&&Ur.VITE_API_BASE_URL))return gh.baseUrl},Iv=()=>{if(!(Ur!=null&&Ur.VITE_HEALTH_URL))return gh.healthUrl},_v=async()=>{try{const e=await fetch(Iv(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Health check failed: ${e.status}`);const t=await e.json();return{status:t.status||"unknown",version:t.version||"unknown",commit:t.commit||"unknown",healthy:t.status==="ok"}}catch(e){return console.error("[API Config] Health check error:",e),{status:"error",version:"unknown",commit:"unknown",healthy:!1,error:e.message}}},Tv=()=>yh;function Rv({onStart:e}){const[t,n]=P.useState("1"),[r,o]=P.useState("individual"),[l,a]=P.useState("15"),[f,h]=P.useState({status:"checking",version:"...",commit:"...",healthy:!1});P.useEffect(()=>{const N=async()=>{const F=await _v();h(F),console.log("[StartDialog] Server health:",F)};N();const O=setInterval(N,3e4);return()=>clearInterval(O)},[]);const y=()=>{if(!t||!l){alert("Please fill in all fields");return}const N={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(N)},C=()=>{window.close()},A=()=>f.status==="checking"?"checking":f.healthy?"healthy":"unhealthy";return d.jsx("div",{className:"dialog-overlay",children:d.jsxs("div",{className:"dialog-box",children:[d.jsxs("div",{className:"dialog-header",children:[d.jsx("h2",{children:"The Creative Game"}),d.jsxs("div",{className:`server-health-indicator ${A()}`,title:`Server: ${f.status}
Version: ${f.version}
Commit: ${f.commit}
Environment: ${Tv()}`,children:[d.jsx("span",{className:"health-light"}),d.jsx("span",{className:"health-text",children:"Server"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"ID:"}),d.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value)})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Condition:"}),d.jsxs("select",{value:r,onChange:N=>o(N.target.value),children:[d.jsx("option",{value:"individual",children:"individual"}),d.jsx("option",{value:"group",children:"group"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Time (in minutes):"}),d.jsx("input",{type:"number",value:l,onChange:N=>a(N.target.value),min:"1"})]}),d.jsxs("div",{className:"dialog-buttons",children:[d.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),d.jsx("button",{className:"dialog-button ok",onClick:y,children:"OK"}),d.jsx("button",{className:"dialog-button cancel",onClick:C,children:"Cancel"})]})]})})}class Kc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}clear(){this.logs=[]}}const zv=.035;class Lv{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=ru(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var o;const{colorA:n,colorB:r}=this.getCalibrationColors();this.sessionInfo={...t,colorA:n,colorB:r,startedAt:((o=this.sessionInfo)==null?void 0:o.startedAt)||new Date(this.startTime).toISOString()},console.log("[GameTracker] Session info set with colors:",{colorA:n,colorB:r}),await this.initializeSession()}hsvToHex(t){if(!t||typeof t.h>"u")return null;const n=(t.h||0)*2,r=(t.s||0)/255,o=(t.v||0)/255,l=o*r,a=l*(1-Math.abs(n/60%2-1)),f=o-l;let h=0,y=0,C=0;n>=0&&n<60?(h=l,y=a,C=0):n<120?(h=a,y=l,C=0):n<180?(h=0,y=l,C=a):n<240?(h=0,y=a,C=l):n<300?(h=a,y=0,C=l):(h=l,y=0,C=a);const A=N=>{const O=Math.round((N+f)*255).toString(16);return O.length===1?"0"+O:O};return`#${A(h)}${A(y)}${A(C)}`.toUpperCase()}getCalibrationColors(){try{const t=JSON.parse(localStorage.getItem("calibrationA")||"null"),n=JSON.parse(localStorage.getItem("calibrationB")||"null");return{colorA:this.hsvToHex(t),colorB:this.hsvToHex(n)}}catch(t){return console.warn("[GameTracker] Error reading calibration colors:",t),{colorA:null,colorB:null}}}async initializeSession(){var o;if(this.sessionInitialized||!((o=this.sessionInfo)!=null&&o.sessionGameId))return;const{colorA:t,colorB:n}=this.getCalibrationColors(),r={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,colorA:t,colorB:n,metadata:{config:this.sessionInfo}};console.log("[GameTracker] Initializing session with colors:",{colorA:t,colorB:n});try{const l=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){const f=(await l.json().catch(()=>({}))).message||`Failed to initialize session (${l.status})`;throw l.status===409?(alert(` Session ID Conflict

${f}

Please choose a different Session ID.`),this.stop(),new Error(f)):new Error(f)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(l){throw console.error("[GameTracker] Failed to initialize session:",l),l}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/zv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),f=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(N=>this.relativeToGrid(N)):null),y={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:f,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:f,grid_all_positions:h};(r||t.camera_frame)&&(y.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(y.gallery_shape_number=t.gallery_shape_number,y.gallery=t.gallery,y.gallery_normalized=t.gallery_normalized,y.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(N=>this.relativeToGrid(N)):null),y.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(N=>this.relativeToGrid(N)):null)),this.moves.push(y),this.persistMove(y).catch(N=>{console.error("[GameTracker] Failed to persist move to server:",N)});const C=this.getCurrentBraceletStatus(),A=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:f,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:C,lastKnownPlayer:A,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(N=>({status:N.status,elapsed:N.elapsed.toFixed(2)}))}})}async persistMove(t){var r;if(!this.sessionInitialized||!((r=this.sessionInfo)!=null&&r.sessionGameId)){console.warn("[GameTracker] Cannot persist move - session not initialized");return}const n=`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`;console.log(`[GameTracker] Persisting move to: ${n}`);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){const a=await o.text();throw console.error(`[GameTracker] Server error (${o.status}):`,a),new Error(`Failed to persist move (${o.status}): ${a}`)}const l=await o.json();return console.log("[GameTracker]  Move persisted successfully:",l),l}catch(o){throw console.error("[GameTracker]  persistMove error:",o),o}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(f=>f.timestamp>=o&&f.timestamp<=l);if(a.length>0){const f={};a.forEach(y=>{(y.status==="Player A"||y.status==="Player B")&&(f[y.status]=(f[y.status]||0)+1)});const h=Object.keys(f).reduce((y,C)=>f[y]>f[C]?y:C,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let ds=null;const Xc=()=>(ds||(ds=new Lv),ds),sn=.07,Ni=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Ke=e=>Math.round(e*1e3)/1e3,Ov=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Ke(l.position[0]-sn),Ke(l.position[1])],[Ke(l.position[0]+sn),Ke(l.position[1])],[Ke(l.position[0]),Ke(l.position[1]-sn)],[Ke(l.position[0]),Ke(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Bv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},sa=e=>e.map(t=>{const n=[],r=[[Ke(t.position[0]-sn),Ke(t.position[1])],[Ke(t.position[0]+sn),Ke(t.position[1])],[Ke(t.position[0]),Ke(t.position[1]-sn)],[Ke(t.position[0]),Ke(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Ke(o.position[0])===l[0]&&Ke(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Fv=e=>{const t=new Set;if(e.forEach((a,f)=>{a.forEach((h,y)=>{h&&t.add(`${f},${y}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,f]=l.shift(),h=`${a},${f}`;o.has(h)||(o.add(h),n.forEach(([y,C])=>{const A=`${a+y},${f+C}`;t.has(A)&&!o.has(A)&&l.push([a+y,f+C])}))}return o.size===t.size},Dv=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Ke(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Ke(l));for(let l=0;l<=.77;l+=sn)r.push(Ke(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const f=n.findIndex(y=>Math.abs(y-l[0])<.001),h=r.findIndex(y=>Math.abs(y-l[1])<.001);f!==-1&&h!==-1&&(o[h][f]=!0)}}),Fv(o)},aa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=Dv(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},Jc=e=>{if(e.length===0)return null;try{const t=e.map(C=>C[0]),n=e.map(C=>C[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(C=>{const A=Math.sqrt(Math.pow(C[0]-r,2)+Math.pow(C[1]-o,2));A<l&&(l=A,a=C)});const f=-a[0],h=-a[1],y=e.map(C=>[Ke(C[0]+f),Ke(C[1]+h)]);return y.sort((C,A)=>C[0]-A[0]||C[1]-A[1]),y}catch{return null}},$v=60,Zc=.07,fs=120;function Uv({config:e,interfaceHidden:t=!1}){const[n,r]=P.useState(Ni()),[o,l]=P.useState(null),[a,f]=P.useState({x:0,y:0}),[h,y]=P.useState(!0),[C,A]=P.useState(e.timeSeconds),[N,O]=P.useState(0),[F,D]=P.useState(null),[he,S]=P.useState(!0),[w,k]=P.useState(""),[T,W]=P.useState(!1),[Z,X]=P.useState({blockSize:$v,bottomPadding:fs}),V=P.useRef(null),ve=P.useRef(new Kc(e)),Q=P.useRef(Xc()),fe=P.useRef(null),q=P.useRef(Date.now()),pe=P.useRef(fs),de=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,je=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,Ce="The experiment is done. Thank you very much for your participation!",Ne=P.useCallback(()=>{const B=V.current;if(!B)return;const Y=B.offsetWidth,G=B.offsetHeight;if(!Y||!G)return;const ae=pe.current||fs;let R=Math.max(1,Math.min(Y,G-ae)),p=Math.max(38,Math.min(R*Zc*.95,R/4)),I=Math.max(p*2.5,110);R=Math.max(1,Math.min(Y,G-I)),p=Math.max(38,Math.min(R*Zc*.95,R/4)),I=Math.max(p*2.5,110),pe.current=I,X(E=>{const x=Math.abs(E.blockSize-p),M=Math.abs(E.bottomPadding-I);return x<.5&&M<.5?E:{blockSize:p,bottomPadding:I}})},[]);P.useEffect(()=>(k(de),(async()=>{try{Q.current.start(),await Q.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(Y){console.error("[GameCanvas] Failed to initialize tracker:",Y),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),window.endGameExperience=()=>{S(!0),k(Ce),W(!0),Q.current.stop(),console.log("[GameCanvas] Game ended via endGameExperience(). All data saved to server.")},()=>{window.endGameExperience&&delete window.endGameExperience,Q.current.stop()}),[]),P.useEffect(()=>{Ne()},[Ne,t]),P.useEffect(()=>{const B=()=>{Ne()};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[Ne]),P.useEffect(()=>{if(!h&&C>0){const B=setInterval(()=>{A(Y=>Y<=1?(clearInterval(B),S(!0),k(Ce),W(!0),console.log("[GameCanvas] Game ended by timer. All data saved to server."),0):Y-1)},1e3);return()=>clearInterval(B)}},[h,C]),P.useEffect(()=>{r(B=>aa(sa(B),h))},[h]);const J=()=>(Date.now()-q.current)/1e3,oe=(B,Y)=>{const G=V.current;if(!G)return 0;const ae=G.offsetHeight-pe.current,R=Math.min(G.offsetWidth,ae),p=Y==="x"?(G.offsetWidth-R)/2:(G.offsetHeight-pe.current-R)/2;return(B-p)/R-.5},ne=(B,Y)=>{const G=V.current;if(!G)return 0;const ae=G.offsetHeight-pe.current,R=Math.min(G.offsetWidth,ae),p=Y==="x"?(G.offsetWidth-R)/2:(G.offsetHeight-pe.current-R)/2;return(B+.5)*R+p},xe=B=>{var R,p,I,E;const Y=V.current.getBoundingClientRect(),G=B.clientX!==void 0?B.clientX:(p=(R=B.touches)==null?void 0:R[0])==null?void 0:p.clientX,ae=B.clientY!==void 0?B.clientY:(E=(I=B.touches)==null?void 0:I[0])==null?void 0:E.clientY;return{x:G-Y.left,y:ae-Y.top}},Ee=(B,Y)=>{const G=n.find(I=>I.id===Y);if(!G||!G.canMove)return;B.preventDefault();const ae=xe(B),R=ne(G.position[0],"x"),p=ne(G.position[1],"y");fe.current=Date.now(),l(Y),f({x:ae.x-R,y:ae.y-p})},ze=B=>{if(o===null)return;B.preventDefault();const Y=xe(B),G=oe(Y.x-a.x,"x"),ae=oe(Y.y-a.y,"y");r(R=>R.map(p=>p.id===o?{...p,position:[G,ae]}:p))},$=()=>{try{const B=window.braceletDetectorVideo;if(!B||!B.videoWidth||B.videoWidth===0)return console.warn("[GameCanvas] No raw video source available for frame capture"),null;const Y=document.createElement("canvas"),G=640,ae=480;let R=B.videoWidth,p=B.videoHeight;const I=R/p;return R>G&&(R=G,p=R/I),p>ae&&(p=ae,R=p*I),Y.width=Math.floor(R),Y.height=Math.floor(p),Y.getContext("2d").drawImage(B,0,0,Y.width,Y.height),Y.toDataURL("image/jpeg",.6)}catch(B){return console.error("[GameCanvas] Error capturing camera frame:",B),null}},ce=()=>{if(o===null)return;const B=n.find(x=>x.id===o),Y=Ov(n,o),G=Bv(Y,B.position),ae=fe.current?(Date.now()-fe.current)/1e3:0,R=n.map(x=>x.id===o?{...x,position:G}:x),p=$(),I=window.currentBraceletStatus||"Unknown",E={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:J(),unit:o,end_position:G,all_positions:R.map(x=>x.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:p,player:I};ve.current.write(E),Q.current.recordMove(E,ae,p),r(x=>{const M=x.map(z=>z.id===o?{...z,position:G}:z);return aa(sa(M),h)}),l(null),fe.current=null},me=()=>{const B=n.map(E=>E.position),Y=Jc(B),G=N+1,ae=$(),R=window.currentBraceletStatus||"Unknown",p={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:J(),unit:null,end_position:null,all_positions:null,gallery_shape_number:G,gallery:B,gallery_normalized:Y,camera_frame:ae,player:R};ve.current.write(p),Q.current.recordMove(p,0,ae);const I=L();D(I),O(G)},L=()=>{const B=document.createElement("canvas");B.width=400,B.height=400;const Y=B.getContext("2d");Y.fillStyle="#000",Y.fillRect(0,0,400,400);const G=n.map(R=>R.position),ae=Jc(G);return ae&&ae.forEach(R=>{const p=(R[0]+.5)*400,I=(R[1]+.5)*400;Y.fillStyle="green",Y.fillRect(p-15,I-15,30,30)}),B.toDataURL()},H=P.useCallback(B=>{B.key==="p"&&h?(y(!1),S(!0),k(je),q.current=Date.now(),r(Ni()),D(null),O(0),ve.current=new Kc(e),Q.current.stop(),Q.current=Xc(),Q.current.start(),Q.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):B.key==="q"&&!h&&(S(!0),k(Ce),W(!0),console.log("[GameCanvas] Game ended manually (q key). All data saved to server."))},[h,e.id]);P.useEffect(()=>(window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)),[H]);const te=()=>{if(T&&w===Ce){console.log("[GameCanvas] Game ended - redirecting to start dialog"),window.toggleInterface&&window.toggleInterface(!1),window.location.hash="#/",window.location.reload();return}if(!h&&w===je)try{const B=new(window.AudioContext||window.webkitAudioContext),Y=B.createOscillator(),G=B.createGain();Y.connect(G),G.connect(B.destination),Y.frequency.setValueAtTime(800,B.currentTime),Y.frequency.setValueAtTime(600,B.currentTime+.15),G.gain.setValueAtTime(.3,B.currentTime),G.gain.exponentialRampToValueAtTime(.01,B.currentTime+.3),Y.start(B.currentTime),Y.stop(B.currentTime+.3),console.log("[GameCanvas] Playing start sound - Real experiment begins!")}catch(B){console.error("[GameCanvas] Error playing sound:",B)}S(!1)},le=B=>{B.preventDefault()};return d.jsxs("div",{className:"game-canvas",ref:V,style:{"--block-size":`${Z.blockSize}px`,"--bottom-padding":`${Z.bottomPadding}px`},onMouseMove:ze,onMouseUp:ce,onMouseLeave:ce,onTouchMove:ze,onTouchEnd:ce,onTouchCancel:ce,onContextMenu:le,children:[d.jsx("div",{className:"gallery",onClick:me,children:d.jsx("div",{className:"gallery-frame",children:F?d.jsx("img",{src:F,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&d.jsxs("div",{className:"timer",children:["Time: ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),n.map(B=>d.jsx("div",{className:`block ${B.canMove?"movable":""}`,style:{left:`${ne(B.position[0],"x")}px`,top:`${ne(B.position[1],"y")}px`,backgroundColor:B.color||"green",cursor:B.canMove?"grab":"default"},onMouseDown:Y=>Ee(Y,B.id),onTouchStart:Y=>Ee(Y,B.id)},B.id)),he&&d.jsx("div",{className:"message-overlay",onClick:te,children:d.jsxs("div",{className:"message-box",children:[w,d.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var sl={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var m=i[c];if(!(m in u))break e;u=u[m]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(g||"")+"_"+m++,g)}function u(g,v){this.h=g,n(this,"description",{configurable:!0,writable:!0,value:v})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",m=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function f(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=f(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var y=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(i[m]=c[m])}return i};l("Object.assign",function(i){return i||y});var C=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},A;if(typeof Object.setPrototypeOf=="function")A=Object.setPrototypeOf;else{var N;e:{var O={a:!0},F={};try{F.__proto__=O,N=F.a;break e}catch{}N=!1}A=N?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var D=A;function he(i,s){if(i.prototype=C(s.prototype),i.prototype.constructor=i,D)D(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}S.prototype.u=function(i){this.i=i};function k(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}S.prototype.return=function(i){this.l={return:i},this.h=this.v};function T(i,s,u){return i.h=u,{value:s}}function W(i){this.h=new S,this.i=i}function Z(i,s){w(i.h);var u=i.h.j;return u?X(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),V(i))}function X(i,s,u,c){try{var m=s.call(i.h.j,u);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return i.h.m=!1,m;var g=m.value}catch(v){return i.h.j=null,k(i.h,v),V(i)}return i.h.j=null,c.call(i.h,g),V(i)}function V(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,k(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function ve(i){this.next=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=V(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.throw,s,i.h.u):(k(i.h,s),s=V(i)),s},this.return=function(s){return Z(i,s)},this[Symbol.iterator]=function(){return this}}function Q(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,m){function g(v){v.done?c(v.value):Promise.resolve(v.value).then(s,u).then(g,m)}g(i.next())})}function fe(i){return Q(new ve(new W(i)))}l("Promise",function(i){function s(v){this.i=0,this.j=void 0,this.h=[],this.u=!1;var j=this.l();try{v(j.resolve,j.reject)}catch(_){j.reject(_)}}function u(){this.h=null}function c(v){return v instanceof s?v:new s(function(j){j(v)})}if(i)return i;u.prototype.i=function(v){if(this.h==null){this.h=[];var j=this;this.j(function(){j.m()})}this.h.push(v)};var m=o.setTimeout;u.prototype.j=function(v){m(v,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var v=this.h;this.h=[];for(var j=0;j<v.length;++j){var _=v[j];v[j]=null;try{_()}catch(b){this.l(b)}}}this.h=null},u.prototype.l=function(v){this.j(function(){throw v})},s.prototype.l=function(){function v(b){return function(ee){_||(_=!0,b.call(j,ee))}}var j=this,_=!1;return{resolve:v(this.I),reject:v(this.m)}},s.prototype.I=function(v){if(v===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof s)this.L(v);else{e:switch(typeof v){case"object":var j=v!=null;break e;case"function":j=!0;break e;default:j=!1}j?this.F(v):this.s(v)}},s.prototype.F=function(v){var j=void 0;try{j=v.then}catch(_){this.m(_);return}typeof j=="function"?this.M(j,v):this.s(v)},s.prototype.m=function(v){this.v(2,v)},s.prototype.s=function(v){this.v(1,v)},s.prototype.v=function(v,j){if(this.i!=0)throw Error("Cannot settle("+v+", "+j+"): Promise already settled in state"+this.i);this.i=v,this.j=j,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var v=this;m(function(){if(v.D()){var j=o.console;typeof j<"u"&&j.error(v.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var v=o.CustomEvent,j=o.Event,_=o.dispatchEvent;return typeof _>"u"?!0:(typeof v=="function"?v=new v("unhandledrejection",{cancelable:!0}):typeof j=="function"?v=new j("unhandledrejection",{cancelable:!0}):(v=o.document.createEvent("CustomEvent"),v.initCustomEvent("unhandledrejection",!1,!0,v)),v.promise=this,v.reason=this.j,_(v))},s.prototype.H=function(){if(this.h!=null){for(var v=0;v<this.h.length;++v)g.i(this.h[v]);this.h=null}};var g=new u;return s.prototype.L=function(v){var j=this.l();v.T(j.resolve,j.reject)},s.prototype.M=function(v,j){var _=this.l();try{v.call(j,_.resolve,_.reject)}catch(b){_.reject(b)}},s.prototype.then=function(v,j){function _(ye,ie){return typeof ye=="function"?function(ke){try{b(ye(ke))}catch(Ae){ee(Ae)}}:ie}var b,ee,Se=new s(function(ye,ie){b=ye,ee=ie});return this.T(_(v,b),_(j,ee)),Se},s.prototype.catch=function(v){return this.then(void 0,v)},s.prototype.T=function(v,j){function _(){switch(b.i){case 1:v(b.j);break;case 2:j(b.j);break;default:throw Error("Unexpected state: "+b.i)}}var b=this;this.h==null?g.i(_):this.h.push(_),this.u=!0},s.resolve=c,s.reject=function(v){return new s(function(j,_){_(v)})},s.race=function(v){return new s(function(j,_){for(var b=f(v),ee=b.next();!ee.done;ee=b.next())c(ee.value).T(j,_)})},s.all=function(v){var j=f(v),_=j.next();return _.done?c([]):new s(function(b,ee){function Se(ke){return function(Ae){ye[ke]=Ae,ie--,ie==0&&b(ye)}}var ye=[],ie=0;do ye.push(void 0),ie++,c(_.value).T(Se(ye.length-1),ee),_=j.next();while(!_.done)})},s});function q(i,s){i instanceof String&&(i+="");var u=0,c=!1,m={next:function(){if(!c&&u<i.length){var g=u++;return{value:s(g,i[g]),done:!1}}return c=!0,{done:!0,value:void 0}}};return m[Symbol.iterator]=function(){return m},m}l("Array.prototype.keys",function(i){return i||function(){return q(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var m=this.length||0;for(0>u&&(u=Math.max(0,m+u)),(c==null||c>m)&&(c=m),c=Number(c),0>c&&(c=Math.max(0,m+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function pe(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",pe),l("Uint8Array.prototype.fill",pe),l("Uint8ClampedArray.prototype.fill",pe),l("Int16Array.prototype.fill",pe),l("Uint16Array.prototype.fill",pe),l("Int32Array.prototype.fill",pe),l("Uint32Array.prototype.fill",pe),l("Float32Array.prototype.fill",pe),l("Float64Array.prototype.fill",pe),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var m=c.length;for(u=u||0,0>u&&(u=Math.max(u+m,0));u<m;u++){var g=c[u];if(g===s||Object.is(g,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var de=this||self;function je(i,s){i=i.split(".");var u=de;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function Ce(i){var s;e:{if((s=de.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var Ne=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),m=typeof i=="string"?i.split(""):i,g=0;g<u;g++)g in m&&(c[g]=s.call(void 0,m[g],g,i));return c},J={},oe=null;function ne(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),m=0;return xe(i,function(g){c[m++]=g}),m!==u?c.subarray(0,m):c}function xe(i,s){function u(_){for(;c<i.length;){var b=i.charAt(c++),ee=oe[b];if(ee!=null)return ee;if(!/^[\s\xa0]*$/.test(b))throw Error("Unknown base64 encoding at char: "+b)}return _}Ee();for(var c=0;;){var m=u(-1),g=u(0),v=u(64),j=u(64);if(j===64&&m===-1)break;s(m<<2|g>>4),v!=64&&(s(g<<4&240|v>>2),j!=64&&s(v<<6&192|j))}}function Ee(){if(!oe){oe={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));J[u]=c;for(var m=0;m<c.length;m++){var g=c[m];oe[g]===void 0&&(oe[g]=m)}}}}var ze=typeof Uint8Array<"u",$=!(Ce("Trident")||Ce("MSIE"))&&typeof de.btoa=="function";function ce(i){if(!$){var s;s===void 0&&(s=0),Ee(),s=J[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",m=0,g=0;m<i.length-2;m+=3){var v=i[m],j=i[m+1],_=i[m+2],b=s[v>>2];v=s[(v&3)<<4|j>>4],j=s[(j&15)<<2|_>>6],_=s[_&63],u[g++]=b+v+j+_}switch(b=0,_=c,i.length-m){case 2:b=i[m+1],_=s[(b&15)<<2]||c;case 1:i=i[m],u[g]=s[i>>2]+s[(i&3)<<4|b>>4]+_+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var me=RegExp("[-_.]","g");function L(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function H(i){if(!$)return ne(i);me.test(i)&&(i=i.replace(me,L)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var te;function le(){return te||(te=new Uint8Array(0))}var B={},Y=typeof Uint8Array.prototype.slice=="function",G=0,ae=0;function R(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=f(I(u,i)),s=u.next().value,i=u.next().value,u=s),G=u>>>0,ae=i>>>0}var p=typeof BigInt=="function";function I(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function E(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return M||(M=new E(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)R(Number(i));else if(p)i=BigInt(i),G=Number(i&BigInt(4294967295))>>>0,ae=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");ae=G=0;for(var u=i.length,c=s,m=(u-s)%6+s;m<=u;c=m,m+=6)c=Number(i.slice(c,m)),ae*=1e6,G=1e6*G+c,4294967296<=G&&(ae+=G/4294967296|0,G%=4294967296);s&&(s=f(I(G,ae)),i=s.next().value,s=s.next().value,G=i,ae=s)}return new E(G,ae)}var M;function z(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function U(){return Error("Failed to read varint, encoding is invalid.")}function re(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function se(){throw Error("Invalid UTF8")}function ge(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var we=void 0,Me,Be=typeof TextDecoder<"u",Fe,He=typeof TextEncoder<"u",We;function _e(i){if(i!==B)throw Error("illegal external caller")}function Pe(i,s){if(_e(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function Te(){return We||(We=new Pe(null,B))}function Le(i){_e(B);var s=i.V;return s=s==null||ze&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?H(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:H(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Pe)return{buffer:Le(i)||le(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ye(this,i,s)}function Ye(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw re(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],m=c&127;if(c&128&&(c=s[u++],m|=(c&127)<<7,c&128&&(c=s[u++],m|=(c&127)<<14,c&128&&(c=s[u++],m|=(c&127)<<21,c&128&&(c=s[u++],m|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw U();return at(i,u),m}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw re(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Ye(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw z(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw U()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw z(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Ki(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,Le(s[u])||le())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Zr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function jl(i){return fn(i,1),i}function xh(i,s){hn(s,(i|0)&-51)}function Xi(i,s){hn(s,(i|18)&-41)}var Cl={};function Ji(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var qr,iu=[];hn(iu,23),qr=Object.freeze(iu);function Nl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Pl(i){var s=i.length;(s=s?i[s-1]:void 0)&&Ji(s)?s.g=1:(s={},i.push((s.g=1,s)))}function ou(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){Nl(i),ei(i,s,u,c)}function ei(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?ou(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Al(i,s,u,c){var m=en(i,s);Array.isArray(m)||(m=qr);var g=qe(m);if(g&1||jl(m),c)g&2||fn(m,2),u&1||Object.freeze(m);else{c=!(u&2);var v=g&2;u&1||!v?c&&g&16&&!v&&Zr(m,16):(m=jl(Array.prototype.slice.call(m)),ei(i,s,m))}return m}function Ml(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&ei(i,s,c),c}function lu(i,s,u,c,m){i.h||(i.h={});var g=i.h[u],v=Al(i,u,3,m);if(!g){var j=v;g=[];var _=!!(qe(i.o)&16);v=!!(qe(j)&2);var b=j;!m&&v&&(j=Array.prototype.slice.call(j));for(var ee=v,Se=0;Se<j.length;Se++){var ye=j[Se],ie=s,ke=!1;if(ke=ke===void 0?!1:ke,ye=Array.isArray(ye)?new ie(ye):ke?new ie:void 0,ye!==void 0){ie=ye.o;var Ae=ke=qe(ie);v&&(Ae|=2),_&&(Ae|=16),Ae!=ke&&hn(ie,Ae),ie=Ae,ee=ee||!!(2&ie),g.push(ye)}}return i.h[u]=g,_=qe(j),s=_|33,s=ee?s&-9:s|8,_!=s&&(ee=j,Object.isFrozen(ee)&&(ee=Array.prototype.slice.call(ee)),hn(ee,s),j=ee),b!==j&&ei(i,u,j),(m||c&&v)&&fn(g,2),c&&Object.freeze(g),g}return m||(m=Object.isFrozen(g),c&&!m?Object.freeze(g):!c&&m&&(g=Array.prototype.slice.call(g),i.h[u]=g)),g}function Zi(i,s,u){var c=!!(qe(i.o)&2);if(s=lu(i,s,u,c,c),i=Al(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var m=fu(u,!1);m.j=u}else m=u;u!==m&&(s[c]=m,i[c]=m.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function su(i,s,u,c,m){Nl(i);var g=lu(i,u,s,!1,!1);return u=c??new u,i=Al(i,s,2,!1),m!=null?(g.splice(m,0,u),i.splice(m,0,u.o)):(g.push(u),i.push(u.o)),u.C()&&Zr(i,8),u}function qi(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,qi(Ml(i,s),u)}var eo;function Sh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Pl(i),i}else{if(ze&&i!=null&&i instanceof Uint8Array)return ce(i);if(i instanceof Pe){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=ce(s)}}}return i}function au(i,s,u,c){if(i!=null){if(Array.isArray(i))i=Il(i,s,u,c!==void 0);else if(Ji(i)){var m={},g;for(g in i)m[g]=au(i[g],s,u,c);i=m}else i=s(i,c);return i}}function Il(i,s,u,c){var m=qe(i);c=c?!!(m&16):void 0,i=Array.prototype.slice.call(i);for(var g=0;g<i.length;g++)i[g]=au(i[g],s,u,c);return u(m,i),i}function kh(i){return i.ja===Cl?i.toJSON():Sh(i)}function Eh(i,s){i&128&&Pl(s)}function uu(i,s,u){if(u=u===void 0?Xi:u,i!=null){if(ze&&i instanceof Uint8Array)return i.length?new Pe(new Uint8Array(i),B):Te();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=Il(i,uu,c&4?Xi:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===Cl?du(i):i}}function cu(i,s,u,c,m,g,v){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(g=Ne(i,du),Xi(c,g),Object.freeze(g),c=g),Nl(s),v=c==null?qr:jl([]),c!=null){for(g=!!c.length,i=0;i<c.length;i++){var j=c[i];g=g&&!(qe(j.o)&2),v[i]=j.o}g=(g?8:0)|1,i=qe(v),(i&g)!==g&&(Object.isFrozen(v)&&(v=Array.prototype.slice.call(v)),hn(v,i|g)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);ei(s,u,v,m)}else pn(s,u,uu(c,g,v),m)}function du(i){return qe(i.o)&2||(i=fu(i,!0),fn(i.o,2)),i}function fu(i,s){var u=i.o,c=[];fn(c,16);var m=i.constructor.h;if(m&&c.push(m),m=i.B,m){c.length=u.length,c.fill(void 0,c.length,u.length);var g={};c[c.length-1]=g}qe(u)&128&&Pl(c),s=s||i.C()?Xi:xh,g=i.constructor,eo=c,c=new g(c),eo=void 0,i.R&&(c.R=i.R.slice()),g=!!(qe(u)&16);for(var v=m?u.length-1:u.length,j=0;j<v;j++)cu(i,c,j-i.G,u[j],!1,g,s);if(m)for(var _ in m)cu(i,c,+_,m[_],!0,g,s);return c}function Pt(i,s,u){i==null&&(i=eo),eo=void 0;var c=this.constructor.i||0,m=0<c,g=this.constructor.h,v=!1;if(i==null){i=g?[g]:[];var j=48,_=!0;m&&(c=0,j|=128),hn(i,j)}else{if(!Array.isArray(i)||g&&g!==i[0])throw Error();var b=j=fn(i,0);if((_=(16&b)!==0)&&((v=(32&b)!==0)||(b|=32)),m){if(128&b)c=0;else if(0<i.length){var ee=i[i.length-1];if(Ji(ee)&&"g"in ee){c=0,b|=128,delete ee.g;var Se=!0,ye;for(ye in ee){Se=!1;break}Se&&i.pop()}}}else if(128&b)throw Error();j!==b&&hn(i,b)}this.G=(g?0:-1)-c,this.h=void 0,this.o=i;e:{if(g=this.o.length,c=g-1,g&&(g=this.o[c],Ji(g))){this.B=g,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!m&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=_&&!v&&!0,m=this.i;var ie;for(_=0;_<u.length;_++)v=u[_],v<m?(v+=this.G,(c=i[v])?hu(c,s):i[v]=qr):(ie||(ie=ou(this)),(c=ie[v])?hu(c,s):ie[v]=qr)}}Pt.prototype.toJSON=function(){return Il(this.o,kh,Eh)},Pt.prototype.C=function(){return!!(qe(this.o)&2)};function hu(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}Pt.prototype.ja=Cl,Pt.prototype.toString=function(){return this.o.toString()};function pu(i,s,u){if(u){var c={},m;for(m in u){var g=u[m],v=g.qa;v||(c.J=g.wa||g.oa.W,g.ia?(c.aa=wu(g.ia),v=function(j){return function(_,b,ee){return j.J(_,b,ee,j.aa)}}(c)):g.ka?(c.Z=xu(g.da.P,g.ka),v=function(j){return function(_,b,ee){return j.J(_,b,ee,j.Z)}}(c)):v=c.J,g.qa=v),v(s,i,g.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Ki(s,i)}var to=Symbol();function mu(i,s,u){return i[to]||(i[to]=function(c,m){return s(c,m,u)})}function vu(i){var s=i[to];if(!s){var u=Tl(i);s=function(c,m){return Su(c,m,u)},i[to]=s}return s}function jh(i){var s=i.ia;if(s)return vu(s);if(s=i.va)return mu(i.da.P,s,i.ka)}function Ch(i){var s=jh(i),u=i.da,c=i.oa.U;return s?function(m,g){return c(m,g,u,s)}:function(m,g){return c(m,g,u)}}function yu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ni in u||ti in u||0<u.length&&typeof u[0]=="function")?u:void 0}function gu(i,s,u,c,m,g){s.P=i[0];var v=1;if(i.length>v&&typeof i[v]!="number"){var j=i[v++];u(s,j)}for(;v<i.length;){u=i[v++];for(var _=v+1;_<i.length&&typeof i[_]!="number";)_++;switch(j=i[v++],_-=v,_){case 0:c(s,u,j);break;case 1:(_=yu(i,v))?(v++,m(s,u,j,_)):c(s,u,j,i[v++]);break;case 2:_=v++,_=yu(i,_),m(s,u,j,_,i[v++]);break;case 3:g(s,u,j,i[v++],i[v++],i[v++]);break;case 4:g(s,u,j,i[v++],i[v++],i[v++],i[v++]);break;default:throw Error("unexpected number of binary field arguments: "+_)}}return s}var no=Symbol();function wu(i){var s=i[no];if(!s){var u=_l(i);s=function(c,m){return ku(c,m,u)},i[no]=s}return s}function xu(i,s){var u=i[no];return u||(u=function(c,m){return pu(c,m,s)},i[no]=u),u}var ti=Symbol();function Nh(i,s){i.push(s)}function Ph(i,s,u){i.push(s,u.W)}function Ah(i,s,u,c){var m=wu(c),g=_l(c).P,v=u.W;i.push(s,function(j,_,b){return v(j,_,b,g,m)})}function Mh(i,s,u,c,m,g){var v=xu(c,g),j=u.W;i.push(s,function(_,b,ee){return j(_,b,ee,c,v)})}function _l(i){var s=i[ti];return s||(s=gu(i,i[ti]=[],Nh,Ph,Ah,Mh),ni in i&&ti in i&&(i.length=0),s)}var ni=Symbol();function Ih(i,s){i[0]=s}function _h(i,s,u,c){var m=u.U;i[s]=c?function(g,v,j){return m(g,v,j,c)}:m}function Th(i,s,u,c,m){var g=u.U,v=vu(c),j=Tl(c).P;i[s]=function(_,b,ee){return g(_,b,ee,j,v,m)}}function Rh(i,s,u,c,m,g,v){var j=u.U,_=mu(c,m,g);i[s]=function(b,ee,Se){return j(b,ee,Se,c,_,v)}}function Tl(i){var s=i[ni];return s||(s=gu(i,i[ni]={},Ih,_h,Th,Rh),ni in i&&ti in i&&(i.length=0),s)}function Su(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,m=u[c];if(!m){var g=u[0];g&&(g=g[c])&&(m=u[c]=Ch(g))}if(!m||!m(s,i,c)){m=s,c=i,g=m.j,Ln(m);var v=m;if(!v.ca){if(m=v.h.h-g,v.h.h=g,v=v.h,m==0)m=Te();else{if(g=St(v,m),v.S&&v.m)m=v.i.subarray(g,g+m);else{v=v.i;var j=g;m=g+m,m=j===m?le():Y?v.slice(j,m):new Uint8Array(v.subarray(j,m))}m=m.length==0?Te():new Pe(m,B)}(g=c.R)?g.push(m):c.R=[m]}}}return i}function ku(i,s,u){for(var c=u.length,m=c%2==1,g=m?1:0;g<c;g+=2)(0,u[g+1])(s,i,u[g]);pu(i,s,m?u[0]:void 0)}function ri(i,s){return{U:i,W:s}}var tn=ri(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,m=i.h,g=c[m],v=c[m+1],j=c[m+2];return c=c[m+3],at(i,i.h+4),v=(g<<0|v<<8|j<<16|c<<24)>>>0,i=2*(v>>31)+1,g=v>>>23&255,v&=8388607,pn(s,u,g==255?v?NaN:1/0*i:g==0?i*Math.pow(2,-149)*v:i*Math.pow(2,g-150)*(v+Math.pow(2,23))),!0},function(i,s,u){if(s=Ml(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?G=ae=0:(ae=0,G=2147483648):isNaN(c)?(ae=0,G=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(ae=0,G=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),ae=0,G=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,ae=0,G=(u|s+127<<23|c&8388607)>>>0)),u=G,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),zh=ri(function(i,s,u){if(i.i!==0)return!1;var c=i.h,m=0,g=i=0,v=c.i,j=c.h;do{var _=v[j++];m|=(_&127)<<g,g+=7}while(32>g&&_&128);for(32<g&&(i|=(_&127)>>4),g=3;32>g&&_&128;g+=7)_=v[j++],i|=(_&127)<<g;if(at(c,j),128>_)c=m>>>0,_=i>>>0,(i=_&2147483648)&&(c=~c+1>>>0,_=~_>>>0,c==0&&(_=_+1>>>0)),c=4294967296*_+(c>>>0);else throw U();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,R(s),dn(i,G,ae)):(u=x(s),dn(i.h,u.i,u.h))))}),Lh=ri(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),Eu=ri(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var m=St(i,c);if(i=i.i,Be){var g=i,v;(v=Me)||(v=Me=new TextDecoder("utf-8",{fatal:!0})),i=m+c,g=m===0&&i===g.length?g:g.subarray(m,i);try{var j=v.decode(g)}catch(Se){if(we===void 0){try{v.decode(new Uint8Array([128]))}catch{}try{v.decode(new Uint8Array([97])),we=!0}catch{we=!1}}throw!we&&(Me=void 0),Se}}else{j=m,c=j+c,m=[];for(var _=null,b,ee;j<c;)b=i[j++],128>b?m.push(b):224>b?j>=c?se():(ee=i[j++],194>b||(ee&192)!==128?(j--,se()):m.push((b&31)<<6|ee&63)):240>b?j>=c-1?se():(ee=i[j++],(ee&192)!==128||b===224&&160>ee||b===237&&160<=ee||((g=i[j++])&192)!==128?(j--,se()):m.push((b&15)<<12|(ee&63)<<6|g&63)):244>=b?j>=c-2?se():(ee=i[j++],(ee&192)!==128||(b<<28)+(ee-144)>>30||((g=i[j++])&192)!==128||((v=i[j++])&192)!==128?(j--,se()):(b=(b&7)<<18|(ee&63)<<12|(g&63)<<6|v&63,b-=65536,m.push((b>>10&1023)+55296,(b&1023)+56320))):se(),8192<=m.length&&(_=ge(_,m),m.length=0);j=ge(_,m)}return pn(s,u,j),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,He){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Fe||(Fe=new TextEncoder)).encode(s)}else{for(var m=0,g=new Uint8Array(3*s.length),v=0;v<s.length;v++){var j=s.charCodeAt(v);if(128>j)g[m++]=j;else{if(2048>j)g[m++]=j>>6|192;else{if(55296<=j&&57343>=j){if(56319>=j&&v<s.length){var _=s.charCodeAt(++v);if(56320<=_&&57343>=_){j=1024*(j-55296)+_-56320+65536,g[m++]=j>>18|240,g[m++]=j>>12&63|128,g[m++]=j>>6&63|128,g[m++]=j&63|128;continue}else v--}if(c)throw Error("Found an unpaired surrogate");j=65533}g[m++]=j>>12|224,g[m++]=j>>6&63|128}g[m++]=j&63|128}}s=m===g.length?g:g.subarray(0,m)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),ju=ri(function(i,s,u,c,m){if(i.i!==2)return!1;s=su(s,u,c),u=i.h.j,c=it(i.h)>>>0;var g=i.h.h+c,v=g-u;if(0>=v&&(i.h.j=g,m(s,i,void 0,void 0,void 0),v=g-i.h.h),v)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-v)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=g,i.h.j=u,!0},function(i,s,u,c,m){if(s=Zi(s,c,u),s!=null)for(c=0;c<s.length;c++){var g=i;Wt(g.h,8*u+2);var v=g.h.end();Zt(g,v),v.push(g.i),g=v,m(s[c],i),v=i;var j=g.pop();for(j=v.i+v.h.length()-j;127<j;)g.push(j&127|128),j>>>=7,v.i++;g.push(j),v.i++}});function Rl(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Ye(c.h,s,u),s=c}else s=new ir(s,u);try{var m=Tl(i),g=Su(new m.P,s,m);break e}finally{m=s.h,m.i=null,m.m=!1,m.l=0,m.j=0,m.h=0,m.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}g=void 0}return g}}function zl(i){return function(){var s=new wr;ku(this,s,_l(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,m=c.length,g=0,v=0;v<m;v++){var j=c[v];u.set(j,g),g+=j.length}return s.j=[u],u}}function xr(i){Pt.call(this,i)}he(xr,Pt);var Cu=[xr,1,Lh,2,tn,3,Eu,4,Eu];xr.prototype.l=zl(Cu);function Ll(i){Pt.call(this,i,-1,Oh)}he(Ll,Pt),Ll.prototype.addClassification=function(i,s){return su(this,1,xr,i,s),this};var Oh=[1],Nu=Rl([Ll,1,ju,Cu]);function Sr(i){Pt.call(this,i)}he(Sr,Pt);var Pu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=zl(Pu);function Au(i){Pt.call(this,i,-1,Bh)}he(Au,Pt);var Bh=[1],Mu=Rl([Au,1,ju,Pu]);function ro(i){Pt.call(this,i)}he(ro,Pt);var Iu=[ro,1,tn,2,tn,3,tn,4,tn,5,tn,6,zh],Fh=Rl(Iu);ro.prototype.l=zl(Iu);function _u(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Tu(i){return Zi(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?qi(en(s,3),""):void 0,displayName:en(s,4)!=null?qi(en(s,4),""):void 0}})}function Ru(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:Ml(i,4)!=null?vn(i,4):void 0}}function zu(i){return i.map(function(s){return Zi(Mu(s),Sr,1).map(Ru)})}function Ol(i,s){this.i=i,this.h=s,this.m=0}function Lu(i,s,u){return Dh(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function Dh(i,s){var u=i.h;if(i.s===void 0){var c=_u(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),m=_u(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),g=u.createProgram();if(u.attachShader(g,c),u.attachShader(g,m),u.linkProgram(g),!u.getProgramParameter(g,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(g));c=i.s=g,u.useProgram(c),m=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:m},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(m,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function $h(i){this.h=i}var Uh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Hh(i,s){return s+i}function Ou(i,s){window[i]=s}function Wh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Vh(){return fe(function(i){switch(i.h){case 1:return i.s=2,T(i,WebAssembly.instantiate(Uh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Bl(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Hh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=f(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Bl.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Gh(i){var s,u,c,m,g,v,j,_,b,ee,Se;return fe(function(ye){switch(ye.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,T(ye,Vh(),2)):ye.return();case 2:if(u=ye.i,typeof window=="object")return Ou("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),Ou("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),v=s.filter(function(ie){return ie.data!==void 0}),j=s.filter(function(ie){return ie.data===void 0}),_=Promise.all(v.map(function(ie){var ke=io(i,ie.url);if(ie.path!==void 0){var Ae=ie.path;ke=ke.then(function(Ve){return i.overrideFile(Ae,Ve),Promise.resolve(Ve)})}return ke})),b=Promise.all(j.map(function(ie){return ie.simd===void 0||ie.simd&&u||!ie.simd&&!u?Wh(i.locateFile(ie.url,i.ha)):Promise.resolve()})).then(function(){var ie,ke,Ae;return fe(function(Ve){if(Ve.h==1)return ie=window.createMediapipeSolutionsWasm,ke=window.createMediapipeSolutionsPackedAssets,Ae=i,T(Ve,ie(ke),2);Ae.i=Ve.i,Ve.h=0})}),ee=function(){return fe(function(ie){return i.h.graph&&i.h.graph.url?ie=T(ie,io(i,i.h.graph.url),0):(ie.h=0,ie=void 0),ie})}(),T(ye,Promise.all([b,_,ee]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(ie){return ie.simd===void 0||ie.simd&&u||!ie.simd&&!u}).map(function(ie){return i.locateFile(ie.url,i.ha)}),importScripts.apply(null,h(c)),m=i,T(ye,createMediapipeSolutionsWasm(Module),6);case 6:m.i=ye.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,g=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(g),ye.h=4;break;case 7:if(i.m=document.createElement("canvas"),Se=i.m.getContext("webgl2",{}),!Se&&(Se=i.m.getContext("webgl",{}),!Se))return alert("Failed to create WebGL canvas context when passing video frame."),ye.return();i.K=Se,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,ye.h=0}})}function bh(i){var s,u,c,m,g,v,j,_;return fe(function(b){if(b.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return b.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){b.h=2;return}return i.fa=i.h.graph.url,T(b,io(i,i.h.graph.url),3)}for(b.h!=2&&(s=b.i,i.j.loadGraph(s)),u=f(Object.keys(i.D)),c=u.next();!c.done;c=u.next())m=c.value,i.j.overrideFile(m,i.D[m]);if(i.D={},i.h.listeners)for(g=f(i.h.listeners),v=g.next();!v.done;v=g.next())j=v.value,Xh(i,j);_=i.l,i.l={},i.setOptions(_),b.h=0})}e.reset=function(){var i=this;return fe(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],m=[],g={},v=f(Object.keys(i)),j=v.next();!j.done;g={X:g.X,Y:g.Y},j=v.next())if(j=j.value,!(j in this.l&&this.l[j]===i[j])){this.l[j]=i[j];var _=s[j];_!==void 0&&(_.onChange&&(g.X=_.onChange,g.Y=i[j],c.push(function(b){return function(){var ee;return fe(function(Se){if(Se.h==1)return T(Se,b.X(b.Y),2);ee=Se.i,ee===!0&&(u.u=!0),Se.h=0})}}(g))),_.graphOptionXref&&(j=Object.assign({},{calculatorName:"",calculatorIndex:0},_.graphOptionXref,{valueNumber:_.type===1?i[j]:0,valueBoolean:_.type===0?i[j]:!1,valueString:_.type===2?i[j]:""}),m.push(j)))}(c.length!==0||m.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(m),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Qh(i){var s,u,c,m,g,v,j;return fe(function(_){switch(_.h){case 1:if(!i.u)return _.return();if(!i.F){_.h=2;break}s=f(i.F),u=s.next();case 3:if(u.done){_.h=5;break}return c=u.value,T(_,c(),4);case 4:u=s.next(),_.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(m=new i.i.GraphOptionChangeRequestList,g=f(i.H),v=g.next();!v.done;v=g.next())j=v.value,m.push_back(j);i.j.changeOptions(m),m.delete(),i.H=void 0}i.u=!1,_.h=0}})}e.initialize=function(){var i=this;return fe(function(s){return s.h==1?T(s,Gh(i),2):s.h!=3?T(s,bh(i),3):T(s,Qh(i),0)})};function io(i,s){var u,c;return fe(function(m){return s in i.L?m.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(g){return g.arrayBuffer()}),i.L[s]=c,m.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,m,g,v,j,_,b,ee,Se;return fe(function(ye){switch(ye.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),T(ye,u.I,2)):ye.return();case 2:return T(ye,u.initialize(),3);case 3:for(m=new u.i.PacketDataList,g=f(Object.keys(i)),v=g.next();!v.done;v=g.next())if(j=v.value,_=u.h.inputs[j]){e:{var ie=i[j];switch(_.type){case"video":var ke=u.s[_.stream];if(ke||(ke=new Ol(u.i,u.K),u.s[_.stream]=ke),ke.m===0&&(ke.m=ke.i.createTexture()),typeof HTMLVideoElement<"u"&&ie instanceof HTMLVideoElement)var Ae=ie.videoWidth,Ve=ie.videoHeight;else typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(Ae=ie.naturalWidth,Ve=ie.naturalHeight):(Ae=ie.width,Ve=ie.height);Ve={glName:ke.m,width:Ae,height:Ve},Ae=ke.h,Ae.canvas.width=Ve.width,Ae.canvas.height=Ve.height,Ae.activeTexture(Ae.TEXTURE0),ke.i.bindTexture2d(ke.m),Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Ae.RGBA,Ae.UNSIGNED_BYTE,ie),ke.i.bindTexture2d(0),ke=Ve;break e;case"detections":for(ke=u.s[_.stream],ke||(ke=new $h(u.i),u.s[_.stream]=ke),ke.data||(ke.data=new ke.h.DetectionListData),ke.data.reset(ie.length),Ve=0;Ve<ie.length;++Ve){Ae=ie[Ve];var $e=ke.data,ft=$e.setBoundingBox,Vt=Ve,At=Ae.la,Oe=new ro;if(mn(Oe,1,At.ra),mn(Oe,2,At.sa),mn(Oe,3,At.height),mn(Oe,4,At.width),mn(Oe,5,At.rotation),pn(Oe,6,At.pa),At=Oe.l(),ft.call($e,Vt,At),Ae.ea)for($e=0;$e<Ae.ea.length;++$e){Oe=Ae.ea[$e],ft=ke.data,Vt=ft.addNormalizedLandmark,At=Ve,Oe=Object.assign({},Oe,{visibility:Oe.visibility?Oe.visibility:0});var ht=new Sr;mn(ht,1,Oe.x),mn(ht,2,Oe.y),mn(ht,3,Oe.z),Oe.visibility&&mn(ht,4,Oe.visibility),Oe=ht.l(),Vt.call(ft,At,Oe)}if(Ae.ba)for($e=0;$e<Ae.ba.length;++$e)ft=ke.data,Vt=ft.addClassification,At=Ve,Oe=Ae.ba[$e],ht=new xr,mn(ht,2,Oe.score),Oe.index&&pn(ht,1,Oe.index),Oe.label&&pn(ht,3,Oe.label),Oe.displayName&&pn(ht,4,Oe.displayName),Oe=ht.l(),Vt.call(ft,At,Oe)}ke=ke.data;break e;default:ke={}}}switch(b=ke,ee=_.stream,_.type){case"video":m.pushTexture2d(Object.assign({},b,{stream:ee,timestamp:c}));break;case"detections":Se=b,Se.stream=ee,Se.timestamp=c,m.pushDetectionList(Se);break;default:throw Error("Unknown input config type: '"+_.type+"'")}}return u.j.send(m),T(ye,u.I,4);case 4:m.delete(),ye.h=0}})};function Yh(i,s,u){var c,m,g,v,j,_,b,ee,Se,ye,ie,ke,Ae,Ve;return fe(function($e){switch($e.h){case 1:if(!u)return $e.return(s);for(c={},m=0,g=f(Object.keys(u)),v=g.next();!v.done;v=g.next())j=v.value,_=u[j],typeof _!="string"&&_.type==="texture"&&s[_.stream]!==void 0&&++m;1<m&&(i.M=!1),b=f(Object.keys(u)),v=b.next();case 2:if(v.done){$e.h=4;break}if(ee=v.value,Se=u[ee],typeof Se=="string")return Ae=c,Ve=ee,T($e,Kh(i,ee,s[Se]),14);if(ye=s[Se.stream],Se.type==="detection_list"){if(ye){for(var ft=ye.getRectList(),Vt=ye.getLandmarksList(),At=ye.getClassificationsList(),Oe=[],ht=0;ht<ft.size();++ht){var Bn=Fh(ft.get(ht)),Jh=vn(Bn,1),Zh=vn(Bn,2),qh=vn(Bn,3),ep=vn(Bn,4),tp=vn(Bn,5,0),oo=void 0;oo=oo===void 0?0:oo,Bn={la:{ra:Jh,sa:Zh,height:qh,width:ep,rotation:tp,pa:qi(en(Bn,6),oo)},ea:Zi(Mu(Vt.get(ht)),Sr,1).map(Ru),ba:Tu(Nu(At.get(ht)))},Oe.push(Bn)}ft=Oe}else ft=[];c[ee]=ft,$e.h=7;break}if(Se.type==="proto_list"){if(ye){for(ft=Array(ye.size()),Vt=0;Vt<ye.size();Vt++)ft[Vt]=ye.get(Vt);ye.delete()}else ft=[];c[ee]=ft,$e.h=7;break}if(ye===void 0){$e.h=3;break}if(Se.type==="float_list"){c[ee]=ye,$e.h=7;break}if(Se.type==="proto"){c[ee]=ye,$e.h=7;break}if(Se.type!=="texture")throw Error("Unknown output config type: '"+Se.type+"'");return ie=i.v[ee],ie||(ie=new Ol(i.i,i.K),i.v[ee]=ie),T($e,Lu(ie,ye,i.M),13);case 13:ke=$e.i,c[ee]=ke;case 7:Se.transform&&c[ee]&&(c[ee]=Se.transform(c[ee])),$e.h=3;break;case 14:Ae[Ve]=$e.i;case 3:v=b.next(),$e.h=2;break;case 4:return $e.return(c)}})}function Kh(i,s,u){var c;return fe(function(m){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?m.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new Ol(i.i,i.K),i.v[s]=c),m.return(Lu(c,u,i.M))):m.return(void 0)})}function Xh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),m=new i.i.StringList,g=f(s.wants),v=g.next();!v.done;v=g.next())m.push_back(v.value);g=i.i.PacketListener.implement({onResults:function(j){for(var _={},b=0;b<s.wants.length;++b)_[c[b]]=j.get(b);var ee=i.listeners[u];ee&&(i.I=Yh(i,_,s.outs).then(function(Se){Se=ee(Se);for(var ye=0;ye<s.wants.length;++ye){var ie=_[c[ye]];typeof ie=="object"&&ie.hasOwnProperty&&ie.hasOwnProperty("delete")&&ie.delete()}Se&&(i.I=Se)}))}}),i.j.attachMultiListener(m,g),m.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},je("Solution",Bl),je("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Bu(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Fu(i){var s=this;i=i||{},this.h=new Bl({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Bu(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:zu},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:zu},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Tu(Nu(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,m,g;return fe(function(v){return v.h==1?(c=Bu(u),m="third_party/mediapipe/modules/hand_landmark/"+c,T(v,io(s.h,c),2)):(g=v.i,s.h.overrideFile(m,g),v.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Fu.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return fe(function(s){return T(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return fe(function(u){return T(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},je("Hands",Fu),je("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),je("VERSION","0.4.1675469240")}).call(Fl);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function qc({hidden:e=!1}){const t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),[l,a]=P.useState(!1),[f,h]=P.useState("None"),[y,C]=P.useState([]),[A,N]=P.useState(null),[O,F]=P.useState(null),[D,he]=P.useState(null),[S,w]=P.useState({a:null,b:null}),k=P.useRef(null),T=P.useRef(null),W=(R,p)=>{const I=localStorage.getItem(R);if(I===null)return p;const E=parseFloat(I);return Number.isFinite(E)?E:p},[Z,X]=P.useState(()=>({roiSize:(()=>{const R=W(et.roiSize,44);return R>10?R:44})(),hueWeight:W(et.hueWeight,4),satWeight:W(et.satWeight,2),valWeight:W(et.valWeight,1),sensitivity:W(et.sensitivity,0)})),V=P.useRef(Z),ve=P.useRef(null),Q=P.useRef(!1),fe=P.useRef(0),q=P.useRef(null),[pe,de]=P.useState([]),je=P.useRef([]),[Ce,Ne]=P.useState(()=>localStorage.getItem(et.selectedCamera)||""),J=P.useCallback(async()=>{try{const p=(await navigator.mediaDevices.enumerateDevices()).filter(I=>I.kind==="videoinput");return de(p),je.current=p,p}catch{return[]}},[]),oe=P.useCallback(R=>{},[Ot]),ne=P.useCallback(async(R=null)=>{const p=t.current;if(!p)return;ve.current&&(ve.current.getTracks().forEach(x=>x.stop()),ve.current=null),B();const I=++fe.current;q.current=null;const E=R!==null?R:Ce;try{const x=E?{video:{deviceId:{exact:E}}}:{video:!0};if(E){const U=je.current.find(re=>re.deviceId===E);console.log("[Detector]  Loading SELECTED camera:",{deviceId:E,label:(U==null?void 0:U.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const M=await navigator.mediaDevices.getUserMedia(x);if(!Q.current||I!==fe.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),M.getTracks().forEach(U=>U.stop());return}ve.current=M;const z=M.getVideoTracks();if(Ot("getUserMedia success. Tracks:",z),z.length>0){const U=z[0];console.log("[Detector]  Camera loaded successfully:",{label:U.label,deviceId:U.getSettings().deviceId,resolution:`${U.getSettings().width}x${U.getSettings().height}`,frameRate:U.getSettings().frameRate})}if(p.srcObject=M,await new Promise(U=>{if(p.readyState>=1&&p.videoWidth>0&&p.videoHeight>0)return U();const se=()=>{p.removeEventListener("loadedmetadata",se),U()};p.addEventListener("loadedmetadata",se,{once:!0}),setTimeout(()=>{p.removeEventListener("loadedmetadata",se),U()},1500)}),!Q.current||I!==fe.current){Ot("Stale request before play(). Stopping stream."),M.getTracks().forEach(U=>U.stop());return}try{await p.play(),Ot("video.play() promise resolved. Video should be playing.")}catch(U){if(console.error("[Detector] video.play() promise rejected:",U),Ot("video.play() promise rejected:",U.name,U.message),I!==fe.current){Ot("play() aborted due to newer request."),M.getTracks().forEach(re=>re.stop());return}}if(q.current!==I&&(q.current=I,Ot("Initializing MediaPipe for request id",I),ce()),Q.current){const U=await J();if(!E||!R){const re=U.find(se=>se.deviceId);re&&re.deviceId&&re.deviceId!==Ce&&(Ne(re.deviceId),localStorage.setItem(et.selectedCamera,re.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,J,oe,Ce]),xe=(R,p,I)=>{const E=(R||0)*2,x=(p||0)/255,M=(I||0)/255,z=M*x,U=z*(1-Math.abs(E/60%2-1)),re=M-z;let se=0,ge=0,we=0;E>=0&&E<60?(se=z,ge=U,we=0):E<120?(se=U,ge=z,we=0):E<180?(se=0,ge=z,we=U):E<240?(se=0,ge=U,we=z):E<300?(se=U,ge=0,we=z):(se=z,ge=0,we=U);const Me=Math.round((se+re)*255),Be=Math.round((ge+re)*255),Fe=Math.round((we+re)*255);return`rgb(${Me}, ${Be}, ${Fe})`},Ee=R=>R?xe(R.h,R.s,R.v):"#ffffff",ze=R=>R==="Player A"&&O?Ee(O):R==="Player B"&&D?Ee(D):R==="Red"?"#ff0000":R==="Blue"?"#0000ff":"#ffffff";P.useEffect(()=>{Q.current=!0;const R=()=>{try{const E=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");E&&F({h:E.h,s:E.s,v:E.v}),x&&he({h:x.h,s:x.s,v:x.v})}catch{}},p=E=>{!E||!E.key||(["calibrationA","calibrationB"].includes(E.key)&&R(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(E.key)&&X(x=>({roiSize:(()=>{const M=W(et.roiSize,(x==null?void 0:x.roiSize)??44);return M>10?M:(x==null?void 0:x.roiSize)??44})(),hueWeight:W(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:W(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:W(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:W(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const E=await J();if(!Q.current)return;const x=localStorage.getItem(et.selectedCamera);let M="";if(x&&E.some(z=>z.deviceId&&z.deviceId===x)){const z=E.find(U=>U.deviceId===x);M=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(z==null?void 0:z.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const z=E.find(U=>U.deviceId);z&&z.deviceId?(M=z.deviceId,localStorage.setItem(et.selectedCamera,z.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:z.deviceId,label:z.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",z.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}Ne(M?z=>z===M?z:M:z=>z||""),R()})(),window.addEventListener("storage",p),()=>{Q.current=!1,fe.current+=1,q.current=null,o.current&&(o.current.stop(),o.current=null),ve.current&&(ve.current.getTracks().forEach(x=>x.stop()),ve.current=null);const E=t.current;E&&(E.srcObject=null,oe(E)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",p)}},[]),P.useEffect(()=>{k.current=O},[O]),P.useEffect(()=>{T.current=D},[D]),P.useEffect(()=>{V.current=Z},[Z]),P.useEffect(()=>{ne(Ce||null)},[Ce,ne]),P.useEffect(()=>{const R=setInterval(()=>{h(p=>($(p),p))},1e3);return()=>clearInterval(R)},[]);const $=R=>{const I={timestamp:new Date().toISOString(),status:R};C(x=>[...x,I]);const E=JSON.parse(localStorage.getItem("braceletDetections")||"[]");E.push(I),localStorage.setItem("braceletDetections",JSON.stringify(E))},ce=async()=>{try{const R=await(async()=>{try{if(typeof sl.Hands=="function")return sl.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((I,E)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return I();const M=document.createElement("script");M.id=x,M.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",M.async=!0,M.onload=()=>I(),M.onerror=z=>E(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(M)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),p=new R({locateFile:I=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${I}`});if(p.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),p.onResults(me),r.current=p,t.current){const I=t.current;console.log("[Detector]  Starting manual frame capture from video element");let E;const x=async()=>{if(I.readyState>=2&&I.videoWidth>0)try{await p.send({image:I})}catch(M){console.error("[Detector] Error sending frame to MediaPipe:",M)}E=requestAnimationFrame(x)};x(),o.current={stop:()=>{E&&(cancelAnimationFrame(E),console.log("[Detector]  Stopped frame capture"))}}}}catch(R){console.error("MediaPipe initialization error:",R),N(`MediaPipe error: ${R.message}`)}},me=R=>{var z;const p=n.current,I=t.current;if(!p||!I)return;const E=p.getContext("2d");p.width=I.videoWidth,p.height=I.videoHeight,E.drawImage(I,0,0,p.width,p.height);let x="None";if(R.multiHandLandmarks&&R.multiHandLandmarks.length>0){Ot("onResults: hands=",R.multiHandLandmarks.length);let U=null,re=0;if(R.multiHandLandmarks.forEach(se=>{const ge=se[0];ge.y>re&&(re=ge.y,U=se)}),R.multiHandLandmarks.forEach(se=>{L(E,se,p.width,p.height)}),U){const se=U[0],ge=se.x*p.width,we=se.y*p.height;E.fillStyle="lime",E.beginPath(),E.arc(ge,we,10,0,2*Math.PI),E.fill(),E.fillStyle="lime",E.font="16px Arial",E.fillText("SELECTED",ge-40,we-15);const Be=Math.max(10,Math.min(300,Math.floor(((z=V.current)==null?void 0:z.roiSize)||60)))/2,Fe=Math.max(0,ge-Be),He=Math.max(0,we-Be),We=Math.min(p.width,ge+Be),_e=Math.min(p.height,we+Be);E.strokeStyle="lime",E.lineWidth=3,E.strokeRect(Fe,He,We-Fe,_e-He);const Pe=We-Fe,Te=_e-He;if(Pe>0&&Te>0)try{const Le=E.getImageData(Fe,He,Pe,Te),rt=k.current,Jt=T.current,Ye=te(Le,rt,Jt);x=Ye.status,w({a:Ye.percentA,b:Ye.percentB}),Ot("Detection result:",x,{roi:{x1:Fe,y1:He,w:Pe,h:Te}})}catch(Le){console.warn("[Detector] Failed to get ROI image data:",Le.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:Pe,height:Te}),x="None",w({a:null,b:null})}}let M="#ffffff";x==="Player A"&&k.current?M=Ee(k.current):x==="Player B"&&T.current&&(M=Ee(T.current)),E.fillStyle=M,E.font="bold 32px Arial",E.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=p,window.braceletDetectorVideo=I)},L=(R,p,I,E)=>{R.strokeStyle="white",R.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([M,z])=>{const U=p[M],re=p[z];R.beginPath(),R.moveTo(U.x*I,U.y*E),R.lineTo(re.x*I,re.y*E),R.stroke()}),p.forEach(M=>{R.fillStyle="red",R.beginPath(),R.arc(M.x*I,M.y*E,5,0,2*Math.PI),R.fill()})},H=R=>{const p=R.data;let I=0,E=0;for(let x=0;x<p.length;x+=4){const M=p[x],z=p[x+1],U=p[x+2],re=le(M,z,U);(re[0]>=gn.red.lower1[0]&&re[0]<=gn.red.upper1[0]||re[0]>=gn.red.lower2[0]&&re[0]<=gn.red.upper2[0])&&re[1]>=gn.red.lower1[1]&&re[2]>=gn.red.lower1[2]&&I++,re[0]>=gn.blue.lower[0]&&re[0]<=gn.blue.upper[0]&&re[1]>=gn.blue.lower[1]&&re[2]>=gn.blue.lower[2]&&E++}return{redCount:I,blueCount:E}},te=(R,p,I)=>{var Be,Fe,He,We;const E=R.data;if(p&&!I)return{status:"Player A",percentA:null,percentB:null};if(I&&!p)return{status:"Player B",percentA:null,percentB:null};const x=((Be=V.current)==null?void 0:Be.hueWeight)??4,M=((Fe=V.current)==null?void 0:Fe.satWeight)??2,z=((He=V.current)==null?void 0:He.valWeight)??1,U=((We=V.current)==null?void 0:We.sensitivity)??0;if(p&&I){let _e=0,Pe=0,Te=0;for(let Ye=0;Ye<E.length;Ye+=4){const at=E[Ye],it=E[Ye+1],St=E[Ye+2],[zt,Lt,dn]=le(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-p.h),180-Math.abs(zt-p.h)),On=Math.min(Math.abs(zt-I.h),180-Math.abs(zt-I.h)),wr=Math.abs(Lt-p.s),Zt=Math.abs(Lt-I.s),Ki=Math.abs(dn-p.v),qt=Math.abs(dn-I.v),fn=Ln*x+wr*M+Ki*z,Zr=On*x+Zt*M+qt*z;Math.min(fn,Zr)>180||(fn<=Zr?_e+=zn:Pe+=zn,Te+=zn)}if(Te===0)return{status:"None",percentA:0,percentB:0};const Le=_e/Math.max(1e-6,Te),rt=Pe/Math.max(1e-6,Te),Jt=.12*(1+.8*Math.max(0,Math.min(1,U)));return Le>=Jt&&Le>=rt?{status:"Player A",percentA:Le,percentB:rt}:rt>=Jt&&rt>Le?{status:"Player B",percentA:Le,percentB:rt}:{status:"None",percentA:Le,percentB:rt}}const{redCount:re,blueCount:se}=H(R),ge=re+se;if(ge===0)return{status:"None",percentA:0,percentB:0};const we=re/ge,Me=se/ge;return we>=.15&&we>=Me?{status:"Player A",percentA:we,percentB:Me}:Me>=.15&&Me>we?{status:"Player B",percentA:we,percentB:Me}:{status:"None",percentA:we,percentB:Me}},le=(R,p,I)=>{R/=255,p/=255,I/=255;const E=Math.max(R,p,I),x=Math.min(R,p,I),M=E-x;let z=0;M!==0&&(E===R?z=60*((p-I)/M%6):E===p?z=60*((I-R)/M+2):z=60*((R-p)/M+4)),z<0&&(z+=360);const U=E===0?0:M/E*255,re=E*255;return[z/2,U,re]},B=R=>{},Y=R=>{Ne(R),R?localStorage.setItem(et.selectedCamera,R):localStorage.removeItem(et.selectedCamera)},G=()=>{const R=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),p=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),I=URL.createObjectURL(p),E=document.createElement("a");E.href=I,E.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,E.click();const x=R.map(re=>`${re.timestamp}: ${re.status}`).join(`
`),M=new Blob([x],{type:"text/plain"}),z=URL.createObjectURL(M),U=document.createElement("a");U.href=z,U.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,U.click()},ae=()=>{localStorage.removeItem("braceletDetections"),C([])};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:G,title:"Download Logs",children:""}),d.jsx("button",{onClick:ae,title:"Clear Logs",children:""}),d.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),d.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{children:"Camera:"}),d.jsxs("select",{value:Ce,onChange:R=>Y(R.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[d.jsx("option",{value:"",children:"System Default"}),pe.map((R,p)=>{var U;const I=!!R.deviceId,E=I?R.deviceId:"",x=I?R.deviceId:`camera-${p}`,M=((U=R.label)==null?void 0:U.trim())||`Camera ${p+1}`,z=I?`  ${R.deviceId.slice(0,8)}`:" (needs permission)";return d.jsxs("option",{value:E,disabled:!I,children:[M,z]},x)})]})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),d.jsx("canvas",{ref:n,className:"output_canvas"}),d.jsxs("div",{className:"detector-info",children:[d.jsxs("div",{className:"status-display",children:["Status: ",d.jsx("span",{style:{color:ze(f),fontWeight:700},children:f})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:O?Ee(O):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:S.a==null?"":`${Math.round(Math.max(0,Math.min(1,S.a))*100)}%`})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:D?Ee(D):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:S.b==null?"":`${Math.round(Math.max(0,Math.min(1,S.b))*100)}%`})]})]}),d.jsxs("div",{className:"log-count",children:["Logs: ",y?y.length:0]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",O?`h${Math.round(O.h)} s${Math.round(O.s)} v${Math.round(O.v)}`:""]}),d.jsxs("div",{children:["B: ",D?`h${Math.round(D.h)} s${Math.round(D.s)} v${Math.round(D.v)}`:""]})]})]})]})]})})}const hs=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},Hv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,f=a*(1-Math.abs(r/60%2-1)),h=l-a;let y=0,C=0,A=0;r>=0&&r<60?(y=a,C=f,A=0):r<120?(y=f,C=a,A=0):r<180?(y=0,C=a,A=f):r<240?(y=0,C=f,A=a):r<300?(y=f,C=0,A=a):(y=a,C=0,A=f);const N=Math.round((y+h)*255),O=Math.round((C+h)*255),F=Math.round((A+h)*255);return`rgb(${N}, ${O}, ${F})`},ed=e=>e?Hv(e.h,e.s,e.v):"#444";function Wv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(!1),o=P.useRef(0),[l,a]=P.useState(!1),[f,h]=P.useState(""),[y,C]=P.useState(null),[A,N]=P.useState(null),O=(L,H)=>{const te=localStorage.getItem(L);if(te===null)return H;const le=parseFloat(te);return Number.isFinite(le)?le:H},[F,D]=P.useState(()=>{const L=O(wn.roiSize,44);return L>10?L:44}),[he,S]=P.useState(()=>O(wn.hueWeight,4)),[w,k]=P.useState(()=>O(wn.satWeight,2)),[T,W]=P.useState(()=>O(wn.valWeight,1)),[Z,X]=P.useState(()=>O(wn.sensitivity,0)),[V,ve]=P.useState(!1),[Q,fe]=P.useState("idle"),[q,pe]=P.useState(5),de=P.useRef({A:[],B:[]});P.useEffect(()=>{r.current=!0;try{const L=JSON.parse(localStorage.getItem("calibrationA")||"null"),H=JSON.parse(localStorage.getItem("calibrationB")||"null");L&&C(L),H&&N(H)}catch{}return(async()=>await je())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(H=>H.stop()),n.current=null);const L=e.current;L&&(L.srcObject=null)}},[]),P.useEffect(()=>{localStorage.setItem(wn.roiSize,String(F))},[F]),P.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(he))},[he]),P.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),P.useEffect(()=>{localStorage.setItem(wn.valWeight,String(T))},[T]),P.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(Z))},[Z]);const je=P.useCallback(async()=>{const L=e.current;if(!L)return;n.current&&(n.current.getTracks().forEach(te=>te.stop()),n.current=null);const H=++o.current;a(!1),h("Requesting camera...");try{const te=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||H!==o.current){te.getTracks().forEach(le=>le.stop());return}if(n.current=te,L.srcObject=te,await new Promise(le=>{if(L.readyState>=1&&L.videoWidth>0)return le();const Y=()=>{L.removeEventListener("loadedmetadata",Y),le()};L.addEventListener("loadedmetadata",Y,{once:!0}),setTimeout(()=>{L.removeEventListener("loadedmetadata",Y),le()},1500)}),!r.current||H!==o.current){te.getTracks().forEach(le=>le.stop());return}try{await L.play(),hs("video.play resolved")}catch(le){hs("video.play rejected",le)}a(!0),h("")}catch(te){h(`Camera error: ${(te==null?void 0:te.message)||te}`),hs("getUserMedia error",te)}},[]),Ce=(L,H,te)=>{L/=255,H/=255,te/=255;const le=Math.max(L,H,te),B=Math.min(L,H,te),Y=le-B;let G=0;Y!==0&&(le===L?G=60*((H-te)/Y%6):le===H?G=60*((te-L)/Y+2):G=60*((L-H)/Y+4)),G<0&&(G+=360);const ae=le===0?0:Y/le*255,R=le*255;return[G/2,ae,R]},Ne=()=>{const L=e.current,H=t.current;if(!L||!H||L.videoWidth===0)return null;const te=L.videoWidth,le=L.videoHeight;H.width=te,H.height=le;const B=H.getContext("2d");B.drawImage(L,0,0,te,le);const Y=Math.max(10,Math.min(300,Math.floor(F))),G=Math.floor(te/2-Y/2),ae=Math.floor(le/2-Y/2),p=B.getImageData(G,ae,Y,Y).data;let I=0,E=0,x=0,M=0,z=0;for(let Fe=0;Fe<p.length;Fe+=4){const[He,We,_e]=Ce(p[Fe],p[Fe+1],p[Fe+2]),Pe=He*2*(Math.PI/180);I+=Math.cos(Pe),E+=Math.sin(Pe),x+=We,M+=_e,z++}if(z===0)return null;const U=x/z,re=M/z,se=I/z,ge=E/z;let Me=Math.atan2(ge,se)*(180/Math.PI);return Me<0&&(Me+=360),{h:Me/2,s:U,v:re}},J=L=>{const H=Ne();if(!H){h("Could not sample video frame.");return}L==="A"?(localStorage.setItem("calibrationA",JSON.stringify(H)),C(H),h(`Saved Player A: h${H.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(H)),N(H),h(`Saved Player B: h${H.h.toFixed(0)}`))},oe=L=>{L==="A"?(localStorage.removeItem("calibrationA"),C(null)):(localStorage.removeItem("calibrationB"),N(null)),h("Cleared")},ne=()=>{ve(!0),fe("playerA"),pe(5),de.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};P.useEffect(()=>{if(!(!V||Q==="idle"||Q==="optimizing"||Q==="complete"))if(q>0){const L=setTimeout(()=>{pe(q-1)},1e3);return()=>clearTimeout(L)}else Q==="playerA"?(fe("switching"),pe(3),h("Switch to Player B... Get ready!")):Q==="switching"?(fe("playerB"),pe(5),h("Hold Player B bracelet in center square...")):Q==="playerB"&&(fe("optimizing"),xe())},[V,Q,q]),P.useEffect(()=>{if(!V||Q==="idle"||Q==="switching"||Q==="optimizing"||Q==="complete")return;const L=setInterval(()=>{const H=Ne();H&&(Q==="playerA"?de.current.A.push(H):Q==="playerB"&&de.current.B.push(H))},200);return()=>clearInterval(L)},[V,Q]);const xe=()=>{h("Optimizing parameters...");const L=de.current.A,H=de.current.B;if(L.length===0||H.length===0){h("Error: Not enough samples collected!"),ve(!1),fe("idle");return}const te=Ee(L),le=Ee(H),B=Math.min(Math.abs(te.h-le.h),180-Math.abs(te.h-le.h)),Y=Math.abs(te.s-le.s),G=Math.abs(te.v-le.v),ae=B/90,R=Y/255,p=G/255,I=ze(L),E=ze(H),x={h:(I.h+E.h)/2,s:(I.s+E.s)/2,v:(I.v+E.v)/2},M=ae+R+p,z=M>0?ae/M*(1/(1+x.h/20))*6:2,U=M>0?R/M*(1/(1+x.s/50))*4:1,re=M>0?p/M*(1/(1+x.v/50))*3:.5;S(Math.max(.5,Math.min(6,z))),k(Math.max(.1,Math.min(4,U))),W(Math.max(.1,Math.min(3,re)));const se=$(L,H,te,le),ge=Math.max(0,Math.min(.8,se*.5));X(ge),localStorage.setItem("calibrationA",JSON.stringify(te)),localStorage.setItem("calibrationB",JSON.stringify(le)),C(te),N(le),fe("complete"),h(` Auto-calibration complete! Collected ${L.length+H.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{ve(!1),fe("idle")},3e3)},Ee=L=>{const H=L.map(E=>E.h),te=L.map(E=>E.s).sort((E,x)=>E-x),le=L.map(E=>E.v).sort((E,x)=>E-x);let B=0,Y=0;H.forEach(E=>{const x=E*2*(Math.PI/180);B+=Math.cos(x),Y+=Math.sin(x)});let ae=Math.atan2(Y/H.length,B/H.length)*(180/Math.PI);ae<0&&(ae+=360);const R=ae/2,p=te[Math.floor(te.length/2)],I=le[Math.floor(le.length/2)];return{h:R,s:p,v:I}},ze=L=>{const H=L.reduce((le,B)=>({h:le.h+B.h,s:le.s+B.s,v:le.v+B.v}),{h:0,s:0,v:0});H.h/=L.length,H.s/=L.length,H.v/=L.length;const te=L.reduce((le,B)=>({h:le.h+Math.pow(B.h-H.h,2),s:le.s+Math.pow(B.s-H.s,2),v:le.v+Math.pow(B.v-H.v,2)}),{h:0,s:0,v:0});return{h:te.h/L.length,s:te.s/L.length,v:te.v/L.length}},$=(L,H,te,le)=>{let B=0;const Y=Math.min(L.length,H.length)*2;return L.forEach(G=>{const ae=ce(G,te);ce(G,le)<ae*1.5&&B++}),H.forEach(G=>{const ae=ce(G,te),R=ce(G,le);ae<R*1.5&&B++}),B/Y},ce=(L,H)=>{const te=Math.min(Math.abs(L.h-H.h),180-Math.abs(L.h-H.h)),le=Math.abs(L.s-H.s),B=Math.abs(L.v-H.v);return Math.sqrt(te*te+le*le+B*B)},me=()=>{ve(!1),fe("idle"),pe(5),h("Generic mode cancelled")};return d.jsxs("div",{className:"calib-root",children:[d.jsxs("div",{className:"calib-header",children:[d.jsx("h2",{children:"Color Calibration"}),d.jsxs("div",{className:"calib-actions",children:[d.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),d.jsx("button",{onClick:je,children:"Restart Camera"})]})]}),f&&d.jsx("div",{className:"calib-message",children:f}),d.jsxs("div",{className:"calib-content",children:[d.jsx("div",{children:d.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[d.jsx("div",{className:"label",children:"Live Preview"}),d.jsx("div",{className:"value",style:{marginBottom:8},children:V?`Generic Mode Active: ${Q==="playerA"?"Player A":Q==="switching"?"Switching...":Q==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),d.jsxs("div",{className:"calib-video-wrap",children:[d.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),d.jsx("div",{className:"calib-center-box",style:{width:F,height:F,borderColor:"#22d3ee",borderWidth:V?"4px":"3px",boxShadow:V?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),V&&q>0&&d.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:q})]})]})}),d.jsxs("div",{className:"calib-controls",children:[d.jsxs("div",{className:"calib-block",style:{background:V?"#1a2332":"#0f172a",border:V?"2px solid #22d3ee":"1px solid #1f2937"},children:[d.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),d.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),V?d.jsxs("div",{style:{marginTop:8},children:[d.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[Q==="playerA"&&`Player A: Hold bracelet steady... ${q}s`,Q==="switching"&&`Switch hands! Get Player B ready... ${q}s`,Q==="playerB"&&`Player B: Hold bracelet steady... ${q}s`,Q==="optimizing"&&"Optimizing parameters...",Q==="complete"&&" Complete!"]}),d.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[Q==="playerA"&&`Samples collected: ${de.current.A.length}`,Q==="switching"&&`Player A: ${de.current.A.length} samples collected`,Q==="playerB"&&`Samples collected: ${de.current.B.length}`]}),Q!=="complete"&&d.jsx("button",{onClick:me,style:{background:"#ef4444"},children:"Cancel"})]}):d.jsx("div",{className:"buttons",children:d.jsx("button",{onClick:ne,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Detector Settings"}),d.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Detection square size"}),d.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:F,onChange:L=>D(Number(L.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[F,"px"]})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Hue weight"}),d.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:he,onChange:L=>S(Number(L.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:he.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Saturation weight"}),d.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:L=>k(Number(L.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Value weight"}),d.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:T,onChange:L=>W(Number(L.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:T.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Z,onChange:L=>X(Number(L.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[(Z*100).toFixed(0),"%"]})]}),d.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player A"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:ed(y)}}),d.jsx("span",{children:y?`h${y.h.toFixed(0)} s${y.s.toFixed(0)} v${y.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>J("A"),disabled:!l,children:"Save A"}),d.jsx("button",{onClick:()=>oe("A"),children:"Clear A"})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player B"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:ed(A)}}),d.jsx("span",{children:A?`h${A.h.toFixed(0)} s${A.s.toFixed(0)} v${A.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>J("B"),disabled:!l,children:"Save B"}),d.jsx("button",{onClick:()=>oe("B"),children:"Clear B"})]})]})]})]}),d.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function wh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var R;const[a,f]=P.useState(e),[h,y]=P.useState(0),[C,A]=P.useState(!1),[N,O]=P.useState(1),[F,D]=P.useState(Ni()),[he,S]=P.useState(!0),[w,k]=P.useState([]),[T,W]=P.useState(null),[Z,X]=P.useState(!1),V=P.useRef(null),ve=P.useRef(null),Q=P.useRef(null),fe=n&&!e,q=["summary-container",r].filter(Boolean).join(" "),pe=(p,I)=>{const E=Q.current;if(!E)return 0;const x=E.offsetHeight;return(p+.5)*x},de=P.useCallback((p,I=null)=>{const E=I||a;if(!E)return;let x=Ni(),M=!0;const z=[];let U=null;for(let re=0;re<=p&&re<E.moves.length;re++){const se=E.moves[re];se.phase==="experiment"&&M&&(M=!1,x=Ni());const ge=se.all_positions||(se.allPositions?se.allPositions.map(we=>[we[0]*.07,we[1]*.07]):null);if(se.type==="moveblock"&&ge)ge.length===10&&x.length===10?x=x.map((we,Me)=>{const Be=ge[Me];return Be&&Array.isArray(Be)&&Be.length===2?{...we,position:[Be[0],Be[1]]}:we}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${ge==null?void 0:ge.length}`),x=aa(sa(x),M),U=se.blockId!==void 0?se.blockId:se.unit;else if(se.type==="added shape to gallery"&&se.gallery_normalized){const we=document.createElement("canvas");we.width=400,we.height=400;const Me=we.getContext("2d");Me.fillStyle="#000",Me.fillRect(0,0,400,400),se.gallery_normalized.forEach(Be=>{const Fe=(Be[0]+.5)*400,He=(Be[1]+.5)*400;Me.fillStyle="green";const We=60;Me.fillRect(Fe-We/2,He-We/2,We,We)}),z.push({number:se.gallery_shape_number,image:we.toDataURL()}),U=null}}D(x),S(M),k(z),W(U)},[a]),je=p=>{f(p),y(0),A(!1),setTimeout(()=>{de(0,p)},0)},Ce=p=>{if(!fe)return;const I=p.target.files[0];if(!I)return;const E=new FileReader;E.onload=x=>{try{const M=JSON.parse(x.target.result);je(M)}catch(M){alert("Failed to parse JSON file: "+M.message)}},E.readAsText(I)};P.useEffect(()=>{e&&je(e)},[e]),P.useEffect(()=>{a&&h>=0&&de(h)},[a,h,de]),P.useEffect(()=>{const p=()=>{a&&h>=0&&setTimeout(()=>{de(h)},100)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[a,h,de]);const Ne=p=>{a&&(p<0||p>=a.moves.length||(de(p),y(p)))},J=()=>{if(!a||C)return;A(!0),y(0),de(0);let p=0;ve.current=setInterval(()=>{if(p>=a.moves.length){oe();return}p++,de(p),y(p)},1e3/N)},oe=()=>{ve.current&&(clearInterval(ve.current),ve.current=null),A(!1)};if(P.useEffect(()=>()=>{ve.current&&clearInterval(ve.current)},[]),P.useEffect(()=>{if(C&&ve.current){clearInterval(ve.current),ve.current=null;const p=h;y(0),A(!1),setTimeout(()=>{y(p),J()},0)}},[N]),!a)return fe?d.jsx("div",{className:q,children:d.jsxs("div",{className:"summary-upload",children:[d.jsx("h1",{children:t}),d.jsx("p",{children:"Load a game session JSON file to view the replay"}),d.jsx("input",{ref:V,type:"file",accept:".json",onChange:Ce,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var p;return(p=V.current)==null?void 0:p.click()},children:"Load JSON File"})]})}):null;const ne=a.moves[h],xe=a.moves.length,Ee=((R=a.summary)==null?void 0:R.movesByPlayer)||{},ze=Object.entries(Ee||{}),$=(p,I=1)=>Number.isFinite(p)?p.toFixed(I):"",ce=a.sessionInfo||{},me=ce.subjectId||ce.id||a.subjectId||a.id||null,L=ce.sessionGameId||a.sessionGameId||me||null,H=ce.condition||a.condition||null,te=a.startTime||ce.startedAt||ce.date||null,le=a.endTime||ce.endedAt||null,B=p=>{if(!p)return null;try{const I=new Date(p);if(!Number.isNaN(I.getTime()))return I.toLocaleString()}catch{}return p},Y=[];L&&Y.push({label:"Session ID",value:L}),me&&me!==L&&Y.push({label:"Participant",value:me}),H&&Y.push({label:"Condition",value:H});const G=B(te);G&&Y.push({label:"Start",value:G});const ae=B(le);return ae&&Y.push({label:"End",value:ae}),d.jsxs("div",{className:q,children:[d.jsxs("div",{className:"summary-header",children:[d.jsx("h1",{children:t}),Y.length>0&&d.jsx("div",{className:"summary-session-info",children:Y.map(p=>d.jsxs("div",{className:"summary-session-info-item",children:[d.jsx("span",{className:"summary-session-info-label",children:p.label}),d.jsx("span",{className:"summary-session-info-value",children:p.value})]},`${p.label}-${p.value}`))})]}),d.jsxs("div",{className:"summary-main",children:[d.jsxs("div",{className:"summary-left",children:[d.jsx("div",{className:"summary-game-area",children:d.jsxs("div",{className:"game-canvas",ref:Q,children:[d.jsx("div",{className:"gallery",children:d.jsx("div",{className:"gallery-frame",children:w.length>0?d.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),F.map((p,I)=>{const E=p.position||[0,0];return!Array.isArray(E)||E.length!==2||!Number.isFinite(E[0])||!Number.isFinite(E[1])?(console.warn(`Invalid position for block ${p.id}:`,E),null):d.jsx("div",{className:`block ${p.canMove?"movable":""} ${p.id===T?"highlighted":""}`,style:{left:`${pe(E[0])}px`,top:`${pe(E[1])}px`,backgroundColor:p.color||"green",cursor:p.canMove?"grab":"default",zIndex:p.id===T?20:I+1}},p.id)})]})}),d.jsxs("div",{className:"summary-progress",children:[d.jsx("input",{type:"range",min:"0",max:Math.max(0,xe-1),value:h,onChange:p=>Ne(parseInt(p.target.value)),style:{width:"100%"}}),d.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",xe,ne&&d.jsxs("span",{className:"move-info",children:[" "," Player: ",ne.player,Array.isArray(ne.position)&&ne.position.length===2&&`  Position: (${ne.position[0]}, ${ne.position[1]})`,Number.isFinite(ne.holdTime)&&`  Hold: ${$(ne.holdTime,2)}s`," "," Time: ",$(ne.elapsed,1),"s"]})]})]})]}),d.jsxs("div",{className:"summary-right",children:[d.jsxs("div",{className:"summary-stats",children:[d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Duration"}),d.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),d.jsx("span",{className:"summary-stats-value",children:xe})]}),d.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[d.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),d.jsx("div",{className:"summary-stats-value",children:ze.length===0?d.jsx("span",{children:""}):ze.map(([p,I])=>d.jsxs("div",{children:[p,": ",I]},p))})]})]}),d.jsxs("div",{className:"summary-controls",children:[d.jsx("button",{onClick:()=>Ne(0),disabled:h===0,children:" First"}),d.jsx("button",{onClick:()=>Ne(h-1),disabled:h===0,children:" Previous"}),d.jsx("button",{onClick:C?oe:J,children:C?" Pause":" Play"}),d.jsx("button",{onClick:()=>Ne(h+1),disabled:h>=xe-1,children:" Next"}),d.jsx("button",{onClick:()=>Ne(xe-1),disabled:h>=xe-1,children:" Last"}),d.jsxs("div",{className:"speed-control",children:[d.jsx("label",{children:"Speed:"}),d.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:N,onChange:p=>O(parseFloat(p.target.value))}),d.jsxs("span",{children:[N,"x"]})]}),fe&&d.jsxs(d.Fragment,{children:[d.jsx("input",{ref:V,type:"file",accept:".json",onChange:Ce,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var p;return(p=V.current)==null?void 0:p.click()},children:" Load New File"})]})]}),d.jsxs("div",{className:"summary-moves-list",children:[d.jsxs("div",{className:"move-list-header",children:[d.jsx("h2",{children:"Move History"}),l&&d.jsx("button",{className:`edit-mode-toggle ${Z?"active":""}`,onClick:()=>X(!Z),children:Z?" Done Editing":"Edit Players"})]}),d.jsx("div",{className:"moves-scroll",children:a.moves.map((p,I)=>d.jsxs("div",{className:`move-item ${I===h?"active":""} ${Z?"edit-mode":""}`,onClick:()=>!Z&&Ne(I),children:[d.jsx("div",{className:"move-number",children:I+1}),p.camera_frame&&d.jsx("div",{className:"move-camera-frame",children:d.jsx("img",{src:p.camera_frame,alt:`Camera frame for move ${I+1}`,className:"camera-frame-thumbnail"})}),d.jsxs("div",{className:"move-details",children:[d.jsx("div",{className:"move-type",children:p.type}),Z&&l?d.jsxs("div",{className:"move-player-edit",children:[d.jsx("label",{children:"Player:"}),d.jsxs("select",{value:p.player||"Unknown",onChange:E=>{const x=E.target.value;l(p._id,x)},onClick:E=>E.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):d.jsxs("div",{className:"move-player",children:["Player: ",p.player]}),p.blockId!==null&&p.blockId!==void 0||p.unit!==null&&p.unit!==void 0?d.jsxs("div",{className:"move-unit",children:["Block: ",p.blockId!==void 0?p.blockId:p.unit]}):null,Array.isArray(p.position)&&p.position.length===2&&d.jsxs("div",{className:"move-position",children:["Position: (",p.position[0],", ",p.position[1],")"]}),Number.isFinite(p.holdTime)&&p.holdTime>0&&d.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",$(p.holdTime,2),"s"]}),d.jsxs("div",{className:"move-time",children:["Time: ",$(p.elapsed,1),"s"]})]})]},I))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Vv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),l=P.useRef(null),a=P.useRef(null),f=P.useRef(null),h=P.useRef(null),[y,C]=P.useState(""),[A,N]=P.useState(!1),[O,F]=P.useState({camA:"None",camB:"None",merged:"None"}),[D,he]=P.useState(!0),[S,w]=P.useState(null),[k,T]=P.useState(null),W=P.useRef(null),Z=P.useRef(null),X=(p,I)=>{const E=localStorage.getItem(p);if(E===null)return I;const x=parseFloat(E);return Number.isFinite(x)?x:I},[V,ve]=P.useState(()=>({roiSize:(()=>{const p=X(kt.roiSize,44);return p>10?p:44})(),hueWeight:X(kt.hueWeight,4),satWeight:X(kt.satWeight,2),valWeight:X(kt.valWeight,1),sensitivity:X(kt.sensitivity,0)})),Q=P.useRef(V),[fe,q]=P.useState([]),[pe,de]=P.useState(""),[je,Ce]=P.useState("");P.useEffect(()=>{let p=!0;(async()=>{try{const M=(await navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="videoinput");if(M.length===0){C("No cameras found");return}q(M);const z=M.slice(0,2).map(U=>U.deviceId);de(z[0]||""),Ce(z[1]||z[0]||""),await Ne(z[0],e,f),z[1]?await Ne(z[1],t,h):await Ne(z[0],t,h),await $(),await ce("A",e,l),await ce("B",t,a)}catch(x){if(!p)return;C((x==null?void 0:x.message)||String(x))}})();const I=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),M=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),M&&T({h:M.h,s:M.s,v:M.v})}catch{ut("No existing calibrations")}};I();const E=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&I(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&ve(M=>({roiSize:(()=>{const z=X(kt.roiSize,(M==null?void 0:M.roiSize)??44);return z>10?z:(M==null?void 0:M.roiSize)??44})(),hueWeight:X(kt.hueWeight,(M==null?void 0:M.hueWeight)??4),satWeight:X(kt.satWeight,(M==null?void 0:M.satWeight)??2),valWeight:X(kt.valWeight,(M==null?void 0:M.valWeight)??1),sensitivity:X(kt.sensitivity,(M==null?void 0:M.sensitivity)??0)})))};return window.addEventListener("storage",E),()=>{if(p=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),f.current&&(f.current.getTracks().forEach(z=>z.stop()),f.current=null),h.current&&(h.current.getTracks().forEach(z=>z.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const M=t.current;M&&(M.srcObject=null),window.removeEventListener("storage",E)}},[]);const Ne=async(p,I,E)=>{const x={video:{deviceId:{exact:p}}};ut("Starting camera with deviceId:",p);const M=await navigator.mediaDevices.getUserMedia(x);E.current=M;const z=I.current;if(!z){ut("Video element not found!");return}z.srcObject=M,ut("Stream assigned to video element, waiting for metadata..."),await new Promise(U=>{if(z.readyState>=2&&z.videoWidth>0&&z.videoHeight>0)return ut("Video already ready:",z.videoWidth,"x",z.videoHeight),U();const se=()=>{ut("loadedmetadata event fired:",z.videoWidth,"x",z.videoHeight),z.removeEventListener("loadedmetadata",se),U()};z.addEventListener("loadedmetadata",se,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),z.removeEventListener("loadedmetadata",se),U()},2e3)});try{await z.play(),ut("Video play() succeeded")}catch(U){ut("Video play() failed:",U)}},J=P.useRef(null),oe=P.useRef(null),ne=P.useRef(null),xe=P.useRef(!1),Ee=async()=>{if(!xe.current){xe.current=!0;try{for(;oe.current||ne.current;){const p=o.current;if(!p)break;let I=null,E=null;if(oe.current?(I="A",E=oe.current,oe.current=null):ne.current&&(I="B",E=ne.current,ne.current=null),!!E){J.current=I;try{await p.send({image:E})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{xe.current=!1}}},ze=(p,I)=>{p==="A"?oe.current=I:ne.current=I,Promise.resolve().then(Ee)},$=async()=>{if(o.current)return o.current;try{const p=await(async()=>{try{if(typeof sl.Hands=="function")return sl.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const E=document.getElementById("mp-hands-cdn-script");if(E&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const M=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(M),x())},50);setTimeout(()=>{clearInterval(M),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(E||await new Promise((x,M)=>{const z=document.createElement("script");z.id="mp-hands-cdn-script",z.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",z.async=!0,z.onload=()=>x(),z.onerror=U=>M(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(z)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),I=new p({locateFile:E=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${E}`});return I.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),I.onResults(E=>{const x=J.current;x==="A"?H(E):x==="B"&&te(E)}),o.current=I,I}catch(p){return console.error("MediaPipe initialization error:",p),C(`MediaPipe error: ${p.message}`),null}},ce=async(p,I,E)=>{if(!await $())return;const M=I.current;if(!M){ut(`Video ref for ${p} not found`);return}ut(`Initializing manual frame capture for camera ${p}, video dimensions:`,M.videoWidth,"x",M.videoHeight);let z=null;const U=()=>{const re=I.current;re&&re.readyState>=2&&re.videoWidth>0&&ze(p,re),z=requestAnimationFrame(U)};z=requestAnimationFrame(U),E.current={stop:()=>{z&&(cancelAnimationFrame(z),z=null,ut(`Stopped manual frame capture for camera ${p}`))}},ut(`Manual frame capture started for camera ${p}`)},me=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),L=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null});P.useEffect(()=>{W.current=S},[S]),P.useEffect(()=>{Z.current=k},[k]),P.useEffect(()=>{Q.current=V},[V]);const H=p=>le(p,n,"A"),te=p=>le(p,r,"B"),le=(p,I,E)=>{var We;const x=I.current;if(!x)return;const M=x.getContext("2d");if(!M)return;const z=E==="A"?e.current:t.current;if(!z||z.videoWidth===0||z.videoHeight===0){E==="A"?me.current={wristY:null,wristX:null,landmarks:null,player:"None"}:L.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=z.videoWidth,x.height=z.videoHeight,M.drawImage(z,0,0,x.width,x.height),M.fillStyle="rgba(0, 0, 0, 0.6)",M.fillRect(x.width-80,5,75,20),M.fillStyle="white",M.font="bold 14px Arial",M.fillText(`Camera ${E}`,x.width-75,20);let U=null,re=null,se=null,ge=[];if(p.multiHandLandmarks&&p.multiHandLandmarks.length>0)for(const _e of p.multiHandLandmarks){const Pe=_e[0],Te=Pe.x*x.width,Le=Pe.y*x.height;ge.push({x:Te,y:Le,landmarks:_e}),(U===null||(D?Le<U:Le>U))&&(U=Le,re=_e,se=Te)}ge.forEach(({x:_e,y:Pe})=>{M.fillStyle="orange",M.beginPath(),M.arc(_e,Pe,8,0,Math.PI*2),M.fill()});let we="None";if(re){M.fillStyle="lime",M.beginPath(),M.arc(se,U,10,0,2*Math.PI),M.fill(),M.fillStyle="lime",M.font="16px Arial",M.fillText("SELECTED",se-40,U-15);const Pe=Math.max(10,Math.min(300,Math.floor(((We=Q.current)==null?void 0:We.roiSize)||60)))/2,Te=Math.max(0,se-Pe),Le=Math.max(0,U-Pe),rt=Math.min(x.width,se+Pe),Jt=Math.min(x.height,U+Pe),Ye=Math.max(0,Math.floor(Te)),at=Math.max(0,Math.floor(Le));let it=Math.floor(rt-Te),St=Math.floor(Jt-Le);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Ye),St=Math.min(St,x.height-at),it>0&&St>0){M.strokeStyle="lime",M.lineWidth=3,M.strokeRect(Ye,at,it,St);try{const zt=M.getImageData(Ye,at,it,St),Lt=W.current,dn=Z.current;we=Y(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),we="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Ye,top:at})}if(ge.length>=1){let _e=ge[0].y,Pe=ge[0].y;ge.forEach(rt=>{rt.y<_e&&(_e=rt.y),rt.y>Pe&&(Pe=rt.y)}),M.strokeStyle="yellow",M.setLineDash([6,4]),M.beginPath(),M.moveTo(0,D?_e:Pe),M.lineTo(x.width,D?_e:Pe),M.stroke(),M.strokeStyle="cyan",M.beginPath(),M.moveTo(0,D?Pe:_e),M.lineTo(x.width,D?Pe:_e),M.stroke(),M.setLineDash([]);const Te=D?"A (top)":"A (bottom)",Le=D?"B (bottom)":"B (top)";M.fillStyle="lime",M.font="16px Arial",M.fillText(Te,6,Math.max(14,(D?_e:Pe)-6)),M.fillStyle="dodgerblue",M.fillText(Le,6,Math.min(x.height-6,(D?Pe:_e)+18))}const Me={wristY:U,wristX:se,landmarks:re,player:we};E==="A"?me.current=Me:L.current=Me;const Be=me.current.wristY,Fe=L.current.wristY;let He="None";if(Be!=null||Fe!=null){const _e=D?(Te,Le)=>Te==null?Le:Math.min(Te,Le):(Te,Le)=>Te==null?Le:Math.max(Te,Le);[Be,Fe].filter(Te=>Te!=null).reduce(_e,null)===Be?He=me.current.player:He=L.current.player}F({camA:me.current.player,camB:L.current.player,merged:He})},B=(p,I,E)=>{p/=255,I/=255,E/=255;const x=Math.max(p,I,E),M=Math.min(p,I,E),z=x-M;let U=0;z!==0&&(x===p?U=60*((I-E)/z%6):x===I?U=60*((E-p)/z+2):U=60*((p-I)/z+4)),U<0&&(U+=360);const re=x===0?0:z/x*255,se=x*255;return[U/2,re,se]},Y=(p,I,E)=>{var se,ge,we,Me;const x=p.data;if(I&&!E)return{status:"Player A",percentA:null,percentB:null};if(E&&!I)return{status:"Player B",percentA:null,percentB:null};const M=((se=Q.current)==null?void 0:se.hueWeight)??4,z=((ge=Q.current)==null?void 0:ge.satWeight)??2,U=((we=Q.current)==null?void 0:we.valWeight)??1,re=((Me=Q.current)==null?void 0:Me.sensitivity)??0;if(I&&E){let Be=0,Fe=0,He=0;for(let Te=0;Te<x.length;Te+=4){const Le=x[Te],rt=x[Te+1],Jt=x[Te+2],[Ye,at,it]=B(Le,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Ye-I.h),180-Math.abs(Ye-I.h)),Wt=Math.min(Math.abs(Ye-E.h),180-Math.abs(Ye-E.h)),ir=Math.abs(at-I.s),zn=Math.abs(at-E.s),Ln=Math.abs(it-I.v),On=Math.abs(it-E.v),wr=dn*M+ir*z+Ln*U,Zt=Wt*M+zn*z+On*U;Math.min(wr,Zt)>180||(wr<=Zt?Be+=Lt:Fe+=Lt,He+=Lt)}if(He===0)return{status:"None",percentA:0,percentB:0};const We=Be/Math.max(1e-6,He),_e=Fe/Math.max(1e-6,He),Pe=.12*(1+.8*Math.max(0,Math.min(1,re)));return We>=Pe&&We>=_e?{status:"Player A",percentA:We,percentB:_e}:_e>=Pe&&_e>We?{status:"Player B",percentA:We,percentB:_e}:{status:"None",percentA:We,percentB:_e}}return{status:"None",percentA:0,percentB:0}},G=(p,I,E)=>{const x=(p||0)*2,M=(I||0)/255,z=(E||0)/255,U=z*M,re=U*(1-Math.abs(x/60%2-1)),se=z-U;let ge=0,we=0,Me=0;x>=0&&x<60?(ge=U,we=re,Me=0):x<120?(ge=re,we=U,Me=0):x<180?(ge=0,we=U,Me=re):x<240?(ge=0,we=re,Me=U):x<300?(ge=re,we=0,Me=U):(ge=U,we=0,Me=re);const Be=Math.round((ge+se)*255),Fe=Math.round((we+se)*255),He=Math.round((Me+se)*255);return`rgb(${Be}, ${Fe}, ${He})`},ae=p=>p?G(p.h,p.s,p.v):"#ffffff",R=async(p,I)=>{try{if(p==="A"){if(de(I),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}f.current&&(f.current.getTracks().forEach(x=>x.stop()),f.current=null);const E=e.current;E&&(E.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Ne(I,e,f),await new Promise(x=>setTimeout(x,200)),await $(),await ce("A",e,l),ut("Camera A switched to:",I)}else{if(Ce(I),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const E=t.current;E&&(E.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Ne(I,t,h),await new Promise(x=>setTimeout(x,200)),await $(),await ce("B",t,a),ut("Camera B switched to:",I)}}catch(E){console.error("[Detector2] Camera switch error:",E),C(`Camera switch error: ${E.message}`)}};return d.jsxs("div",{className:`detector-window ${A?"minimized":""}`,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:()=>N(!A),children:A?"":""}),d.jsx("button",{onClick:()=>he(!D),title:"Toggle A criterion",children:D?"A=Top":"A=Bottom"})]})]}),d.jsxs("div",{className:"detector-content",style:{display:A?"none":"block"},children:[d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera A:"}),d.jsx("select",{value:pe,onChange:p=>R("A",p.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(p=>d.jsx("option",{value:p.deviceId,children:p.label||`Camera ${p.deviceId.slice(0,8)}`},p.deviceId))})]}),d.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:n,className:"output_canvas"})]}),d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera B:"}),d.jsx("select",{value:je,onChange:p=>R("B",p.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(p=>d.jsx("option",{value:p.deviceId,children:p.label||`Camera ${p.deviceId.slice(0,8)}`},p.deviceId))})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),d.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[d.jsxs("div",{className:"status-display",children:["Merged: ",d.jsx("strong",{children:O.merged})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:S?ae(S):"#444"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:k?ae(k):"#444"}})]})]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",S?`h${Math.round(S.h)} s${Math.round(S.s)} v${Math.round(S.v)}`:""]}),d.jsxs("div",{children:["B: ",k?`h${Math.round(k.h)} s${Math.round(k.s)} v${Math.round(k.v)}`:""]})]}),y&&d.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",y]}),d.jsxs("div",{style:{fontSize:12,marginTop:6},children:[d.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const fi=ru(),td=e=>{var l,a,f,h,y;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((C,A)=>typeof A.elapsed=="number"&&A.elapsed>C?A.elapsed:C,0),r={},o={};return t.forEach(C=>{const A=(C==null?void 0:C.player)||"Unknown";r[A]=(r[A]||0)+1;const N=(C==null?void 0:C.phase)||"unknown";o[N]=(o[N]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((f=(a=e.metadata)==null?void 0:a.config)==null?void 0:f.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((y=e.metadata)==null?void 0:y.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Gv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e},nd="adminPassword";function bv(){var fe;const[e,t]=P.useState([]),[n,r]=P.useState(!0),[o,l]=P.useState(null),[a,f]=P.useState(null),[h,y]=P.useState(null),[C,A]=P.useState(!1),[N,O]=P.useState(null),[F,D]=P.useState(!1),[he,S]=P.useState(""),[w,k]=P.useState(!1);P.useEffect(()=>{const q=localStorage.getItem(nd);q&&S(q)},[]);const T=P.useCallback(async()=>{if(!he){l("Password required"),r(!1);return}r(!0),l(null),k(!1);try{const q=await fetch(`${fi}/sessions`,{headers:{"x-admin-password":he}});if(q.status===401||q.status===403)throw k(!0),new Error("Invalid password");if(!q.ok)throw new Error(`Failed to load sessions (${q.status})`);const pe=await q.json(),de=Array.isArray(pe)?pe:[];localStorage.setItem(nd,he),t(de),f(je=>je&&de.some(Ce=>Ce.sessionGameId===je)?je:de.length>0?de[0].sessionGameId:null)}catch(q){console.error("[Admin] Error fetching sessions:",q),l(q.message||"Failed to load sessions"),t([]),f(null)}finally{r(!1)}},[he]);P.useEffect(()=>{T()},[T]),P.useEffect(()=>{if(!a){y(null);return}let q=!1;return(async()=>{if(he){A(!0),O(null);try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}`,{headers:{"x-admin-password":he}});if(!de.ok)throw de.status===404?new Error("Session not found"):new Error(`Failed to load session (${de.status})`);const je=await de.json();q||y(td(je))}catch(de){console.error("[Admin] Error fetching session detail:",de),q||(O(de.message||"Failed to load session"),y(null))}finally{q||A(!1)}}})(),()=>{q=!0}},[a]);const W=q=>{f(q),D(!1)},Z=async()=>{if(!a||!he)return;const q=!F;D(q),A(!0),O(null);try{const pe=q?`${fi}/sessions/${encodeURIComponent(a)}/experiment-only`:`${fi}/sessions/${encodeURIComponent(a)}`,de=await fetch(pe,{headers:{"x-admin-password":he}});if(!de.ok)throw new Error(`Failed to load session data (${de.status})`);const je=await de.json();y(td(je))}catch(pe){console.error("[Admin] Error loading session data:",pe),O(pe.message||"Failed to load session data"),D(!q)}finally{A(!1)}},X=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},V=()=>{if(!h)return;const q=JSON.stringify(h,null,2),pe=new Blob([q],{type:"application/json"}),de=URL.createObjectURL(pe),je=document.createElement("a");je.href=de;const Ce=`${a}_${new Date().toISOString().split("T")[0]}.json`;je.download=Ce,je.click(),URL.revokeObjectURL(de),console.log("[Admin] Downloaded JSON:",Ce)},ve=()=>{if(!h||!h.moves||h.moves.length===0){alert("No moves to export");return}const q=new Set;h.moves.forEach(ne=>{Object.keys(ne).forEach(xe=>{xe!=="camera_frame"&&xe!=="__v"&&q.add(xe)})});const pe=Array.from(q),de=[pe.join(",")];h.moves.forEach(ne=>{const xe=pe.map(Ee=>{const ze=ne[Ee];return ze==null||ze===""?"":Array.isArray(ze)||typeof ze=="object"?`"${JSON.stringify(ze).replace(/"/g,'""')}"`:`"${String(ze).replace(/"/g,'""')}"`});de.push(xe.join(","))});const je=de.join(`
`),Ce=new Blob([je],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(Ce),J=document.createElement("a");J.href=Ne;const oe=`${a}_${new Date().toISOString().split("T")[0]}.csv`;J.download=oe,J.click(),URL.revokeObjectURL(Ne),console.log("[Admin] Downloaded CSV:",oe)},Q=async(q,pe)=>{if(!(!a||!q||!he))try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(q)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":he},body:JSON.stringify({player:pe})});if(!de.ok)throw new Error(`Failed to update player (${de.status})`);y(je=>je&&{...je,moves:je.moves.map(Ce=>Ce._id===q?{...Ce,player:pe}:Ce)}),console.log("[Admin] Player updated:",q,pe)}catch(de){console.error("[Admin] Error updating player:",de),alert("Failed to update player: "+de.message)}};return d.jsxs("div",{className:"admin-container",children:[d.jsxs("aside",{className:"admin-sidebar",children:[d.jsxs("div",{className:"admin-sidebar-header",children:[d.jsx("h1",{children:"Admin"}),d.jsxs("div",{className:"admin-password-row",children:[d.jsx("input",{type:"password",className:`admin-password-input ${w?"error":""}`,placeholder:"Password",value:he,onChange:q=>S(q.target.value),onKeyPress:q=>{q.key==="Enter"&&T()}}),d.jsx("button",{className:"admin-refresh-button",onClick:T,disabled:n||!he,children:n?"Refreshing":"Refresh"})]})]}),o&&d.jsx("div",{className:"admin-error",children:o}),d.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&d.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&d.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(q=>{const pe=typeof q.movesCount=="number"?q.movesCount:Array.isArray(q.moves)?q.moves.length:0,de=q.sessionGameId===a;return d.jsxs("button",{className:`admin-session-card ${de?"active":""}`,onClick:()=>W(q.sessionGameId),children:[d.jsx("div",{className:"admin-session-id",children:q.sessionGameId}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Participant: ",q.subjectId||""]}),d.jsxs("span",{children:["Condition: ",q.condition||""]})]}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Moves: ",pe]}),d.jsxs("span",{children:["Updated: ",Gv(q.updatedAt)]})]})]},q.sessionGameId)})]})]}),d.jsxs("main",{className:"admin-content",children:[C&&d.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),N&&d.jsx("div",{className:"admin-error admin-error--content",children:N}),!C&&!N&&h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"admin-toolbar",children:[d.jsx("button",{className:`admin-toolbar-button experiment-toggle ${F?"active":""}`,onClick:Z,title:F?"Show all moves (including practice)":"Show only experiment phase moves",children:F?"Show All Moves":"Experiment Only"}),d.jsx("button",{className:"admin-toolbar-button edit-players",onClick:X,title:"Open dedicated editor for player assignments",children:"Edit Players"}),d.jsx("div",{className:"admin-toolbar-divider"}),d.jsx("button",{className:"admin-toolbar-button download-json",onClick:V,title:"Download session data as JSON",children:"Download JSON"}),d.jsx("button",{className:"admin-toolbar-button download-csv",onClick:ve,title:"Download moves as CSV",children:"Download CSV"})]}),d.jsx("div",{className:"admin-summary-wrapper",children:d.jsx(wh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((fe=h.sessionInfo)==null?void 0:fe.sessionGameId)||a||""}${F?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:Q})})]}),!C&&!N&&!h&&d.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const jo=ru(),Qv="adminPassword",rd=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Yv({sessionGameId:e}){var ne,xe,Ee,ze;const[t,n]=P.useState(null),[r,o]=P.useState(!0),[l,a]=P.useState(null),[f,h]=P.useState(null),[y,C]=P.useState(null),[A,N]=P.useState("all"),[O,F]=P.useState(""),[D,he]=P.useState(!1),[S,w]=P.useState({}),[k,T]=P.useState({current:0,total:0}),[W,Z]=P.useState("#FF0000"),[X,V]=P.useState("#0000FF"),[ve,Q]=P.useState(!1);P.useEffect(()=>{const $=localStorage.getItem(Qv);$&&F($)},[]),P.useEffect(()=>{e&&O&&q()},[e,O]);const fe=$=>{if(!$||typeof $.h>"u")return null;const ce=($.h||0)*2,me=($.s||0)/255,L=($.v||0)/255,H=L*me,te=H*(1-Math.abs(ce/60%2-1)),le=L-H;let B=0,Y=0,G=0;ce>=0&&ce<60?(B=H,Y=te,G=0):ce<120?(B=te,Y=H,G=0):ce<180?(B=0,Y=H,G=te):ce<240?(B=0,Y=te,G=H):ce<300?(B=te,Y=0,G=H):(B=H,Y=0,G=te);const ae=R=>{const p=Math.round((R+le)*255).toString(16);return p.length===1?"0"+p:p};return`#${ae(B)}${ae(Y)}${ae(G)}`.toUpperCase()},q=async()=>{var $,ce,me,L;if(O){o(!0),a(null);try{const H=await fetch(`${jo}/sessions/${encodeURIComponent(e)}`,{headers:{"x-admin-password":O}});if(!H.ok)throw new Error(`Failed to load session (${H.status})`);const te=await H.json();n(te);let le=null,B=null,Y="";if(te.colorA&&te.colorB?(le=te.colorA,B=te.colorB,Y="session root"):(ce=($=te.metadata)==null?void 0:$.config)!=null&&ce.colorA&&((L=(me=te.metadata)==null?void 0:me.config)!=null&&L.colorB)&&(le=te.metadata.config.colorA,B=te.metadata.config.colorB,Y="session metadata"),le&&B)Z(le),V(B),console.log(`[MoveHistoryEditor]  Loaded colors from ${Y}:`,le,B);else try{const G=JSON.parse(localStorage.getItem("calibrationA")||"null"),ae=JSON.parse(localStorage.getItem("calibrationB")||"null");if(G&&ae){const R=fe(G),p=fe(ae);R&&p?(Z(R),V(p),console.log("[MoveHistoryEditor]  Session has no colors, loaded from localStorage calibration:",R,p)):console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}else console.log("[MoveHistoryEditor]  No calibration found, using default colors (red/blue)")}catch(G){console.warn("[MoveHistoryEditor] Error reading calibration from localStorage:",G),console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}}catch(H){console.error("[MoveHistoryEditor] Error loading session:",H),a(H.message)}finally{o(!1)}}},pe=async($,ce)=>{if(!(!e||!$||!O))try{const me=await fetch(`${jo}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent($)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({player:ce})});if(!me.ok)throw new Error(`Failed to update player (${me.status})`);n(L=>L&&{...L,moves:L.moves.map(H=>H._id===$?{...H,player:ce}:H)}),w(L=>{const H={...L};return delete H[$],H}),console.log("[MoveHistoryEditor] Player updated:",$,ce)}catch(me){console.error("[MoveHistoryEditor] Error updating player:",me),alert("Failed to update player: "+me.message)}},de=async()=>{if(!(!e||!O)){he(!0),w({});try{console.log("[MoveHistoryEditor] Starting AI identification for all moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",W,"Player B:",X);const $=Ne.filter(me=>me.camera_frame);if($.length===0){alert("No moves with camera frames to process");return}T({current:0,total:$.length}),console.log(`[MoveHistoryEditor] Processing ${$.length} moves one by one...`);let ce=0;for(const me of $){T({current:ce+1,total:$.length});try{const L=await fetch(`${jo}/ai/identify-move`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({sessionGameId:e,moveId:me._id,colorA:W,colorB:X})});if(L.ok){const H=await L.json();w(te=>({...te,[me._id]:{player:H.suggestion==="A"?"Player A":H.suggestion==="B"?"Player B":"None",confidence:H.confidence,rawResponse:H.rawResponse}})),ce++,console.log(`[MoveHistoryEditor]  Processed ${ce}/${$.length}: ${H.suggestion}`)}else console.warn(`[MoveHistoryEditor]  Failed to process move ${me._id}`)}catch(L){console.error(`[MoveHistoryEditor] Error processing move ${me._id}:`,L)}}console.log("[MoveHistoryEditor] AI identification complete:",ce,"moves processed"),alert(`AI identified ${ce} moves. Review and confirm suggestions below.`)}catch($){console.error("[MoveHistoryEditor] Error in AI identification:",$),alert("AI identification failed: "+$.message)}finally{he(!1),T({current:0,total:0})}}},je=async()=>{if(!(!e||!O)){he(!0),w({});try{console.log("[MoveHistoryEditor] Starting AI identification for unknown moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",W,"Player B:",X);const $=Ne.filter(me=>me.camera_frame&&(!me.player||me.player==="Unknown"||me.player==="None"));if($.length===0){alert("No unknown moves with camera frames to process");return}T({current:0,total:$.length}),console.log(`[MoveHistoryEditor] Processing ${$.length} unknown moves one by one...`);let ce=0;for(const me of $){T({current:ce+1,total:$.length});try{const L=await fetch(`${jo}/ai/identify-move`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":O},body:JSON.stringify({sessionGameId:e,moveId:me._id,colorA:W,colorB:X})});if(L.ok){const H=await L.json();w(te=>({...te,[me._id]:{player:H.suggestion==="A"?"Player A":H.suggestion==="B"?"Player B":"None",confidence:H.confidence,rawResponse:H.rawResponse}})),ce++,console.log(`[MoveHistoryEditor]  Processed ${ce}/${$.length}: ${H.suggestion}`)}else console.warn(`[MoveHistoryEditor]  Failed to process move ${me._id}`)}catch(L){console.error(`[MoveHistoryEditor] Error processing move ${me._id}:`,L)}}console.log("[MoveHistoryEditor] AI identification complete:",ce,"unknown moves processed"),alert(`AI identified ${ce} unknown moves. Review and confirm suggestions below.`)}catch($){console.error("[MoveHistoryEditor] Error in AI identification:",$),alert("AI identification failed: "+$.message)}finally{he(!1),T({current:0,total:0})}}},Ce=async $=>{const ce=S[$];ce&&await pe($,ce.player)},Ne=((ne=t==null?void 0:t.moves)==null?void 0:ne.filter($=>A==="all"?!0:$.phase===A))||[];if(r)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return d.jsx("div",{className:"move-editor-container",children:d.jsxs("div",{className:"move-editor-error",children:[d.jsx("h2",{children:"Error Loading Session"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-error",children:"Session not found"})});const J=((xe=t.moves)==null?void 0:xe.filter($=>$.phase==="practice").length)||0,oe=((Ee=t.moves)==null?void 0:Ee.filter($=>$.phase==="experiment").length)||0;return d.jsxs("div",{className:"move-editor-container",children:[d.jsxs("header",{className:"move-editor-header",children:[d.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),d.jsxs("div",{className:"move-editor-title",children:[d.jsx("h1",{children:"Move History Editor"}),d.jsxs("div",{className:"session-info",children:[d.jsxs("span",{className:"session-id",children:["Session: ",e]}),d.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),d.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),d.jsxs("div",{className:"phase-filter",children:[d.jsxs("button",{className:`filter-btn ${A==="all"?"active":""}`,onClick:()=>N("all"),children:["All (",((ze=t.moves)==null?void 0:ze.length)||0,")"]}),d.jsxs("button",{className:`filter-btn ${A==="practice"?"active":""}`,onClick:()=>N("practice"),children:["Practice (",J,")"]}),d.jsxs("button",{className:`filter-btn ${A==="experiment"?"active":""}`,onClick:()=>N("experiment"),children:["Experiment (",oe,")"]})]}),d.jsxs("div",{className:"ai-controls",children:[d.jsx("button",{className:"color-picker-toggle",onClick:()=>Q(!ve),children:"Bracelet Colors"}),ve&&d.jsxs("div",{className:"color-picker-panel",children:[d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player A:"}),d.jsx("input",{type:"color",value:W,onChange:$=>Z($.target.value)}),d.jsx("span",{children:W})]}),d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player B:"}),d.jsx("input",{type:"color",value:X,onChange:$=>V($.target.value)}),d.jsx("span",{children:X})]})]}),d.jsx("button",{className:"ai-btn ai-btn-all",onClick:de,disabled:D,children:D&&k.total>0?`Processing ${k.current}/${k.total}...`:"AI Identify All"}),d.jsx("button",{className:"ai-btn ai-btn-unknown",onClick:je,disabled:D,children:D&&k.total>0?`Processing ${k.current}/${k.total}...`:"AI Identify Unknown"})]})]}),d.jsxs("div",{className:"move-editor-content",children:[d.jsx("div",{className:"moves-grid",children:Ne.map(($,ce)=>{var me;return d.jsxs("div",{className:`move-card ${(f==null?void 0:f._id)===$._id?"selected":""}`,onClick:()=>h($),children:[d.jsxs("div",{className:"move-card-header",children:[d.jsxs("span",{className:"move-number",children:["#",ce+1]}),d.jsx("span",{className:`move-phase ${$.phase}`,children:$.phase})]}),$.camera_frame&&d.jsxs("div",{className:"move-image",onClick:L=>{L.stopPropagation(),C($.camera_frame)},children:[d.jsx("img",{src:$.camera_frame,alt:`Move ${ce+1}`}),d.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),d.jsxs("div",{className:"move-card-body",children:[d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Type:"}),d.jsx("span",{className:"value",children:$.type})]}),S[$._id]&&d.jsxs("div",{className:"ai-suggestion-banner",children:[d.jsxs("div",{className:"ai-suggestion-content",children:[d.jsx("span",{className:"ai-icon",children:""}),d.jsxs("span",{className:"ai-text",children:["AI suggests: ",d.jsx("strong",{children:S[$._id].player})]})]}),d.jsx("button",{className:"ai-confirm-btn",onClick:L=>{L.stopPropagation(),Ce($._id)},children:" Confirm"})]}),d.jsxs("div",{className:"move-info-row player-row",style:{borderColor:$.player==="Player A"?W:$.player==="Player B"?X:$.player==="None"?"#9E9E9E":"#FFC107"},children:[d.jsx("span",{className:"label",children:"Player:"}),d.jsxs("select",{className:`player-select ${(me=$.player)==null?void 0:me.toLowerCase().replace(" ","-")}`,value:$.player||"Unknown",onChange:L=>pe($._id,L.target.value),onClick:L=>L.stopPropagation(),style:{borderColor:$.player==="Player A"?W:$.player==="Player B"?X:$.player==="None"?"#9E9E9E":"#FFC107"},children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),$.blockId!==null&&$.blockId!==void 0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Block:"}),d.jsx("span",{className:"value",children:$.blockId})]}),Array.isArray($.position)&&$.position.length===2&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Position:"}),d.jsxs("span",{className:"value",children:["(",$.position[0],", ",$.position[1],")"]})]}),d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Time:"}),d.jsxs("span",{className:"value",children:[rd($.elapsed,1),"s"]})]}),Number.isFinite($.holdTime)&&$.holdTime>0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Hold:"}),d.jsxs("span",{className:"value",children:[rd($.holdTime,2),"s"]})]})]})]},$._id||ce)})}),Ne.length===0&&d.jsx("div",{className:"no-moves",children:d.jsx("p",{children:"No moves found for selected filter."})})]}),y&&d.jsx("div",{className:"image-modal",onClick:()=>C(null),children:d.jsxs("div",{className:"image-modal-content",onClick:$=>$.stopPropagation(),children:[d.jsx("button",{className:"close-modal",onClick:()=>C(null),children:""}),d.jsx("img",{src:y,alt:"Expanded view"})]})})]})}const Kv=!1;function Xv(){const[e,t]=P.useState(!1),[n,r]=P.useState(null),[o,l]=P.useState(null),[a,f]=P.useState(window.location.hash),[h,y]=P.useState(!1);P.useEffect(()=>{const F=()=>{f(window.location.hash)};return window.addEventListener("hashchange",F),()=>window.removeEventListener("hashchange",F)},[]),P.useEffect(()=>(window.toggleInterface=F=>{y(F),console.log("[App] Interface "+(F?"hidden":"shown"))},()=>{window.toggleInterface&&delete window.toggleInterface}),[]);const C=F=>{r(F),t(!0)},A=()=>{o&&!o.closed&&o.close();const F=window.location.origin+window.location.pathname+"#/detector",D=window.open(F,"BraceletDetector","width=700,height=600,left=100,top=100");l(D)};P.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),P.useEffect(()=>(window.secEnd=()=>{try{console.log("[App] secEnd() called - triggering game end"),window.endGameExperience?window.endGameExperience():(console.warn("[App] endGameExperience() not available - game may not be running"),alert("Game is not currently running or already ended."))}catch(F){console.error("Error ending experience:",F),alert("Error ending experience: "+F.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let N=null;const O=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")N=d.jsx(qc,{});else if(a==="#/calibrate")N=d.jsx(Wv,{});else if(a==="#/detector2")N=d.jsx(Vv,{});else if(a==="#/summary")N=d.jsx(wh,{});else if(a==="#/admin")N=d.jsx(bv,{});else if(O){const F=decodeURIComponent(O[1]);N=d.jsx(Yv,{sessionGameId:F},F)}else N=e?d.jsxs(d.Fragment,{children:[d.jsx(Uv,{config:n,interfaceHidden:h}),d.jsx(qc,{hidden:h}),Kv,!h&&d.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[d.jsx("button",{onClick:A,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),d.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),d.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&d.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:d.jsx("button",{onClick:()=>y(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):d.jsx(Rv,{onStart:C});return d.jsx("div",{className:"App",children:N})}ps.createRoot(document.getElementById("root")).render(d.jsx(gp.StrictMode,{children:d.jsx(Xv,{})}));
