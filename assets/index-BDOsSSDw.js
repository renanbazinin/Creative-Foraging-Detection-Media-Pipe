(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var id={exports:{}},sl={},od={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),rp=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),dp=Symbol.for("react.memo"),fp=Symbol.for("react.lazy"),Fu=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Fu&&e[Fu]||e["@@iterator"],typeof e=="function"?e:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ad={};function Xr(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ud(){}ud.prototype=Xr.prototype;function aa(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}var ua=aa.prototype=new ud;ua.constructor=aa;sd(ua,Xr.prototype);ua.isPureReactComponent=!0;var Bu=Array.isArray,cd=Object.prototype.hasOwnProperty,ca={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)cd.call(t,r)&&!dd.hasOwnProperty(r)&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var h=Array(f),g=0;g<f;g++)h[g]=arguments[g+2];o.children=h}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return{$$typeof:Vi,type:e,key:l,ref:a,props:o,_owner:ca.current}}function pp(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function da(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function mp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $u=/\/+/g;function Fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mp(""+e.key):t.toString(36)}function jo(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vi:case rp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Fl(a,0):r,Bu(o)?(n="",e!=null&&(n=e.replace($u,"$&/")+"/"),jo(o,t,n,"",function(g){return g})):o!=null&&(da(o)&&(o=pp(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace($u,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Bu(e))for(var f=0;f<e.length;f++){l=e[f];var h=r+Fl(l,f);a+=jo(l,t,n,h,o)}else if(h=hp(e),typeof h=="function")for(e=h.call(e),f=0;!(l=e.next()).done;)l=l.value,h=r+Fl(l,f++),a+=jo(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function lo(e,t,n){if(e==null)return e;var r=[],o=0;return jo(e,r,"","",function(l){return t.call(n,l,o++)}),r}function vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},Co={transition:null},yp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Co,ReactCurrentOwner:ca};function hd(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!da(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Xr;Ne.Fragment=ip;Ne.Profiler=lp;Ne.PureComponent=aa;Ne.StrictMode=op;Ne.Suspense=cp;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp;Ne.act=hd;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=ca.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(h in t)cd.call(t,h)&&!dd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&f!==void 0?f[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){f=Array(h);for(var g=0;g<h;g++)f[g]=arguments[g+2];r.children=f}return{$$typeof:Vi,type:e.type,key:o,ref:l,props:r,_owner:a}};Ne.createContext=function(e){return e={$$typeof:ap,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sp,_context:e},e.Consumer=e};Ne.createElement=fd;Ne.createFactory=function(e){var t=fd.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:up,render:e}};Ne.isValidElement=da;Ne.lazy=function(e){return{$$typeof:fp,_payload:{_status:-1,_result:e},_init:vp}};Ne.memo=function(e,t){return{$$typeof:dp,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};Ne.unstable_act=hd;Ne.useCallback=function(e,t){return Ct.current.useCallback(e,t)};Ne.useContext=function(e){return Ct.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Ct.current.useEffect(e,t)};Ne.useId=function(){return Ct.current.useId()};Ne.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Ct.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};Ne.useRef=function(e){return Ct.current.useRef(e)};Ne.useState=function(e){return Ct.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Ct.current.useTransition()};Ne.version="18.3.1";od.exports=Ne;var M=od.exports;const gp=np(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=M,xp=Symbol.for("react.element"),Sp=Symbol.for("react.fragment"),kp=Object.prototype.hasOwnProperty,Ep=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function pd(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kp.call(t,r)&&!jp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:xp,type:e,key:l,ref:a,props:o,_owner:Ep.current}}sl.Fragment=Sp;sl.jsx=pd;sl.jsxs=pd;id.exports=sl;var d=id.exports,hs={},md={exports:{}},Ut={},vd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,oe){var ne=Y.length;Y.push(oe);e:for(;0<ne;){var we=ne-1>>>1,Se=Y[we];if(0<o(Se,oe))Y[we]=oe,Y[ne]=Se,ne=we;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],ne=Y.pop();if(ne!==oe){Y[0]=ne;e:for(var we=0,Se=Y.length,Le=Se>>>1;we<Le;){var Fe=2*(we+1)-1,Re=Y[Fe],Be=Fe+1,H=Y[Be];if(0>o(Re,ne))Be<Se&&0>o(H,Re)?(Y[we]=H,Y[Be]=ne,we=Be):(Y[we]=Re,Y[Fe]=ne,we=Fe);else if(Be<Se&&0>o(H,ne))Y[we]=H,Y[Be]=ne,we=Be;else break e}}return oe}function o(Y,oe){var ne=Y.sortIndex-oe.sortIndex;return ne!==0?ne:Y.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,f=a.now();e.unstable_now=function(){return a.now()-f}}var h=[],g=[],N=1,P=null,C=3,D=!1,O=!1,B=!1,de=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Y){for(var oe=n(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=Y)r(g),oe.sortIndex=oe.expirationTime,t(h,oe);else break;oe=n(g)}}function R(Y){if(B=!1,j(Y),!O)if(n(h)!==null)O=!0,Ce(V);else{var oe=n(g);oe!==null&&_e(R,oe.startTime-Y)}}function V(Y,oe){O=!1,B&&(B=!1,k(A),A=-1),D=!0;var ne=C;try{for(j(oe),P=n(h);P!==null&&(!(P.expirationTime>oe)||Y&&!ie());){var we=P.callback;if(typeof we=="function"){P.callback=null,C=P.priorityLevel;var Se=we(P.expirationTime<=oe);oe=e.unstable_now(),typeof Se=="function"?P.callback=Se:P===n(h)&&r(h),j(oe)}else r(h);P=n(h)}if(P!==null)var Le=!0;else{var Fe=n(g);Fe!==null&&_e(R,Fe.startTime-oe),Le=!1}return Le}finally{P=null,C=ne,D=!1}}var K=!1,X=null,A=-1,ae=5,U=-1;function ie(){return!(e.unstable_now()-U<ae)}function b(){if(X!==null){var Y=e.unstable_now();U=Y;var oe=!0;try{oe=X(!0,Y)}finally{oe?pe():(K=!1,X=null)}}else K=!1}var pe;if(typeof w=="function")pe=function(){w(b)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,xe=ue.port2;ue.port1.onmessage=b,pe=function(){xe.postMessage(null)}}else pe=function(){de(b,0)};function Ce(Y){X=Y,K||(K=!0,pe())}function _e(Y,oe){A=de(function(){Y(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){O||D||(O=!0,Ce(V))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var oe=3;break;default:oe=C}var ne=C;C=oe;try{return Y()}finally{C=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=C;C=Y;try{return oe()}finally{C=ne}},e.unstable_scheduleCallback=function(Y,oe,ne){var we=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?we+ne:we):ne=we,Y){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ne+Se,Y={id:N++,callback:oe,priorityLevel:Y,startTime:ne,expirationTime:Se,sortIndex:-1},ne>we?(Y.sortIndex=ne,t(g,Y),n(h)===null&&Y===n(g)&&(B?(k(A),A=-1):B=!0,_e(R,ne-we))):(Y.sortIndex=Se,t(h,Y),O||D||(O=!0,Ce(V))),Y},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(Y){var oe=C;return function(){var ne=C;C=oe;try{return Y.apply(this,arguments)}finally{C=ne}}}})(yd);vd.exports=yd;var Cp=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=M,$t=Cp;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Pi={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Pi[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ps=Object.prototype.hasOwnProperty,Pp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uu={},Hu={};function Mp(e){return ps.call(Hu,e)?!0:ps.call(Uu,e)?!1:Pp.test(e)?Hu[e]=!0:(Uu[e]=!0,!1)}function _p(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ip(e,t,n,r){if(t===null||typeof t>"u"||_p(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fa=/[\-:]([a-z])/g;function ha(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function pa(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ip(t,n,o,r)&&(n=null),r||o===null?Mp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),ma=Symbol.for("react.strict_mode"),ms=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),va=Symbol.for("react.forward_ref"),vs=Symbol.for("react.suspense"),ys=Symbol.for("react.suspense_list"),ya=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Bl;function hi(e){if(Bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var $l=!1;function Ul(e,t){if(!e||$l)return"";$l=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,f=l.length-1;1<=a&&0<=f&&o[a]!==l[f];)f--;for(;1<=a&&0<=f;a--,f--)if(o[a]!==l[f]){if(a!==1||f!==1)do if(a--,f--,0>f||o[a]!==l[f]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=f);break}}}finally{$l=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function Tp(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=Ul(e.type,!1),e;case 11:return e=Ul(e.type.render,!1),e;case 1:return e=Ul(e.type,!0),e;default:return""}}function gs(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case ms:return"Profiler";case ma:return"StrictMode";case vs:return"Suspense";case ys:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case wd:return(e._context.displayName||"Context")+".Provider";case va:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ya:return t=e.displayName||null,t!==null?t:gs(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return gs(e(t))}catch{}}return null}function Ap(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gs(t);case 8:return t===ma?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rp(e){var t=kd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=Rp(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ws(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jd(e,t){t=t.checked,t!=null&&pa(e,"checked",t,!1)}function xs(e,t){jd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ss(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ss(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ss(e,t,n){(t!=="number"||Oo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ks(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(pi(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Cd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Es(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uo,Pd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zp=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(e){zp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yi[t]=yi[e]})});function Md(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yi.hasOwnProperty(e)&&yi[e]?(""+t).trim():t+"px"}function _d(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Md(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Lp=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function js(e,t){if(t){if(Lp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Cs(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ns=null;function ga(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ps=null,Or=null,Dr=null;function Ku(e){if(e=Yi(e)){if(typeof Ps!="function")throw Error(G(280));var t=e.stateNode;t&&(t=fl(t),Ps(e.stateNode,e.type,t))}}function Id(e){Or?Dr?Dr.push(e):Dr=[e]:Or=e}function Td(){if(Or){var e=Or,t=Dr;if(Dr=Or=null,Ku(e),t)for(e=0;e<t.length;e++)Ku(t[e])}}function Ad(e,t){return e(t)}function Rd(){}var Hl=!1;function zd(e,t,n){if(Hl)return e(t,n);Hl=!0;try{return Ad(e,t,n)}finally{Hl=!1,(Or!==null||Dr!==null)&&(Rd(),Td())}}function _i(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Ms=!1;if(_n)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Ms=!1}function Op(e,t,n,r,o,l,a,f,h){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(N){this.onError(N)}}var gi=!1,Do=null,Fo=!1,_s=null,Dp={onError:function(e){gi=!0,Do=e}};function Fp(e,t,n,r,o,l,a,f,h){gi=!1,Do=null,Op.apply(Dp,arguments)}function Bp(e,t,n,r,o,l,a,f,h){if(Fp.apply(this,arguments),gi){if(gi){var g=Do;gi=!1,Do=null}else throw Error(G(198));Fo||(Fo=!0,_s=g)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(e){if(gr(e)!==e)throw Error(G(188))}function $p(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Xu(o),e;if(l===r)return Xu(o),t;l=l.sibling}throw Error(G(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,f=o.child;f;){if(f===n){a=!0,n=o,r=l;break}if(f===r){a=!0,r=o,n=l;break}f=f.sibling}if(!a){for(f=l.child;f;){if(f===n){a=!0,n=l,r=o;break}if(f===r){a=!0,r=l,n=o;break}f=f.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function Od(e){return e=$p(e),e!==null?Dd(e):null}function Dd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=$t.unstable_scheduleCallback,bu=$t.unstable_cancelCallback,Up=$t.unstable_shouldYield,Hp=$t.unstable_requestPaint,nt=$t.unstable_now,Wp=$t.unstable_getCurrentPriorityLevel,wa=$t.unstable_ImmediatePriority,Bd=$t.unstable_UserBlockingPriority,Bo=$t.unstable_NormalPriority,Vp=$t.unstable_LowPriority,$d=$t.unstable_IdlePriority,al=null,kn=null;function Gp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(al,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Kp,Qp=Math.log,Yp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(Qp(e)/Yp|0)|0}var co=64,fo=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $o(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var f=a&~o;f!==0?r=mi(f):(l&=a,l!==0&&(r=mi(l)))}else a=n&~o,a!==0?r=mi(a):l!==0&&(r=mi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Xp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),f=1<<a,h=o[a];h===-1?(!(f&n)||f&r)&&(o[a]=Xp(f,t)):h<=t&&(e.expiredLanes|=f),l&=~f}}function Is(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function Wl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Jp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function xa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var De=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wd,Sa,Vd,Gd,Qd,Ts=!1,ho=[],Gn=null,Qn=null,Yn=null,Ii=new Map,Ti=new Map,Un=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function li(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Yi(t),t!==null&&Sa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function qp(e,t,n,r,o){switch(t){case"focusin":return Gn=li(Gn,e,t,n,r,o),!0;case"dragenter":return Qn=li(Qn,e,t,n,r,o),!0;case"mouseover":return Yn=li(Yn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Ii.set(l,li(Ii.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Ti.set(l,li(Ti.get(l)||null,e,t,n,r,o)),!0}return!1}function Yd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ld(n),t!==null){e.blockedOn=t,Qd(e.priority,function(){Vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function No(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=As(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ns=r,n.target.dispatchEvent(r),Ns=null}else return t=Yi(n),t!==null&&Sa(t),e.blockedOn=n,!1;t.shift()}return!0}function Zu(e,t,n){No(e)&&n.delete(t)}function em(){Ts=!1,Gn!==null&&No(Gn)&&(Gn=null),Qn!==null&&No(Qn)&&(Qn=null),Yn!==null&&No(Yn)&&(Yn=null),Ii.forEach(Zu),Ti.forEach(Zu)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Ts||(Ts=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,em)))}function Ai(e){function t(o){return si(o,e)}if(0<ho.length){si(ho[0],e);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&si(Gn,e),Qn!==null&&si(Qn,e),Yn!==null&&si(Yn,e),Ii.forEach(t),Ti.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&Un.shift()}var Fr=Rn.ReactCurrentBatchConfig,Uo=!0;function tm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=1,ka(e,t,n,r)}finally{De=o,Fr.transition=l}}function nm(e,t,n,r){var o=De,l=Fr.transition;Fr.transition=null;try{De=4,ka(e,t,n,r)}finally{De=o,Fr.transition=l}}function ka(e,t,n,r){if(Uo){var o=As(e,t,n,r);if(o===null)ql(e,t,r,Ho,n),Ju(e,r);else if(qp(o,e,t,n,r))r.stopPropagation();else if(Ju(e,r),t&4&&-1<Zp.indexOf(e)){for(;o!==null;){var l=Yi(o);if(l!==null&&Wd(l),l=As(e,t,n,r),l===null&&ql(e,t,r,Ho,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else ql(e,t,r,null,n)}}var Ho=null;function As(e,t,n,r){if(Ho=null,e=ga(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ho=e,null}function Kd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wp()){case wa:return 1;case Bd:return 4;case Bo:case Vp:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Wn=null,Ea=null,Po=null;function Xd(){if(Po)return Po;var e,t=Ea,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Po=o.slice(e,1<r?1-r:void 0)}function Mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function po(){return!0}function qu(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?po:qu,this.isPropagationStopped=qu,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),t}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Ht(br),Qi=Ze({},br,{view:0,detail:0}),rm=Ht(Qi),Vl,Gl,ai,ul=Ze({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(Vl=e.screenX-ai.screenX,Gl=e.screenY-ai.screenY):Gl=Vl=0,ai=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:Gl}}),ec=Ht(ul),im=Ze({},ul,{dataTransfer:0}),om=Ht(im),lm=Ze({},Qi,{relatedTarget:0}),Ql=Ht(lm),sm=Ze({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Ht(sm),um=Ze({},br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=Ht(um),dm=Ze({},br,{data:0}),tc=Ht(dm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pm[e])?!!t[e]:!1}function Ca(){return mm}var vm=Ze({},Qi,{key:function(e){if(e.key){var t=fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ym=Ht(vm),gm=Ze({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Ht(gm),wm=Ze({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),xm=Ht(wm),Sm=Ze({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=Ht(Sm),Em=Ze({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=Ht(Em),Cm=[9,13,27,32],Na=_n&&"CompositionEvent"in window,wi=null;_n&&"documentMode"in document&&(wi=document.documentMode);var Nm=_n&&"TextEvent"in window&&!wi,bd=_n&&(!Na||wi&&8<wi&&11>=wi),rc=" ",ic=!1;function Jd(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Pm(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(ic=!0,rc);case"textInput":return e=t.data,e===rc&&ic?null:e;default:return null}}function Mm(e,t){if(Cr)return e==="compositionend"||!Na&&Jd(e,t)?(e=Xd(),Po=Ea=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bd&&t.locale!=="ko"?null:t.data;default:return null}}var _m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_m[e.type]:t==="textarea"}function qd(e,t,n,r){Id(r),t=Wo(t,"onChange"),0<t.length&&(n=new ja("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xi=null,Ri=null;function Im(e){df(e,0)}function cl(e){var t=Mr(e);if(Ed(t))return e}function Tm(e,t){if(e==="change")return t}var ef=!1;if(_n){var Yl;if(_n){var Kl="oninput"in document;if(!Kl){var lc=document.createElement("div");lc.setAttribute("oninput","return;"),Kl=typeof lc.oninput=="function"}Yl=Kl}else Yl=!1;ef=Yl&&(!document.documentMode||9<document.documentMode)}function sc(){xi&&(xi.detachEvent("onpropertychange",tf),Ri=xi=null)}function tf(e){if(e.propertyName==="value"&&cl(Ri)){var t=[];qd(t,Ri,e,ga(e)),zd(Im,t)}}function Am(e,t,n){e==="focusin"?(sc(),xi=t,Ri=n,xi.attachEvent("onpropertychange",tf)):e==="focusout"&&sc()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(Ri)}function zm(e,t){if(e==="click")return cl(t)}function Lm(e,t){if(e==="input"||e==="change")return cl(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Om;function zi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ps.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uc(e,t){var n=ac(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ac(n)}}function nf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rf(){for(var e=window,t=Oo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oo(e.document)}return t}function Pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dm(e){var t=rf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(r!==null&&Pa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=uc(n,l);var a=uc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=_n&&"documentMode"in document&&11>=document.documentMode,Nr=null,Rs=null,Si=null,zs=!1;function cc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zs||Nr==null||Nr!==Oo(r)||(r=Nr,"selectionStart"in r&&Pa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&zi(Si,r)||(Si=r,r=Wo(Rs,"onSelect"),0<r.length&&(t=new ja("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Xl={},of={};_n&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function dl(e){if(Xl[e])return Xl[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in of)return Xl[e]=t[n];return e}var lf=dl("animationend"),sf=dl("animationiteration"),af=dl("animationstart"),uf=dl("transitionend"),cf=new Map,dc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){cf.set(e,t),yr(t,[e])}for(var bl=0;bl<dc.length;bl++){var Jl=dc[bl],Bm=Jl.toLowerCase(),$m=Jl[0].toUpperCase()+Jl.slice(1);tr(Bm,"on"+$m)}tr(lf,"onAnimationEnd");tr(sf,"onAnimationIteration");tr(af,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(uf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Um=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function fc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Bp(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var f=r[a],h=f.instance,g=f.currentTarget;if(f=f.listener,h!==l&&o.isPropagationStopped())break e;fc(o,f,g),l=h}else for(a=0;a<r.length;a++){if(f=r[a],h=f.instance,g=f.currentTarget,f=f.listener,h!==l&&o.isPropagationStopped())break e;fc(o,f,g),l=h}}}if(Fo)throw e=_s,Fo=!1,_s=null,e}function Ge(e,t){var n=t[Bs];n===void 0&&(n=t[Bs]=new Set);var r=e+"__bubble";n.has(r)||(ff(t,e,2,!1),n.add(r))}function Zl(e,t,n){var r=0;t&&(r|=4),ff(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[vo]){e[vo]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Um.has(n)||Zl(n,!1,e),Zl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,Zl("selectionchange",!1,t))}}function ff(e,t,n,r){switch(Kd(t)){case 1:var o=tm;break;case 4:o=nm;break;default:o=ka}n=o.bind(null,t,n,e),o=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ql(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var f=r.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;f!==null;){if(a=sr(f),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}f=f.parentNode}}r=r.return}zd(function(){var g=l,N=ga(n),P=[];e:{var C=cf.get(e);if(C!==void 0){var D=ja,O=e;switch(e){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":D=ym;break;case"focusin":O="focus",D=Ql;break;case"focusout":O="blur",D=Ql;break;case"beforeblur":case"afterblur":D=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=xm;break;case lf:case sf:case af:D=am;break;case uf:D=km;break;case"scroll":D=rm;break;case"wheel":D=jm;break;case"copy":case"cut":case"paste":D=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=nc}var B=(t&4)!==0,de=!B&&e==="scroll",k=B?C!==null?C+"Capture":null:C;B=[];for(var w=g,j;w!==null;){j=w;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,k!==null&&(R=_i(w,k),R!=null&&B.push(Oi(w,R,j)))),de)break;w=w.return}0<B.length&&(C=new D(C,O,null,n,N),P.push({event:C,listeners:B}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",C&&n!==Ns&&(O=n.relatedTarget||n.fromElement)&&(sr(O)||O[In]))break e;if((D||C)&&(C=N.window===N?N:(C=N.ownerDocument)?C.defaultView||C.parentWindow:window,D?(O=n.relatedTarget||n.toElement,D=g,O=O?sr(O):null,O!==null&&(de=gr(O),O!==de||O.tag!==5&&O.tag!==6)&&(O=null)):(D=null,O=g),D!==O)){if(B=ec,R="onMouseLeave",k="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(B=nc,R="onPointerLeave",k="onPointerEnter",w="pointer"),de=D==null?C:Mr(D),j=O==null?C:Mr(O),C=new B(R,w+"leave",D,n,N),C.target=de,C.relatedTarget=j,R=null,sr(N)===g&&(B=new B(k,w+"enter",O,n,N),B.target=j,B.relatedTarget=de,R=B),de=R,D&&O)t:{for(B=D,k=O,w=0,j=B;j;j=kr(j))w++;for(j=0,R=k;R;R=kr(R))j++;for(;0<w-j;)B=kr(B),w--;for(;0<j-w;)k=kr(k),j--;for(;w--;){if(B===k||k!==null&&B===k.alternate)break t;B=kr(B),k=kr(k)}B=null}else B=null;D!==null&&hc(P,C,D,B,!1),O!==null&&de!==null&&hc(P,de,O,B,!0)}}e:{if(C=g?Mr(g):window,D=C.nodeName&&C.nodeName.toLowerCase(),D==="select"||D==="input"&&C.type==="file")var V=Tm;else if(oc(C))if(ef)V=Lm;else{V=Rm;var K=Am}else(D=C.nodeName)&&D.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(V=zm);if(V&&(V=V(e,g))){qd(P,V,n,N);break e}K&&K(e,C,g),e==="focusout"&&(K=C._wrapperState)&&K.controlled&&C.type==="number"&&Ss(C,"number",C.value)}switch(K=g?Mr(g):window,e){case"focusin":(oc(K)||K.contentEditable==="true")&&(Nr=K,Rs=g,Si=null);break;case"focusout":Si=Rs=Nr=null;break;case"mousedown":zs=!0;break;case"contextmenu":case"mouseup":case"dragend":zs=!1,cc(P,n,N);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":cc(P,n,N)}var X;if(Na)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Cr?Jd(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(bd&&n.locale!=="ko"&&(Cr||A!=="onCompositionStart"?A==="onCompositionEnd"&&Cr&&(X=Xd()):(Wn=N,Ea="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),K=Wo(g,A),0<K.length&&(A=new tc(A,e,null,n,N),P.push({event:A,listeners:K}),X?A.data=X:(X=Zd(n),X!==null&&(A.data=X)))),(X=Nm?Pm(e,n):Mm(e,n))&&(g=Wo(g,"onBeforeInput"),0<g.length&&(N=new tc("onBeforeInput","beforeinput",null,n,N),P.push({event:N,listeners:g}),N.data=X))}df(P,t)})}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=_i(e,n),l!=null&&r.unshift(Oi(e,l,o)),l=_i(e,t),l!=null&&r.push(Oi(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var f=n,h=f.alternate,g=f.stateNode;if(h!==null&&h===r)break;f.tag===5&&g!==null&&(f=g,o?(h=_i(n,l),h!=null&&a.unshift(Oi(n,h,f))):o||(h=_i(n,l),h!=null&&a.push(Oi(n,h,f)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function pc(e){return(typeof e=="string"?e:""+e).replace(Hm,`
`).replace(Wm,"")}function yo(e,t,n){if(t=pc(t),pc(e)!==t&&n)throw Error(G(425))}function Vo(){}var Ls=null,Os=null;function Ds(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(e){return mc.resolve(null).then(e).catch(Qm)}:Fs;function Qm(e){setTimeout(function(){throw e})}function es(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ai(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ai(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jr,Di="__reactProps$"+Jr,In="__reactContainer$"+Jr,Bs="__reactEvents$"+Jr,Ym="__reactListeners$"+Jr,Km="__reactHandles$"+Jr;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vc(e);e!==null;){if(n=e[Sn])return n;e=vc(e)}return t}e=n,n=e.parentNode}return null}function Yi(e){return e=e[Sn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function fl(e){return e[Di]||null}var $s=[],_r=-1;function nr(e){return{current:e}}function Qe(e){0>_r||(e.current=$s[_r],$s[_r]=null,_r--)}function Ue(e,t){_r++,$s[_r]=e.current,e.current=t}var er={},xt=nr(er),Tt=nr(!1),fr=er;function Wr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function At(e){return e=e.childContextTypes,e!=null}function Go(){Qe(Tt),Qe(xt)}function yc(e,t,n){if(xt.current!==er)throw Error(G(168));Ue(xt,t),Ue(Tt,n)}function hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(G(108,Ap(e)||"Unknown",o));return Ze({},n,r)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Ue(xt,e),Ue(Tt,Tt.current),!0}function gc(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=hf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,Qe(Tt),Qe(xt),Ue(xt,e)):Qe(Tt),Ue(Tt,n)}var Cn=null,hl=!1,ts=!1;function pf(e){Cn===null?Cn=[e]:Cn.push(e)}function Xm(e){hl=!0,pf(e)}function rr(){if(!ts&&Cn!==null){ts=!0;var e=0,t=De;try{var n=Cn;for(De=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,hl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Fd(wa,rr),o}finally{De=t,ts=!1}}return null}var Ir=[],Tr=0,Yo=null,Ko=0,Gt=[],Qt=0,hr=null,Nn=1,Pn="";function or(e,t){Ir[Tr++]=Ko,Ir[Tr++]=Yo,Yo=e,Ko=t}function mf(e,t,n){Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,hr=e;var r=Nn;e=Pn;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,Pn=l+e}else Nn=1<<l|n<<o|r,Pn=e}function Ma(e){e.return!==null&&(or(e,1),mf(e,1,0))}function _a(e){for(;e===Yo;)Yo=Ir[--Tr],Ir[Tr]=null,Ko=Ir[--Tr],Ir[Tr]=null;for(;e===hr;)hr=Gt[--Qt],Gt[Qt]=null,Pn=Gt[--Qt],Gt[Qt]=null,Nn=Gt[--Qt],Gt[Qt]=null}var Bt=null,Ft=null,Ye=!1,ln=null;function vf(e,t){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bt=e,Ft=null,!0):!1;default:return!1}}function Us(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hs(e){if(Ye){var t=Ft;if(t){var n=t;if(!wc(e,t)){if(Us(e))throw Error(G(418));t=Kn(n.nextSibling);var r=Bt;t&&wc(e,t)?vf(r,n):(e.flags=e.flags&-4097|2,Ye=!1,Bt=e)}}else{if(Us(e))throw Error(G(418));e.flags=e.flags&-4097|2,Ye=!1,Bt=e}}}function xc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bt=e}function go(e){if(e!==Bt)return!1;if(!Ye)return xc(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ds(e.type,e.memoizedProps)),t&&(t=Ft)){if(Us(e))throw yf(),Error(G(418));for(;t;)vf(e,t),t=Kn(t.nextSibling)}if(xc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Bt?Kn(e.stateNode.nextSibling):null;return!0}function yf(){for(var e=Ft;e;)e=Kn(e.nextSibling)}function Vr(){Ft=Bt=null,Ye=!1}function Ia(e){ln===null?ln=[e]:ln.push(e)}var bm=Rn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var f=o.refs;a===null?delete f[l]:f[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sc(e){var t=e._init;return t(e._payload)}function gf(e){function t(k,w){if(e){var j=k.deletions;j===null?(k.deletions=[w],k.flags|=16):j.push(w)}}function n(k,w){if(!e)return null;for(;w!==null;)t(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function o(k,w){return k=Zn(k,w),k.index=0,k.sibling=null,k}function l(k,w,j){return k.index=j,e?(j=k.alternate,j!==null?(j=j.index,j<w?(k.flags|=2,w):j):(k.flags|=2,w)):(k.flags|=1048576,w)}function a(k){return e&&k.alternate===null&&(k.flags|=2),k}function f(k,w,j,R){return w===null||w.tag!==6?(w=as(j,k.mode,R),w.return=k,w):(w=o(w,j),w.return=k,w)}function h(k,w,j,R){var V=j.type;return V===jr?N(k,w,j.props.children,R,j.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&Sc(V)===w.type)?(R=o(w,j.props),R.ref=ui(k,w,j),R.return=k,R):(R=Lo(j.type,j.key,j.props,null,k.mode,R),R.ref=ui(k,w,j),R.return=k,R)}function g(k,w,j,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=us(j,k.mode,R),w.return=k,w):(w=o(w,j.children||[]),w.return=k,w)}function N(k,w,j,R,V){return w===null||w.tag!==7?(w=dr(j,k.mode,R,V),w.return=k,w):(w=o(w,j),w.return=k,w)}function P(k,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=as(""+w,k.mode,j),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case so:return j=Lo(w.type,w.key,w.props,null,k.mode,j),j.ref=ui(k,null,w),j.return=k,j;case Er:return w=us(w,k.mode,j),w.return=k,w;case Bn:var R=w._init;return P(k,R(w._payload),j)}if(pi(w)||ii(w))return w=dr(w,k.mode,j,null),w.return=k,w;wo(k,w)}return null}function C(k,w,j,R){var V=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return V!==null?null:f(k,w,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case so:return j.key===V?h(k,w,j,R):null;case Er:return j.key===V?g(k,w,j,R):null;case Bn:return V=j._init,C(k,w,V(j._payload),R)}if(pi(j)||ii(j))return V!==null?null:N(k,w,j,R,null);wo(k,j)}return null}function D(k,w,j,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return k=k.get(j)||null,f(w,k,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case so:return k=k.get(R.key===null?j:R.key)||null,h(w,k,R,V);case Er:return k=k.get(R.key===null?j:R.key)||null,g(w,k,R,V);case Bn:var K=R._init;return D(k,w,j,K(R._payload),V)}if(pi(R)||ii(R))return k=k.get(j)||null,N(w,k,R,V,null);wo(w,R)}return null}function O(k,w,j,R){for(var V=null,K=null,X=w,A=w=0,ae=null;X!==null&&A<j.length;A++){X.index>A?(ae=X,X=null):ae=X.sibling;var U=C(k,X,j[A],R);if(U===null){X===null&&(X=ae);break}e&&X&&U.alternate===null&&t(k,X),w=l(U,w,A),K===null?V=U:K.sibling=U,K=U,X=ae}if(A===j.length)return n(k,X),Ye&&or(k,A),V;if(X===null){for(;A<j.length;A++)X=P(k,j[A],R),X!==null&&(w=l(X,w,A),K===null?V=X:K.sibling=X,K=X);return Ye&&or(k,A),V}for(X=r(k,X);A<j.length;A++)ae=D(X,k,A,j[A],R),ae!==null&&(e&&ae.alternate!==null&&X.delete(ae.key===null?A:ae.key),w=l(ae,w,A),K===null?V=ae:K.sibling=ae,K=ae);return e&&X.forEach(function(ie){return t(k,ie)}),Ye&&or(k,A),V}function B(k,w,j,R){var V=ii(j);if(typeof V!="function")throw Error(G(150));if(j=V.call(j),j==null)throw Error(G(151));for(var K=V=null,X=w,A=w=0,ae=null,U=j.next();X!==null&&!U.done;A++,U=j.next()){X.index>A?(ae=X,X=null):ae=X.sibling;var ie=C(k,X,U.value,R);if(ie===null){X===null&&(X=ae);break}e&&X&&ie.alternate===null&&t(k,X),w=l(ie,w,A),K===null?V=ie:K.sibling=ie,K=ie,X=ae}if(U.done)return n(k,X),Ye&&or(k,A),V;if(X===null){for(;!U.done;A++,U=j.next())U=P(k,U.value,R),U!==null&&(w=l(U,w,A),K===null?V=U:K.sibling=U,K=U);return Ye&&or(k,A),V}for(X=r(k,X);!U.done;A++,U=j.next())U=D(X,k,A,U.value,R),U!==null&&(e&&U.alternate!==null&&X.delete(U.key===null?A:U.key),w=l(U,w,A),K===null?V=U:K.sibling=U,K=U);return e&&X.forEach(function(b){return t(k,b)}),Ye&&or(k,A),V}function de(k,w,j,R){if(typeof j=="object"&&j!==null&&j.type===jr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case so:e:{for(var V=j.key,K=w;K!==null;){if(K.key===V){if(V=j.type,V===jr){if(K.tag===7){n(k,K.sibling),w=o(K,j.props.children),w.return=k,k=w;break e}}else if(K.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&Sc(V)===K.type){n(k,K.sibling),w=o(K,j.props),w.ref=ui(k,K,j),w.return=k,k=w;break e}n(k,K);break}else t(k,K);K=K.sibling}j.type===jr?(w=dr(j.props.children,k.mode,R,j.key),w.return=k,k=w):(R=Lo(j.type,j.key,j.props,null,k.mode,R),R.ref=ui(k,w,j),R.return=k,k=R)}return a(k);case Er:e:{for(K=j.key;w!==null;){if(w.key===K)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(k,w.sibling),w=o(w,j.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else t(k,w);w=w.sibling}w=us(j,k.mode,R),w.return=k,k=w}return a(k);case Bn:return K=j._init,de(k,w,K(j._payload),R)}if(pi(j))return O(k,w,j,R);if(ii(j))return B(k,w,j,R);wo(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(k,w.sibling),w=o(w,j),w.return=k,k=w):(n(k,w),w=as(j,k.mode,R),w.return=k,k=w),a(k)):n(k,w)}return de}var Gr=gf(!0),wf=gf(!1),Xo=nr(null),bo=null,Ar=null,Ta=null;function Aa(){Ta=Ar=bo=null}function Ra(e){var t=Xo.current;Qe(Xo),e._currentValue=t}function Ws(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){bo=e,Ta=Ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},Ar===null){if(bo===null)throw Error(G(308));Ar=e,bo.dependencies={lanes:0,firstContext:e}}else Ar=Ar.next=e;return t}var ar=null;function za(e){ar===null?ar=[e]:ar.push(e)}function xf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,za(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,za(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function _o(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xa(e,n)}}function kc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var h=f,g=h.next;h.next=null,a===null?l=g:a.next=g,a=h;var N=e.alternate;N!==null&&(N=N.updateQueue,f=N.lastBaseUpdate,f!==a&&(f===null?N.firstBaseUpdate=g:f.next=g,N.lastBaseUpdate=h))}if(l!==null){var P=o.baseState;a=0,N=g=h=null,f=l;do{var C=f.lane,D=f.eventTime;if((r&C)===C){N!==null&&(N=N.next={eventTime:D,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var O=e,B=f;switch(C=t,D=n,B.tag){case 1:if(O=B.payload,typeof O=="function"){P=O.call(D,P,C);break e}P=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=B.payload,C=typeof O=="function"?O.call(D,P,C):O,C==null)break e;P=Ze({},P,C);break e;case 2:$n=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,C=o.effects,C===null?o.effects=[f]:C.push(f))}else D={eventTime:D,lane:C,tag:f.tag,payload:f.payload,callback:f.callback,next:null},N===null?(g=N=D,h=P):N=N.next=D,a|=C;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;C=f,f=C.next,C.next=null,o.lastBaseUpdate=C,o.shared.pending=null}}while(!0);if(N===null&&(h=P),o.baseState=h,o.firstBaseUpdate=g,o.lastBaseUpdate=N,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=P}}function Ec(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(G(191,o));o.call(r)}}}var Ki={},En=nr(Ki),Fi=nr(Ki),Bi=nr(Ki);function ur(e){if(e===Ki)throw Error(G(174));return e}function Oa(e,t){switch(Ue(Bi,t),Ue(Fi,e),Ue(En,Ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Es(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Es(t,e)}Qe(En),Ue(En,t)}function Qr(){Qe(En),Qe(Fi),Qe(Bi)}function kf(e){ur(Bi.current);var t=ur(En.current),n=Es(t,e.type);t!==n&&(Ue(Fi,e),Ue(En,n))}function Da(e){Fi.current===e&&(Qe(En),Qe(Fi))}var be=nr(0);function Zo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function Fa(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var Io=Rn.ReactCurrentDispatcher,rs=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,qo=!1,ki=!1,$i=0,Jm=0;function yt(){throw Error(G(321))}function Ba(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Io.current=e===null||e.memoizedState===null?tv:nv,e=n(r,o),ki){l=0;do{if(ki=!1,$i=0,25<=l)throw Error(G(301));l+=1,ct=lt=null,t.updateQueue=null,Io.current=rv,e=n(r,o)}while(ki)}if(Io.current=el,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,qo=!1,t)throw Error(G(300));return e}function Ua(){var e=$i!==0;return $i=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function bt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(G(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function Ui(e,t){return typeof t=="function"?t(e):t}function is(e){var t=bt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var f=a=null,h=null,g=l;do{var N=g.lane;if((pr&N)===N)h!==null&&(h=h.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var P={lane:N,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};h===null?(f=h=P,a=r):h=h.next=P,Je.lanes|=N,mr|=N}g=g.next}while(g!==null&&g!==l);h===null?a=r:h.next=f,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function os(e){var t=bt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Ef(){}function jf(e,t){var n=Je,r=bt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,It=!0),r=r.queue,Ha(Pf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Nf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(G(349));pr&30||Cf(n,t,o)}return o}function Cf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nf(e,t,n,r){t.value=n,t.getSnapshot=r,Mf(t)&&_f(e)}function Pf(e,t,n){return n(function(){Mf(t)&&_f(e)})}function Mf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function _f(e){var t=Tn(e,1);t!==null&&un(t,e,1,-1)}function jc(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=ev.bind(null,Je,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function If(){return bt().memoizedState}function To(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var o=bt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&Ba(r,a.deps)){o.memoizedState=Hi(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Hi(1|t,n,l,r)}function Cc(e,t){return To(8390656,8,e,t)}function Ha(e,t){return pl(2048,8,e,t)}function Tf(e,t){return pl(4,2,e,t)}function Af(e,t){return pl(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zf(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,Rf.bind(null,t,e),n)}function Wa(){}function Lf(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Of(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Df(e,t,n){return pr&21?(cn(n,t)||(n=Ud(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function Zm(e,t){var n=De;De=n!==0&&4>n?n:4,e(!0);var r=rs.transition;rs.transition={};try{e(!1),t()}finally{De=n,rs.transition=r}}function Ff(){return bt().memoizedState}function qm(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bf(e))$f(t,n);else if(n=xf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Uf(n,t,r)}}function ev(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bf(e))$f(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,f=l(a,n);if(o.hasEagerState=!0,o.eagerState=f,cn(f,a)){var h=t.interleaved;h===null?(o.next=o,za(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=xf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Uf(n,t,r))}}function Bf(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function $f(e,t){ki=qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xa(e,n)}}var el={readContext:Xt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},tv={readContext:Xt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:jc,useDebugValue:Wa,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=jc(!1),t=e[0];return e=Zm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(Ye){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),dt===null)throw Error(G(349));pr&30||Cf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Cc(Pf.bind(null,r,l,e),[e]),r.flags|=2048,Hi(9,Nf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(Ye){var n=Pn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$i++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nv={readContext:Xt,useCallback:Lf,useContext:Xt,useEffect:Ha,useImperativeHandle:zf,useInsertionEffect:Tf,useLayoutEffect:Af,useMemo:Of,useReducer:is,useRef:If,useState:function(){return is(Ui)},useDebugValue:Wa,useDeferredValue:function(e){var t=bt();return Df(t,lt.memoizedState,e)},useTransition:function(){var e=is(Ui)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1},rv={readContext:Xt,useCallback:Lf,useContext:Xt,useEffect:Ha,useImperativeHandle:zf,useInsertionEffect:Tf,useLayoutEffect:Af,useMemo:Of,useReducer:os,useRef:If,useState:function(){return os(Ui)},useDebugValue:Wa,useDeferredValue:function(e){var t=bt();return lt===null?t.memoizedState=e:Df(t,lt.memoizedState,e)},useTransition:function(){var e=os(Ui)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Mn(r,o);l.payload=t,n!=null&&(l.callback=n),t=Xn(e,l,o),t!==null&&(un(t,e,o,r),_o(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Mn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Xn(e,l,o),t!==null&&(un(t,e,o,r),_o(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=Mn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Xn(e,o,r),t!==null&&(un(t,e,r,n),_o(t,e,r))}};function Nc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(o,l):!0}function Hf(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Xt(l):(o=At(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},La(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Xt(l):(l=At(t)?fr:xt.current,o.context=Wr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Vs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ml.enqueueReplaceState(o,o.state,null),Jo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var n="",r=t;do n+=Tp(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iv=typeof WeakMap=="function"?WeakMap:Map;function Wf(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nl||(nl=!0,na=r),Qs(e,t)},n}function Vf(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Qs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qs(e,t),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Mc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gv.bind(null,e,t,n),t.then(e,e))}function _c(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ic(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var ov=Rn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?wf(t,null,n,r):Gr(t,e.child,n,r)}function Tc(e,t,n,r,o){n=n.render;var l=t.ref;return Br(t,o),r=$a(e,t,n,r,l,o),n=Ua(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ye&&n&&Ma(t),t.flags|=1,Et(e,t,r,o),t.child)}function Ac(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Ja(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Gf(e,t,l,r,o)):(e=Lo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(a,r)&&e.ref===t.ref)return An(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Gf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(zi(l,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,An(e,t,o)}return Ys(e,t,n,r,o)}function Qf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(zr,Dt),Dt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(zr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ue(zr,Dt),Dt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ue(zr,Dt),Dt|=r;return Et(e,t,o,n),t.child}function Yf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,n,r,o){var l=At(n)?fr:xt.current;return l=Wr(t,l),Br(t,o),n=$a(e,t,n,r,l,o),r=Ua(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ye&&r&&Ma(t),t.flags|=1,Et(e,t,n,o),t.child)}function Rc(e,t,n,r,o){if(At(n)){var l=!0;Qo(t)}else l=!1;if(Br(t,o),t.stateNode===null)Ao(e,t),Hf(t,n,r),Gs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,f=t.memoizedProps;a.props=f;var h=a.context,g=n.contextType;typeof g=="object"&&g!==null?g=Xt(g):(g=At(n)?fr:xt.current,g=Wr(t,g));var N=n.getDerivedStateFromProps,P=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function";P||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==r||h!==g)&&Pc(t,a,r,g),$n=!1;var C=t.memoizedState;a.state=C,Jo(t,r,a,o),h=t.memoizedState,f!==r||C!==h||Tt.current||$n?(typeof N=="function"&&(Vs(t,n,N,r),h=t.memoizedState),(f=$n||Nc(t,n,f,r,C,h,g))?(P||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=g,r=f):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Sf(e,t),f=t.memoizedProps,g=t.type===t.elementType?f:rn(t.type,f),a.props=g,P=t.pendingProps,C=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Xt(h):(h=At(n)?fr:xt.current,h=Wr(t,h));var D=n.getDerivedStateFromProps;(N=typeof D=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==P||C!==h)&&Pc(t,a,r,h),$n=!1,C=t.memoizedState,a.state=C,Jo(t,r,a,o);var O=t.memoizedState;f!==P||C!==O||Tt.current||$n?(typeof D=="function"&&(Vs(t,n,D,r),O=t.memoizedState),(g=$n||Nc(t,n,g,r,C,O,h)||!1)?(N||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,O,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,O,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=O),a.props=r,a.state=O,a.context=h,r=g):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),r=!1)}return Ks(e,t,n,r,l,o)}function Ks(e,t,n,r,o,l){Yf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&gc(t,n,!1),An(e,t,l);r=t.stateNode,ov.current=t;var f=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,l),t.child=Gr(t,null,f,l)):Et(e,t,f,l),t.memoizedState=r.state,o&&gc(t,n,!0),t.child}function Kf(e){var t=e.stateNode;t.pendingContext?yc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yc(e,t.context,!1),Oa(e,t.containerInfo)}function zc(e,t,n,r,o){return Vr(),Ia(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xf(e,t,n){var r=t.pendingProps,o=be.current,l=!1,a=(t.flags&128)!==0,f;if((f=a)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ue(be,o&1),e===null)return Hs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=gl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=bs(n),t.memoizedState=Xs,e):Va(t,a));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return lv(e,t,a,r,f,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,f=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),f!==null?l=Zn(f,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?bs(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Va(e,t){return t=gl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xo(e,t,n,r){return r!==null&&Ia(r),Gr(t,e.child,null,n),e=Va(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lv(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ls(Error(G(422))),xo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=gl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Gr(t,e.child,null,a),t.child.memoizedState=bs(a),t.memoizedState=Xs,l);if(!(t.mode&1))return xo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(G(419)),r=ls(l,r,void 0),xo(e,t,a,r)}if(f=(a&e.childLanes)!==0,It||f){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Tn(e,o),un(r,e,o,-1))}return ba(),r=ls(Error(G(421))),xo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=wv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ft=Kn(o.nextSibling),Bt=t,Ye=!0,ln=null,e!==null&&(Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,Nn=e.id,Pn=e.overflow,hr=t),t=Va(t,r.children),t.flags|=4096,t)}function Lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ws(e.return,t,n)}function ss(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function bf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,n,t);else if(e.tag===19)Lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(be,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ss(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ss(t,!0,n,null,l);break;case"together":ss(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ao(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sv(e,t,n){switch(t.tag){case 3:Kf(t),Vr();break;case 5:kf(t);break;case 1:At(t.type)&&Qo(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ue(Xo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?Xf(e,t,n):(Ue(be,be.current&1),e=An(e,t,n),e!==null?e.sibling:null);Ue(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ue(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Qf(e,t,n)}return An(e,t,n)}var Jf,Js,Zf,qf;Jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Js=function(){};Zf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=ws(e,o),r=ws(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=ks(e,o),r=ks(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vo)}js(n,r);var a;n=null;for(g in o)if(!r.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var f=o[g];for(a in f)f.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Pi.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in r){var h=r[g];if(f=o!=null?o[g]:void 0,r.hasOwnProperty(g)&&h!==f&&(h!=null||f!=null))if(g==="style")if(f){for(a in f)!f.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&f[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(g,n)),n=h;else g==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,f=f?f.__html:void 0,h!=null&&f!==h&&(l=l||[]).push(g,h)):g==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(g,""+h):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(g)?(h!=null&&g==="onScroll"&&Ge("scroll",e),l||f===h||(l=[])):(l=l||[]).push(g,h))}n&&(l=l||[]).push("style",n);var g=l;(t.updateQueue=g)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function av(e,t,n){var r=t.pendingProps;switch(_a(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return At(t.type)&&Go(),gt(t),null;case 3:return r=t.stateNode,Qr(),Qe(Tt),Qe(xt),Fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(go(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(oa(ln),ln=null))),Js(e,t),gt(t),null;case 5:Da(t);var o=ur(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return gt(t),null}if(e=ur(En.current),go(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Di]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Vu(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":Qu(r,l),Ge("invalid",r)}js(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var f=l[a];a==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",""+f]):Pi.hasOwnProperty(a)&&f!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ao(r),Gu(r,l,!0);break;case"textarea":ao(r),Yu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Vo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Di]=r,Jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Cs(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":Vu(e,r),o=ws(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":Qu(e,r),o=ks(e,r),Ge("invalid",e);break;default:o=r}js(n,o),f=o;for(l in f)if(f.hasOwnProperty(l)){var h=f[l];l==="style"?_d(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pd(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Mi(e,h):typeof h=="number"&&Mi(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Pi.hasOwnProperty(l)?h!=null&&l==="onScroll"&&Ge("scroll",e):h!=null&&pa(e,l,h,a))}switch(n){case"input":ao(e),Gu(e,r,!1);break;case"textarea":ao(e),Yu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=ur(Bi.current),ur(En.current),go(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Bt,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(Qe(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&Ft!==null&&t.mode&1&&!(t.flags&128))yf(),Vr(),t.flags|=98560,l=!1;else if(l=go(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(G(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(G(317));l[Sn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(oa(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?st===0&&(st=3):ba())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Qr(),Js(e,t),e===null&&Li(t.stateNode.containerInfo),gt(t),null;case 10:return Ra(t.type._context),gt(t),null;case 17:return At(t.type)&&Go(),gt(t),null;case 19:if(Qe(be),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ci(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Zo(e),a!==null){for(t.flags|=128,ci(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(be,be.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Kr&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304)}else{if(!r)if(e=Zo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Ye)return gt(t),null}else 2*nt()-l.renderingStartTime>Kr&&n!==1073741824&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=be.current,Ue(be,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Xa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function uv(e,t){switch(_a(t),t.tag){case 1:return At(t.type)&&Go(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),Qe(Tt),Qe(xt),Fa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Da(t),null;case 13:if(Qe(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(be),null;case 4:return Qr(),null;case 10:return Ra(t.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var So=!1,wt=!1,cv=typeof WeakSet=="function"?WeakSet:Set,se=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function Zs(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Oc=!1;function dv(e,t){if(Ls=Uo,e=rf(),Pa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,f=-1,h=-1,g=0,N=0,P=e,C=null;t:for(;;){for(var D;P!==n||o!==0&&P.nodeType!==3||(f=a+o),P!==l||r!==0&&P.nodeType!==3||(h=a+r),P.nodeType===3&&(a+=P.nodeValue.length),(D=P.firstChild)!==null;)C=P,P=D;for(;;){if(P===e)break t;if(C===n&&++g===o&&(f=a),C===l&&++N===r&&(h=a),(D=P.nextSibling)!==null)break;P=C,C=P.parentNode}P=D}n=f===-1||h===-1?null:{start:f,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Os={focusedElem:e,selectionRange:n},Uo=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var B=O.memoizedProps,de=O.memoizedState,k=t.stateNode,w=k.getSnapshotBeforeUpdate(t.elementType===t.type?B:rn(t.type,B),de);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){tt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return O=Oc,Oc=!1,O}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&Zs(t,n,l)}o=o.next}while(o!==r)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function qs(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eh(e){var t=e.alternate;t!==null&&(e.alternate=null,eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Di],delete t[Bs],delete t[Ym],delete t[Km])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function th(e){return e.tag===5||e.tag===3||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ea(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vo));else if(r!==4&&(e=e.child,e!==null))for(ea(e,t,n),e=e.sibling;e!==null;)ea(e,t,n),e=e.sibling}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}var pt=null,on=!1;function Fn(e,t,n){for(n=n.child;n!==null;)nh(e,t,n),n=n.sibling}function nh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Fn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?es(e.parentNode,n):e.nodeType===1&&es(e,n),Ai(e)):es(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Fn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Zs(n,t,a),o=o.next}while(o!==r)}Fn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){tt(n,t,f)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Fn(e,t,n),wt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cv),t.forEach(function(r){var o=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,f=a;e:for(;f!==null;){switch(f.tag){case 5:pt=f.stateNode,on=!1;break e;case 3:pt=f.stateNode.containerInfo,on=!0;break e;case 4:pt=f.stateNode.containerInfo,on=!0;break e}f=f.return}if(pt===null)throw Error(G(160));nh(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(g){tt(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{Ei(3,e,e.return),vl(3,e)}catch(B){tt(e,e.return,B)}try{Ei(5,e,e.return)}catch(B){tt(e,e.return,B)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{Mi(o,"")}catch(B){tt(e,e.return,B)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,f=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&jd(o,l),Cs(f,a);var g=Cs(f,l);for(a=0;a<h.length;a+=2){var N=h[a],P=h[a+1];N==="style"?_d(o,P):N==="dangerouslySetInnerHTML"?Pd(o,P):N==="children"?Mi(o,P):pa(o,N,P,g)}switch(f){case"input":xs(o,l);break;case"textarea":Cd(o,l);break;case"select":var C=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var D=l.value;D!=null?Lr(o,!!l.multiple,D,!1):C!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Di]=l}catch(B){tt(e,e.return,B)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(G(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(B){tt(e,e.return,B)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ai(t.containerInfo)}catch(B){tt(e,e.return,B)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=nt())),r&4&&Fc(e);break;case 22:if(N=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(g=wt)||N,nn(t,e),wt=g):nn(t,e),yn(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!N&&e.mode&1)for(se=e,N=e.child;N!==null;){for(P=se=N;se!==null;){switch(C=se,D=C.child,C.tag){case 0:case 11:case 14:case 15:Ei(4,C,C.return);break;case 1:Rr(C,C.return);var O=C.stateNode;if(typeof O.componentWillUnmount=="function"){r=C,n=C.return;try{t=r,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(B){tt(r,n,B)}}break;case 5:Rr(C,C.return);break;case 22:if(C.memoizedState!==null){$c(P);continue}}D!==null?(D.return=C,se=D):$c(P)}N=N.sibling}e:for(N=null,P=e;;){if(P.tag===5){if(N===null){N=P;try{o=P.stateNode,g?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=P.stateNode,h=P.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,f.style.display=Md("display",a))}catch(B){tt(e,e.return,B)}}}else if(P.tag===6){if(N===null)try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(B){tt(e,e.return,B)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;N===P&&(N=null),P=P.return}N===P&&(N=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Fc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(th(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Mi(o,""),r.flags&=-33);var l=Dc(e);ta(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,f=Dc(e);ea(e,f,a);break;default:throw Error(G(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fv(e,t,n){se=e,ih(e)}function ih(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var o=se,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||So;if(!a){var f=o.alternate,h=f!==null&&f.memoizedState!==null||wt;f=So;var g=wt;if(So=a,(wt=h)&&!g)for(se=o;se!==null;)a=se,h=a.child,a.tag===22&&a.memoizedState!==null?Uc(o):h!==null?(h.return=a,se=h):Uc(o);for(;l!==null;)se=l,ih(l),l=l.sibling;se=o,So=f,wt=g}Bc(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,se=l):Bc(e)}}function Bc(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ec(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ec(t,a,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var N=g.memoizedState;if(N!==null){var P=N.dehydrated;P!==null&&Ai(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}wt||t.flags&512&&qs(t)}catch(C){tt(t,t.return,C)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function $c(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Uc(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{qs(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{qs(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){se=null;break}var f=t.sibling;if(f!==null){f.return=t.return,se=f;break}se=t.return}}var hv=Math.ceil,tl=Rn.ReactCurrentDispatcher,Ga=Rn.ReactCurrentOwner,Kt=Rn.ReactCurrentBatchConfig,Ie=0,dt=null,ot=null,mt=0,Dt=0,zr=nr(0),st=0,Wi=null,mr=0,yl=0,Qa=0,ji=null,_t=null,Ya=0,Kr=1/0,jn=null,nl=!1,na=null,bn=null,ko=!1,Vn=null,rl=0,Ci=0,ra=null,Ro=-1,zo=0;function jt(){return Ie&6?nt():Ro!==-1?Ro:Ro=nt()}function Jn(e){return e.mode&1?Ie&2&&mt!==0?mt&-mt:bm.transition!==null?(zo===0&&(zo=Ud()),zo):(e=De,e!==0||(e=window.event,e=e===void 0?16:Kd(e.type)),e):1}function un(e,t,n,r){if(50<Ci)throw Ci=0,ra=null,Error(G(185));Gi(e,n,r),(!(Ie&2)||e!==dt)&&(e===dt&&(!(Ie&2)&&(yl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&Ie===0&&!(t.mode&1)&&(Kr=nt()+500,hl&&rr()))}function Rt(e,t){var n=e.callbackNode;bp(e,t);var r=$o(e,e===dt?mt:0);if(r===0)n!==null&&bu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bu(n),t===1)e.tag===0?Xm(Hc.bind(null,e)):pf(Hc.bind(null,e)),Gm(function(){!(Ie&6)&&rr()}),n=null;else{switch(Hd(r)){case 1:n=wa;break;case 4:n=Bd;break;case 16:n=Bo;break;case 536870912:n=$d;break;default:n=Bo}n=fh(n,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oh(e,t){if(Ro=-1,zo=0,Ie&6)throw Error(G(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=$o(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=il(e,r);else{t=r;var o=Ie;Ie|=2;var l=sh();(dt!==e||mt!==t)&&(jn=null,Kr=nt()+500,cr(e,t));do try{vv();break}catch(f){lh(e,f)}while(!0);Aa(),tl.current=l,Ie=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=Is(e),o!==0&&(r=o,t=ia(e,o))),t===1)throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!pv(o)&&(t=il(e,r),t===2&&(l=Is(e),l!==0&&(r=l,t=ia(e,l))),t===1))throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:lr(e,_t,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ya+500-nt(),10<t)){if($o(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fs(lr.bind(null,e,_t,jn),t);break}lr(e,_t,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hv(r/1960))-r,10<r){e.timeoutHandle=Fs(lr.bind(null,e,_t,jn),r);break}lr(e,_t,jn);break;case 5:lr(e,_t,jn);break;default:throw Error(G(329))}}}return Rt(e,nt()),e.callbackNode===n?oh.bind(null,e):null}function ia(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=il(e,t),e!==2&&(t=_t,_t=n,t!==null&&oa(t)),e}function oa(e){_t===null?_t=e:_t.push.apply(_t,e)}function pv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Qa,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Hc(e){if(Ie&6)throw Error(G(327));$r();var t=$o(e,0);if(!(t&1))return Rt(e,nt()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=Is(e);r!==0&&(t=r,n=ia(e,r))}if(n===1)throw n=Wi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,_t,jn),Rt(e,nt()),null}function Ka(e,t){var n=Ie;Ie|=1;try{return e(t)}finally{Ie=n,Ie===0&&(Kr=nt()+500,hl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(Ie&6)&&$r();var t=Ie;Ie|=1;var n=Kt.transition,r=De;try{if(Kt.transition=null,De=1,e)return e()}finally{De=r,Kt.transition=n,Ie=t,!(Ie&6)&&rr()}}function Xa(){Dt=zr.current,Qe(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(_a(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Go();break;case 3:Qr(),Qe(Tt),Qe(xt),Fa();break;case 5:Da(r);break;case 4:Qr();break;case 13:Qe(be);break;case 19:Qe(be);break;case 10:Ra(r.type._context);break;case 22:case 23:Xa()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Dt=t,st=0,Wi=null,Qa=yl=mr=0,_t=ji=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function lh(e,t){do{var n=ot;try{if(Aa(),Io.current=el,qo){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qo=!1}if(pr=0,ct=lt=Je=null,ki=!1,$i=0,Ga.current=null,n===null||n.return===null){st=1,Wi=t,ot=null;break}e:{var l=e,a=n.return,f=n,h=t;if(t=mt,f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var g=h,N=f,P=N.tag;if(!(N.mode&1)&&(P===0||P===11||P===15)){var C=N.alternate;C?(N.updateQueue=C.updateQueue,N.memoizedState=C.memoizedState,N.lanes=C.lanes):(N.updateQueue=null,N.memoizedState=null)}var D=_c(a);if(D!==null){D.flags&=-257,Ic(D,a,f,l,t),D.mode&1&&Mc(l,g,t),t=D,h=g;var O=t.updateQueue;if(O===null){var B=new Set;B.add(h),t.updateQueue=B}else O.add(h);break e}else{if(!(t&1)){Mc(l,g,t),ba();break e}h=Error(G(426))}}else if(Ye&&f.mode&1){var de=_c(a);if(de!==null){!(de.flags&65536)&&(de.flags|=256),Ic(de,a,f,l,t),Ia(Yr(h,f));break e}}l=h=Yr(h,f),st!==4&&(st=2),ji===null?ji=[l]:ji.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var k=Wf(l,h,t);kc(l,k);break e;case 1:f=h;var w=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(bn===null||!bn.has(j)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=Vf(l,f,t);kc(l,R);break e}}l=l.return}while(l!==null)}uh(n)}catch(V){t=V,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function sh(){var e=tl.current;return tl.current=el,e===null?el:e}function ba(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(yl&268435455)||Hn(dt,mt)}function il(e,t){var n=Ie;Ie|=2;var r=sh();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{mv();break}catch(o){lh(e,o)}while(!0);if(Aa(),Ie=n,tl.current=r,ot!==null)throw Error(G(261));return dt=null,mt=0,st}function mv(){for(;ot!==null;)ah(ot)}function vv(){for(;ot!==null&&!Up();)ah(ot)}function ah(e){var t=dh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?uh(e):ot=t,Ga.current=null}function uh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=av(n,t,Dt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=De,o=Kt.transition;try{Kt.transition=null,De=1,yv(e,t,n,r)}finally{Kt.transition=o,De=r}return null}function yv(e,t,n,r){do $r();while(Vn!==null);if(Ie&6)throw Error(G(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Jp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ko||(ko=!0,fh(Bo,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Kt.transition,Kt.transition=null;var a=De;De=1;var f=Ie;Ie|=4,Ga.current=null,dv(e,n),rh(n,e),Dm(Os),Uo=!!Ls,Os=Ls=null,e.current=n,fv(n),Hp(),Ie=f,De=a,Kt.transition=l}else e.current=n;if(ko&&(ko=!1,Vn=e,rl=o),l=e.pendingLanes,l===0&&(bn=null),Gp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nl)throw nl=!1,e=na,na=null,e;return rl&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===ra?Ci++:(Ci=0,ra=e):Ci=0,rr(),null}function $r(){if(Vn!==null){var e=Hd(rl),t=Kt.transition,n=De;try{if(Kt.transition=null,De=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,rl=0,Ie&6)throw Error(G(331));var o=Ie;for(Ie|=4,se=e.current;se!==null;){var l=se,a=l.child;if(se.flags&16){var f=l.deletions;if(f!==null){for(var h=0;h<f.length;h++){var g=f[h];for(se=g;se!==null;){var N=se;switch(N.tag){case 0:case 11:case 15:Ei(8,N,l)}var P=N.child;if(P!==null)P.return=N,se=P;else for(;se!==null;){N=se;var C=N.sibling,D=N.return;if(eh(N),N===g){se=null;break}if(C!==null){C.return=D,se=C;break}se=D}}}var O=l.alternate;if(O!==null){var B=O.child;if(B!==null){O.child=null;do{var de=B.sibling;B.sibling=null,B=de}while(B!==null)}}se=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,se=a;else e:for(;se!==null;){if(l=se,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ei(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,se=k;break e}se=l.return}}var w=e.current;for(se=w;se!==null;){a=se;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,se=j;else e:for(a=w;se!==null;){if(f=se,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:vl(9,f)}}catch(V){tt(f,f.return,V)}if(f===a){se=null;break e}var R=f.sibling;if(R!==null){R.return=f.return,se=R;break e}se=f.return}}if(Ie=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(al,e)}catch{}r=!0}return r}finally{De=n,Kt.transition=t}}return!1}function Wc(e,t,n){t=Yr(n,t),t=Wf(e,t,1),e=Xn(e,t,1),t=jt(),e!==null&&(Gi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Wc(e,e,n);else for(;t!==null;){if(t.tag===3){Wc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){e=Yr(n,e),e=Vf(t,e,1),t=Xn(t,e,1),e=jt(),t!==null&&(Gi(t,1,e),Rt(t,e));break}}t=t.return}}function gv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ya?cr(e,0):Qa|=n),Rt(e,t)}function ch(e,t){t===0&&(e.mode&1?(t=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):t=1);var n=jt();e=Tn(e,t),e!==null&&(Gi(e,t,n),Rt(e,n))}function wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),ch(e,n)}var dh;dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,sv(e,t,n);It=!!(e.flags&131072)}else It=!1,Ye&&t.flags&1048576&&mf(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ao(e,t),e=t.pendingProps;var o=Wr(t,xt.current);Br(t,n),o=$a(null,t,r,e,o,n);var l=Ua();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(l=!0,Qo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,La(t),o.updater=ml,t.stateNode=o,o._reactInternals=t,Gs(t,r,e,n),t=Ks(null,t,r,!0,l,n)):(t.tag=0,Ye&&l&&Ma(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ao(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=kv(r),e=rn(r,e),o){case 0:t=Ys(null,t,r,e,n);break e;case 1:t=Rc(null,t,r,e,n);break e;case 11:t=Tc(null,t,r,e,n);break e;case 14:t=Ac(null,t,r,rn(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ys(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Rc(e,t,r,o,n);case 3:e:{if(Kf(t),e===null)throw Error(G(387));r=t.pendingProps,l=t.memoizedState,o=l.element,Sf(e,t),Jo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Yr(Error(G(423)),t),t=zc(e,t,r,n,o);break e}else if(r!==o){o=Yr(Error(G(424)),t),t=zc(e,t,r,n,o);break e}else for(Ft=Kn(t.stateNode.containerInfo.firstChild),Bt=t,Ye=!0,ln=null,n=wf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===o){t=An(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&Hs(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Ds(r,o)?a=null:l!==null&&Ds(r,l)&&(t.flags|=32),Yf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Hs(t),null;case 13:return Xf(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Tc(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Ue(Xo,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!Tt.current){t=An(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var f=l.dependencies;if(f!==null){a=l.child;for(var h=f.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=Mn(-1,n&-n),h.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var N=g.pending;N===null?h.next=h:(h.next=N.next,N.next=h),g.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Ws(l.return,n,t),f.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(G(341));a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Ws(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Br(t,n),o=Xt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),Ac(e,t,r,o,n);case 15:return Gf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ao(e,t),t.tag=1,At(r)?(e=!0,Qo(t)):e=!1,Br(t,n),Hf(t,r,o),Gs(t,r,o,n),Ks(null,t,r,!0,e,n);case 19:return bf(e,t,n);case 22:return Qf(e,t,n)}throw Error(G(156,t.tag))};function fh(e,t){return Fd(e,t)}function Sv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,r){return new Sv(e,t,n,r)}function Ja(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kv(e){if(typeof e=="function")return Ja(e)?1:0;if(e!=null){if(e=e.$$typeof,e===va)return 11;if(e===ya)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Ja(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case ma:a=8,o|=8;break;case ms:return e=Yt(12,n,t,o|2),e.elementType=ms,e.lanes=l,e;case vs:return e=Yt(13,n,t,o),e.elementType=vs,e.lanes=l,e;case ys:return e=Yt(19,n,t,o),e.elementType=ys,e.lanes=l,e;case Sd:return gl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wd:a=10;break e;case xd:a=9;break e;case va:a=11;break e;case ya:a=14;break e;case Bn:a=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Yt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Yt(7,e,r,t),e.lanes=n,e}function gl(e,t,n,r){return e=Yt(22,e,r,t),e.elementType=Sd,e.lanes=n,e.stateNode={isHidden:!1},e}function as(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function us(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ev(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Za(e,t,n,r,o,l,a,f,h){return e=new Ev(e,t,n,f,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Yt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(l),e}function jv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hh(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(At(n))return hf(e,n,t)}return t}function ph(e,t,n,r,o,l,a,f,h){return e=Za(n,r,!0,e,o,l,a,f,h),e.context=hh(null),n=e.current,r=jt(),o=Jn(n),l=Mn(r,o),l.callback=t??null,Xn(n,l,o),e.current.lanes=o,Gi(e,o,r),Rt(e,r),e}function wl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=hh(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xn(o,t,a),e!==null&&(un(e,o,a,l),_o(e,o,a)),a}function ol(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qa(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}function Cv(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}xl.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));wl(e,t,null,null)};xl.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){wl(null,e,null,null)}),t[In]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Yd(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gc(){}function Nv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var g=ol(a);l.call(g)}}var a=ph(t,r,e,0,null,!1,!1,"",Gc);return e._reactRootContainer=a,e[In]=a.current,Li(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var f=r;r=function(){var g=ol(h);f.call(g)}}var h=Za(e,0,!1,null,null,!1,!1,"",Gc);return e._reactRootContainer=h,e[In]=h.current,Li(e.nodeType===8?e.parentNode:e),vr(function(){wl(t,h,n,r)}),h}function kl(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var f=o;o=function(){var h=ol(a);f.call(h)}}wl(t,a,e,o)}else a=Nv(n,t,e,o,r);return ol(a)}Wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(xa(t,n|1),Rt(t,nt()),!(Ie&6)&&(Kr=nt()+500,rr()))}break;case 13:vr(function(){var r=Tn(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),qa(e,1)}};Sa=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}qa(e,134217728)}};Vd=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=jt();un(n,e,t,r)}qa(e,t)}};Gd=function(){return De};Qd=function(e,t){var n=De;try{return De=e,t()}finally{De=n}};Ps=function(e,t,n){switch(t){case"input":if(xs(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=fl(r);if(!o)throw Error(G(90));Ed(r),xs(r,o)}}}break;case"textarea":Cd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Ad=Ka;Rd=vr;var Pv={usingClientEntryPoint:!1,Events:[Yi,Mr,fl,Id,Td,Ka]},di={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mv={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{al=Eo.inject(Mv),kn=Eo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(t))throw Error(G(200));return jv(e,t,null,n)};Ut.createRoot=function(e,t){if(!tu(e))throw Error(G(299));var n=!1,r="",o=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Za(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,Li(e.nodeType===8?e.parentNode:e),new eu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!Sl(t))throw Error(G(200));return kl(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=mh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ph(t,null,e,1,n??null,o,!1,l,a),e[In]=t.current,Li(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new xl(t)};Ut.render=function(e,t,n){if(!Sl(t))throw Error(G(200));return kl(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(G(40));return e._reactRootContainer?(vr(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Ut.unstable_batchedUpdates=Ka;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return kl(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),md.exports=Ut;var _v=md.exports,Qc=_v;hs.createRoot=Qc.createRoot,hs.hydrateRoot=Qc.hydrateRoot;const Ur={},yh="production",Yc={development:{baseUrl:"http://localhost:4000/api",healthUrl:"http://localhost:4000/health"},production:{baseUrl:"https://cfg-server.onrender.com/api",healthUrl:"https://cfg-server.onrender.com/health"}},gh=Yc[yh]||Yc.development,nu=()=>{if(!(Ur!=null&&Ur.VITE_API_BASE_URL))return gh.baseUrl},Iv=()=>{if(!(Ur!=null&&Ur.VITE_HEALTH_URL))return gh.healthUrl},Tv=async()=>{try{const e=await fetch(Iv(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Health check failed: ${e.status}`);const t=await e.json();return{status:t.status||"unknown",version:t.version||"unknown",commit:t.commit||"unknown",healthy:t.status==="ok"}}catch(e){return console.error("[API Config] Health check error:",e),{status:"error",version:"unknown",commit:"unknown",healthy:!1,error:e.message}}},Av=()=>yh;function Rv({onStart:e}){const[t,n]=M.useState("1"),[r,o]=M.useState("individual"),[l,a]=M.useState("15"),[f,h]=M.useState({status:"checking",version:"...",commit:"...",healthy:!1});M.useEffect(()=>{const C=async()=>{const O=await Tv();h(O),console.log("[StartDialog] Server health:",O)};C();const D=setInterval(C,3e4);return()=>clearInterval(D)},[]);const g=()=>{if(!t||!l){alert("Please fill in all fields");return}const C={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(C)},N=()=>{window.close()},P=()=>f.status==="checking"?"checking":f.healthy?"healthy":"unhealthy";return d.jsx("div",{className:"dialog-overlay",children:d.jsxs("div",{className:"dialog-box",children:[d.jsxs("div",{className:"dialog-header",children:[d.jsx("h2",{children:"The Creative Game"}),d.jsxs("div",{className:`server-health-indicator ${P()}`,title:`Server: ${f.status}
Version: ${f.version}
Commit: ${f.commit}
Environment: ${Av()}`,children:[d.jsx("span",{className:"health-light"}),d.jsx("span",{className:"health-text",children:"Server"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"ID:"}),d.jsx("input",{type:"text",value:t,onChange:C=>n(C.target.value)})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Condition:"}),d.jsxs("select",{value:r,onChange:C=>o(C.target.value),children:[d.jsx("option",{value:"individual",children:"individual"}),d.jsx("option",{value:"group",children:"group"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Time (in minutes):"}),d.jsx("input",{type:"number",value:l,onChange:C=>a(C.target.value),min:"1"})]}),d.jsxs("div",{className:"dialog-buttons",children:[d.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),d.jsx("button",{className:"dialog-button ok",onClick:g,children:"OK"}),d.jsx("button",{className:"dialog-button cancel",onClick:N,children:"Cancel"})]})]})})}class Kc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}clear(){this.logs=[]}}const zv=.035;class Lv{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=nu(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var n;this.sessionInfo={...t,startedAt:((n=this.sessionInfo)==null?void 0:n.startedAt)||new Date(this.startTime).toISOString()},await this.initializeSession()}async initializeSession(){var n;if(this.sessionInitialized||!((n=this.sessionInfo)!=null&&n.sessionGameId))return;const t={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,metadata:{config:this.sessionInfo}};try{const r=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const l=(await r.json().catch(()=>({}))).message||`Failed to initialize session (${r.status})`;throw r.status===409?(alert(` Session ID Conflict

${l}

Please choose a different Session ID.`),this.stop(),new Error(l)):new Error(l)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(r){throw console.error("[GameTracker] Failed to initialize session:",r),r}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/zv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),f=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(C=>this.relativeToGrid(C)):null),g={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:f,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:f,grid_all_positions:h};(r||t.camera_frame)&&(g.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(g.gallery_shape_number=t.gallery_shape_number,g.gallery=t.gallery,g.gallery_normalized=t.gallery_normalized,g.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(C=>this.relativeToGrid(C)):null),g.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(C=>this.relativeToGrid(C)):null)),this.moves.push(g),this.persistMove(g).catch(C=>{console.error("[GameTracker] Failed to persist move to server:",C)});const N=this.getCurrentBraceletStatus(),P=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:f,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:N,lastKnownPlayer:P,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(C=>({status:C.status,elapsed:C.elapsed.toFixed(2)}))}})}async persistMove(t){var r;if(!this.sessionInitialized||!((r=this.sessionInfo)!=null&&r.sessionGameId)){console.warn("[GameTracker] Cannot persist move - session not initialized");return}const n=`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`;console.log(`[GameTracker] Persisting move to: ${n}`);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){const a=await o.text();throw console.error(`[GameTracker] Server error (${o.status}):`,a),new Error(`Failed to persist move (${o.status}): ${a}`)}const l=await o.json();return console.log("[GameTracker]  Move persisted successfully:",l),l}catch(o){throw console.error("[GameTracker]  persistMove error:",o),o}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(f=>f.timestamp>=o&&f.timestamp<=l);if(a.length>0){const f={};a.forEach(g=>{(g.status==="Player A"||g.status==="Player B")&&(f[g.status]=(f[g.status]||0)+1)});const h=Object.keys(f).reduce((g,N)=>f[g]>f[N]?g:N,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let cs=null;const Xc=()=>(cs||(cs=new Lv),cs),sn=.07,Ni=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Xe=e=>Math.round(e*1e3)/1e3,Ov=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Xe(l.position[0]-sn),Xe(l.position[1])],[Xe(l.position[0]+sn),Xe(l.position[1])],[Xe(l.position[0]),Xe(l.position[1]-sn)],[Xe(l.position[0]),Xe(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Dv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},la=e=>e.map(t=>{const n=[],r=[[Xe(t.position[0]-sn),Xe(t.position[1])],[Xe(t.position[0]+sn),Xe(t.position[1])],[Xe(t.position[0]),Xe(t.position[1]-sn)],[Xe(t.position[0]),Xe(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Xe(o.position[0])===l[0]&&Xe(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Fv=e=>{const t=new Set;if(e.forEach((a,f)=>{a.forEach((h,g)=>{h&&t.add(`${f},${g}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,f]=l.shift(),h=`${a},${f}`;o.has(h)||(o.add(h),n.forEach(([g,N])=>{const P=`${a+g},${f+N}`;t.has(P)&&!o.has(P)&&l.push([a+g,f+N])}))}return o.size===t.size},Bv=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Xe(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Xe(l));for(let l=0;l<=.77;l+=sn)r.push(Xe(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const f=n.findIndex(g=>Math.abs(g-l[0])<.001),h=r.findIndex(g=>Math.abs(g-l[1])<.001);f!==-1&&h!==-1&&(o[h][f]=!0)}}),Fv(o)},sa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=Bv(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},bc=e=>{if(e.length===0)return null;try{const t=e.map(N=>N[0]),n=e.map(N=>N[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(N=>{const P=Math.sqrt(Math.pow(N[0]-r,2)+Math.pow(N[1]-o,2));P<l&&(l=P,a=N)});const f=-a[0],h=-a[1],g=e.map(N=>[Xe(N[0]+f),Xe(N[1]+h)]);return g.sort((N,P)=>N[0]-P[0]||N[1]-P[1]),g}catch{return null}},$v=60,Jc=.07,ds=120;function Uv({config:e,interfaceHidden:t=!1}){const[n,r]=M.useState(Ni()),[o,l]=M.useState(null),[a,f]=M.useState({x:0,y:0}),[h,g]=M.useState(!0),[N,P]=M.useState(e.timeSeconds),[C,D]=M.useState(0),[O,B]=M.useState(null),[de,k]=M.useState(!0),[w,j]=M.useState(""),[R,V]=M.useState(!1),[K,X]=M.useState({blockSize:$v,bottomPadding:ds}),A=M.useRef(null),ae=M.useRef(new Kc(e)),U=M.useRef(Xc()),ie=M.useRef(null),b=M.useRef(Date.now()),pe=M.useRef(ds),ue=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,xe=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,Ce="The experiment is done. Thank you very much for your participation!",_e=M.useCallback(()=>{const F=A.current;if(!F)return;const J=F.offsetWidth,Q=F.offsetHeight;if(!J||!Q)return;const le=pe.current||ds;let L=Math.max(1,Math.min(J,Q-le)),m=Math.max(38,Math.min(L*Jc*.95,L/4)),_=Math.max(m*2.5,110);L=Math.max(1,Math.min(J,Q-_)),m=Math.max(38,Math.min(L*Jc*.95,L/4)),_=Math.max(m*2.5,110),pe.current=_,X(S=>{const x=Math.abs(S.blockSize-m),I=Math.abs(S.bottomPadding-_);return x<.5&&I<.5?S:{blockSize:m,bottomPadding:_}})},[]);M.useEffect(()=>(j(ue),(async()=>{try{U.current.start(),await U.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(J){console.error("[GameCanvas] Failed to initialize tracker:",J),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),window.endGameExperience=()=>{k(!0),j(Ce),V(!0),U.current.stop(),console.log("[GameCanvas] Game ended via endGameExperience(). All data saved to server.")},()=>{window.endGameExperience&&delete window.endGameExperience,U.current.stop()}),[]),M.useEffect(()=>{_e()},[_e,t]),M.useEffect(()=>{const F=()=>{_e()};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[_e]),M.useEffect(()=>{if(!h&&N>0){const F=setInterval(()=>{P(J=>J<=1?(clearInterval(F),k(!0),j(Ce),V(!0),console.log("[GameCanvas] Game ended by timer. All data saved to server."),0):J-1)},1e3);return()=>clearInterval(F)}},[h,N]),M.useEffect(()=>{r(F=>sa(la(F),h))},[h]);const Y=()=>(Date.now()-b.current)/1e3,oe=(F,J)=>{const Q=A.current;if(!Q)return 0;const le=Q.offsetHeight-pe.current,L=Math.min(Q.offsetWidth,le),m=J==="x"?(Q.offsetWidth-L)/2:(Q.offsetHeight-pe.current-L)/2;return(F-m)/L-.5},ne=(F,J)=>{const Q=A.current;if(!Q)return 0;const le=Q.offsetHeight-pe.current,L=Math.min(Q.offsetWidth,le),m=J==="x"?(Q.offsetWidth-L)/2:(Q.offsetHeight-pe.current-L)/2;return(F+.5)*L+m},we=F=>{var L,m,_,S;const J=A.current.getBoundingClientRect(),Q=F.clientX!==void 0?F.clientX:(m=(L=F.touches)==null?void 0:L[0])==null?void 0:m.clientX,le=F.clientY!==void 0?F.clientY:(S=(_=F.touches)==null?void 0:_[0])==null?void 0:S.clientY;return{x:Q-J.left,y:le-J.top}},Se=(F,J)=>{const Q=n.find(_=>_.id===J);if(!Q||!Q.canMove)return;F.preventDefault();const le=we(F),L=ne(Q.position[0],"x"),m=ne(Q.position[1],"y");ie.current=Date.now(),l(J),f({x:le.x-L,y:le.y-m})},Le=F=>{if(o===null)return;F.preventDefault();const J=we(F),Q=oe(J.x-a.x,"x"),le=oe(J.y-a.y,"y");r(L=>L.map(m=>m.id===o?{...m,position:[Q,le]}:m))},Fe=()=>{try{const F=window.braceletDetectorCanvas,J=window.braceletDetectorVideo;let Q=null;if(F&&F.width>0&&F.height>0?Q=F:J&&J.videoWidth>0&&J.videoHeight>0&&(Q=J),!Q)return console.warn("[GameCanvas] No camera source available for frame capture"),null;const le=document.createElement("canvas"),L=640,m=480;let _=Q.videoWidth||Q.width,S=Q.videoHeight||Q.height;const x=_/S;return _>L&&(_=L,S=_/x),S>m&&(S=m,_=S*x),le.width=Math.floor(_),le.height=Math.floor(S),le.getContext("2d").drawImage(Q,0,0,le.width,le.height),le.toDataURL("image/jpeg",.6)}catch(F){return console.error("[GameCanvas] Error capturing camera frame:",F),null}},Re=()=>{if(o===null)return;const F=n.find(x=>x.id===o),J=Ov(n,o),Q=Dv(J,F.position),le=ie.current?(Date.now()-ie.current)/1e3:0,L=n.map(x=>x.id===o?{...x,position:Q}:x),m=Fe(),_=window.currentBraceletStatus||"Unknown",S={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:Y(),unit:o,end_position:Q,all_positions:L.map(x=>x.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:m,player:_};ae.current.write(S),U.current.recordMove(S,le,m),r(x=>{const I=x.map(z=>z.id===o?{...z,position:Q}:z);return sa(la(I),h)}),l(null),ie.current=null},Be=()=>{const F=n.map(S=>S.position),J=bc(F),Q=C+1,le=Fe(),L=window.currentBraceletStatus||"Unknown",m={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:Y(),unit:null,end_position:null,all_positions:null,gallery_shape_number:Q,gallery:F,gallery_normalized:J,camera_frame:le,player:L};ae.current.write(m),U.current.recordMove(m,0,le);const _=H();B(_),D(Q)},H=()=>{const F=document.createElement("canvas");F.width=400,F.height=400;const J=F.getContext("2d");J.fillStyle="#000",J.fillRect(0,0,400,400);const Q=n.map(L=>L.position),le=bc(Q);return le&&le.forEach(L=>{const m=(L[0]+.5)*400,_=(L[1]+.5)*400;J.fillStyle="green",J.fillRect(m-15,_-15,30,30)}),F.toDataURL()},q=M.useCallback(F=>{F.key==="p"&&h?(g(!1),k(!0),j(xe),b.current=Date.now(),r(Ni()),B(null),D(0),ae.current=new Kc(e),U.current.stop(),U.current=Xc(),U.current.start(),U.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):F.key==="q"&&!h&&(k(!0),j(Ce),V(!0),console.log("[GameCanvas] Game ended manually (q key). All data saved to server."))},[h,e.id]);M.useEffect(()=>(window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)),[q]);const fe=()=>{if(R&&w===Ce){console.log("[GameCanvas] Game ended - redirecting to start dialog"),window.toggleInterface&&window.toggleInterface(!1),window.location.hash="#/",window.location.reload();return}if(!h&&w===xe)try{const F=new(window.AudioContext||window.webkitAudioContext),J=F.createOscillator(),Q=F.createGain();J.connect(Q),Q.connect(F.destination),J.frequency.setValueAtTime(800,F.currentTime),J.frequency.setValueAtTime(600,F.currentTime+.15),Q.gain.setValueAtTime(.3,F.currentTime),Q.gain.exponentialRampToValueAtTime(.01,F.currentTime+.3),J.start(F.currentTime),J.stop(F.currentTime+.3),console.log("[GameCanvas] Playing start sound - Real experiment begins!")}catch(F){console.error("[GameCanvas] Error playing sound:",F)}k(!1)},ce=F=>{F.preventDefault()};return d.jsxs("div",{className:"game-canvas",ref:A,style:{"--block-size":`${K.blockSize}px`,"--bottom-padding":`${K.bottomPadding}px`},onMouseMove:Le,onMouseUp:Re,onMouseLeave:Re,onTouchMove:Le,onTouchEnd:Re,onTouchCancel:Re,onContextMenu:ce,children:[d.jsx("div",{className:"gallery",onClick:Be,children:d.jsx("div",{className:"gallery-frame",children:O?d.jsx("img",{src:O,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&d.jsxs("div",{className:"timer",children:["Time: ",Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]}),n.map(F=>d.jsx("div",{className:`block ${F.canMove?"movable":""}`,style:{left:`${ne(F.position[0],"x")}px`,top:`${ne(F.position[1],"y")}px`,backgroundColor:F.color||"green",cursor:F.canMove?"grab":"default"},onMouseDown:J=>Se(J,F.id),onTouchStart:J=>Se(J,F.id)},F.id)),de&&d.jsx("div",{className:"message-overlay",onClick:fe,children:d.jsxs("div",{className:"message-box",children:[w,d.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var ll={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var p=i[c];if(!(p in u))break e;u=u[p]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(y){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(y||"")+"_"+p++,y)}function u(y,v){this.h=y,n(this,"description",{configurable:!0,writable:!0,value:v})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",p=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function f(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=f(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var g=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(i[p]=c[p])}return i};l("Object.assign",function(i){return i||g});var N=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},P;if(typeof Object.setPrototypeOf=="function")P=Object.setPrototypeOf;else{var C;e:{var D={a:!0},O={};try{O.__proto__=D,C=O.a;break e}catch{}C=!1}P=C?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var B=P;function de(i,s){if(i.prototype=N(s.prototype),i.prototype.constructor=i,B)B(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function k(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}k.prototype.u=function(i){this.i=i};function j(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}k.prototype.return=function(i){this.l={return:i},this.h=this.v};function R(i,s,u){return i.h=u,{value:s}}function V(i){this.h=new k,this.i=i}function K(i,s){w(i.h);var u=i.h.j;return u?X(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),A(i))}function X(i,s,u,c){try{var p=s.call(i.h.j,u);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return i.h.m=!1,p;var y=p.value}catch(v){return i.h.j=null,j(i.h,v),A(i)}return i.h.j=null,c.call(i.h,y),A(i)}function A(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,j(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function ae(i){this.next=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=A(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.throw,s,i.h.u):(j(i.h,s),s=A(i)),s},this.return=function(s){return K(i,s)},this[Symbol.iterator]=function(){return this}}function U(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,p){function y(v){v.done?c(v.value):Promise.resolve(v.value).then(s,u).then(y,p)}y(i.next())})}function ie(i){return U(new ae(new V(i)))}l("Promise",function(i){function s(v){this.i=0,this.j=void 0,this.h=[],this.u=!1;var E=this.l();try{v(E.resolve,E.reject)}catch(T){E.reject(T)}}function u(){this.h=null}function c(v){return v instanceof s?v:new s(function(E){E(v)})}if(i)return i;u.prototype.i=function(v){if(this.h==null){this.h=[];var E=this;this.j(function(){E.m()})}this.h.push(v)};var p=o.setTimeout;u.prototype.j=function(v){p(v,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var v=this.h;this.h=[];for(var E=0;E<v.length;++E){var T=v[E];v[E]=null;try{T()}catch(W){this.l(W)}}}this.h=null},u.prototype.l=function(v){this.j(function(){throw v})},s.prototype.l=function(){function v(W){return function(Z){T||(T=!0,W.call(E,Z))}}var E=this,T=!1;return{resolve:v(this.I),reject:v(this.m)}},s.prototype.I=function(v){if(v===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof s)this.L(v);else{e:switch(typeof v){case"object":var E=v!=null;break e;case"function":E=!0;break e;default:E=!1}E?this.F(v):this.s(v)}},s.prototype.F=function(v){var E=void 0;try{E=v.then}catch(T){this.m(T);return}typeof E=="function"?this.M(E,v):this.s(v)},s.prototype.m=function(v){this.v(2,v)},s.prototype.s=function(v){this.v(1,v)},s.prototype.v=function(v,E){if(this.i!=0)throw Error("Cannot settle("+v+", "+E+"): Promise already settled in state"+this.i);this.i=v,this.j=E,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var v=this;p(function(){if(v.D()){var E=o.console;typeof E<"u"&&E.error(v.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var v=o.CustomEvent,E=o.Event,T=o.dispatchEvent;return typeof T>"u"?!0:(typeof v=="function"?v=new v("unhandledrejection",{cancelable:!0}):typeof E=="function"?v=new E("unhandledrejection",{cancelable:!0}):(v=o.document.createEvent("CustomEvent"),v.initCustomEvent("unhandledrejection",!1,!0,v)),v.promise=this,v.reason=this.j,T(v))},s.prototype.H=function(){if(this.h!=null){for(var v=0;v<this.h.length;++v)y.i(this.h[v]);this.h=null}};var y=new u;return s.prototype.L=function(v){var E=this.l();v.T(E.resolve,E.reject)},s.prototype.M=function(v,E){var T=this.l();try{v.call(E,T.resolve,T.reject)}catch(W){T.reject(W)}},s.prototype.then=function(v,E){function T(he,te){return typeof he=="function"?function(ge){try{W(he(ge))}catch(Ee){Z(Ee)}}:te}var W,Z,ye=new s(function(he,te){W=he,Z=te});return this.T(T(v,W),T(E,Z)),ye},s.prototype.catch=function(v){return this.then(void 0,v)},s.prototype.T=function(v,E){function T(){switch(W.i){case 1:v(W.j);break;case 2:E(W.j);break;default:throw Error("Unexpected state: "+W.i)}}var W=this;this.h==null?y.i(T):this.h.push(T),this.u=!0},s.resolve=c,s.reject=function(v){return new s(function(E,T){T(v)})},s.race=function(v){return new s(function(E,T){for(var W=f(v),Z=W.next();!Z.done;Z=W.next())c(Z.value).T(E,T)})},s.all=function(v){var E=f(v),T=E.next();return T.done?c([]):new s(function(W,Z){function ye(ge){return function(Ee){he[ge]=Ee,te--,te==0&&W(he)}}var he=[],te=0;do he.push(void 0),te++,c(T.value).T(ye(he.length-1),Z),T=E.next();while(!T.done)})},s});function b(i,s){i instanceof String&&(i+="");var u=0,c=!1,p={next:function(){if(!c&&u<i.length){var y=u++;return{value:s(y,i[y]),done:!1}}return c=!0,{done:!0,value:void 0}}};return p[Symbol.iterator]=function(){return p},p}l("Array.prototype.keys",function(i){return i||function(){return b(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var p=this.length||0;for(0>u&&(u=Math.max(0,p+u)),(c==null||c>p)&&(c=p),c=Number(c),0>c&&(c=Math.max(0,p+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function pe(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",pe),l("Uint8Array.prototype.fill",pe),l("Uint8ClampedArray.prototype.fill",pe),l("Int16Array.prototype.fill",pe),l("Uint16Array.prototype.fill",pe),l("Int32Array.prototype.fill",pe),l("Uint32Array.prototype.fill",pe),l("Float32Array.prototype.fill",pe),l("Float64Array.prototype.fill",pe),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var p=c.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var y=c[u];if(y===s||Object.is(y,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var ue=this||self;function xe(i,s){i=i.split(".");var u=ue;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function Ce(i){var s;e:{if((s=ue.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var _e=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),p=typeof i=="string"?i.split(""):i,y=0;y<u;y++)y in p&&(c[y]=s.call(void 0,p[y],y,i));return c},Y={},oe=null;function ne(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),p=0;return we(i,function(y){c[p++]=y}),p!==u?c.subarray(0,p):c}function we(i,s){function u(T){for(;c<i.length;){var W=i.charAt(c++),Z=oe[W];if(Z!=null)return Z;if(!/^[\s\xa0]*$/.test(W))throw Error("Unknown base64 encoding at char: "+W)}return T}Se();for(var c=0;;){var p=u(-1),y=u(0),v=u(64),E=u(64);if(E===64&&p===-1)break;s(p<<2|y>>4),v!=64&&(s(y<<4&240|v>>2),E!=64&&s(v<<6&192|E))}}function Se(){if(!oe){oe={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));Y[u]=c;for(var p=0;p<c.length;p++){var y=c[p];oe[y]===void 0&&(oe[y]=p)}}}}var Le=typeof Uint8Array<"u",Fe=!(Ce("Trident")||Ce("MSIE"))&&typeof ue.btoa=="function";function Re(i){if(!Fe){var s;s===void 0&&(s=0),Se(),s=Y[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",p=0,y=0;p<i.length-2;p+=3){var v=i[p],E=i[p+1],T=i[p+2],W=s[v>>2];v=s[(v&3)<<4|E>>4],E=s[(E&15)<<2|T>>6],T=s[T&63],u[y++]=W+v+E+T}switch(W=0,T=c,i.length-p){case 2:W=i[p+1],T=s[(W&15)<<2]||c;case 1:i=i[p],u[y]=s[i>>2]+s[(i&3)<<4|W>>4]+T+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var Be=RegExp("[-_.]","g");function H(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function q(i){if(!Fe)return ne(i);Be.test(i)&&(i=i.replace(Be,H)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var fe;function ce(){return fe||(fe=new Uint8Array(0))}var F={},J=typeof Uint8Array.prototype.slice=="function",Q=0,le=0;function L(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=f(_(u,i)),s=u.next().value,i=u.next().value,u=s),Q=u>>>0,le=i>>>0}var m=typeof BigInt=="function";function _(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function S(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return I||(I=new S(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)L(Number(i));else if(m)i=BigInt(i),Q=Number(i&BigInt(4294967295))>>>0,le=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");le=Q=0;for(var u=i.length,c=s,p=(u-s)%6+s;p<=u;c=p,p+=6)c=Number(i.slice(c,p)),le*=1e6,Q=1e6*Q+c,4294967296<=Q&&(le+=Q/4294967296|0,Q%=4294967296);s&&(s=f(_(Q,le)),i=s.next().value,s=s.next().value,Q=i,le=s)}return new S(Q,le)}var I;function z(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function $(){return Error("Failed to read varint, encoding is invalid.")}function ee(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function re(){throw Error("Invalid UTF8")}function me(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var ve=void 0,je,ze=typeof TextDecoder<"u",Oe,He=typeof TextEncoder<"u",We;function Pe(i){if(i!==F)throw Error("illegal external caller")}function ke(i,s){if(Pe(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function Me(){return We||(We=new ke(null,F))}function Te(i){Pe(F);var s=i.V;return s=s==null||Le&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?q(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:q(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===ke)return{buffer:Te(i)||ce(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ke(this,i,s)}function Ke(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw ee(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],p=c&127;if(c&128&&(c=s[u++],p|=(c&127)<<7,c&128&&(c=s[u++],p|=(c&127)<<14,c&128&&(c=s[u++],p|=(c&127)<<21,c&128&&(c=s[u++],p|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw $();return at(i,u),p}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw ee(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Ke(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw z(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw $()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw z(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Xi(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,Te(s[u])||ce())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Zr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function El(i){return fn(i,1),i}function xh(i,s){hn(s,(i|0)&-51)}function bi(i,s){hn(s,(i|18)&-41)}var jl={};function Ji(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var qr,ru=[];hn(ru,23),qr=Object.freeze(ru);function Cl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Nl(i){var s=i.length;(s=s?i[s-1]:void 0)&&Ji(s)?s.g=1:(s={},i.push((s.g=1,s)))}function iu(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){Cl(i),ei(i,s,u,c)}function ei(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?iu(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Pl(i,s,u,c){var p=en(i,s);Array.isArray(p)||(p=qr);var y=qe(p);if(y&1||El(p),c)y&2||fn(p,2),u&1||Object.freeze(p);else{c=!(u&2);var v=y&2;u&1||!v?c&&y&16&&!v&&Zr(p,16):(p=El(Array.prototype.slice.call(p)),ei(i,s,p))}return p}function Ml(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&ei(i,s,c),c}function ou(i,s,u,c,p){i.h||(i.h={});var y=i.h[u],v=Pl(i,u,3,p);if(!y){var E=v;y=[];var T=!!(qe(i.o)&16);v=!!(qe(E)&2);var W=E;!p&&v&&(E=Array.prototype.slice.call(E));for(var Z=v,ye=0;ye<E.length;ye++){var he=E[ye],te=s,ge=!1;if(ge=ge===void 0?!1:ge,he=Array.isArray(he)?new te(he):ge?new te:void 0,he!==void 0){te=he.o;var Ee=ge=qe(te);v&&(Ee|=2),T&&(Ee|=16),Ee!=ge&&hn(te,Ee),te=Ee,Z=Z||!!(2&te),y.push(he)}}return i.h[u]=y,T=qe(E),s=T|33,s=Z?s&-9:s|8,T!=s&&(Z=E,Object.isFrozen(Z)&&(Z=Array.prototype.slice.call(Z)),hn(Z,s),E=Z),W!==E&&ei(i,u,E),(p||c&&v)&&fn(y,2),c&&Object.freeze(y),y}return p||(p=Object.isFrozen(y),c&&!p?Object.freeze(y):!c&&p&&(y=Array.prototype.slice.call(y),i.h[u]=y)),y}function Zi(i,s,u){var c=!!(qe(i.o)&2);if(s=ou(i,s,u,c,c),i=Pl(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var p=du(u,!1);p.j=u}else p=u;u!==p&&(s[c]=p,i[c]=p.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function lu(i,s,u,c,p){Cl(i);var y=ou(i,u,s,!1,!1);return u=c??new u,i=Pl(i,s,2,!1),p!=null?(y.splice(p,0,u),i.splice(p,0,u.o)):(y.push(u),i.push(u.o)),u.C()&&Zr(i,8),u}function qi(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,qi(Ml(i,s),u)}var eo;function Sh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Nl(i),i}else{if(Le&&i!=null&&i instanceof Uint8Array)return Re(i);if(i instanceof ke){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=Re(s)}}}return i}function su(i,s,u,c){if(i!=null){if(Array.isArray(i))i=_l(i,s,u,c!==void 0);else if(Ji(i)){var p={},y;for(y in i)p[y]=su(i[y],s,u,c);i=p}else i=s(i,c);return i}}function _l(i,s,u,c){var p=qe(i);c=c?!!(p&16):void 0,i=Array.prototype.slice.call(i);for(var y=0;y<i.length;y++)i[y]=su(i[y],s,u,c);return u(p,i),i}function kh(i){return i.ja===jl?i.toJSON():Sh(i)}function Eh(i,s){i&128&&Nl(s)}function au(i,s,u){if(u=u===void 0?bi:u,i!=null){if(Le&&i instanceof Uint8Array)return i.length?new ke(new Uint8Array(i),F):Me();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=_l(i,au,c&4?bi:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===jl?cu(i):i}}function uu(i,s,u,c,p,y,v){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(y=_e(i,cu),bi(c,y),Object.freeze(y),c=y),Cl(s),v=c==null?qr:El([]),c!=null){for(y=!!c.length,i=0;i<c.length;i++){var E=c[i];y=y&&!(qe(E.o)&2),v[i]=E.o}y=(y?8:0)|1,i=qe(v),(i&y)!==y&&(Object.isFrozen(v)&&(v=Array.prototype.slice.call(v)),hn(v,i|y)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);ei(s,u,v,p)}else pn(s,u,au(c,y,v),p)}function cu(i){return qe(i.o)&2||(i=du(i,!0),fn(i.o,2)),i}function du(i,s){var u=i.o,c=[];fn(c,16);var p=i.constructor.h;if(p&&c.push(p),p=i.B,p){c.length=u.length,c.fill(void 0,c.length,u.length);var y={};c[c.length-1]=y}qe(u)&128&&Nl(c),s=s||i.C()?bi:xh,y=i.constructor,eo=c,c=new y(c),eo=void 0,i.R&&(c.R=i.R.slice()),y=!!(qe(u)&16);for(var v=p?u.length-1:u.length,E=0;E<v;E++)uu(i,c,E-i.G,u[E],!1,y,s);if(p)for(var T in p)uu(i,c,+T,p[T],!0,y,s);return c}function Pt(i,s,u){i==null&&(i=eo),eo=void 0;var c=this.constructor.i||0,p=0<c,y=this.constructor.h,v=!1;if(i==null){i=y?[y]:[];var E=48,T=!0;p&&(c=0,E|=128),hn(i,E)}else{if(!Array.isArray(i)||y&&y!==i[0])throw Error();var W=E=fn(i,0);if((T=(16&W)!==0)&&((v=(32&W)!==0)||(W|=32)),p){if(128&W)c=0;else if(0<i.length){var Z=i[i.length-1];if(Ji(Z)&&"g"in Z){c=0,W|=128,delete Z.g;var ye=!0,he;for(he in Z){ye=!1;break}ye&&i.pop()}}}else if(128&W)throw Error();E!==W&&hn(i,W)}this.G=(y?0:-1)-c,this.h=void 0,this.o=i;e:{if(y=this.o.length,c=y-1,y&&(y=this.o[c],Ji(y))){this.B=y,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!p&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=T&&!v&&!0,p=this.i;var te;for(T=0;T<u.length;T++)v=u[T],v<p?(v+=this.G,(c=i[v])?fu(c,s):i[v]=qr):(te||(te=iu(this)),(c=te[v])?fu(c,s):te[v]=qr)}}Pt.prototype.toJSON=function(){return _l(this.o,kh,Eh)},Pt.prototype.C=function(){return!!(qe(this.o)&2)};function fu(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}Pt.prototype.ja=jl,Pt.prototype.toString=function(){return this.o.toString()};function hu(i,s,u){if(u){var c={},p;for(p in u){var y=u[p],v=y.qa;v||(c.J=y.wa||y.oa.W,y.ia?(c.aa=gu(y.ia),v=function(E){return function(T,W,Z){return E.J(T,W,Z,E.aa)}}(c)):y.ka?(c.Z=wu(y.da.P,y.ka),v=function(E){return function(T,W,Z){return E.J(T,W,Z,E.Z)}}(c)):v=c.J,y.qa=v),v(s,i,y.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Xi(s,i)}var to=Symbol();function pu(i,s,u){return i[to]||(i[to]=function(c,p){return s(c,p,u)})}function mu(i){var s=i[to];if(!s){var u=Tl(i);s=function(c,p){return xu(c,p,u)},i[to]=s}return s}function jh(i){var s=i.ia;if(s)return mu(s);if(s=i.va)return pu(i.da.P,s,i.ka)}function Ch(i){var s=jh(i),u=i.da,c=i.oa.U;return s?function(p,y){return c(p,y,u,s)}:function(p,y){return c(p,y,u)}}function vu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ni in u||ti in u||0<u.length&&typeof u[0]=="function")?u:void 0}function yu(i,s,u,c,p,y){s.P=i[0];var v=1;if(i.length>v&&typeof i[v]!="number"){var E=i[v++];u(s,E)}for(;v<i.length;){u=i[v++];for(var T=v+1;T<i.length&&typeof i[T]!="number";)T++;switch(E=i[v++],T-=v,T){case 0:c(s,u,E);break;case 1:(T=vu(i,v))?(v++,p(s,u,E,T)):c(s,u,E,i[v++]);break;case 2:T=v++,T=vu(i,T),p(s,u,E,T,i[v++]);break;case 3:y(s,u,E,i[v++],i[v++],i[v++]);break;case 4:y(s,u,E,i[v++],i[v++],i[v++],i[v++]);break;default:throw Error("unexpected number of binary field arguments: "+T)}}return s}var no=Symbol();function gu(i){var s=i[no];if(!s){var u=Il(i);s=function(c,p){return Su(c,p,u)},i[no]=s}return s}function wu(i,s){var u=i[no];return u||(u=function(c,p){return hu(c,p,s)},i[no]=u),u}var ti=Symbol();function Nh(i,s){i.push(s)}function Ph(i,s,u){i.push(s,u.W)}function Mh(i,s,u,c){var p=gu(c),y=Il(c).P,v=u.W;i.push(s,function(E,T,W){return v(E,T,W,y,p)})}function _h(i,s,u,c,p,y){var v=wu(c,y),E=u.W;i.push(s,function(T,W,Z){return E(T,W,Z,c,v)})}function Il(i){var s=i[ti];return s||(s=yu(i,i[ti]=[],Nh,Ph,Mh,_h),ni in i&&ti in i&&(i.length=0),s)}var ni=Symbol();function Ih(i,s){i[0]=s}function Th(i,s,u,c){var p=u.U;i[s]=c?function(y,v,E){return p(y,v,E,c)}:p}function Ah(i,s,u,c,p){var y=u.U,v=mu(c),E=Tl(c).P;i[s]=function(T,W,Z){return y(T,W,Z,E,v,p)}}function Rh(i,s,u,c,p,y,v){var E=u.U,T=pu(c,p,y);i[s]=function(W,Z,ye){return E(W,Z,ye,c,T,v)}}function Tl(i){var s=i[ni];return s||(s=yu(i,i[ni]={},Ih,Th,Ah,Rh),ni in i&&ti in i&&(i.length=0),s)}function xu(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,p=u[c];if(!p){var y=u[0];y&&(y=y[c])&&(p=u[c]=Ch(y))}if(!p||!p(s,i,c)){p=s,c=i,y=p.j,Ln(p);var v=p;if(!v.ca){if(p=v.h.h-y,v.h.h=y,v=v.h,p==0)p=Me();else{if(y=St(v,p),v.S&&v.m)p=v.i.subarray(y,y+p);else{v=v.i;var E=y;p=y+p,p=E===p?ce():J?v.slice(E,p):new Uint8Array(v.subarray(E,p))}p=p.length==0?Me():new ke(p,F)}(y=c.R)?y.push(p):c.R=[p]}}}return i}function Su(i,s,u){for(var c=u.length,p=c%2==1,y=p?1:0;y<c;y+=2)(0,u[y+1])(s,i,u[y]);hu(i,s,p?u[0]:void 0)}function ri(i,s){return{U:i,W:s}}var tn=ri(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,p=i.h,y=c[p],v=c[p+1],E=c[p+2];return c=c[p+3],at(i,i.h+4),v=(y<<0|v<<8|E<<16|c<<24)>>>0,i=2*(v>>31)+1,y=v>>>23&255,v&=8388607,pn(s,u,y==255?v?NaN:1/0*i:y==0?i*Math.pow(2,-149)*v:i*Math.pow(2,y-150)*(v+Math.pow(2,23))),!0},function(i,s,u){if(s=Ml(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?Q=le=0:(le=0,Q=2147483648):isNaN(c)?(le=0,Q=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(le=0,Q=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),le=0,Q=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,le=0,Q=(u|s+127<<23|c&8388607)>>>0)),u=Q,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),zh=ri(function(i,s,u){if(i.i!==0)return!1;var c=i.h,p=0,y=i=0,v=c.i,E=c.h;do{var T=v[E++];p|=(T&127)<<y,y+=7}while(32>y&&T&128);for(32<y&&(i|=(T&127)>>4),y=3;32>y&&T&128;y+=7)T=v[E++],i|=(T&127)<<y;if(at(c,E),128>T)c=p>>>0,T=i>>>0,(i=T&2147483648)&&(c=~c+1>>>0,T=~T>>>0,c==0&&(T=T+1>>>0)),c=4294967296*T+(c>>>0);else throw $();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,L(s),dn(i,Q,le)):(u=x(s),dn(i.h,u.i,u.h))))}),Lh=ri(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),ku=ri(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var p=St(i,c);if(i=i.i,ze){var y=i,v;(v=je)||(v=je=new TextDecoder("utf-8",{fatal:!0})),i=p+c,y=p===0&&i===y.length?y:y.subarray(p,i);try{var E=v.decode(y)}catch(ye){if(ve===void 0){try{v.decode(new Uint8Array([128]))}catch{}try{v.decode(new Uint8Array([97])),ve=!0}catch{ve=!1}}throw!ve&&(je=void 0),ye}}else{E=p,c=E+c,p=[];for(var T=null,W,Z;E<c;)W=i[E++],128>W?p.push(W):224>W?E>=c?re():(Z=i[E++],194>W||(Z&192)!==128?(E--,re()):p.push((W&31)<<6|Z&63)):240>W?E>=c-1?re():(Z=i[E++],(Z&192)!==128||W===224&&160>Z||W===237&&160<=Z||((y=i[E++])&192)!==128?(E--,re()):p.push((W&15)<<12|(Z&63)<<6|y&63)):244>=W?E>=c-2?re():(Z=i[E++],(Z&192)!==128||(W<<28)+(Z-144)>>30||((y=i[E++])&192)!==128||((v=i[E++])&192)!==128?(E--,re()):(W=(W&7)<<18|(Z&63)<<12|(y&63)<<6|v&63,W-=65536,p.push((W>>10&1023)+55296,(W&1023)+56320))):re(),8192<=p.length&&(T=me(T,p),p.length=0);E=me(T,p)}return pn(s,u,E),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,He){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Oe||(Oe=new TextEncoder)).encode(s)}else{for(var p=0,y=new Uint8Array(3*s.length),v=0;v<s.length;v++){var E=s.charCodeAt(v);if(128>E)y[p++]=E;else{if(2048>E)y[p++]=E>>6|192;else{if(55296<=E&&57343>=E){if(56319>=E&&v<s.length){var T=s.charCodeAt(++v);if(56320<=T&&57343>=T){E=1024*(E-55296)+T-56320+65536,y[p++]=E>>18|240,y[p++]=E>>12&63|128,y[p++]=E>>6&63|128,y[p++]=E&63|128;continue}else v--}if(c)throw Error("Found an unpaired surrogate");E=65533}y[p++]=E>>12|224,y[p++]=E>>6&63|128}y[p++]=E&63|128}}s=p===y.length?y:y.subarray(0,p)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),Eu=ri(function(i,s,u,c,p){if(i.i!==2)return!1;s=lu(s,u,c),u=i.h.j,c=it(i.h)>>>0;var y=i.h.h+c,v=y-u;if(0>=v&&(i.h.j=y,p(s,i,void 0,void 0,void 0),v=y-i.h.h),v)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-v)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=y,i.h.j=u,!0},function(i,s,u,c,p){if(s=Zi(s,c,u),s!=null)for(c=0;c<s.length;c++){var y=i;Wt(y.h,8*u+2);var v=y.h.end();Zt(y,v),v.push(y.i),y=v,p(s[c],i),v=i;var E=y.pop();for(E=v.i+v.h.length()-E;127<E;)y.push(E&127|128),E>>>=7,v.i++;y.push(E),v.i++}});function Al(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Ke(c.h,s,u),s=c}else s=new ir(s,u);try{var p=Tl(i),y=xu(new p.P,s,p);break e}finally{p=s.h,p.i=null,p.m=!1,p.l=0,p.j=0,p.h=0,p.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}y=void 0}return y}}function Rl(i){return function(){var s=new wr;Su(this,s,Il(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,p=c.length,y=0,v=0;v<p;v++){var E=c[v];u.set(E,y),y+=E.length}return s.j=[u],u}}function xr(i){Pt.call(this,i)}de(xr,Pt);var ju=[xr,1,Lh,2,tn,3,ku,4,ku];xr.prototype.l=Rl(ju);function zl(i){Pt.call(this,i,-1,Oh)}de(zl,Pt),zl.prototype.addClassification=function(i,s){return lu(this,1,xr,i,s),this};var Oh=[1],Cu=Al([zl,1,Eu,ju]);function Sr(i){Pt.call(this,i)}de(Sr,Pt);var Nu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=Rl(Nu);function Pu(i){Pt.call(this,i,-1,Dh)}de(Pu,Pt);var Dh=[1],Mu=Al([Pu,1,Eu,Nu]);function ro(i){Pt.call(this,i)}de(ro,Pt);var _u=[ro,1,tn,2,tn,3,tn,4,tn,5,tn,6,zh],Fh=Al(_u);ro.prototype.l=Rl(_u);function Iu(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Tu(i){return Zi(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?qi(en(s,3),""):void 0,displayName:en(s,4)!=null?qi(en(s,4),""):void 0}})}function Au(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:Ml(i,4)!=null?vn(i,4):void 0}}function Ru(i){return i.map(function(s){return Zi(Mu(s),Sr,1).map(Au)})}function Ll(i,s){this.i=i,this.h=s,this.m=0}function zu(i,s,u){return Bh(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function Bh(i,s){var u=i.h;if(i.s===void 0){var c=Iu(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),p=Iu(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),y=u.createProgram();if(u.attachShader(y,c),u.attachShader(y,p),u.linkProgram(y),!u.getProgramParameter(y,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(y));c=i.s=y,u.useProgram(c),p=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:p},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(p,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function $h(i){this.h=i}var Uh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Hh(i,s){return s+i}function Lu(i,s){window[i]=s}function Wh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Vh(){return ie(function(i){switch(i.h){case 1:return i.s=2,R(i,WebAssembly.instantiate(Uh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Ol(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Hh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=f(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Ol.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Gh(i){var s,u,c,p,y,v,E,T,W,Z,ye;return ie(function(he){switch(he.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,R(he,Vh(),2)):he.return();case 2:if(u=he.i,typeof window=="object")return Lu("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),Lu("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),v=s.filter(function(te){return te.data!==void 0}),E=s.filter(function(te){return te.data===void 0}),T=Promise.all(v.map(function(te){var ge=io(i,te.url);if(te.path!==void 0){var Ee=te.path;ge=ge.then(function(Ve){return i.overrideFile(Ee,Ve),Promise.resolve(Ve)})}return ge})),W=Promise.all(E.map(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u?Wh(i.locateFile(te.url,i.ha)):Promise.resolve()})).then(function(){var te,ge,Ee;return ie(function(Ve){if(Ve.h==1)return te=window.createMediapipeSolutionsWasm,ge=window.createMediapipeSolutionsPackedAssets,Ee=i,R(Ve,te(ge),2);Ee.i=Ve.i,Ve.h=0})}),Z=function(){return ie(function(te){return i.h.graph&&i.h.graph.url?te=R(te,io(i,i.h.graph.url),0):(te.h=0,te=void 0),te})}(),R(he,Promise.all([W,T,Z]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u}).map(function(te){return i.locateFile(te.url,i.ha)}),importScripts.apply(null,h(c)),p=i,R(he,createMediapipeSolutionsWasm(Module),6);case 6:p.i=he.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,y=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(y),he.h=4;break;case 7:if(i.m=document.createElement("canvas"),ye=i.m.getContext("webgl2",{}),!ye&&(ye=i.m.getContext("webgl",{}),!ye))return alert("Failed to create WebGL canvas context when passing video frame."),he.return();i.K=ye,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,he.h=0}})}function Qh(i){var s,u,c,p,y,v,E,T;return ie(function(W){if(W.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return W.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){W.h=2;return}return i.fa=i.h.graph.url,R(W,io(i,i.h.graph.url),3)}for(W.h!=2&&(s=W.i,i.j.loadGraph(s)),u=f(Object.keys(i.D)),c=u.next();!c.done;c=u.next())p=c.value,i.j.overrideFile(p,i.D[p]);if(i.D={},i.h.listeners)for(y=f(i.h.listeners),v=y.next();!v.done;v=y.next())E=v.value,bh(i,E);T=i.l,i.l={},i.setOptions(T),W.h=0})}e.reset=function(){var i=this;return ie(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],p=[],y={},v=f(Object.keys(i)),E=v.next();!E.done;y={X:y.X,Y:y.Y},E=v.next())if(E=E.value,!(E in this.l&&this.l[E]===i[E])){this.l[E]=i[E];var T=s[E];T!==void 0&&(T.onChange&&(y.X=T.onChange,y.Y=i[E],c.push(function(W){return function(){var Z;return ie(function(ye){if(ye.h==1)return R(ye,W.X(W.Y),2);Z=ye.i,Z===!0&&(u.u=!0),ye.h=0})}}(y))),T.graphOptionXref&&(E=Object.assign({},{calculatorName:"",calculatorIndex:0},T.graphOptionXref,{valueNumber:T.type===1?i[E]:0,valueBoolean:T.type===0?i[E]:!1,valueString:T.type===2?i[E]:""}),p.push(E)))}(c.length!==0||p.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(p),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Yh(i){var s,u,c,p,y,v,E;return ie(function(T){switch(T.h){case 1:if(!i.u)return T.return();if(!i.F){T.h=2;break}s=f(i.F),u=s.next();case 3:if(u.done){T.h=5;break}return c=u.value,R(T,c(),4);case 4:u=s.next(),T.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(p=new i.i.GraphOptionChangeRequestList,y=f(i.H),v=y.next();!v.done;v=y.next())E=v.value,p.push_back(E);i.j.changeOptions(p),p.delete(),i.H=void 0}i.u=!1,T.h=0}})}e.initialize=function(){var i=this;return ie(function(s){return s.h==1?R(s,Gh(i),2):s.h!=3?R(s,Qh(i),3):R(s,Yh(i),0)})};function io(i,s){var u,c;return ie(function(p){return s in i.L?p.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(y){return y.arrayBuffer()}),i.L[s]=c,p.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,p,y,v,E,T,W,Z,ye;return ie(function(he){switch(he.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),R(he,u.I,2)):he.return();case 2:return R(he,u.initialize(),3);case 3:for(p=new u.i.PacketDataList,y=f(Object.keys(i)),v=y.next();!v.done;v=y.next())if(E=v.value,T=u.h.inputs[E]){e:{var te=i[E];switch(T.type){case"video":var ge=u.s[T.stream];if(ge||(ge=new Ll(u.i,u.K),u.s[T.stream]=ge),ge.m===0&&(ge.m=ge.i.createTexture()),typeof HTMLVideoElement<"u"&&te instanceof HTMLVideoElement)var Ee=te.videoWidth,Ve=te.videoHeight;else typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(Ee=te.naturalWidth,Ve=te.naturalHeight):(Ee=te.width,Ve=te.height);Ve={glName:ge.m,width:Ee,height:Ve},Ee=ge.h,Ee.canvas.width=Ve.width,Ee.canvas.height=Ve.height,Ee.activeTexture(Ee.TEXTURE0),ge.i.bindTexture2d(ge.m),Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,Ee.RGBA,Ee.UNSIGNED_BYTE,te),ge.i.bindTexture2d(0),ge=Ve;break e;case"detections":for(ge=u.s[T.stream],ge||(ge=new $h(u.i),u.s[T.stream]=ge),ge.data||(ge.data=new ge.h.DetectionListData),ge.data.reset(te.length),Ve=0;Ve<te.length;++Ve){Ee=te[Ve];var $e=ge.data,ft=$e.setBoundingBox,Vt=Ve,Mt=Ee.la,Ae=new ro;if(mn(Ae,1,Mt.ra),mn(Ae,2,Mt.sa),mn(Ae,3,Mt.height),mn(Ae,4,Mt.width),mn(Ae,5,Mt.rotation),pn(Ae,6,Mt.pa),Mt=Ae.l(),ft.call($e,Vt,Mt),Ee.ea)for($e=0;$e<Ee.ea.length;++$e){Ae=Ee.ea[$e],ft=ge.data,Vt=ft.addNormalizedLandmark,Mt=Ve,Ae=Object.assign({},Ae,{visibility:Ae.visibility?Ae.visibility:0});var ht=new Sr;mn(ht,1,Ae.x),mn(ht,2,Ae.y),mn(ht,3,Ae.z),Ae.visibility&&mn(ht,4,Ae.visibility),Ae=ht.l(),Vt.call(ft,Mt,Ae)}if(Ee.ba)for($e=0;$e<Ee.ba.length;++$e)ft=ge.data,Vt=ft.addClassification,Mt=Ve,Ae=Ee.ba[$e],ht=new xr,mn(ht,2,Ae.score),Ae.index&&pn(ht,1,Ae.index),Ae.label&&pn(ht,3,Ae.label),Ae.displayName&&pn(ht,4,Ae.displayName),Ae=ht.l(),Vt.call(ft,Mt,Ae)}ge=ge.data;break e;default:ge={}}}switch(W=ge,Z=T.stream,T.type){case"video":p.pushTexture2d(Object.assign({},W,{stream:Z,timestamp:c}));break;case"detections":ye=W,ye.stream=Z,ye.timestamp=c,p.pushDetectionList(ye);break;default:throw Error("Unknown input config type: '"+T.type+"'")}}return u.j.send(p),R(he,u.I,4);case 4:p.delete(),he.h=0}})};function Kh(i,s,u){var c,p,y,v,E,T,W,Z,ye,he,te,ge,Ee,Ve;return ie(function($e){switch($e.h){case 1:if(!u)return $e.return(s);for(c={},p=0,y=f(Object.keys(u)),v=y.next();!v.done;v=y.next())E=v.value,T=u[E],typeof T!="string"&&T.type==="texture"&&s[T.stream]!==void 0&&++p;1<p&&(i.M=!1),W=f(Object.keys(u)),v=W.next();case 2:if(v.done){$e.h=4;break}if(Z=v.value,ye=u[Z],typeof ye=="string")return Ee=c,Ve=Z,R($e,Xh(i,Z,s[ye]),14);if(he=s[ye.stream],ye.type==="detection_list"){if(he){for(var ft=he.getRectList(),Vt=he.getLandmarksList(),Mt=he.getClassificationsList(),Ae=[],ht=0;ht<ft.size();++ht){var Dn=Fh(ft.get(ht)),Jh=vn(Dn,1),Zh=vn(Dn,2),qh=vn(Dn,3),ep=vn(Dn,4),tp=vn(Dn,5,0),oo=void 0;oo=oo===void 0?0:oo,Dn={la:{ra:Jh,sa:Zh,height:qh,width:ep,rotation:tp,pa:qi(en(Dn,6),oo)},ea:Zi(Mu(Vt.get(ht)),Sr,1).map(Au),ba:Tu(Cu(Mt.get(ht)))},Ae.push(Dn)}ft=Ae}else ft=[];c[Z]=ft,$e.h=7;break}if(ye.type==="proto_list"){if(he){for(ft=Array(he.size()),Vt=0;Vt<he.size();Vt++)ft[Vt]=he.get(Vt);he.delete()}else ft=[];c[Z]=ft,$e.h=7;break}if(he===void 0){$e.h=3;break}if(ye.type==="float_list"){c[Z]=he,$e.h=7;break}if(ye.type==="proto"){c[Z]=he,$e.h=7;break}if(ye.type!=="texture")throw Error("Unknown output config type: '"+ye.type+"'");return te=i.v[Z],te||(te=new Ll(i.i,i.K),i.v[Z]=te),R($e,zu(te,he,i.M),13);case 13:ge=$e.i,c[Z]=ge;case 7:ye.transform&&c[Z]&&(c[Z]=ye.transform(c[Z])),$e.h=3;break;case 14:Ee[Ve]=$e.i;case 3:v=W.next(),$e.h=2;break;case 4:return $e.return(c)}})}function Xh(i,s,u){var c;return ie(function(p){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?p.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new Ll(i.i,i.K),i.v[s]=c),p.return(zu(c,u,i.M))):p.return(void 0)})}function bh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),p=new i.i.StringList,y=f(s.wants),v=y.next();!v.done;v=y.next())p.push_back(v.value);y=i.i.PacketListener.implement({onResults:function(E){for(var T={},W=0;W<s.wants.length;++W)T[c[W]]=E.get(W);var Z=i.listeners[u];Z&&(i.I=Kh(i,T,s.outs).then(function(ye){ye=Z(ye);for(var he=0;he<s.wants.length;++he){var te=T[c[he]];typeof te=="object"&&te.hasOwnProperty&&te.hasOwnProperty("delete")&&te.delete()}ye&&(i.I=ye)}))}}),i.j.attachMultiListener(p,y),p.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},xe("Solution",Ol),xe("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Ou(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Du(i){var s=this;i=i||{},this.h=new Ol({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Ou(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Ru},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Ru},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Tu(Cu(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,p,y;return ie(function(v){return v.h==1?(c=Ou(u),p="third_party/mediapipe/modules/hand_landmark/"+c,R(v,io(s.h,c),2)):(y=v.i,s.h.overrideFile(p,y),v.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Du.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return ie(function(s){return R(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return ie(function(u){return R(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},xe("Hands",Du),xe("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),xe("VERSION","0.4.1675469240")}).call(Dl);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function Zc({hidden:e=!1}){const t=M.useRef(null),n=M.useRef(null),r=M.useRef(null),o=M.useRef(null),[l,a]=M.useState(!1),[f,h]=M.useState("None"),[g,N]=M.useState([]),[P,C]=M.useState(null),[D,O]=M.useState(null),[B,de]=M.useState(null),[k,w]=M.useState({a:null,b:null}),j=M.useRef(null),R=M.useRef(null),V=(L,m)=>{const _=localStorage.getItem(L);if(_===null)return m;const S=parseFloat(_);return Number.isFinite(S)?S:m},[K,X]=M.useState(()=>({roiSize:(()=>{const L=V(et.roiSize,44);return L>10?L:44})(),hueWeight:V(et.hueWeight,4),satWeight:V(et.satWeight,2),valWeight:V(et.valWeight,1),sensitivity:V(et.sensitivity,0)})),A=M.useRef(K),ae=M.useRef(null),U=M.useRef(!1),ie=M.useRef(0),b=M.useRef(null),[pe,ue]=M.useState([]),xe=M.useRef([]),[Ce,_e]=M.useState(()=>localStorage.getItem(et.selectedCamera)||""),Y=M.useCallback(async()=>{try{const m=(await navigator.mediaDevices.enumerateDevices()).filter(_=>_.kind==="videoinput");return ue(m),xe.current=m,m}catch{return[]}},[]),oe=M.useCallback(L=>{},[Ot]),ne=M.useCallback(async(L=null)=>{const m=t.current;if(!m)return;ae.current&&(ae.current.getTracks().forEach(x=>x.stop()),ae.current=null),F();const _=++ie.current;b.current=null;const S=L!==null?L:Ce;try{const x=S?{video:{deviceId:{exact:S}}}:{video:!0};if(S){const $=xe.current.find(ee=>ee.deviceId===S);console.log("[Detector]  Loading SELECTED camera:",{deviceId:S,label:($==null?void 0:$.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const I=await navigator.mediaDevices.getUserMedia(x);if(!U.current||_!==ie.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),I.getTracks().forEach($=>$.stop());return}ae.current=I;const z=I.getVideoTracks();if(Ot("getUserMedia success. Tracks:",z),z.length>0){const $=z[0];console.log("[Detector]  Camera loaded successfully:",{label:$.label,deviceId:$.getSettings().deviceId,resolution:`${$.getSettings().width}x${$.getSettings().height}`,frameRate:$.getSettings().frameRate})}if(m.srcObject=I,await new Promise($=>{if(m.readyState>=1&&m.videoWidth>0&&m.videoHeight>0)return $();const re=()=>{m.removeEventListener("loadedmetadata",re),$()};m.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{m.removeEventListener("loadedmetadata",re),$()},1500)}),!U.current||_!==ie.current){Ot("Stale request before play(). Stopping stream."),I.getTracks().forEach($=>$.stop());return}try{await m.play(),Ot("video.play() promise resolved. Video should be playing.")}catch($){if(console.error("[Detector] video.play() promise rejected:",$),Ot("video.play() promise rejected:",$.name,$.message),_!==ie.current){Ot("play() aborted due to newer request."),I.getTracks().forEach(ee=>ee.stop());return}}if(b.current!==_&&(b.current=_,Ot("Initializing MediaPipe for request id",_),Re()),U.current){const $=await Y();if(!S||!L){const ee=$.find(re=>re.deviceId);ee&&ee.deviceId&&ee.deviceId!==Ce&&(_e(ee.deviceId),localStorage.setItem(et.selectedCamera,ee.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,Y,oe,Ce]),we=(L,m,_)=>{const S=(L||0)*2,x=(m||0)/255,I=(_||0)/255,z=I*x,$=z*(1-Math.abs(S/60%2-1)),ee=I-z;let re=0,me=0,ve=0;S>=0&&S<60?(re=z,me=$,ve=0):S<120?(re=$,me=z,ve=0):S<180?(re=0,me=z,ve=$):S<240?(re=0,me=$,ve=z):S<300?(re=$,me=0,ve=z):(re=z,me=0,ve=$);const je=Math.round((re+ee)*255),ze=Math.round((me+ee)*255),Oe=Math.round((ve+ee)*255);return`rgb(${je}, ${ze}, ${Oe})`},Se=L=>L?we(L.h,L.s,L.v):"#ffffff",Le=L=>L==="Player A"&&D?Se(D):L==="Player B"&&B?Se(B):L==="Red"?"#ff0000":L==="Blue"?"#0000ff":"#ffffff";M.useEffect(()=>{U.current=!0;const L=()=>{try{const S=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");S&&O({h:S.h,s:S.s,v:S.v}),x&&de({h:x.h,s:x.s,v:x.v})}catch{}},m=S=>{!S||!S.key||(["calibrationA","calibrationB"].includes(S.key)&&L(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(S.key)&&X(x=>({roiSize:(()=>{const I=V(et.roiSize,(x==null?void 0:x.roiSize)??44);return I>10?I:(x==null?void 0:x.roiSize)??44})(),hueWeight:V(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:V(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:V(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:V(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const S=await Y();if(!U.current)return;const x=localStorage.getItem(et.selectedCamera);let I="";if(x&&S.some(z=>z.deviceId&&z.deviceId===x)){const z=S.find($=>$.deviceId===x);I=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(z==null?void 0:z.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const z=S.find($=>$.deviceId);z&&z.deviceId?(I=z.deviceId,localStorage.setItem(et.selectedCamera,z.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:z.deviceId,label:z.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",z.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}_e(I?z=>z===I?z:I:z=>z||""),L()})(),window.addEventListener("storage",m),()=>{U.current=!1,ie.current+=1,b.current=null,o.current&&(o.current.stop(),o.current=null),ae.current&&(ae.current.getTracks().forEach(x=>x.stop()),ae.current=null);const S=t.current;S&&(S.srcObject=null,oe(S)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",m)}},[]),M.useEffect(()=>{j.current=D},[D]),M.useEffect(()=>{R.current=B},[B]),M.useEffect(()=>{A.current=K},[K]),M.useEffect(()=>{ne(Ce||null)},[Ce,ne]),M.useEffect(()=>{const L=setInterval(()=>{h(m=>(Fe(m),m))},1e3);return()=>clearInterval(L)},[]);const Fe=L=>{const _={timestamp:new Date().toISOString(),status:L};N(x=>[...x,_]);const S=JSON.parse(localStorage.getItem("braceletDetections")||"[]");S.push(_),localStorage.setItem("braceletDetections",JSON.stringify(S))},Re=async()=>{try{const L=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((_,S)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return _();const I=document.createElement("script");I.id=x,I.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",I.async=!0,I.onload=()=>_(),I.onerror=z=>S(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(I)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),m=new L({locateFile:_=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${_}`});if(m.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),m.onResults(Be),r.current=m,t.current){const _=t.current;console.log("[Detector]  Starting manual frame capture from video element");let S;const x=async()=>{if(_.readyState>=2&&_.videoWidth>0)try{await m.send({image:_})}catch(I){console.error("[Detector] Error sending frame to MediaPipe:",I)}S=requestAnimationFrame(x)};x(),o.current={stop:()=>{S&&(cancelAnimationFrame(S),console.log("[Detector]  Stopped frame capture"))}}}}catch(L){console.error("MediaPipe initialization error:",L),C(`MediaPipe error: ${L.message}`)}},Be=L=>{var z;const m=n.current,_=t.current;if(!m||!_)return;const S=m.getContext("2d");m.width=_.videoWidth,m.height=_.videoHeight,S.drawImage(_,0,0,m.width,m.height);let x="None";if(L.multiHandLandmarks&&L.multiHandLandmarks.length>0){Ot("onResults: hands=",L.multiHandLandmarks.length);let $=null,ee=0;if(L.multiHandLandmarks.forEach(re=>{const me=re[0];me.y>ee&&(ee=me.y,$=re)}),L.multiHandLandmarks.forEach(re=>{H(S,re,m.width,m.height)}),$){const re=$[0],me=re.x*m.width,ve=re.y*m.height;S.fillStyle="lime",S.beginPath(),S.arc(me,ve,10,0,2*Math.PI),S.fill(),S.fillStyle="lime",S.font="16px Arial",S.fillText("SELECTED",me-40,ve-15);const ze=Math.max(10,Math.min(300,Math.floor(((z=A.current)==null?void 0:z.roiSize)||60)))/2,Oe=Math.max(0,me-ze),He=Math.max(0,ve-ze),We=Math.min(m.width,me+ze),Pe=Math.min(m.height,ve+ze);S.strokeStyle="lime",S.lineWidth=3,S.strokeRect(Oe,He,We-Oe,Pe-He);const ke=We-Oe,Me=Pe-He;if(ke>0&&Me>0)try{const Te=S.getImageData(Oe,He,ke,Me),rt=j.current,Jt=R.current,Ke=fe(Te,rt,Jt);x=Ke.status,w({a:Ke.percentA,b:Ke.percentB}),Ot("Detection result:",x,{roi:{x1:Oe,y1:He,w:ke,h:Me}})}catch(Te){console.warn("[Detector] Failed to get ROI image data:",Te.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:ke,height:Me}),x="None",w({a:null,b:null})}}let I="#ffffff";x==="Player A"&&j.current?I=Se(j.current):x==="Player B"&&R.current&&(I=Se(R.current)),S.fillStyle=I,S.font="bold 32px Arial",S.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=m,window.braceletDetectorVideo=_)},H=(L,m,_,S)=>{L.strokeStyle="white",L.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([I,z])=>{const $=m[I],ee=m[z];L.beginPath(),L.moveTo($.x*_,$.y*S),L.lineTo(ee.x*_,ee.y*S),L.stroke()}),m.forEach(I=>{L.fillStyle="red",L.beginPath(),L.arc(I.x*_,I.y*S,5,0,2*Math.PI),L.fill()})},q=L=>{const m=L.data;let _=0,S=0;for(let x=0;x<m.length;x+=4){const I=m[x],z=m[x+1],$=m[x+2],ee=ce(I,z,$);(ee[0]>=gn.red.lower1[0]&&ee[0]<=gn.red.upper1[0]||ee[0]>=gn.red.lower2[0]&&ee[0]<=gn.red.upper2[0])&&ee[1]>=gn.red.lower1[1]&&ee[2]>=gn.red.lower1[2]&&_++,ee[0]>=gn.blue.lower[0]&&ee[0]<=gn.blue.upper[0]&&ee[1]>=gn.blue.lower[1]&&ee[2]>=gn.blue.lower[2]&&S++}return{redCount:_,blueCount:S}},fe=(L,m,_)=>{var ze,Oe,He,We;const S=L.data;if(m&&!_)return{status:"Player A",percentA:null,percentB:null};if(_&&!m)return{status:"Player B",percentA:null,percentB:null};const x=((ze=A.current)==null?void 0:ze.hueWeight)??4,I=((Oe=A.current)==null?void 0:Oe.satWeight)??2,z=((He=A.current)==null?void 0:He.valWeight)??1,$=((We=A.current)==null?void 0:We.sensitivity)??0;if(m&&_){let Pe=0,ke=0,Me=0;for(let Ke=0;Ke<S.length;Ke+=4){const at=S[Ke],it=S[Ke+1],St=S[Ke+2],[zt,Lt,dn]=ce(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-m.h),180-Math.abs(zt-m.h)),On=Math.min(Math.abs(zt-_.h),180-Math.abs(zt-_.h)),wr=Math.abs(Lt-m.s),Zt=Math.abs(Lt-_.s),Xi=Math.abs(dn-m.v),qt=Math.abs(dn-_.v),fn=Ln*x+wr*I+Xi*z,Zr=On*x+Zt*I+qt*z;Math.min(fn,Zr)>180||(fn<=Zr?Pe+=zn:ke+=zn,Me+=zn)}if(Me===0)return{status:"None",percentA:0,percentB:0};const Te=Pe/Math.max(1e-6,Me),rt=ke/Math.max(1e-6,Me),Jt=.12*(1+.8*Math.max(0,Math.min(1,$)));return Te>=Jt&&Te>=rt?{status:"Player A",percentA:Te,percentB:rt}:rt>=Jt&&rt>Te?{status:"Player B",percentA:Te,percentB:rt}:{status:"None",percentA:Te,percentB:rt}}const{redCount:ee,blueCount:re}=q(L),me=ee+re;if(me===0)return{status:"None",percentA:0,percentB:0};const ve=ee/me,je=re/me;return ve>=.15&&ve>=je?{status:"Player A",percentA:ve,percentB:je}:je>=.15&&je>ve?{status:"Player B",percentA:ve,percentB:je}:{status:"None",percentA:ve,percentB:je}},ce=(L,m,_)=>{L/=255,m/=255,_/=255;const S=Math.max(L,m,_),x=Math.min(L,m,_),I=S-x;let z=0;I!==0&&(S===L?z=60*((m-_)/I%6):S===m?z=60*((_-L)/I+2):z=60*((L-m)/I+4)),z<0&&(z+=360);const $=S===0?0:I/S*255,ee=S*255;return[z/2,$,ee]},F=L=>{},J=L=>{_e(L),L?localStorage.setItem(et.selectedCamera,L):localStorage.removeItem(et.selectedCamera)},Q=()=>{const L=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),m=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),_=URL.createObjectURL(m),S=document.createElement("a");S.href=_,S.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,S.click();const x=L.map(ee=>`${ee.timestamp}: ${ee.status}`).join(`
`),I=new Blob([x],{type:"text/plain"}),z=URL.createObjectURL(I),$=document.createElement("a");$.href=z,$.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,$.click()},le=()=>{localStorage.removeItem("braceletDetections"),N([])};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:Q,title:"Download Logs",children:""}),d.jsx("button",{onClick:le,title:"Clear Logs",children:""}),d.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),d.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{children:"Camera:"}),d.jsxs("select",{value:Ce,onChange:L=>J(L.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[d.jsx("option",{value:"",children:"System Default"}),pe.map((L,m)=>{var $;const _=!!L.deviceId,S=_?L.deviceId:"",x=_?L.deviceId:`camera-${m}`,I=(($=L.label)==null?void 0:$.trim())||`Camera ${m+1}`,z=_?`  ${L.deviceId.slice(0,8)}`:" (needs permission)";return d.jsxs("option",{value:S,disabled:!_,children:[I,z]},x)})]})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),d.jsx("canvas",{ref:n,className:"output_canvas"}),d.jsxs("div",{className:"detector-info",children:[d.jsxs("div",{className:"status-display",children:["Status: ",d.jsx("span",{style:{color:Le(f),fontWeight:700},children:f})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:D?Se(D):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:k.a==null?"":`${Math.round(Math.max(0,Math.min(1,k.a))*100)}%`})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:B?Se(B):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:k.b==null?"":`${Math.round(Math.max(0,Math.min(1,k.b))*100)}%`})]})]}),d.jsxs("div",{className:"log-count",children:["Logs: ",g?g.length:0]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",D?`h${Math.round(D.h)} s${Math.round(D.s)} v${Math.round(D.v)}`:""]}),d.jsxs("div",{children:["B: ",B?`h${Math.round(B.h)} s${Math.round(B.s)} v${Math.round(B.v)}`:""]})]})]})]})]})})}const fs=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},Hv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,f=a*(1-Math.abs(r/60%2-1)),h=l-a;let g=0,N=0,P=0;r>=0&&r<60?(g=a,N=f,P=0):r<120?(g=f,N=a,P=0):r<180?(g=0,N=a,P=f):r<240?(g=0,N=f,P=a):r<300?(g=f,N=0,P=a):(g=a,N=0,P=f);const C=Math.round((g+h)*255),D=Math.round((N+h)*255),O=Math.round((P+h)*255);return`rgb(${C}, ${D}, ${O})`},qc=e=>e?Hv(e.h,e.s,e.v):"#444";function Wv(){const e=M.useRef(null),t=M.useRef(null),n=M.useRef(null),r=M.useRef(!1),o=M.useRef(0),[l,a]=M.useState(!1),[f,h]=M.useState(""),[g,N]=M.useState(null),[P,C]=M.useState(null),D=(H,q)=>{const fe=localStorage.getItem(H);if(fe===null)return q;const ce=parseFloat(fe);return Number.isFinite(ce)?ce:q},[O,B]=M.useState(()=>{const H=D(wn.roiSize,44);return H>10?H:44}),[de,k]=M.useState(()=>D(wn.hueWeight,4)),[w,j]=M.useState(()=>D(wn.satWeight,2)),[R,V]=M.useState(()=>D(wn.valWeight,1)),[K,X]=M.useState(()=>D(wn.sensitivity,0)),[A,ae]=M.useState(!1),[U,ie]=M.useState("idle"),[b,pe]=M.useState(5),ue=M.useRef({A:[],B:[]});M.useEffect(()=>{r.current=!0;try{const H=JSON.parse(localStorage.getItem("calibrationA")||"null"),q=JSON.parse(localStorage.getItem("calibrationB")||"null");H&&N(H),q&&C(q)}catch{}return(async()=>await xe())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(q=>q.stop()),n.current=null);const H=e.current;H&&(H.srcObject=null)}},[]),M.useEffect(()=>{localStorage.setItem(wn.roiSize,String(O))},[O]),M.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(de))},[de]),M.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),M.useEffect(()=>{localStorage.setItem(wn.valWeight,String(R))},[R]),M.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(K))},[K]);const xe=M.useCallback(async()=>{const H=e.current;if(!H)return;n.current&&(n.current.getTracks().forEach(fe=>fe.stop()),n.current=null);const q=++o.current;a(!1),h("Requesting camera...");try{const fe=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||q!==o.current){fe.getTracks().forEach(ce=>ce.stop());return}if(n.current=fe,H.srcObject=fe,await new Promise(ce=>{if(H.readyState>=1&&H.videoWidth>0)return ce();const J=()=>{H.removeEventListener("loadedmetadata",J),ce()};H.addEventListener("loadedmetadata",J,{once:!0}),setTimeout(()=>{H.removeEventListener("loadedmetadata",J),ce()},1500)}),!r.current||q!==o.current){fe.getTracks().forEach(ce=>ce.stop());return}try{await H.play(),fs("video.play resolved")}catch(ce){fs("video.play rejected",ce)}a(!0),h("")}catch(fe){h(`Camera error: ${(fe==null?void 0:fe.message)||fe}`),fs("getUserMedia error",fe)}},[]),Ce=(H,q,fe)=>{H/=255,q/=255,fe/=255;const ce=Math.max(H,q,fe),F=Math.min(H,q,fe),J=ce-F;let Q=0;J!==0&&(ce===H?Q=60*((q-fe)/J%6):ce===q?Q=60*((fe-H)/J+2):Q=60*((H-q)/J+4)),Q<0&&(Q+=360);const le=ce===0?0:J/ce*255,L=ce*255;return[Q/2,le,L]},_e=()=>{const H=e.current,q=t.current;if(!H||!q||H.videoWidth===0)return null;const fe=H.videoWidth,ce=H.videoHeight;q.width=fe,q.height=ce;const F=q.getContext("2d");F.drawImage(H,0,0,fe,ce);const J=Math.max(10,Math.min(300,Math.floor(O))),Q=Math.floor(fe/2-J/2),le=Math.floor(ce/2-J/2),m=F.getImageData(Q,le,J,J).data;let _=0,S=0,x=0,I=0,z=0;for(let Oe=0;Oe<m.length;Oe+=4){const[He,We,Pe]=Ce(m[Oe],m[Oe+1],m[Oe+2]),ke=He*2*(Math.PI/180);_+=Math.cos(ke),S+=Math.sin(ke),x+=We,I+=Pe,z++}if(z===0)return null;const $=x/z,ee=I/z,re=_/z,me=S/z;let je=Math.atan2(me,re)*(180/Math.PI);return je<0&&(je+=360),{h:je/2,s:$,v:ee}},Y=H=>{const q=_e();if(!q){h("Could not sample video frame.");return}H==="A"?(localStorage.setItem("calibrationA",JSON.stringify(q)),N(q),h(`Saved Player A: h${q.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(q)),C(q),h(`Saved Player B: h${q.h.toFixed(0)}`))},oe=H=>{H==="A"?(localStorage.removeItem("calibrationA"),N(null)):(localStorage.removeItem("calibrationB"),C(null)),h("Cleared")},ne=()=>{ae(!0),ie("playerA"),pe(5),ue.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};M.useEffect(()=>{if(!(!A||U==="idle"||U==="optimizing"||U==="complete"))if(b>0){const H=setTimeout(()=>{pe(b-1)},1e3);return()=>clearTimeout(H)}else U==="playerA"?(ie("switching"),pe(3),h("Switch to Player B... Get ready!")):U==="switching"?(ie("playerB"),pe(5),h("Hold Player B bracelet in center square...")):U==="playerB"&&(ie("optimizing"),we())},[A,U,b]),M.useEffect(()=>{if(!A||U==="idle"||U==="switching"||U==="optimizing"||U==="complete")return;const H=setInterval(()=>{const q=_e();q&&(U==="playerA"?ue.current.A.push(q):U==="playerB"&&ue.current.B.push(q))},200);return()=>clearInterval(H)},[A,U]);const we=()=>{h("Optimizing parameters...");const H=ue.current.A,q=ue.current.B;if(H.length===0||q.length===0){h("Error: Not enough samples collected!"),ae(!1),ie("idle");return}const fe=Se(H),ce=Se(q),F=Math.min(Math.abs(fe.h-ce.h),180-Math.abs(fe.h-ce.h)),J=Math.abs(fe.s-ce.s),Q=Math.abs(fe.v-ce.v),le=F/90,L=J/255,m=Q/255,_=Le(H),S=Le(q),x={h:(_.h+S.h)/2,s:(_.s+S.s)/2,v:(_.v+S.v)/2},I=le+L+m,z=I>0?le/I*(1/(1+x.h/20))*6:2,$=I>0?L/I*(1/(1+x.s/50))*4:1,ee=I>0?m/I*(1/(1+x.v/50))*3:.5;k(Math.max(.5,Math.min(6,z))),j(Math.max(.1,Math.min(4,$))),V(Math.max(.1,Math.min(3,ee)));const re=Fe(H,q,fe,ce),me=Math.max(0,Math.min(.8,re*.5));X(me),localStorage.setItem("calibrationA",JSON.stringify(fe)),localStorage.setItem("calibrationB",JSON.stringify(ce)),N(fe),C(ce),ie("complete"),h(` Auto-calibration complete! Collected ${H.length+q.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{ae(!1),ie("idle")},3e3)},Se=H=>{const q=H.map(S=>S.h),fe=H.map(S=>S.s).sort((S,x)=>S-x),ce=H.map(S=>S.v).sort((S,x)=>S-x);let F=0,J=0;q.forEach(S=>{const x=S*2*(Math.PI/180);F+=Math.cos(x),J+=Math.sin(x)});let le=Math.atan2(J/q.length,F/q.length)*(180/Math.PI);le<0&&(le+=360);const L=le/2,m=fe[Math.floor(fe.length/2)],_=ce[Math.floor(ce.length/2)];return{h:L,s:m,v:_}},Le=H=>{const q=H.reduce((ce,F)=>({h:ce.h+F.h,s:ce.s+F.s,v:ce.v+F.v}),{h:0,s:0,v:0});q.h/=H.length,q.s/=H.length,q.v/=H.length;const fe=H.reduce((ce,F)=>({h:ce.h+Math.pow(F.h-q.h,2),s:ce.s+Math.pow(F.s-q.s,2),v:ce.v+Math.pow(F.v-q.v,2)}),{h:0,s:0,v:0});return{h:fe.h/H.length,s:fe.s/H.length,v:fe.v/H.length}},Fe=(H,q,fe,ce)=>{let F=0;const J=Math.min(H.length,q.length)*2;return H.forEach(Q=>{const le=Re(Q,fe);Re(Q,ce)<le*1.5&&F++}),q.forEach(Q=>{const le=Re(Q,fe),L=Re(Q,ce);le<L*1.5&&F++}),F/J},Re=(H,q)=>{const fe=Math.min(Math.abs(H.h-q.h),180-Math.abs(H.h-q.h)),ce=Math.abs(H.s-q.s),F=Math.abs(H.v-q.v);return Math.sqrt(fe*fe+ce*ce+F*F)},Be=()=>{ae(!1),ie("idle"),pe(5),h("Generic mode cancelled")};return d.jsxs("div",{className:"calib-root",children:[d.jsxs("div",{className:"calib-header",children:[d.jsx("h2",{children:"Color Calibration"}),d.jsxs("div",{className:"calib-actions",children:[d.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),d.jsx("button",{onClick:xe,children:"Restart Camera"})]})]}),f&&d.jsx("div",{className:"calib-message",children:f}),d.jsxs("div",{className:"calib-content",children:[d.jsx("div",{children:d.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[d.jsx("div",{className:"label",children:"Live Preview"}),d.jsx("div",{className:"value",style:{marginBottom:8},children:A?`Generic Mode Active: ${U==="playerA"?"Player A":U==="switching"?"Switching...":U==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),d.jsxs("div",{className:"calib-video-wrap",children:[d.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),d.jsx("div",{className:"calib-center-box",style:{width:O,height:O,borderColor:"#22d3ee",borderWidth:A?"4px":"3px",boxShadow:A?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),A&&b>0&&d.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:b})]})]})}),d.jsxs("div",{className:"calib-controls",children:[d.jsxs("div",{className:"calib-block",style:{background:A?"#1a2332":"#0f172a",border:A?"2px solid #22d3ee":"1px solid #1f2937"},children:[d.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),d.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),A?d.jsxs("div",{style:{marginTop:8},children:[d.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[U==="playerA"&&`Player A: Hold bracelet steady... ${b}s`,U==="switching"&&`Switch hands! Get Player B ready... ${b}s`,U==="playerB"&&`Player B: Hold bracelet steady... ${b}s`,U==="optimizing"&&"Optimizing parameters...",U==="complete"&&" Complete!"]}),d.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[U==="playerA"&&`Samples collected: ${ue.current.A.length}`,U==="switching"&&`Player A: ${ue.current.A.length} samples collected`,U==="playerB"&&`Samples collected: ${ue.current.B.length}`]}),U!=="complete"&&d.jsx("button",{onClick:Be,style:{background:"#ef4444"},children:"Cancel"})]}):d.jsx("div",{className:"buttons",children:d.jsx("button",{onClick:ne,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Detector Settings"}),d.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Detection square size"}),d.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:O,onChange:H=>B(Number(H.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[O,"px"]})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Hue weight"}),d.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:de,onChange:H=>k(Number(H.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:de.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Saturation weight"}),d.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:H=>j(Number(H.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Value weight"}),d.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:R,onChange:H=>V(Number(H.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:R.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:K,onChange:H=>X(Number(H.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[(K*100).toFixed(0),"%"]})]}),d.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player A"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(g)}}),d.jsx("span",{children:g?`h${g.h.toFixed(0)} s${g.s.toFixed(0)} v${g.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>Y("A"),disabled:!l,children:"Save A"}),d.jsx("button",{onClick:()=>oe("A"),children:"Clear A"})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player B"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(P)}}),d.jsx("span",{children:P?`h${P.h.toFixed(0)} s${P.s.toFixed(0)} v${P.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>Y("B"),disabled:!l,children:"Save B"}),d.jsx("button",{onClick:()=>oe("B"),children:"Clear B"})]})]})]})]}),d.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function wh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var L;const[a,f]=M.useState(e),[h,g]=M.useState(0),[N,P]=M.useState(!1),[C,D]=M.useState(1),[O,B]=M.useState(Ni()),[de,k]=M.useState(!0),[w,j]=M.useState([]),[R,V]=M.useState(null),[K,X]=M.useState(!1),A=M.useRef(null),ae=M.useRef(null),U=M.useRef(null),ie=n&&!e,b=["summary-container",r].filter(Boolean).join(" "),pe=(m,_)=>{const S=U.current;if(!S)return 0;const x=S.offsetHeight;return(m+.5)*x},ue=M.useCallback((m,_=null)=>{const S=_||a;if(!S)return;let x=Ni(),I=!0;const z=[];let $=null;for(let ee=0;ee<=m&&ee<S.moves.length;ee++){const re=S.moves[ee];re.phase==="experiment"&&I&&(I=!1,x=Ni());const me=re.all_positions||(re.allPositions?re.allPositions.map(ve=>[ve[0]*.07,ve[1]*.07]):null);if(re.type==="moveblock"&&me)me.length===10&&x.length===10?x=x.map((ve,je)=>{const ze=me[je];return ze&&Array.isArray(ze)&&ze.length===2?{...ve,position:[ze[0],ze[1]]}:ve}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${me==null?void 0:me.length}`),x=sa(la(x),I),$=re.blockId!==void 0?re.blockId:re.unit;else if(re.type==="added shape to gallery"&&re.gallery_normalized){const ve=document.createElement("canvas");ve.width=400,ve.height=400;const je=ve.getContext("2d");je.fillStyle="#000",je.fillRect(0,0,400,400),re.gallery_normalized.forEach(ze=>{const Oe=(ze[0]+.5)*400,He=(ze[1]+.5)*400;je.fillStyle="green";const We=60;je.fillRect(Oe-We/2,He-We/2,We,We)}),z.push({number:re.gallery_shape_number,image:ve.toDataURL()}),$=null}}B(x),k(I),j(z),V($)},[a]),xe=m=>{f(m),g(0),P(!1),setTimeout(()=>{ue(0,m)},0)},Ce=m=>{if(!ie)return;const _=m.target.files[0];if(!_)return;const S=new FileReader;S.onload=x=>{try{const I=JSON.parse(x.target.result);xe(I)}catch(I){alert("Failed to parse JSON file: "+I.message)}},S.readAsText(_)};M.useEffect(()=>{e&&xe(e)},[e]),M.useEffect(()=>{a&&h>=0&&ue(h)},[a,h,ue]),M.useEffect(()=>{const m=()=>{a&&h>=0&&setTimeout(()=>{ue(h)},100)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[a,h,ue]);const _e=m=>{a&&(m<0||m>=a.moves.length||(ue(m),g(m)))},Y=()=>{if(!a||N)return;P(!0),g(0),ue(0);let m=0;ae.current=setInterval(()=>{if(m>=a.moves.length){oe();return}m++,ue(m),g(m)},1e3/C)},oe=()=>{ae.current&&(clearInterval(ae.current),ae.current=null),P(!1)};if(M.useEffect(()=>()=>{ae.current&&clearInterval(ae.current)},[]),M.useEffect(()=>{if(N&&ae.current){clearInterval(ae.current),ae.current=null;const m=h;g(0),P(!1),setTimeout(()=>{g(m),Y()},0)}},[C]),!a)return ie?d.jsx("div",{className:b,children:d.jsxs("div",{className:"summary-upload",children:[d.jsx("h1",{children:t}),d.jsx("p",{children:"Load a game session JSON file to view the replay"}),d.jsx("input",{ref:A,type:"file",accept:".json",onChange:Ce,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var m;return(m=A.current)==null?void 0:m.click()},children:"Load JSON File"})]})}):null;const ne=a.moves[h],we=a.moves.length,Se=((L=a.summary)==null?void 0:L.movesByPlayer)||{},Le=Object.entries(Se||{}),Fe=(m,_=1)=>Number.isFinite(m)?m.toFixed(_):"",Re=a.sessionInfo||{},Be=Re.subjectId||Re.id||a.subjectId||a.id||null,H=Re.sessionGameId||a.sessionGameId||Be||null,q=Re.condition||a.condition||null,fe=a.startTime||Re.startedAt||Re.date||null,ce=a.endTime||Re.endedAt||null,F=m=>{if(!m)return null;try{const _=new Date(m);if(!Number.isNaN(_.getTime()))return _.toLocaleString()}catch{}return m},J=[];H&&J.push({label:"Session ID",value:H}),Be&&Be!==H&&J.push({label:"Participant",value:Be}),q&&J.push({label:"Condition",value:q});const Q=F(fe);Q&&J.push({label:"Start",value:Q});const le=F(ce);return le&&J.push({label:"End",value:le}),d.jsxs("div",{className:b,children:[d.jsxs("div",{className:"summary-header",children:[d.jsx("h1",{children:t}),J.length>0&&d.jsx("div",{className:"summary-session-info",children:J.map(m=>d.jsxs("div",{className:"summary-session-info-item",children:[d.jsx("span",{className:"summary-session-info-label",children:m.label}),d.jsx("span",{className:"summary-session-info-value",children:m.value})]},`${m.label}-${m.value}`))})]}),d.jsxs("div",{className:"summary-main",children:[d.jsxs("div",{className:"summary-left",children:[d.jsx("div",{className:"summary-game-area",children:d.jsxs("div",{className:"game-canvas",ref:U,children:[d.jsx("div",{className:"gallery",children:d.jsx("div",{className:"gallery-frame",children:w.length>0?d.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),O.map((m,_)=>{const S=m.position||[0,0];return!Array.isArray(S)||S.length!==2||!Number.isFinite(S[0])||!Number.isFinite(S[1])?(console.warn(`Invalid position for block ${m.id}:`,S),null):d.jsx("div",{className:`block ${m.canMove?"movable":""} ${m.id===R?"highlighted":""}`,style:{left:`${pe(S[0])}px`,top:`${pe(S[1])}px`,backgroundColor:m.color||"green",cursor:m.canMove?"grab":"default",zIndex:m.id===R?20:_+1}},m.id)})]})}),d.jsxs("div",{className:"summary-progress",children:[d.jsx("input",{type:"range",min:"0",max:Math.max(0,we-1),value:h,onChange:m=>_e(parseInt(m.target.value)),style:{width:"100%"}}),d.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",we,ne&&d.jsxs("span",{className:"move-info",children:[" "," Player: ",ne.player,Array.isArray(ne.position)&&ne.position.length===2&&`  Position: (${ne.position[0]}, ${ne.position[1]})`,Number.isFinite(ne.holdTime)&&`  Hold: ${Fe(ne.holdTime,2)}s`," "," Time: ",Fe(ne.elapsed,1),"s"]})]})]})]}),d.jsxs("div",{className:"summary-right",children:[d.jsxs("div",{className:"summary-stats",children:[d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Duration"}),d.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),d.jsx("span",{className:"summary-stats-value",children:we})]}),d.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[d.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),d.jsx("div",{className:"summary-stats-value",children:Le.length===0?d.jsx("span",{children:""}):Le.map(([m,_])=>d.jsxs("div",{children:[m,": ",_]},m))})]})]}),d.jsxs("div",{className:"summary-controls",children:[d.jsx("button",{onClick:()=>_e(0),disabled:h===0,children:" First"}),d.jsx("button",{onClick:()=>_e(h-1),disabled:h===0,children:" Previous"}),d.jsx("button",{onClick:N?oe:Y,children:N?" Pause":" Play"}),d.jsx("button",{onClick:()=>_e(h+1),disabled:h>=we-1,children:" Next"}),d.jsx("button",{onClick:()=>_e(we-1),disabled:h>=we-1,children:" Last"}),d.jsxs("div",{className:"speed-control",children:[d.jsx("label",{children:"Speed:"}),d.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:C,onChange:m=>D(parseFloat(m.target.value))}),d.jsxs("span",{children:[C,"x"]})]}),ie&&d.jsxs(d.Fragment,{children:[d.jsx("input",{ref:A,type:"file",accept:".json",onChange:Ce,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var m;return(m=A.current)==null?void 0:m.click()},children:" Load New File"})]})]}),d.jsxs("div",{className:"summary-moves-list",children:[d.jsxs("div",{className:"move-list-header",children:[d.jsx("h2",{children:"Move History"}),l&&d.jsx("button",{className:`edit-mode-toggle ${K?"active":""}`,onClick:()=>X(!K),children:K?" Done Editing":"Edit Players"})]}),d.jsx("div",{className:"moves-scroll",children:a.moves.map((m,_)=>d.jsxs("div",{className:`move-item ${_===h?"active":""} ${K?"edit-mode":""}`,onClick:()=>!K&&_e(_),children:[d.jsx("div",{className:"move-number",children:_+1}),m.camera_frame&&d.jsx("div",{className:"move-camera-frame",children:d.jsx("img",{src:m.camera_frame,alt:`Camera frame for move ${_+1}`,className:"camera-frame-thumbnail"})}),d.jsxs("div",{className:"move-details",children:[d.jsx("div",{className:"move-type",children:m.type}),K&&l?d.jsxs("div",{className:"move-player-edit",children:[d.jsx("label",{children:"Player:"}),d.jsxs("select",{value:m.player||"Unknown",onChange:S=>{const x=S.target.value;l(m._id,x)},onClick:S=>S.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):d.jsxs("div",{className:"move-player",children:["Player: ",m.player]}),m.blockId!==null&&m.blockId!==void 0||m.unit!==null&&m.unit!==void 0?d.jsxs("div",{className:"move-unit",children:["Block: ",m.blockId!==void 0?m.blockId:m.unit]}):null,Array.isArray(m.position)&&m.position.length===2&&d.jsxs("div",{className:"move-position",children:["Position: (",m.position[0],", ",m.position[1],")"]}),Number.isFinite(m.holdTime)&&m.holdTime>0&&d.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",Fe(m.holdTime,2),"s"]}),d.jsxs("div",{className:"move-time",children:["Time: ",Fe(m.elapsed,1),"s"]})]})]},_))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Vv(){const e=M.useRef(null),t=M.useRef(null),n=M.useRef(null),r=M.useRef(null),o=M.useRef(null),l=M.useRef(null),a=M.useRef(null),f=M.useRef(null),h=M.useRef(null),[g,N]=M.useState(""),[P,C]=M.useState(!1),[D,O]=M.useState({camA:"None",camB:"None",merged:"None"}),[B,de]=M.useState(!0),[k,w]=M.useState(null),[j,R]=M.useState(null),V=M.useRef(null),K=M.useRef(null),X=(m,_)=>{const S=localStorage.getItem(m);if(S===null)return _;const x=parseFloat(S);return Number.isFinite(x)?x:_},[A,ae]=M.useState(()=>({roiSize:(()=>{const m=X(kt.roiSize,44);return m>10?m:44})(),hueWeight:X(kt.hueWeight,4),satWeight:X(kt.satWeight,2),valWeight:X(kt.valWeight,1),sensitivity:X(kt.sensitivity,0)})),U=M.useRef(A),[ie,b]=M.useState([]),[pe,ue]=M.useState(""),[xe,Ce]=M.useState("");M.useEffect(()=>{let m=!0;(async()=>{try{const I=(await navigator.mediaDevices.enumerateDevices()).filter($=>$.kind==="videoinput");if(I.length===0){N("No cameras found");return}b(I);const z=I.slice(0,2).map($=>$.deviceId);ue(z[0]||""),Ce(z[1]||z[0]||""),await _e(z[0],e,f),z[1]?await _e(z[1],t,h):await _e(z[0],t,h),await Fe(),await Re("A",e,l),await Re("B",t,a)}catch(x){if(!m)return;N((x==null?void 0:x.message)||String(x))}})();const _=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),I=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),I&&R({h:I.h,s:I.s,v:I.v})}catch{ut("No existing calibrations")}};_();const S=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&_(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&ae(I=>({roiSize:(()=>{const z=X(kt.roiSize,(I==null?void 0:I.roiSize)??44);return z>10?z:(I==null?void 0:I.roiSize)??44})(),hueWeight:X(kt.hueWeight,(I==null?void 0:I.hueWeight)??4),satWeight:X(kt.satWeight,(I==null?void 0:I.satWeight)??2),valWeight:X(kt.valWeight,(I==null?void 0:I.valWeight)??1),sensitivity:X(kt.sensitivity,(I==null?void 0:I.sensitivity)??0)})))};return window.addEventListener("storage",S),()=>{if(m=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),f.current&&(f.current.getTracks().forEach(z=>z.stop()),f.current=null),h.current&&(h.current.getTracks().forEach(z=>z.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const I=t.current;I&&(I.srcObject=null),window.removeEventListener("storage",S)}},[]);const _e=async(m,_,S)=>{const x={video:{deviceId:{exact:m}}};ut("Starting camera with deviceId:",m);const I=await navigator.mediaDevices.getUserMedia(x);S.current=I;const z=_.current;if(!z){ut("Video element not found!");return}z.srcObject=I,ut("Stream assigned to video element, waiting for metadata..."),await new Promise($=>{if(z.readyState>=2&&z.videoWidth>0&&z.videoHeight>0)return ut("Video already ready:",z.videoWidth,"x",z.videoHeight),$();const re=()=>{ut("loadedmetadata event fired:",z.videoWidth,"x",z.videoHeight),z.removeEventListener("loadedmetadata",re),$()};z.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),z.removeEventListener("loadedmetadata",re),$()},2e3)});try{await z.play(),ut("Video play() succeeded")}catch($){ut("Video play() failed:",$)}},Y=M.useRef(null),oe=M.useRef(null),ne=M.useRef(null),we=M.useRef(!1),Se=async()=>{if(!we.current){we.current=!0;try{for(;oe.current||ne.current;){const m=o.current;if(!m)break;let _=null,S=null;if(oe.current?(_="A",S=oe.current,oe.current=null):ne.current&&(_="B",S=ne.current,ne.current=null),!!S){Y.current=_;try{await m.send({image:S})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{we.current=!1}}},Le=(m,_)=>{m==="A"?oe.current=_:ne.current=_,Promise.resolve().then(Se)},Fe=async()=>{if(o.current)return o.current;try{const m=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const S=document.getElementById("mp-hands-cdn-script");if(S&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const I=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(I),x())},50);setTimeout(()=>{clearInterval(I),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(S||await new Promise((x,I)=>{const z=document.createElement("script");z.id="mp-hands-cdn-script",z.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",z.async=!0,z.onload=()=>x(),z.onerror=$=>I(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(z)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),_=new m({locateFile:S=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${S}`});return _.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),_.onResults(S=>{const x=Y.current;x==="A"?q(S):x==="B"&&fe(S)}),o.current=_,_}catch(m){return console.error("MediaPipe initialization error:",m),N(`MediaPipe error: ${m.message}`),null}},Re=async(m,_,S)=>{if(!await Fe())return;const I=_.current;if(!I){ut(`Video ref for ${m} not found`);return}ut(`Initializing manual frame capture for camera ${m}, video dimensions:`,I.videoWidth,"x",I.videoHeight);let z=null;const $=()=>{const ee=_.current;ee&&ee.readyState>=2&&ee.videoWidth>0&&Le(m,ee),z=requestAnimationFrame($)};z=requestAnimationFrame($),S.current={stop:()=>{z&&(cancelAnimationFrame(z),z=null,ut(`Stopped manual frame capture for camera ${m}`))}},ut(`Manual frame capture started for camera ${m}`)},Be=M.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),H=M.useRef({wristY:null,player:"None",landmarks:null,wristX:null});M.useEffect(()=>{V.current=k},[k]),M.useEffect(()=>{K.current=j},[j]),M.useEffect(()=>{U.current=A},[A]);const q=m=>ce(m,n,"A"),fe=m=>ce(m,r,"B"),ce=(m,_,S)=>{var We;const x=_.current;if(!x)return;const I=x.getContext("2d");if(!I)return;const z=S==="A"?e.current:t.current;if(!z||z.videoWidth===0||z.videoHeight===0){S==="A"?Be.current={wristY:null,wristX:null,landmarks:null,player:"None"}:H.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=z.videoWidth,x.height=z.videoHeight,I.drawImage(z,0,0,x.width,x.height),I.fillStyle="rgba(0, 0, 0, 0.6)",I.fillRect(x.width-80,5,75,20),I.fillStyle="white",I.font="bold 14px Arial",I.fillText(`Camera ${S}`,x.width-75,20);let $=null,ee=null,re=null,me=[];if(m.multiHandLandmarks&&m.multiHandLandmarks.length>0)for(const Pe of m.multiHandLandmarks){const ke=Pe[0],Me=ke.x*x.width,Te=ke.y*x.height;me.push({x:Me,y:Te,landmarks:Pe}),($===null||(B?Te<$:Te>$))&&($=Te,ee=Pe,re=Me)}me.forEach(({x:Pe,y:ke})=>{I.fillStyle="orange",I.beginPath(),I.arc(Pe,ke,8,0,Math.PI*2),I.fill()});let ve="None";if(ee){I.fillStyle="lime",I.beginPath(),I.arc(re,$,10,0,2*Math.PI),I.fill(),I.fillStyle="lime",I.font="16px Arial",I.fillText("SELECTED",re-40,$-15);const ke=Math.max(10,Math.min(300,Math.floor(((We=U.current)==null?void 0:We.roiSize)||60)))/2,Me=Math.max(0,re-ke),Te=Math.max(0,$-ke),rt=Math.min(x.width,re+ke),Jt=Math.min(x.height,$+ke),Ke=Math.max(0,Math.floor(Me)),at=Math.max(0,Math.floor(Te));let it=Math.floor(rt-Me),St=Math.floor(Jt-Te);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Ke),St=Math.min(St,x.height-at),it>0&&St>0){I.strokeStyle="lime",I.lineWidth=3,I.strokeRect(Ke,at,it,St);try{const zt=I.getImageData(Ke,at,it,St),Lt=V.current,dn=K.current;ve=J(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),ve="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Ke,top:at})}if(me.length>=1){let Pe=me[0].y,ke=me[0].y;me.forEach(rt=>{rt.y<Pe&&(Pe=rt.y),rt.y>ke&&(ke=rt.y)}),I.strokeStyle="yellow",I.setLineDash([6,4]),I.beginPath(),I.moveTo(0,B?Pe:ke),I.lineTo(x.width,B?Pe:ke),I.stroke(),I.strokeStyle="cyan",I.beginPath(),I.moveTo(0,B?ke:Pe),I.lineTo(x.width,B?ke:Pe),I.stroke(),I.setLineDash([]);const Me=B?"A (top)":"A (bottom)",Te=B?"B (bottom)":"B (top)";I.fillStyle="lime",I.font="16px Arial",I.fillText(Me,6,Math.max(14,(B?Pe:ke)-6)),I.fillStyle="dodgerblue",I.fillText(Te,6,Math.min(x.height-6,(B?ke:Pe)+18))}const je={wristY:$,wristX:re,landmarks:ee,player:ve};S==="A"?Be.current=je:H.current=je;const ze=Be.current.wristY,Oe=H.current.wristY;let He="None";if(ze!=null||Oe!=null){const Pe=B?(Me,Te)=>Me==null?Te:Math.min(Me,Te):(Me,Te)=>Me==null?Te:Math.max(Me,Te);[ze,Oe].filter(Me=>Me!=null).reduce(Pe,null)===ze?He=Be.current.player:He=H.current.player}O({camA:Be.current.player,camB:H.current.player,merged:He})},F=(m,_,S)=>{m/=255,_/=255,S/=255;const x=Math.max(m,_,S),I=Math.min(m,_,S),z=x-I;let $=0;z!==0&&(x===m?$=60*((_-S)/z%6):x===_?$=60*((S-m)/z+2):$=60*((m-_)/z+4)),$<0&&($+=360);const ee=x===0?0:z/x*255,re=x*255;return[$/2,ee,re]},J=(m,_,S)=>{var re,me,ve,je;const x=m.data;if(_&&!S)return{status:"Player A",percentA:null,percentB:null};if(S&&!_)return{status:"Player B",percentA:null,percentB:null};const I=((re=U.current)==null?void 0:re.hueWeight)??4,z=((me=U.current)==null?void 0:me.satWeight)??2,$=((ve=U.current)==null?void 0:ve.valWeight)??1,ee=((je=U.current)==null?void 0:je.sensitivity)??0;if(_&&S){let ze=0,Oe=0,He=0;for(let Me=0;Me<x.length;Me+=4){const Te=x[Me],rt=x[Me+1],Jt=x[Me+2],[Ke,at,it]=F(Te,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Ke-_.h),180-Math.abs(Ke-_.h)),Wt=Math.min(Math.abs(Ke-S.h),180-Math.abs(Ke-S.h)),ir=Math.abs(at-_.s),zn=Math.abs(at-S.s),Ln=Math.abs(it-_.v),On=Math.abs(it-S.v),wr=dn*I+ir*z+Ln*$,Zt=Wt*I+zn*z+On*$;Math.min(wr,Zt)>180||(wr<=Zt?ze+=Lt:Oe+=Lt,He+=Lt)}if(He===0)return{status:"None",percentA:0,percentB:0};const We=ze/Math.max(1e-6,He),Pe=Oe/Math.max(1e-6,He),ke=.12*(1+.8*Math.max(0,Math.min(1,ee)));return We>=ke&&We>=Pe?{status:"Player A",percentA:We,percentB:Pe}:Pe>=ke&&Pe>We?{status:"Player B",percentA:We,percentB:Pe}:{status:"None",percentA:We,percentB:Pe}}return{status:"None",percentA:0,percentB:0}},Q=(m,_,S)=>{const x=(m||0)*2,I=(_||0)/255,z=(S||0)/255,$=z*I,ee=$*(1-Math.abs(x/60%2-1)),re=z-$;let me=0,ve=0,je=0;x>=0&&x<60?(me=$,ve=ee,je=0):x<120?(me=ee,ve=$,je=0):x<180?(me=0,ve=$,je=ee):x<240?(me=0,ve=ee,je=$):x<300?(me=ee,ve=0,je=$):(me=$,ve=0,je=ee);const ze=Math.round((me+re)*255),Oe=Math.round((ve+re)*255),He=Math.round((je+re)*255);return`rgb(${ze}, ${Oe}, ${He})`},le=m=>m?Q(m.h,m.s,m.v):"#ffffff",L=async(m,_)=>{try{if(m==="A"){if(ue(_),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}f.current&&(f.current.getTracks().forEach(x=>x.stop()),f.current=null);const S=e.current;S&&(S.srcObject=null),await new Promise(x=>setTimeout(x,100)),await _e(_,e,f),await new Promise(x=>setTimeout(x,200)),await Fe(),await Re("A",e,l),ut("Camera A switched to:",_)}else{if(Ce(_),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const S=t.current;S&&(S.srcObject=null),await new Promise(x=>setTimeout(x,100)),await _e(_,t,h),await new Promise(x=>setTimeout(x,200)),await Fe(),await Re("B",t,a),ut("Camera B switched to:",_)}}catch(S){console.error("[Detector2] Camera switch error:",S),N(`Camera switch error: ${S.message}`)}};return d.jsxs("div",{className:`detector-window ${P?"minimized":""}`,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:()=>C(!P),children:P?"":""}),d.jsx("button",{onClick:()=>de(!B),title:"Toggle A criterion",children:B?"A=Top":"A=Bottom"})]})]}),d.jsxs("div",{className:"detector-content",style:{display:P?"none":"block"},children:[d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera A:"}),d.jsx("select",{value:pe,onChange:m=>L("A",m.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:ie.map(m=>d.jsx("option",{value:m.deviceId,children:m.label||`Camera ${m.deviceId.slice(0,8)}`},m.deviceId))})]}),d.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:n,className:"output_canvas"})]}),d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera B:"}),d.jsx("select",{value:xe,onChange:m=>L("B",m.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:ie.map(m=>d.jsx("option",{value:m.deviceId,children:m.label||`Camera ${m.deviceId.slice(0,8)}`},m.deviceId))})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),d.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[d.jsxs("div",{className:"status-display",children:["Merged: ",d.jsx("strong",{children:D.merged})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:k?le(k):"#444"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:j?le(j):"#444"}})]})]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",k?`h${Math.round(k.h)} s${Math.round(k.s)} v${Math.round(k.v)}`:""]}),d.jsxs("div",{children:["B: ",j?`h${Math.round(j.h)} s${Math.round(j.s)} v${Math.round(j.v)}`:""]})]}),g&&d.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",g]}),d.jsxs("div",{style:{fontSize:12,marginTop:6},children:[d.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const fi=nu(),ed=e=>{var l,a,f,h,g;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((N,P)=>typeof P.elapsed=="number"&&P.elapsed>N?P.elapsed:N,0),r={},o={};return t.forEach(N=>{const P=(N==null?void 0:N.player)||"Unknown";r[P]=(r[P]||0)+1;const C=(N==null?void 0:N.phase)||"unknown";o[C]=(o[C]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((f=(a=e.metadata)==null?void 0:a.config)==null?void 0:f.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((g=e.metadata)==null?void 0:g.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Gv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e},td="adminPassword";function Qv(){var ie;const[e,t]=M.useState([]),[n,r]=M.useState(!0),[o,l]=M.useState(null),[a,f]=M.useState(null),[h,g]=M.useState(null),[N,P]=M.useState(!1),[C,D]=M.useState(null),[O,B]=M.useState(!1),[de,k]=M.useState(""),[w,j]=M.useState(!1);M.useEffect(()=>{const b=localStorage.getItem(td);b&&k(b)},[]);const R=M.useCallback(async()=>{if(!de){l("Password required"),r(!1);return}r(!0),l(null),j(!1);try{const b=await fetch(`${fi}/sessions`,{headers:{"x-admin-password":de}});if(b.status===401||b.status===403)throw j(!0),new Error("Invalid password");if(!b.ok)throw new Error(`Failed to load sessions (${b.status})`);const pe=await b.json(),ue=Array.isArray(pe)?pe:[];localStorage.setItem(td,de),t(ue),f(xe=>xe&&ue.some(Ce=>Ce.sessionGameId===xe)?xe:ue.length>0?ue[0].sessionGameId:null)}catch(b){console.error("[Admin] Error fetching sessions:",b),l(b.message||"Failed to load sessions"),t([]),f(null)}finally{r(!1)}},[de]);M.useEffect(()=>{R()},[R]),M.useEffect(()=>{if(!a){g(null);return}let b=!1;return(async()=>{if(de){P(!0),D(null);try{const ue=await fetch(`${fi}/sessions/${encodeURIComponent(a)}`,{headers:{"x-admin-password":de}});if(!ue.ok)throw ue.status===404?new Error("Session not found"):new Error(`Failed to load session (${ue.status})`);const xe=await ue.json();b||g(ed(xe))}catch(ue){console.error("[Admin] Error fetching session detail:",ue),b||(D(ue.message||"Failed to load session"),g(null))}finally{b||P(!1)}}})(),()=>{b=!0}},[a]);const V=b=>{f(b),B(!1)},K=async()=>{if(!a||!de)return;const b=!O;B(b),P(!0),D(null);try{const pe=b?`${fi}/sessions/${encodeURIComponent(a)}/experiment-only`:`${fi}/sessions/${encodeURIComponent(a)}`,ue=await fetch(pe,{headers:{"x-admin-password":de}});if(!ue.ok)throw new Error(`Failed to load session data (${ue.status})`);const xe=await ue.json();g(ed(xe))}catch(pe){console.error("[Admin] Error loading session data:",pe),D(pe.message||"Failed to load session data"),B(!b)}finally{P(!1)}},X=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},A=()=>{if(!h)return;const b=JSON.stringify(h,null,2),pe=new Blob([b],{type:"application/json"}),ue=URL.createObjectURL(pe),xe=document.createElement("a");xe.href=ue;const Ce=`${a}_${new Date().toISOString().split("T")[0]}.json`;xe.download=Ce,xe.click(),URL.revokeObjectURL(ue),console.log("[Admin] Downloaded JSON:",Ce)},ae=()=>{if(!h||!h.moves||h.moves.length===0){alert("No moves to export");return}const b=new Set;h.moves.forEach(ne=>{Object.keys(ne).forEach(we=>{we!=="camera_frame"&&we!=="__v"&&b.add(we)})});const pe=Array.from(b),ue=[pe.join(",")];h.moves.forEach(ne=>{const we=pe.map(Se=>{const Le=ne[Se];return Le==null||Le===""?"":Array.isArray(Le)||typeof Le=="object"?`"${JSON.stringify(Le).replace(/"/g,'""')}"`:`"${String(Le).replace(/"/g,'""')}"`});ue.push(we.join(","))});const xe=ue.join(`
`),Ce=new Blob([xe],{type:"text/csv;charset=utf-8;"}),_e=URL.createObjectURL(Ce),Y=document.createElement("a");Y.href=_e;const oe=`${a}_${new Date().toISOString().split("T")[0]}.csv`;Y.download=oe,Y.click(),URL.revokeObjectURL(_e),console.log("[Admin] Downloaded CSV:",oe)},U=async(b,pe)=>{if(!(!a||!b||!de))try{const ue=await fetch(`${fi}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(b)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":de},body:JSON.stringify({player:pe})});if(!ue.ok)throw new Error(`Failed to update player (${ue.status})`);g(xe=>xe&&{...xe,moves:xe.moves.map(Ce=>Ce._id===b?{...Ce,player:pe}:Ce)}),console.log("[Admin] Player updated:",b,pe)}catch(ue){console.error("[Admin] Error updating player:",ue),alert("Failed to update player: "+ue.message)}};return d.jsxs("div",{className:"admin-container",children:[d.jsxs("aside",{className:"admin-sidebar",children:[d.jsxs("div",{className:"admin-sidebar-header",children:[d.jsx("h1",{children:"Admin"}),d.jsxs("div",{className:"admin-password-row",children:[d.jsx("input",{type:"password",className:`admin-password-input ${w?"error":""}`,placeholder:"Password",value:de,onChange:b=>k(b.target.value),onKeyPress:b=>{b.key==="Enter"&&R()}}),d.jsx("button",{className:"admin-refresh-button",onClick:R,disabled:n||!de,children:n?"Refreshing":"Refresh"})]})]}),o&&d.jsx("div",{className:"admin-error",children:o}),d.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&d.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&d.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(b=>{const pe=typeof b.movesCount=="number"?b.movesCount:Array.isArray(b.moves)?b.moves.length:0,ue=b.sessionGameId===a;return d.jsxs("button",{className:`admin-session-card ${ue?"active":""}`,onClick:()=>V(b.sessionGameId),children:[d.jsx("div",{className:"admin-session-id",children:b.sessionGameId}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Participant: ",b.subjectId||""]}),d.jsxs("span",{children:["Condition: ",b.condition||""]})]}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Moves: ",pe]}),d.jsxs("span",{children:["Updated: ",Gv(b.updatedAt)]})]})]},b.sessionGameId)})]})]}),d.jsxs("main",{className:"admin-content",children:[N&&d.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),C&&d.jsx("div",{className:"admin-error admin-error--content",children:C}),!N&&!C&&h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"admin-toolbar",children:[d.jsx("button",{className:`admin-toolbar-button experiment-toggle ${O?"active":""}`,onClick:K,title:O?"Show all moves (including practice)":"Show only experiment phase moves",children:O?"Show All Moves":"Experiment Only"}),d.jsx("button",{className:"admin-toolbar-button edit-players",onClick:X,title:"Open dedicated editor for player assignments",children:"Edit Players"}),d.jsx("div",{className:"admin-toolbar-divider"}),d.jsx("button",{className:"admin-toolbar-button download-json",onClick:A,title:"Download session data as JSON",children:"Download JSON"}),d.jsx("button",{className:"admin-toolbar-button download-csv",onClick:ae,title:"Download moves as CSV",children:"Download CSV"})]}),d.jsx("div",{className:"admin-summary-wrapper",children:d.jsx(wh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((ie=h.sessionInfo)==null?void 0:ie.sessionGameId)||a||""}${O?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:U})})]}),!N&&!C&&!h&&d.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const nd=nu(),Yv="adminPassword",rd=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Kv({sessionGameId:e}){var R,V,K,X;const[t,n]=M.useState(null),[r,o]=M.useState(!0),[l,a]=M.useState(null),[f,h]=M.useState(null),[g,N]=M.useState(null),[P,C]=M.useState("all"),[D,O]=M.useState("");M.useEffect(()=>{const A=localStorage.getItem(Yv);A&&O(A)},[]),M.useEffect(()=>{e&&D&&B()},[e,D]);const B=async()=>{if(D){o(!0),a(null);try{const A=await fetch(`${nd}/sessions/${encodeURIComponent(e)}`,{headers:{"x-admin-password":D}});if(!A.ok)throw new Error(`Failed to load session (${A.status})`);const ae=await A.json();n(ae)}catch(A){console.error("[MoveHistoryEditor] Error loading session:",A),a(A.message)}finally{o(!1)}}},de=async(A,ae)=>{if(!(!e||!A||!D))try{const U=await fetch(`${nd}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent(A)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":D},body:JSON.stringify({player:ae})});if(!U.ok)throw new Error(`Failed to update player (${U.status})`);n(ie=>ie&&{...ie,moves:ie.moves.map(b=>b._id===A?{...b,player:ae}:b)}),console.log("[MoveHistoryEditor] Player updated:",A,ae)}catch(U){console.error("[MoveHistoryEditor] Error updating player:",U),alert("Failed to update player: "+U.message)}},k=((R=t==null?void 0:t.moves)==null?void 0:R.filter(A=>P==="all"?!0:A.phase===P))||[];if(r)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return d.jsx("div",{className:"move-editor-container",children:d.jsxs("div",{className:"move-editor-error",children:[d.jsx("h2",{children:"Error Loading Session"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-error",children:"Session not found"})});const w=((V=t.moves)==null?void 0:V.filter(A=>A.phase==="practice").length)||0,j=((K=t.moves)==null?void 0:K.filter(A=>A.phase==="experiment").length)||0;return d.jsxs("div",{className:"move-editor-container",children:[d.jsxs("header",{className:"move-editor-header",children:[d.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),d.jsxs("div",{className:"move-editor-title",children:[d.jsx("h1",{children:"Move History Editor"}),d.jsxs("div",{className:"session-info",children:[d.jsxs("span",{className:"session-id",children:["Session: ",e]}),d.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),d.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),d.jsxs("div",{className:"phase-filter",children:[d.jsxs("button",{className:`filter-btn ${P==="all"?"active":""}`,onClick:()=>C("all"),children:["All (",((X=t.moves)==null?void 0:X.length)||0,")"]}),d.jsxs("button",{className:`filter-btn ${P==="practice"?"active":""}`,onClick:()=>C("practice"),children:["Practice (",w,")"]}),d.jsxs("button",{className:`filter-btn ${P==="experiment"?"active":""}`,onClick:()=>C("experiment"),children:["Experiment (",j,")"]})]})]}),d.jsxs("div",{className:"move-editor-content",children:[d.jsx("div",{className:"moves-grid",children:k.map((A,ae)=>{var U;return d.jsxs("div",{className:`move-card ${(f==null?void 0:f._id)===A._id?"selected":""}`,onClick:()=>h(A),children:[d.jsxs("div",{className:"move-card-header",children:[d.jsxs("span",{className:"move-number",children:["#",ae+1]}),d.jsx("span",{className:`move-phase ${A.phase}`,children:A.phase})]}),A.camera_frame&&d.jsxs("div",{className:"move-image",onClick:ie=>{ie.stopPropagation(),N(A.camera_frame)},children:[d.jsx("img",{src:A.camera_frame,alt:`Move ${ae+1}`}),d.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),d.jsxs("div",{className:"move-card-body",children:[d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Type:"}),d.jsx("span",{className:"value",children:A.type})]}),d.jsxs("div",{className:"move-info-row player-row",children:[d.jsx("span",{className:"label",children:"Player:"}),d.jsxs("select",{className:`player-select ${(U=A.player)==null?void 0:U.toLowerCase().replace(" ","-")}`,value:A.player||"Unknown",onChange:ie=>de(A._id,ie.target.value),onClick:ie=>ie.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),A.blockId!==null&&A.blockId!==void 0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Block:"}),d.jsx("span",{className:"value",children:A.blockId})]}),Array.isArray(A.position)&&A.position.length===2&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Position:"}),d.jsxs("span",{className:"value",children:["(",A.position[0],", ",A.position[1],")"]})]}),d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Time:"}),d.jsxs("span",{className:"value",children:[rd(A.elapsed,1),"s"]})]}),Number.isFinite(A.holdTime)&&A.holdTime>0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Hold:"}),d.jsxs("span",{className:"value",children:[rd(A.holdTime,2),"s"]})]})]})]},A._id||ae)})}),k.length===0&&d.jsx("div",{className:"no-moves",children:d.jsx("p",{children:"No moves found for selected filter."})})]}),g&&d.jsx("div",{className:"image-modal",onClick:()=>N(null),children:d.jsxs("div",{className:"image-modal-content",onClick:A=>A.stopPropagation(),children:[d.jsx("button",{className:"close-modal",onClick:()=>N(null),children:""}),d.jsx("img",{src:g,alt:"Expanded view"})]})})]})}const Xv=!1;function bv(){const[e,t]=M.useState(!1),[n,r]=M.useState(null),[o,l]=M.useState(null),[a,f]=M.useState(window.location.hash),[h,g]=M.useState(!1);M.useEffect(()=>{const O=()=>{f(window.location.hash)};return window.addEventListener("hashchange",O),()=>window.removeEventListener("hashchange",O)},[]),M.useEffect(()=>(window.toggleInterface=O=>{g(O),console.log("[App] Interface "+(O?"hidden":"shown"))},()=>{window.toggleInterface&&delete window.toggleInterface}),[]);const N=O=>{r(O),t(!0)},P=()=>{o&&!o.closed&&o.close();const O=window.location.origin+window.location.pathname+"#/detector",B=window.open(O,"BraceletDetector","width=700,height=600,left=100,top=100");l(B)};M.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),M.useEffect(()=>(window.secEnd=()=>{try{console.log("[App] secEnd() called - triggering game end"),window.endGameExperience?window.endGameExperience():(console.warn("[App] endGameExperience() not available - game may not be running"),alert("Game is not currently running or already ended."))}catch(O){console.error("Error ending experience:",O),alert("Error ending experience: "+O.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let C=null;const D=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")C=d.jsx(Zc,{});else if(a==="#/calibrate")C=d.jsx(Wv,{});else if(a==="#/detector2")C=d.jsx(Vv,{});else if(a==="#/summary")C=d.jsx(wh,{});else if(a==="#/admin")C=d.jsx(Qv,{});else if(D){const O=decodeURIComponent(D[1]);C=d.jsx(Kv,{sessionGameId:O},O)}else C=e?d.jsxs(d.Fragment,{children:[d.jsx(Uv,{config:n,interfaceHidden:h}),d.jsx(Zc,{hidden:h}),Xv,!h&&d.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[d.jsx("button",{onClick:P,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),d.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),d.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&d.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:d.jsx("button",{onClick:()=>g(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):d.jsx(Rv,{onStart:N});return d.jsx("div",{className:"App",children:C})}hs.createRoot(document.getElementById("root")).render(d.jsx(gp.StrictMode,{children:d.jsx(bv,{})}));
