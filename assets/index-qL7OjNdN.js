(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ed={exports:{}},ll={},td={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wi=Symbol.for("react.element"),Jh=Symbol.for("react.portal"),Zh=Symbol.for("react.fragment"),qh=Symbol.for("react.strict_mode"),ep=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),np=Symbol.for("react.context"),rp=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),op=Symbol.for("react.memo"),lp=Symbol.for("react.lazy"),Du=Symbol.iterator;function sp(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rd=Object.assign,id={};function Xr(e,t,n){this.props=e,this.context=t,this.refs=id,this.updater=n||nd}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=Xr.prototype;function aa(e,t,n){this.props=e,this.context=t,this.refs=id,this.updater=n||nd}var ua=aa.prototype=new od;ua.constructor=aa;rd(ua,Xr.prototype);ua.isPureReactComponent=!0;var Fu=Array.isArray,ld=Object.prototype.hasOwnProperty,ca={current:null},sd={key:!0,ref:!0,__self:!0,__source:!0};function ad(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)ld.call(t,r)&&!sd.hasOwnProperty(r)&&(o[r]=t[r]);var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){for(var h=Array(d),v=0;v<d;v++)h[v]=arguments[v+2];o.children=h}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)o[r]===void 0&&(o[r]=d[r]);return{$$typeof:Wi,type:e,key:l,ref:a,props:o,_owner:ca.current}}function ap(e,t){return{$$typeof:Wi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function da(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wi}function up(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bu=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?up(""+e.key):t.toString(36)}function Eo(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Wi:case Jh:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Dl(a,0):r,Fu(o)?(n="",e!=null&&(n=e.replace(Bu,"$&/")+"/"),Eo(o,t,n,"",function(v){return v})):o!=null&&(da(o)&&(o=ap(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Bu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Fu(e))for(var d=0;d<e.length;d++){l=e[d];var h=r+Dl(l,d);a+=Eo(l,t,n,h,o)}else if(h=sp(e),typeof h=="function")for(e=h.call(e),d=0;!(l=e.next()).done;)l=l.value,h=r+Dl(l,d++),a+=Eo(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function oo(e,t,n){if(e==null)return e;var r=[],o=0;return Eo(e,r,"","",function(l){return t.call(n,l,o++)}),r}function cp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},jo={transition:null},dp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:jo,ReactCurrentOwner:ca};function ud(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:oo,forEach:function(e,t,n){oo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return oo(e,function(){t++}),t},toArray:function(e){return oo(e,function(t){return t})||[]},only:function(e){if(!da(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Xr;Se.Fragment=Zh;Se.Profiler=ep;Se.PureComponent=aa;Se.StrictMode=qh;Se.Suspense=ip;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dp;Se.act=ud;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rd({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=ca.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)ld.call(t,h)&&!sd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var v=0;v<h;v++)d[v]=arguments[v+2];r.children=d}return{$$typeof:Wi,type:e.type,key:o,ref:l,props:r,_owner:a}};Se.createContext=function(e){return e={$$typeof:np,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tp,_context:e},e.Consumer=e};Se.createElement=ad;Se.createFactory=function(e){var t=ad.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:rp,render:e}};Se.isValidElement=da;Se.lazy=function(e){return{$$typeof:lp,_payload:{_status:-1,_result:e},_init:cp}};Se.memo=function(e,t){return{$$typeof:op,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=jo.transition;jo.transition={};try{e()}finally{jo.transition=t}};Se.unstable_act=ud;Se.useCallback=function(e,t){return Ct.current.useCallback(e,t)};Se.useContext=function(e){return Ct.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Ct.current.useEffect(e,t)};Se.useId=function(){return Ct.current.useId()};Se.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Ct.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};Se.useRef=function(e){return Ct.current.useRef(e)};Se.useState=function(e){return Ct.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return Ct.current.useTransition()};Se.version="18.3.1";td.exports=Se;var P=td.exports;const fp=bh(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=P,pp=Symbol.for("react.element"),mp=Symbol.for("react.fragment"),vp=Object.prototype.hasOwnProperty,yp=hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gp={key:!0,ref:!0,__self:!0,__source:!0};function cd(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)vp.call(t,r)&&!gp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:pp,type:e,key:l,ref:a,props:o,_owner:yp.current}}ll.Fragment=mp;ll.jsx=cd;ll.jsxs=cd;ed.exports=ll;var f=ed.exports,fs={},dd={exports:{}},Ut={},fd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,le){var se=b.length;b.push(le);e:for(;0<se;){var ve=se-1>>>1,we=b[ve];if(0<o(we,le))b[ve]=le,b[se]=we,se=ve;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var le=b[0],se=b.pop();if(se!==le){b[0]=se;e:for(var ve=0,we=b.length,Ye=we>>>1;ve<Ye;){var Oe=2*(ve+1)-1,Le=b[Oe],Te=Oe+1,V=b[Te];if(0>o(Le,se))Te<we&&0>o(V,Le)?(b[ve]=V,b[Te]=se,ve=Te):(b[ve]=Le,b[Oe]=se,ve=Oe);else if(Te<we&&0>o(V,se))b[ve]=V,b[Te]=se,ve=Te;else break e}}return le}function o(b,le){var se=b.sortIndex-le.sortIndex;return se!==0?se:b.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,d=a.now();e.unstable_now=function(){return a.now()-d}}var h=[],v=[],N=1,_=null,C=3,B=!1,F=!1,$=!1,he=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(b){for(var le=n(v);le!==null;){if(le.callback===null)r(v);else if(le.startTime<=b)r(v),le.sortIndex=le.expirationTime,t(h,le);else break;le=n(v)}}function R(b){if($=!1,E(b),!F)if(n(h)!==null)F=!0,Ve(Y);else{var le=n(v);le!==null&&Ie(R,le.startTime-b)}}function Y(b,le){F=!1,$&&($=!1,S(z),z=-1),B=!0;var se=C;try{for(E(le),_=n(h);_!==null&&(!(_.expirationTime>le)||b&&!ue());){var ve=_.callback;if(typeof ve=="function"){_.callback=null,C=_.priorityLevel;var we=ve(_.expirationTime<=le);le=e.unstable_now(),typeof we=="function"?_.callback=we:_===n(h)&&r(h),E(le)}else r(h);_=n(h)}if(_!==null)var Ye=!0;else{var Oe=n(v);Oe!==null&&Ie(R,Oe.startTime-le),Ye=!1}return Ye}finally{_=null,C=se,B=!1}}var M=!1,U=null,z=-1,Z=5,Q=-1;function ue(){return!(e.unstable_now()-Q<Z)}function ze(){if(U!==null){var b=e.unstable_now();Q=b;var le=!0;try{le=U(!0,b)}finally{le?Pe():(M=!1,U=null)}}else M=!1}var Pe;if(typeof w=="function")Pe=function(){w(ze)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Qe=Ce.port2;Ce.port1.onmessage=ze,Pe=function(){Qe.postMessage(null)}}else Pe=function(){he(ze,0)};function Ve(b){U=b,M||(M=!0,Pe())}function Ie(b,le){z=he(function(){b(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){F||B||(F=!0,Ve(Y))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(b){switch(C){case 1:case 2:case 3:var le=3;break;default:le=C}var se=C;C=le;try{return b()}finally{C=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,le){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var se=C;C=b;try{return le()}finally{C=se}},e.unstable_scheduleCallback=function(b,le,se){var ve=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ve+se:ve):se=ve,b){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=se+we,b={id:N++,callback:le,priorityLevel:b,startTime:se,expirationTime:we,sortIndex:-1},se>ve?(b.sortIndex=se,t(v,b),n(h)===null&&b===n(v)&&($?(S(z),z=-1):$=!0,Ie(R,se-ve))):(b.sortIndex=we,t(h,b),F||B||(F=!0,Ve(Y))),b},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(b){var le=C;return function(){var se=C;C=le;try{return b.apply(this,arguments)}finally{C=se}}}})(hd);fd.exports=hd;var wp=fd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=P,$t=wp;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pd=new Set,Ni={};function yr(e,t){Ur(e,t),Ur(e+"Capture",t)}function Ur(e,t){for(Ni[e]=t,e=0;e<t.length;e++)pd.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=Object.prototype.hasOwnProperty,Sp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$u={},Uu={};function kp(e){return hs.call(Uu,e)?!0:hs.call($u,e)?!1:Sp.test(e)?Uu[e]=!0:($u[e]=!0,!1)}function Ep(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jp(e,t,n,r){if(t===null||typeof t>"u"||Ep(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fa=/[\-:]([a-z])/g;function ha(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fa,ha);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function pa(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jp(t,n,o,r)&&(n=null),r||o===null?kp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),ma=Symbol.for("react.strict_mode"),ps=Symbol.for("react.profiler"),md=Symbol.for("react.provider"),vd=Symbol.for("react.context"),va=Symbol.for("react.forward_ref"),ms=Symbol.for("react.suspense"),vs=Symbol.for("react.suspense_list"),ya=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),yd=Symbol.for("react.offscreen"),Hu=Symbol.iterator;function ri(e){return e===null||typeof e!="object"?null:(e=Hu&&e[Hu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Fl;function fi(e){if(Fl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fl=t&&t[1]||""}return`
`+Fl+e}var Bl=!1;function $l(e,t){if(!e||Bl)return"";Bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var r=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){r=v}e.call(t.prototype)}else{try{throw Error()}catch(v){r=v}e()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var o=v.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,d=l.length-1;1<=a&&0<=d&&o[a]!==l[d];)d--;for(;1<=a&&0<=d;a--,d--)if(o[a]!==l[d]){if(a!==1||d!==1)do if(a--,d--,0>d||o[a]!==l[d]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=d);break}}}finally{Bl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fi(e):""}function Cp(e){switch(e.tag){case 5:return fi(e.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return e=$l(e.type,!1),e;case 11:return e=$l(e.type.render,!1),e;case 1:return e=$l(e.type,!0),e;default:return""}}function ys(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case ps:return"Profiler";case ma:return"StrictMode";case ms:return"Suspense";case vs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vd:return(e.displayName||"Context")+".Consumer";case md:return(e._context.displayName||"Context")+".Provider";case va:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ya:return t=e.displayName||null,t!==null?t:ys(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return ys(e(t))}catch{}}return null}function Np(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ys(t);case 8:return t===ma?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _p(e){var t=gd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function so(e){e._valueTracker||(e._valueTracker=_p(e))}function wd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=gd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Lo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gs(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xd(e,t){t=t.checked,t!=null&&pa(e,"checked",t,!1)}function ws(e,t){xd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xs(e,t.type,n):t.hasOwnProperty("defaultValue")&&xs(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xs(e,t,n){(t!=="number"||Lo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var hi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ss(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(hi(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Sd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ks(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ao,Ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ao=ao||document.createElement("div"),ao.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ao.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pp=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(e){Pp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vi[t]=vi[e]})});function jd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vi.hasOwnProperty(e)&&vi[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=jd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Mp=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Es(e,t){if(t){if(Mp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function js(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cs=null;function ga(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ns=null,Or=null,Dr=null;function Yu(e){if(e=Qi(e)){if(typeof Ns!="function")throw Error(X(280));var t=e.stateNode;t&&(t=dl(t),Ns(e.stateNode,e.type,t))}}function Nd(e){Or?Dr?Dr.push(e):Dr=[e]:Or=e}function _d(){if(Or){var e=Or,t=Dr;if(Dr=Or=null,Yu(e),t)for(e=0;e<t.length;e++)Yu(t[e])}}function Pd(e,t){return e(t)}function Md(){}var Ul=!1;function Id(e,t,n){if(Ul)return e(t,n);Ul=!0;try{return Pd(e,t,n)}finally{Ul=!1,(Or!==null||Dr!==null)&&(Md(),_d())}}function Pi(e,t){var n=e.stateNode;if(n===null)return null;var r=dl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var _s=!1;if(Mn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){_s=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{_s=!1}function Ip(e,t,n,r,o,l,a,d,h){var v=Array.prototype.slice.call(arguments,3);try{t.apply(n,v)}catch(N){this.onError(N)}}var yi=!1,Oo=null,Do=!1,Ps=null,Tp={onError:function(e){yi=!0,Oo=e}};function Ap(e,t,n,r,o,l,a,d,h){yi=!1,Oo=null,Ip.apply(Tp,arguments)}function Rp(e,t,n,r,o,l,a,d,h){if(Ap.apply(this,arguments),yi){if(yi){var v=Oo;yi=!1,Oo=null}else throw Error(X(198));Do||(Do=!0,Ps=v)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Td(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(e){if(gr(e)!==e)throw Error(X(188))}function zp(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Xu(o),e;if(l===r)return Xu(o),t;l=l.sibling}throw Error(X(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,d=o.child;d;){if(d===n){a=!0,n=o,r=l;break}if(d===r){a=!0,r=o,n=l;break}d=d.sibling}if(!a){for(d=l.child;d;){if(d===n){a=!0,n=l,r=o;break}if(d===r){a=!0,r=l,n=o;break}d=d.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function Ad(e){return e=zp(e),e!==null?Rd(e):null}function Rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rd(e);if(t!==null)return t;e=e.sibling}return null}var zd=$t.unstable_scheduleCallback,Ku=$t.unstable_cancelCallback,Lp=$t.unstable_shouldYield,Op=$t.unstable_requestPaint,nt=$t.unstable_now,Dp=$t.unstable_getCurrentPriorityLevel,wa=$t.unstable_ImmediatePriority,Ld=$t.unstable_UserBlockingPriority,Fo=$t.unstable_NormalPriority,Fp=$t.unstable_LowPriority,Od=$t.unstable_IdlePriority,sl=null,kn=null;function Bp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(sl,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Hp,$p=Math.log,Up=Math.LN2;function Hp(e){return e>>>=0,e===0?32:31-($p(e)/Up|0)|0}var uo=64,co=4194304;function pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var d=a&~o;d!==0?r=pi(d):(l&=a,l!==0&&(r=pi(l)))}else a=n&~o,a!==0?r=pi(a):l!==0&&(r=pi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Wp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),d=1<<a,h=o[a];h===-1?(!(d&n)||d&r)&&(o[a]=Wp(d,t)):h<=t&&(e.expiredLanes|=d),l&=~d}}function Ms(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dd(){var e=uo;return uo<<=1,!(uo&4194240)&&(uo=64),e}function Hl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Gp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function xa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Re=0;function Fd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bd,Sa,$d,Ud,Hd,Is=!1,fo=[],Gn=null,Qn=null,Yn=null,Mi=new Map,Ii=new Map,Un=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function oi(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Qi(t),t!==null&&Sa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Yp(e,t,n,r,o){switch(t){case"focusin":return Gn=oi(Gn,e,t,n,r,o),!0;case"dragenter":return Qn=oi(Qn,e,t,n,r,o),!0;case"mouseover":return Yn=oi(Yn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Mi.set(l,oi(Mi.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Ii.set(l,oi(Ii.get(l)||null,e,t,n,r,o)),!0}return!1}function Wd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Td(n),t!==null){e.blockedOn=t,Hd(e.priority,function(){$d(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ts(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Cs=r,n.target.dispatchEvent(r),Cs=null}else return t=Qi(n),t!==null&&Sa(t),e.blockedOn=n,!1;t.shift()}return!0}function Ju(e,t,n){Co(e)&&n.delete(t)}function Xp(){Is=!1,Gn!==null&&Co(Gn)&&(Gn=null),Qn!==null&&Co(Qn)&&(Qn=null),Yn!==null&&Co(Yn)&&(Yn=null),Mi.forEach(Ju),Ii.forEach(Ju)}function li(e,t){e.blockedOn===t&&(e.blockedOn=null,Is||(Is=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,Xp)))}function Ti(e){function t(o){return li(o,e)}if(0<fo.length){li(fo[0],e);for(var n=1;n<fo.length;n++){var r=fo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&li(Gn,e),Qn!==null&&li(Qn,e),Yn!==null&&li(Yn,e),Mi.forEach(t),Ii.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Wd(n),n.blockedOn===null&&Un.shift()}var Fr=Rn.ReactCurrentBatchConfig,$o=!0;function Kp(e,t,n,r){var o=Re,l=Fr.transition;Fr.transition=null;try{Re=1,ka(e,t,n,r)}finally{Re=o,Fr.transition=l}}function bp(e,t,n,r){var o=Re,l=Fr.transition;Fr.transition=null;try{Re=4,ka(e,t,n,r)}finally{Re=o,Fr.transition=l}}function ka(e,t,n,r){if($o){var o=Ts(e,t,n,r);if(o===null)Zl(e,t,r,Uo,n),bu(e,r);else if(Yp(o,e,t,n,r))r.stopPropagation();else if(bu(e,r),t&4&&-1<Qp.indexOf(e)){for(;o!==null;){var l=Qi(o);if(l!==null&&Bd(l),l=Ts(e,t,n,r),l===null&&Zl(e,t,r,Uo,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else Zl(e,t,r,null,n)}}var Uo=null;function Ts(e,t,n,r){if(Uo=null,e=ga(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Td(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uo=e,null}function Vd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dp()){case wa:return 1;case Ld:return 4;case Fo:case Fp:return 16;case Od:return 536870912;default:return 16}default:return 16}}var Wn=null,Ea=null,No=null;function Gd(){if(No)return No;var e,t=Ea,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return No=o.slice(e,1<r?1-r:void 0)}function _o(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ho(){return!0}function Zu(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ho:Zu,this.isPropagationStopped=Zu,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),t}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Ht(Kr),Gi=Ze({},Kr,{view:0,detail:0}),Jp=Ht(Gi),Wl,Vl,si,al=Ze({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(Wl=e.screenX-si.screenX,Vl=e.screenY-si.screenY):Vl=Wl=0,si=e),Wl)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),qu=Ht(al),Zp=Ze({},al,{dataTransfer:0}),qp=Ht(Zp),em=Ze({},Gi,{relatedTarget:0}),Gl=Ht(em),tm=Ze({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),nm=Ht(tm),rm=Ze({},Kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),im=Ht(rm),om=Ze({},Kr,{data:0}),ec=Ht(om),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},am={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=am[e])?!!t[e]:!1}function Ca(){return um}var cm=Ze({},Gi,{key:function(e){if(e.key){var t=lm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_o(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?_o(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_o(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dm=Ht(cm),fm=Ze({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=Ht(fm),hm=Ze({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),pm=Ht(hm),mm=Ze({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vm=Ht(mm),ym=Ze({},al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gm=Ht(ym),wm=[9,13,27,32],Na=Mn&&"CompositionEvent"in window,gi=null;Mn&&"documentMode"in document&&(gi=document.documentMode);var xm=Mn&&"TextEvent"in window&&!gi,Qd=Mn&&(!Na||gi&&8<gi&&11>=gi),nc=" ",rc=!1;function Yd(e,t){switch(e){case"keyup":return wm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Sm(e,t){switch(e){case"compositionend":return Xd(t);case"keypress":return t.which!==32?null:(rc=!0,nc);case"textInput":return e=t.data,e===nc&&rc?null:e;default:return null}}function km(e,t){if(Cr)return e==="compositionend"||!Na&&Yd(e,t)?(e=Gd(),No=Ea=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qd&&t.locale!=="ko"?null:t.data;default:return null}}var Em={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Em[e.type]:t==="textarea"}function Kd(e,t,n,r){Nd(r),t=Ho(t,"onChange"),0<t.length&&(n=new ja("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var wi=null,Ai=null;function jm(e){sf(e,0)}function ul(e){var t=Pr(e);if(wd(t))return e}function Cm(e,t){if(e==="change")return t}var bd=!1;if(Mn){var Ql;if(Mn){var Yl="oninput"in document;if(!Yl){var oc=document.createElement("div");oc.setAttribute("oninput","return;"),Yl=typeof oc.oninput=="function"}Ql=Yl}else Ql=!1;bd=Ql&&(!document.documentMode||9<document.documentMode)}function lc(){wi&&(wi.detachEvent("onpropertychange",Jd),Ai=wi=null)}function Jd(e){if(e.propertyName==="value"&&ul(Ai)){var t=[];Kd(t,Ai,e,ga(e)),Id(jm,t)}}function Nm(e,t,n){e==="focusin"?(lc(),wi=t,Ai=n,wi.attachEvent("onpropertychange",Jd)):e==="focusout"&&lc()}function _m(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(Ai)}function Pm(e,t){if(e==="click")return ul(t)}function Mm(e,t){if(e==="input"||e==="change")return ul(t)}function Im(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Im;function Ri(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!hs.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function sc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ac(e,t){var n=sc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sc(n)}}function Zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(){for(var e=window,t=Lo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Lo(e.document)}return t}function _a(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tm(e){var t=qd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zd(n.ownerDocument.documentElement,n)){if(r!==null&&_a(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=ac(n,l);var a=ac(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Am=Mn&&"documentMode"in document&&11>=document.documentMode,Nr=null,As=null,xi=null,Rs=!1;function uc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rs||Nr==null||Nr!==Lo(r)||(r=Nr,"selectionStart"in r&&_a(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&Ri(xi,r)||(xi=r,r=Ho(As,"onSelect"),0<r.length&&(t=new ja("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function po(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},Xl={},ef={};Mn&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function cl(e){if(Xl[e])return Xl[e];if(!_r[e])return e;var t=_r[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ef)return Xl[e]=t[n];return e}var tf=cl("animationend"),nf=cl("animationiteration"),rf=cl("animationstart"),of=cl("transitionend"),lf=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){lf.set(e,t),yr(t,[e])}for(var Kl=0;Kl<cc.length;Kl++){var bl=cc[Kl],Rm=bl.toLowerCase(),zm=bl[0].toUpperCase()+bl.slice(1);tr(Rm,"on"+zm)}tr(tf,"onAnimationEnd");tr(nf,"onAnimationIteration");tr(rf,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(of,"onTransitionEnd");Ur("onMouseEnter",["mouseout","mouseover"]);Ur("onMouseLeave",["mouseout","mouseover"]);Ur("onPointerEnter",["pointerout","pointerover"]);Ur("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lm=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function dc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Rp(r,t,void 0,e),e.currentTarget=null}function sf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var d=r[a],h=d.instance,v=d.currentTarget;if(d=d.listener,h!==l&&o.isPropagationStopped())break e;dc(o,d,v),l=h}else for(a=0;a<r.length;a++){if(d=r[a],h=d.instance,v=d.currentTarget,d=d.listener,h!==l&&o.isPropagationStopped())break e;dc(o,d,v),l=h}}}if(Do)throw e=Ps,Do=!1,Ps=null,e}function He(e,t){var n=t[Fs];n===void 0&&(n=t[Fs]=new Set);var r=e+"__bubble";n.has(r)||(af(t,e,2,!1),n.add(r))}function Jl(e,t,n){var r=0;t&&(r|=4),af(n,e,r,t)}var mo="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[mo]){e[mo]=!0,pd.forEach(function(n){n!=="selectionchange"&&(Lm.has(n)||Jl(n,!1,e),Jl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mo]||(t[mo]=!0,Jl("selectionchange",!1,t))}}function af(e,t,n,r){switch(Vd(t)){case 1:var o=Kp;break;case 4:o=bp;break;default:o=ka}n=o.bind(null,t,n,e),o=void 0,!_s||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Zl(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var d=r.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;d!==null;){if(a=sr(d),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}d=d.parentNode}}r=r.return}Id(function(){var v=l,N=ga(n),_=[];e:{var C=lf.get(e);if(C!==void 0){var B=ja,F=e;switch(e){case"keypress":if(_o(n)===0)break e;case"keydown":case"keyup":B=dm;break;case"focusin":F="focus",B=Gl;break;case"focusout":F="blur",B=Gl;break;case"beforeblur":case"afterblur":B=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=qp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=pm;break;case tf:case nf:case rf:B=nm;break;case of:B=vm;break;case"scroll":B=Jp;break;case"wheel":B=gm;break;case"copy":case"cut":case"paste":B=im;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=tc}var $=(t&4)!==0,he=!$&&e==="scroll",S=$?C!==null?C+"Capture":null:C;$=[];for(var w=v,E;w!==null;){E=w;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,S!==null&&(R=Pi(w,S),R!=null&&$.push(Li(w,R,E)))),he)break;w=w.return}0<$.length&&(C=new B(C,F,null,n,N),_.push({event:C,listeners:$}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",C&&n!==Cs&&(F=n.relatedTarget||n.fromElement)&&(sr(F)||F[In]))break e;if((B||C)&&(C=N.window===N?N:(C=N.ownerDocument)?C.defaultView||C.parentWindow:window,B?(F=n.relatedTarget||n.toElement,B=v,F=F?sr(F):null,F!==null&&(he=gr(F),F!==he||F.tag!==5&&F.tag!==6)&&(F=null)):(B=null,F=v),B!==F)){if($=qu,R="onMouseLeave",S="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&($=tc,R="onPointerLeave",S="onPointerEnter",w="pointer"),he=B==null?C:Pr(B),E=F==null?C:Pr(F),C=new $(R,w+"leave",B,n,N),C.target=he,C.relatedTarget=E,R=null,sr(N)===v&&($=new $(S,w+"enter",F,n,N),$.target=E,$.relatedTarget=he,R=$),he=R,B&&F)t:{for($=B,S=F,w=0,E=$;E;E=kr(E))w++;for(E=0,R=S;R;R=kr(R))E++;for(;0<w-E;)$=kr($),w--;for(;0<E-w;)S=kr(S),E--;for(;w--;){if($===S||S!==null&&$===S.alternate)break t;$=kr($),S=kr(S)}$=null}else $=null;B!==null&&fc(_,C,B,$,!1),F!==null&&he!==null&&fc(_,he,F,$,!0)}}e:{if(C=v?Pr(v):window,B=C.nodeName&&C.nodeName.toLowerCase(),B==="select"||B==="input"&&C.type==="file")var Y=Cm;else if(ic(C))if(bd)Y=Mm;else{Y=_m;var M=Nm}else(B=C.nodeName)&&B.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(Y=Pm);if(Y&&(Y=Y(e,v))){Kd(_,Y,n,N);break e}M&&M(e,C,v),e==="focusout"&&(M=C._wrapperState)&&M.controlled&&C.type==="number"&&xs(C,"number",C.value)}switch(M=v?Pr(v):window,e){case"focusin":(ic(M)||M.contentEditable==="true")&&(Nr=M,As=v,xi=null);break;case"focusout":xi=As=Nr=null;break;case"mousedown":Rs=!0;break;case"contextmenu":case"mouseup":case"dragend":Rs=!1,uc(_,n,N);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":uc(_,n,N)}var U;if(Na)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Cr?Yd(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Qd&&n.locale!=="ko"&&(Cr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Cr&&(U=Gd()):(Wn=N,Ea="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),M=Ho(v,z),0<M.length&&(z=new ec(z,e,null,n,N),_.push({event:z,listeners:M}),U?z.data=U:(U=Xd(n),U!==null&&(z.data=U)))),(U=xm?Sm(e,n):km(e,n))&&(v=Ho(v,"onBeforeInput"),0<v.length&&(N=new ec("onBeforeInput","beforeinput",null,n,N),_.push({event:N,listeners:v}),N.data=U))}sf(_,t)})}function Li(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ho(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Pi(e,n),l!=null&&r.unshift(Li(e,l,o)),l=Pi(e,t),l!=null&&r.push(Li(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var d=n,h=d.alternate,v=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&v!==null&&(d=v,o?(h=Pi(n,l),h!=null&&a.unshift(Li(n,h,d))):o||(h=Pi(n,l),h!=null&&a.push(Li(n,h,d)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Om=/\r\n?/g,Dm=/\u0000|\uFFFD/g;function hc(e){return(typeof e=="string"?e:""+e).replace(Om,`
`).replace(Dm,"")}function vo(e,t,n){if(t=hc(t),hc(e)!==t&&n)throw Error(X(425))}function Wo(){}var zs=null,Ls=null;function Os(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ds=typeof setTimeout=="function"?setTimeout:void 0,Fm=typeof clearTimeout=="function"?clearTimeout:void 0,pc=typeof Promise=="function"?Promise:void 0,Bm=typeof queueMicrotask=="function"?queueMicrotask:typeof pc<"u"?function(e){return pc.resolve(null).then(e).catch($m)}:Ds;function $m(e){setTimeout(function(){throw e})}function ql(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ti(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ti(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var br=Math.random().toString(36).slice(2),Sn="__reactFiber$"+br,Oi="__reactProps$"+br,In="__reactContainer$"+br,Fs="__reactEvents$"+br,Um="__reactListeners$"+br,Hm="__reactHandles$"+br;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mc(e);e!==null;){if(n=e[Sn])return n;e=mc(e)}return t}e=n,n=e.parentNode}return null}function Qi(e){return e=e[Sn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function dl(e){return e[Oi]||null}var Bs=[],Mr=-1;function nr(e){return{current:e}}function We(e){0>Mr||(e.current=Bs[Mr],Bs[Mr]=null,Mr--)}function Fe(e,t){Mr++,Bs[Mr]=e.current,e.current=t}var er={},xt=nr(er),Tt=nr(!1),fr=er;function Hr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function At(e){return e=e.childContextTypes,e!=null}function Vo(){We(Tt),We(xt)}function vc(e,t,n){if(xt.current!==er)throw Error(X(168));Fe(xt,t),Fe(Tt,n)}function uf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(X(108,Np(e)||"Unknown",o));return Ze({},n,r)}function Go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Fe(xt,e),Fe(Tt,Tt.current),!0}function yc(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=uf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,We(Tt),We(xt),Fe(xt,e)):We(Tt),Fe(Tt,n)}var Cn=null,fl=!1,es=!1;function cf(e){Cn===null?Cn=[e]:Cn.push(e)}function Wm(e){fl=!0,cf(e)}function rr(){if(!es&&Cn!==null){es=!0;var e=0,t=Re;try{var n=Cn;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,fl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),zd(wa,rr),o}finally{Re=t,es=!1}}return null}var Ir=[],Tr=0,Qo=null,Yo=0,Gt=[],Qt=0,hr=null,Nn=1,_n="";function or(e,t){Ir[Tr++]=Yo,Ir[Tr++]=Qo,Qo=e,Yo=t}function df(e,t,n){Gt[Qt++]=Nn,Gt[Qt++]=_n,Gt[Qt++]=hr,hr=e;var r=Nn;e=_n;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,_n=l+e}else Nn=1<<l|n<<o|r,_n=e}function Pa(e){e.return!==null&&(or(e,1),df(e,1,0))}function Ma(e){for(;e===Qo;)Qo=Ir[--Tr],Ir[Tr]=null,Yo=Ir[--Tr],Ir[Tr]=null;for(;e===hr;)hr=Gt[--Qt],Gt[Qt]=null,_n=Gt[--Qt],Gt[Qt]=null,Nn=Gt[--Qt],Gt[Qt]=null}var Bt=null,Ft=null,Ge=!1,ln=null;function ff(e,t){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:_n}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bt=e,Ft=null,!0):!1;default:return!1}}function $s(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Us(e){if(Ge){var t=Ft;if(t){var n=t;if(!gc(e,t)){if($s(e))throw Error(X(418));t=Xn(n.nextSibling);var r=Bt;t&&gc(e,t)?ff(r,n):(e.flags=e.flags&-4097|2,Ge=!1,Bt=e)}}else{if($s(e))throw Error(X(418));e.flags=e.flags&-4097|2,Ge=!1,Bt=e}}}function wc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bt=e}function yo(e){if(e!==Bt)return!1;if(!Ge)return wc(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Os(e.type,e.memoizedProps)),t&&(t=Ft)){if($s(e))throw hf(),Error(X(418));for(;t;)ff(e,t),t=Xn(t.nextSibling)}if(wc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Bt?Xn(e.stateNode.nextSibling):null;return!0}function hf(){for(var e=Ft;e;)e=Xn(e.nextSibling)}function Wr(){Ft=Bt=null,Ge=!1}function Ia(e){ln===null?ln=[e]:ln.push(e)}var Vm=Rn.ReactCurrentBatchConfig;function ai(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var d=o.refs;a===null?delete d[l]:d[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xc(e){var t=e._init;return t(e._payload)}function pf(e){function t(S,w){if(e){var E=S.deletions;E===null?(S.deletions=[w],S.flags|=16):E.push(w)}}function n(S,w){if(!e)return null;for(;w!==null;)t(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function o(S,w){return S=Zn(S,w),S.index=0,S.sibling=null,S}function l(S,w,E){return S.index=E,e?(E=S.alternate,E!==null?(E=E.index,E<w?(S.flags|=2,w):E):(S.flags|=2,w)):(S.flags|=1048576,w)}function a(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,w,E,R){return w===null||w.tag!==6?(w=ss(E,S.mode,R),w.return=S,w):(w=o(w,E),w.return=S,w)}function h(S,w,E,R){var Y=E.type;return Y===jr?N(S,w,E.props.children,R,E.key):w!==null&&(w.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Bn&&xc(Y)===w.type)?(R=o(w,E.props),R.ref=ai(S,w,E),R.return=S,R):(R=zo(E.type,E.key,E.props,null,S.mode,R),R.ref=ai(S,w,E),R.return=S,R)}function v(S,w,E,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=as(E,S.mode,R),w.return=S,w):(w=o(w,E.children||[]),w.return=S,w)}function N(S,w,E,R,Y){return w===null||w.tag!==7?(w=dr(E,S.mode,R,Y),w.return=S,w):(w=o(w,E),w.return=S,w)}function _(S,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ss(""+w,S.mode,E),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lo:return E=zo(w.type,w.key,w.props,null,S.mode,E),E.ref=ai(S,null,w),E.return=S,E;case Er:return w=as(w,S.mode,E),w.return=S,w;case Bn:var R=w._init;return _(S,R(w._payload),E)}if(hi(w)||ri(w))return w=dr(w,S.mode,E,null),w.return=S,w;go(S,w)}return null}function C(S,w,E,R){var Y=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return Y!==null?null:d(S,w,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lo:return E.key===Y?h(S,w,E,R):null;case Er:return E.key===Y?v(S,w,E,R):null;case Bn:return Y=E._init,C(S,w,Y(E._payload),R)}if(hi(E)||ri(E))return Y!==null?null:N(S,w,E,R,null);go(S,E)}return null}function B(S,w,E,R,Y){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(E)||null,d(w,S,""+R,Y);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case lo:return S=S.get(R.key===null?E:R.key)||null,h(w,S,R,Y);case Er:return S=S.get(R.key===null?E:R.key)||null,v(w,S,R,Y);case Bn:var M=R._init;return B(S,w,E,M(R._payload),Y)}if(hi(R)||ri(R))return S=S.get(E)||null,N(w,S,R,Y,null);go(w,R)}return null}function F(S,w,E,R){for(var Y=null,M=null,U=w,z=w=0,Z=null;U!==null&&z<E.length;z++){U.index>z?(Z=U,U=null):Z=U.sibling;var Q=C(S,U,E[z],R);if(Q===null){U===null&&(U=Z);break}e&&U&&Q.alternate===null&&t(S,U),w=l(Q,w,z),M===null?Y=Q:M.sibling=Q,M=Q,U=Z}if(z===E.length)return n(S,U),Ge&&or(S,z),Y;if(U===null){for(;z<E.length;z++)U=_(S,E[z],R),U!==null&&(w=l(U,w,z),M===null?Y=U:M.sibling=U,M=U);return Ge&&or(S,z),Y}for(U=r(S,U);z<E.length;z++)Z=B(U,S,z,E[z],R),Z!==null&&(e&&Z.alternate!==null&&U.delete(Z.key===null?z:Z.key),w=l(Z,w,z),M===null?Y=Z:M.sibling=Z,M=Z);return e&&U.forEach(function(ue){return t(S,ue)}),Ge&&or(S,z),Y}function $(S,w,E,R){var Y=ri(E);if(typeof Y!="function")throw Error(X(150));if(E=Y.call(E),E==null)throw Error(X(151));for(var M=Y=null,U=w,z=w=0,Z=null,Q=E.next();U!==null&&!Q.done;z++,Q=E.next()){U.index>z?(Z=U,U=null):Z=U.sibling;var ue=C(S,U,Q.value,R);if(ue===null){U===null&&(U=Z);break}e&&U&&ue.alternate===null&&t(S,U),w=l(ue,w,z),M===null?Y=ue:M.sibling=ue,M=ue,U=Z}if(Q.done)return n(S,U),Ge&&or(S,z),Y;if(U===null){for(;!Q.done;z++,Q=E.next())Q=_(S,Q.value,R),Q!==null&&(w=l(Q,w,z),M===null?Y=Q:M.sibling=Q,M=Q);return Ge&&or(S,z),Y}for(U=r(S,U);!Q.done;z++,Q=E.next())Q=B(U,S,z,Q.value,R),Q!==null&&(e&&Q.alternate!==null&&U.delete(Q.key===null?z:Q.key),w=l(Q,w,z),M===null?Y=Q:M.sibling=Q,M=Q);return e&&U.forEach(function(ze){return t(S,ze)}),Ge&&or(S,z),Y}function he(S,w,E,R){if(typeof E=="object"&&E!==null&&E.type===jr&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case lo:e:{for(var Y=E.key,M=w;M!==null;){if(M.key===Y){if(Y=E.type,Y===jr){if(M.tag===7){n(S,M.sibling),w=o(M,E.props.children),w.return=S,S=w;break e}}else if(M.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Bn&&xc(Y)===M.type){n(S,M.sibling),w=o(M,E.props),w.ref=ai(S,M,E),w.return=S,S=w;break e}n(S,M);break}else t(S,M);M=M.sibling}E.type===jr?(w=dr(E.props.children,S.mode,R,E.key),w.return=S,S=w):(R=zo(E.type,E.key,E.props,null,S.mode,R),R.ref=ai(S,w,E),R.return=S,S=R)}return a(S);case Er:e:{for(M=E.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(S,w.sibling),w=o(w,E.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else t(S,w);w=w.sibling}w=as(E,S.mode,R),w.return=S,S=w}return a(S);case Bn:return M=E._init,he(S,w,M(E._payload),R)}if(hi(E))return F(S,w,E,R);if(ri(E))return $(S,w,E,R);go(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(S,w.sibling),w=o(w,E),w.return=S,S=w):(n(S,w),w=ss(E,S.mode,R),w.return=S,S=w),a(S)):n(S,w)}return he}var Vr=pf(!0),mf=pf(!1),Xo=nr(null),Ko=null,Ar=null,Ta=null;function Aa(){Ta=Ar=Ko=null}function Ra(e){var t=Xo.current;We(Xo),e._currentValue=t}function Hs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){Ko=e,Ta=Ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},Ar===null){if(Ko===null)throw Error(X(308));Ar=e,Ko.dependencies={lanes:0,firstContext:e}}else Ar=Ar.next=e;return t}var ar=null;function za(e){ar===null?ar=[e]:ar.push(e)}function vf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,za(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,za(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function Po(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xa(e,n)}}function Sc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var h=d,v=h.next;h.next=null,a===null?l=v:a.next=v,a=h;var N=e.alternate;N!==null&&(N=N.updateQueue,d=N.lastBaseUpdate,d!==a&&(d===null?N.firstBaseUpdate=v:d.next=v,N.lastBaseUpdate=h))}if(l!==null){var _=o.baseState;a=0,N=v=h=null,d=l;do{var C=d.lane,B=d.eventTime;if((r&C)===C){N!==null&&(N=N.next={eventTime:B,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var F=e,$=d;switch(C=t,B=n,$.tag){case 1:if(F=$.payload,typeof F=="function"){_=F.call(B,_,C);break e}_=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=$.payload,C=typeof F=="function"?F.call(B,_,C):F,C==null)break e;_=Ze({},_,C);break e;case 2:$n=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,C=o.effects,C===null?o.effects=[d]:C.push(d))}else B={eventTime:B,lane:C,tag:d.tag,payload:d.payload,callback:d.callback,next:null},N===null?(v=N=B,h=_):N=N.next=B,a|=C;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;C=d,d=C.next,C.next=null,o.lastBaseUpdate=C,o.shared.pending=null}}while(!0);if(N===null&&(h=_),o.baseState=h,o.firstBaseUpdate=v,o.lastBaseUpdate=N,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=_}}function kc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(X(191,o));o.call(r)}}}var Yi={},En=nr(Yi),Di=nr(Yi),Fi=nr(Yi);function ur(e){if(e===Yi)throw Error(X(174));return e}function Oa(e,t){switch(Fe(Fi,t),Fe(Di,e),Fe(En,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ks(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ks(t,e)}We(En),Fe(En,t)}function Gr(){We(En),We(Di),We(Fi)}function gf(e){ur(Fi.current);var t=ur(En.current),n=ks(t,e.type);t!==n&&(Fe(Di,e),Fe(En,n))}function Da(e){Di.current===e&&(We(En),We(Di))}var be=nr(0);function Jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function Fa(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var Mo=Rn.ReactCurrentDispatcher,ns=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,Zo=!1,Si=!1,Bi=0,Gm=0;function yt(){throw Error(X(321))}function Ba(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=e===null||e.memoizedState===null?Km:bm,e=n(r,o),Si){l=0;do{if(Si=!1,Bi=0,25<=l)throw Error(X(301));l+=1,ct=lt=null,t.updateQueue=null,Mo.current=Jm,e=n(r,o)}while(Si)}if(Mo.current=qo,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,Zo=!1,t)throw Error(X(300));return e}function Ua(){var e=Bi!==0;return Bi=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function bt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(X(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function $i(e,t){return typeof t=="function"?t(e):t}function rs(e){var t=bt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var d=a=null,h=null,v=l;do{var N=v.lane;if((pr&N)===N)h!==null&&(h=h.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:e(r,v.action);else{var _={lane:N,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};h===null?(d=h=_,a=r):h=h.next=_,Je.lanes|=N,mr|=N}v=v.next}while(v!==null&&v!==l);h===null?a=r:h.next=d,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function is(e){var t=bt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function wf(){}function xf(e,t){var n=Je,r=bt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,It=!0),r=r.queue,Ha(Ef.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Ui(9,kf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(X(349));pr&30||Sf(n,t,o)}return o}function Sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kf(e,t,n,r){t.value=n,t.getSnapshot=r,jf(t)&&Cf(e)}function Ef(e,t,n){return n(function(){jf(t)&&Cf(e)})}function jf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function Cf(e){var t=Tn(e,1);t!==null&&un(t,e,1,-1)}function Ec(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},t.queue=e,e=e.dispatch=Xm.bind(null,Je,e),[t.memoizedState,e]}function Ui(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Nf(){return bt().memoizedState}function Io(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Ui(1|t,n,void 0,r===void 0?null:r)}function hl(e,t,n,r){var o=bt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&Ba(r,a.deps)){o.memoizedState=Ui(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Ui(1|t,n,l,r)}function jc(e,t){return Io(8390656,8,e,t)}function Ha(e,t){return hl(2048,8,e,t)}function _f(e,t){return hl(4,2,e,t)}function Pf(e,t){return hl(4,4,e,t)}function Mf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function If(e,t,n){return n=n!=null?n.concat([e]):null,hl(4,4,Mf.bind(null,t,e),n)}function Wa(){}function Tf(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Af(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Rf(e,t,n){return pr&21?(cn(n,t)||(n=Dd(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function Qm(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=ns.transition;ns.transition={};try{e(!1),t()}finally{Re=n,ns.transition=r}}function zf(){return bt().memoizedState}function Ym(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lf(e))Of(t,n);else if(n=vf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Df(n,t,r)}}function Xm(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lf(e))Of(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,d=l(a,n);if(o.hasEagerState=!0,o.eagerState=d,cn(d,a)){var h=t.interleaved;h===null?(o.next=o,za(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=vf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Df(n,t,r))}}function Lf(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Of(e,t){Si=Zo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Df(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xa(e,n)}}var qo={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Km={readContext:Kt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:jc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Io(4194308,4,Mf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ym.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:Ec,useDebugValue:Wa,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=Ec(!1),t=e[0];return e=Qm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(Ge){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),dt===null)throw Error(X(349));pr&30||Sf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,jc(Ef.bind(null,r,l,e),[e]),r.flags|=2048,Ui(9,kf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(Ge){var n=_n,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bm={readContext:Kt,useCallback:Tf,useContext:Kt,useEffect:Ha,useImperativeHandle:If,useInsertionEffect:_f,useLayoutEffect:Pf,useMemo:Af,useReducer:rs,useRef:Nf,useState:function(){return rs($i)},useDebugValue:Wa,useDeferredValue:function(e){var t=bt();return Rf(t,lt.memoizedState,e)},useTransition:function(){var e=rs($i)[0],t=bt().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:xf,useId:zf,unstable_isNewReconciler:!1},Jm={readContext:Kt,useCallback:Tf,useContext:Kt,useEffect:Ha,useImperativeHandle:If,useInsertionEffect:_f,useLayoutEffect:Pf,useMemo:Af,useReducer:is,useRef:Nf,useState:function(){return is($i)},useDebugValue:Wa,useDeferredValue:function(e){var t=bt();return lt===null?t.memoizedState=e:Rf(t,lt.memoizedState,e)},useTransition:function(){var e=is($i)[0],t=bt().memoizedState;return[e,t]},useMutableSource:wf,useSyncExternalStore:xf,useId:zf,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ws(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pl={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Pn(r,o);l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Po(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Pn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Po(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=Pn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Kn(e,o,r),t!==null&&(un(t,e,r,n),Po(t,e,r))}};function Cc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Ri(n,r)||!Ri(o,l):!0}function Ff(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(o=At(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Hr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Nc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function Vs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},La(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Kt(l):(l=At(t)?fr:xt.current,o.context=Hr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Ws(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&pl.enqueueReplaceState(o,o.state,null),bo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",r=t;do n+=Cp(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function os(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Gs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zm=typeof WeakMap=="function"?WeakMap:Map;function Bf(e,t,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tl||(tl=!0,ta=r),Gs(e,t)},n}function $f(e,t,n){n=Pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Gs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Gs(e,t),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function _c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zm;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=fv.bind(null,e,t,n),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pn(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var qm=Rn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?mf(t,null,n,r):Vr(t,e.child,n,r)}function Ic(e,t,n,r,o){n=n.render;var l=t.ref;return Br(t,o),r=$a(e,t,n,r,l,o),n=Ua(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ge&&n&&Pa(t),t.flags|=1,Et(e,t,r,o),t.child)}function Tc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Ja(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Uf(e,t,l,r,o)):(e=zo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ri,n(a,r)&&e.ref===t.ref)return An(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Uf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(Ri(l,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,An(e,t,o)}return Qs(e,t,n,r,o)}function Hf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(zr,Dt),Dt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(zr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Fe(zr,Dt),Dt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Fe(zr,Dt),Dt|=r;return Et(e,t,o,n),t.child}function Wf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qs(e,t,n,r,o){var l=At(n)?fr:xt.current;return l=Hr(t,l),Br(t,o),n=$a(e,t,n,r,l,o),r=Ua(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ge&&r&&Pa(t),t.flags|=1,Et(e,t,n,o),t.child)}function Ac(e,t,n,r,o){if(At(n)){var l=!0;Go(t)}else l=!1;if(Br(t,o),t.stateNode===null)To(e,t),Ff(t,n,r),Vs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,d=t.memoizedProps;a.props=d;var h=a.context,v=n.contextType;typeof v=="object"&&v!==null?v=Kt(v):(v=At(n)?fr:xt.current,v=Hr(t,v));var N=n.getDerivedStateFromProps,_=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==r||h!==v)&&Nc(t,a,r,v),$n=!1;var C=t.memoizedState;a.state=C,bo(t,r,a,o),h=t.memoizedState,d!==r||C!==h||Tt.current||$n?(typeof N=="function"&&(Ws(t,n,N,r),h=t.memoizedState),(d=$n||Cc(t,n,d,r,C,h,v))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=v,r=d):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,yf(e,t),d=t.memoizedProps,v=t.type===t.elementType?d:rn(t.type,d),a.props=v,_=t.pendingProps,C=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Kt(h):(h=At(n)?fr:xt.current,h=Hr(t,h));var B=n.getDerivedStateFromProps;(N=typeof B=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==_||C!==h)&&Nc(t,a,r,h),$n=!1,C=t.memoizedState,a.state=C,bo(t,r,a,o);var F=t.memoizedState;d!==_||C!==F||Tt.current||$n?(typeof B=="function"&&(Ws(t,n,B,r),F=t.memoizedState),(v=$n||Cc(t,n,v,r,C,F,h)||!1)?(N||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,F,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,F,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),a.props=r,a.state=F,a.context=h,r=v):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),r=!1)}return Ys(e,t,n,r,l,o)}function Ys(e,t,n,r,o,l){Wf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&yc(t,n,!1),An(e,t,l);r=t.stateNode,qm.current=t;var d=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Vr(t,e.child,null,l),t.child=Vr(t,null,d,l)):Et(e,t,d,l),t.memoizedState=r.state,o&&yc(t,n,!0),t.child}function Vf(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),Oa(e,t.containerInfo)}function Rc(e,t,n,r,o){return Wr(),Ia(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function Ks(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gf(e,t,n){var r=t.pendingProps,o=be.current,l=!1,a=(t.flags&128)!==0,d;if((d=a)||(d=e!==null&&e.memoizedState===null?!1:(o&2)!==0),d?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Fe(be,o&1),e===null)return Us(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=yl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ks(n),t.memoizedState=Xs,e):Va(t,a));if(o=e.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return ev(e,t,a,r,d,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,d=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),d!==null?l=Zn(d,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Ks(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Va(e,t){return t=yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wo(e,t,n,r){return r!==null&&Ia(r),Vr(t,e.child,null,n),e=Va(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ev(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=os(Error(X(422))),wo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=yl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Vr(t,e.child,null,a),t.child.memoizedState=Ks(a),t.memoizedState=Xs,l);if(!(t.mode&1))return wo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var d=r.dgst;return r=d,l=Error(X(419)),r=os(l,r,void 0),wo(e,t,a,r)}if(d=(a&e.childLanes)!==0,It||d){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Tn(e,o),un(r,e,o,-1))}return ba(),r=os(Error(X(421))),wo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=hv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ft=Xn(o.nextSibling),Bt=t,Ge=!0,ln=null,e!==null&&(Gt[Qt++]=Nn,Gt[Qt++]=_n,Gt[Qt++]=hr,Nn=e.id,_n=e.overflow,hr=t),t=Va(t,r.children),t.flags|=4096,t)}function zc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hs(e.return,t,n)}function ls(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Qf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zc(e,n,t);else if(e.tag===19)zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(be,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Jo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ls(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Jo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ls(t,!0,n,null,l);break;case"together":ls(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function To(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tv(e,t,n){switch(t.tag){case 3:Vf(t),Wr();break;case 5:gf(t);break;case 1:At(t.type)&&Go(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Fe(Xo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?Gf(e,t,n):(Fe(be,be.current&1),e=An(e,t,n),e!==null?e.sibling:null);Fe(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Qf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Fe(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Hf(e,t,n)}return An(e,t,n)}var Yf,bs,Xf,Kf;Yf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bs=function(){};Xf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=gs(e,o),r=gs(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=Ss(e,o),r=Ss(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wo)}Es(n,r);var a;n=null;for(v in o)if(!r.hasOwnProperty(v)&&o.hasOwnProperty(v)&&o[v]!=null)if(v==="style"){var d=o[v];for(a in d)d.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Ni.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in r){var h=r[v];if(d=o!=null?o[v]:void 0,r.hasOwnProperty(v)&&h!==d&&(h!=null||d!=null))if(v==="style")if(d){for(a in d)!d.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&d[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(v,n)),n=h;else v==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(l=l||[]).push(v,h)):v==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(v,""+h):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(v)?(h!=null&&v==="onScroll"&&He("scroll",e),l||d===h||(l=[])):(l=l||[]).push(v,h))}n&&(l=l||[]).push("style",n);var v=l;(t.updateQueue=v)&&(t.flags|=4)}};Kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ui(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nv(e,t,n){var r=t.pendingProps;switch(Ma(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return At(t.type)&&Vo(),gt(t),null;case 3:return r=t.stateNode,Gr(),We(Tt),We(xt),Fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(ia(ln),ln=null))),bs(e,t),gt(t),null;case 5:Da(t);var o=ur(Fi.current);if(n=t.type,e!==null&&t.stateNode!=null)Xf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return gt(t),null}if(e=ur(En.current),yo(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Oi]=l,e=(t.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(o=0;o<mi.length;o++)He(mi[o],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Wu(r,l),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},He("invalid",r);break;case"textarea":Gu(r,l),He("invalid",r)}Es(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="children"?typeof d=="string"?r.textContent!==d&&(l.suppressHydrationWarning!==!0&&vo(r.textContent,d,e),o=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&vo(r.textContent,d,e),o=["children",""+d]):Ni.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&He("scroll",r)}switch(n){case"input":so(r),Vu(r,l,!0);break;case"textarea":so(r),Qu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Wo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Oi]=r,Yf(e,t,!1,!1),t.stateNode=e;e:{switch(a=js(n,r),n){case"dialog":He("cancel",e),He("close",e),o=r;break;case"iframe":case"object":case"embed":He("load",e),o=r;break;case"video":case"audio":for(o=0;o<mi.length;o++)He(mi[o],e);o=r;break;case"source":He("error",e),o=r;break;case"img":case"image":case"link":He("error",e),He("load",e),o=r;break;case"details":He("toggle",e),o=r;break;case"input":Wu(e,r),o=gs(e,r),He("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),He("invalid",e);break;case"textarea":Gu(e,r),o=Ss(e,r),He("invalid",e);break;default:o=r}Es(n,o),d=o;for(l in d)if(d.hasOwnProperty(l)){var h=d[l];l==="style"?Cd(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Ed(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&_i(e,h):typeof h=="number"&&_i(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ni.hasOwnProperty(l)?h!=null&&l==="onScroll"&&He("scroll",e):h!=null&&pa(e,l,h,a))}switch(n){case"input":so(e),Vu(e,r,!1);break;case"textarea":so(e),Qu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Wo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)Kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=ur(Fi.current),ur(En.current),yo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Bt,e!==null))switch(e.tag){case 3:vo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(We(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Ft!==null&&t.mode&1&&!(t.flags&128))hf(),Wr(),t.flags|=98560,l=!1;else if(l=yo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(X(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(X(317));l[Sn]=t}else Wr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(ia(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?st===0&&(st=3):ba())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Gr(),bs(e,t),e===null&&zi(t.stateNode.containerInfo),gt(t),null;case 10:return Ra(t.type._context),gt(t),null;case 17:return At(t.type)&&Vo(),gt(t),null;case 19:if(We(be),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ui(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Jo(e),a!==null){for(t.flags|=128,ui(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(be,be.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Yr&&(t.flags|=128,r=!0,ui(l,!1),t.lanes=4194304)}else{if(!r)if(e=Jo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ui(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Ge)return gt(t),null}else 2*nt()-l.renderingStartTime>Yr&&n!==1073741824&&(t.flags|=128,r=!0,ui(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=be.current,Fe(be,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Ka(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function rv(e,t){switch(Ma(t),t.tag){case 1:return At(t.type)&&Vo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gr(),We(Tt),We(xt),Fa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Da(t),null;case 13:if(We(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(be),null;case 4:return Gr(),null;case 10:return Ra(t.type._context),null;case 22:case 23:return Ka(),null;case 24:return null;default:return null}}var xo=!1,wt=!1,iv=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Lc=!1;function ov(e,t){if(zs=$o,e=qd(),_a(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,d=-1,h=-1,v=0,N=0,_=e,C=null;t:for(;;){for(var B;_!==n||o!==0&&_.nodeType!==3||(d=a+o),_!==l||r!==0&&_.nodeType!==3||(h=a+r),_.nodeType===3&&(a+=_.nodeValue.length),(B=_.firstChild)!==null;)C=_,_=B;for(;;){if(_===e)break t;if(C===n&&++v===o&&(d=a),C===l&&++N===r&&(h=a),(B=_.nextSibling)!==null)break;_=C,C=_.parentNode}_=B}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ls={focusedElem:e,selectionRange:n},$o=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var $=F.memoizedProps,he=F.memoizedState,S=t.stateNode,w=S.getSnapshotBeforeUpdate(t.elementType===t.type?$:rn(t.type,$),he);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(R){tt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return F=Lc,Lc=!1,F}function ki(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&Js(t,n,l)}o=o.next}while(o!==r)}}function ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Zs(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bf(e){var t=e.alternate;t!==null&&(e.alternate=null,bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Oi],delete t[Fs],delete t[Um],delete t[Hm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jf(e){return e.tag===5||e.tag===3||e.tag===4}function Oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wo));else if(r!==4&&(e=e.child,e!==null))for(qs(e,t,n),e=e.sibling;e!==null;)qs(e,t,n),e=e.sibling}function ea(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ea(e,t,n),e=e.sibling;e!==null;)ea(e,t,n),e=e.sibling}var pt=null,on=!1;function Fn(e,t,n){for(n=n.child;n!==null;)Zf(e,t,n),n=n.sibling}function Zf(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Fn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?ql(e.parentNode,n):e.nodeType===1&&ql(e,n),Ti(e)):ql(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Fn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Js(n,t,a),o=o.next}while(o!==r)}Fn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){tt(n,t,d)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Fn(e,t,n),wt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iv),t.forEach(function(r){var o=pv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,d=a;e:for(;d!==null;){switch(d.tag){case 5:pt=d.stateNode,on=!1;break e;case 3:pt=d.stateNode.containerInfo,on=!0;break e;case 4:pt=d.stateNode.containerInfo,on=!0;break e}d=d.return}if(pt===null)throw Error(X(160));Zf(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(v){tt(o,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}function qf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{ki(3,e,e.return),ml(3,e)}catch($){tt(e,e.return,$)}try{ki(5,e,e.return)}catch($){tt(e,e.return,$)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{_i(o,"")}catch($){tt(e,e.return,$)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&xd(o,l),js(d,a);var v=js(d,l);for(a=0;a<h.length;a+=2){var N=h[a],_=h[a+1];N==="style"?Cd(o,_):N==="dangerouslySetInnerHTML"?Ed(o,_):N==="children"?_i(o,_):pa(o,N,_,v)}switch(d){case"input":ws(o,l);break;case"textarea":Sd(o,l);break;case"select":var C=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var B=l.value;B!=null?Lr(o,!!l.multiple,B,!1):C!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Oi]=l}catch($){tt(e,e.return,$)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch($){tt(e,e.return,$)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(t.containerInfo)}catch($){tt(e,e.return,$)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=nt())),r&4&&Dc(e);break;case 22:if(N=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(v=wt)||N,nn(t,e),wt=v):nn(t,e),yn(e),r&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!N&&e.mode&1)for(oe=e,N=e.child;N!==null;){for(_=oe=N;oe!==null;){switch(C=oe,B=C.child,C.tag){case 0:case 11:case 14:case 15:ki(4,C,C.return);break;case 1:Rr(C,C.return);var F=C.stateNode;if(typeof F.componentWillUnmount=="function"){r=C,n=C.return;try{t=r,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch($){tt(r,n,$)}}break;case 5:Rr(C,C.return);break;case 22:if(C.memoizedState!==null){Bc(_);continue}}B!==null?(B.return=C,oe=B):Bc(_)}N=N.sibling}e:for(N=null,_=e;;){if(_.tag===5){if(N===null){N=_;try{o=_.stateNode,v?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=_.stateNode,h=_.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=jd("display",a))}catch($){tt(e,e.return,$)}}}else if(_.tag===6){if(N===null)try{_.stateNode.nodeValue=v?"":_.memoizedProps}catch($){tt(e,e.return,$)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;N===_&&(N=null),_=_.return}N===_&&(N=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Dc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jf(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(_i(o,""),r.flags&=-33);var l=Oc(e);ea(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,d=Oc(e);qs(e,d,a);break;default:throw Error(X(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lv(e,t,n){oe=e,eh(e)}function eh(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var o=oe,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||xo;if(!a){var d=o.alternate,h=d!==null&&d.memoizedState!==null||wt;d=xo;var v=wt;if(xo=a,(wt=h)&&!v)for(oe=o;oe!==null;)a=oe,h=a.child,a.tag===22&&a.memoizedState!==null?$c(o):h!==null?(h.return=a,oe=h):$c(o);for(;l!==null;)oe=l,eh(l),l=l.sibling;oe=o,xo=d,wt=v}Fc(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,oe=l):Fc(e)}}function Fc(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||ml(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&kc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kc(t,a,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var N=v.memoizedState;if(N!==null){var _=N.dehydrated;_!==null&&Ti(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}wt||t.flags&512&&Zs(t)}catch(C){tt(t,t.return,C)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Bc(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function $c(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{Zs(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{Zs(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){oe=null;break}var d=t.sibling;if(d!==null){d.return=t.return,oe=d;break}oe=t.return}}var sv=Math.ceil,el=Rn.ReactCurrentDispatcher,Ga=Rn.ReactCurrentOwner,Xt=Rn.ReactCurrentBatchConfig,je=0,dt=null,ot=null,mt=0,Dt=0,zr=nr(0),st=0,Hi=null,mr=0,vl=0,Qa=0,Ei=null,Mt=null,Ya=0,Yr=1/0,jn=null,tl=!1,ta=null,bn=null,So=!1,Vn=null,nl=0,ji=0,na=null,Ao=-1,Ro=0;function jt(){return je&6?nt():Ao!==-1?Ao:Ao=nt()}function Jn(e){return e.mode&1?je&2&&mt!==0?mt&-mt:Vm.transition!==null?(Ro===0&&(Ro=Dd()),Ro):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Vd(e.type)),e):1}function un(e,t,n,r){if(50<ji)throw ji=0,na=null,Error(X(185));Vi(e,n,r),(!(je&2)||e!==dt)&&(e===dt&&(!(je&2)&&(vl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&je===0&&!(t.mode&1)&&(Yr=nt()+500,fl&&rr()))}function Rt(e,t){var n=e.callbackNode;Vp(e,t);var r=Bo(e,e===dt?mt:0);if(r===0)n!==null&&Ku(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ku(n),t===1)e.tag===0?Wm(Uc.bind(null,e)):cf(Uc.bind(null,e)),Bm(function(){!(je&6)&&rr()}),n=null;else{switch(Fd(r)){case 1:n=wa;break;case 4:n=Ld;break;case 16:n=Fo;break;case 536870912:n=Od;break;default:n=Fo}n=ah(n,th.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function th(e,t){if(Ao=-1,Ro=0,je&6)throw Error(X(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=Bo(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rl(e,r);else{t=r;var o=je;je|=2;var l=rh();(dt!==e||mt!==t)&&(jn=null,Yr=nt()+500,cr(e,t));do try{cv();break}catch(d){nh(e,d)}while(!0);Aa(),el.current=l,je=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=Ms(e),o!==0&&(r=o,t=ra(e,o))),t===1)throw n=Hi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!av(o)&&(t=rl(e,r),t===2&&(l=Ms(e),l!==0&&(r=l,t=ra(e,l))),t===1))throw n=Hi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:lr(e,Mt,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ya+500-nt(),10<t)){if(Bo(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),t);break}lr(e,Mt,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sv(r/1960))-r,10<r){e.timeoutHandle=Ds(lr.bind(null,e,Mt,jn),r);break}lr(e,Mt,jn);break;case 5:lr(e,Mt,jn);break;default:throw Error(X(329))}}}return Rt(e,nt()),e.callbackNode===n?th.bind(null,e):null}function ra(e,t){var n=Ei;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=rl(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&ia(t)),e}function ia(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function av(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Qa,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Uc(e){if(je&6)throw Error(X(327));$r();var t=Bo(e,0);if(!(t&1))return Rt(e,nt()),null;var n=rl(e,t);if(e.tag!==0&&n===2){var r=Ms(e);r!==0&&(t=r,n=ra(e,r))}if(n===1)throw n=Hi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Mt,jn),Rt(e,nt()),null}function Xa(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(Yr=nt()+500,fl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(je&6)&&$r();var t=je;je|=1;var n=Xt.transition,r=Re;try{if(Xt.transition=null,Re=1,e)return e()}finally{Re=r,Xt.transition=n,je=t,!(je&6)&&rr()}}function Ka(){Dt=zr.current,We(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Ma(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vo();break;case 3:Gr(),We(Tt),We(xt),Fa();break;case 5:Da(r);break;case 4:Gr();break;case 13:We(be);break;case 19:We(be);break;case 10:Ra(r.type._context);break;case 22:case 23:Ka()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Dt=t,st=0,Hi=null,Qa=vl=mr=0,Mt=Ei=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function nh(e,t){do{var n=ot;try{if(Aa(),Mo.current=qo,Zo){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Zo=!1}if(pr=0,ct=lt=Je=null,Si=!1,Bi=0,Ga.current=null,n===null||n.return===null){st=1,Hi=t,ot=null;break}e:{var l=e,a=n.return,d=n,h=t;if(t=mt,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var v=h,N=d,_=N.tag;if(!(N.mode&1)&&(_===0||_===11||_===15)){var C=N.alternate;C?(N.updateQueue=C.updateQueue,N.memoizedState=C.memoizedState,N.lanes=C.lanes):(N.updateQueue=null,N.memoizedState=null)}var B=Pc(a);if(B!==null){B.flags&=-257,Mc(B,a,d,l,t),B.mode&1&&_c(l,v,t),t=B,h=v;var F=t.updateQueue;if(F===null){var $=new Set;$.add(h),t.updateQueue=$}else F.add(h);break e}else{if(!(t&1)){_c(l,v,t),ba();break e}h=Error(X(426))}}else if(Ge&&d.mode&1){var he=Pc(a);if(he!==null){!(he.flags&65536)&&(he.flags|=256),Mc(he,a,d,l,t),Ia(Qr(h,d));break e}}l=h=Qr(h,d),st!==4&&(st=2),Ei===null?Ei=[l]:Ei.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=Bf(l,h,t);Sc(l,S);break e;case 1:d=h;var w=l.type,E=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(bn===null||!bn.has(E)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=$f(l,d,t);Sc(l,R);break e}}l=l.return}while(l!==null)}oh(n)}catch(Y){t=Y,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function rh(){var e=el.current;return el.current=qo,e===null?qo:e}function ba(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(vl&268435455)||Hn(dt,mt)}function rl(e,t){var n=je;je|=2;var r=rh();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{uv();break}catch(o){nh(e,o)}while(!0);if(Aa(),je=n,el.current=r,ot!==null)throw Error(X(261));return dt=null,mt=0,st}function uv(){for(;ot!==null;)ih(ot)}function cv(){for(;ot!==null&&!Lp();)ih(ot)}function ih(e){var t=sh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?oh(e):ot=t,Ga.current=null}function oh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=nv(n,t,Dt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=Re,o=Xt.transition;try{Xt.transition=null,Re=1,dv(e,t,n,r)}finally{Xt.transition=o,Re=r}return null}function dv(e,t,n,r){do $r();while(Vn!==null);if(je&6)throw Error(X(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Gp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||So||(So=!0,ah(Fo,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Xt.transition,Xt.transition=null;var a=Re;Re=1;var d=je;je|=4,Ga.current=null,ov(e,n),qf(n,e),Tm(Ls),$o=!!zs,Ls=zs=null,e.current=n,lv(n),Op(),je=d,Re=a,Xt.transition=l}else e.current=n;if(So&&(So=!1,Vn=e,nl=o),l=e.pendingLanes,l===0&&(bn=null),Bp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(tl)throw tl=!1,e=ta,ta=null,e;return nl&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===na?ji++:(ji=0,na=e):ji=0,rr(),null}function $r(){if(Vn!==null){var e=Fd(nl),t=Xt.transition,n=Re;try{if(Xt.transition=null,Re=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,nl=0,je&6)throw Error(X(331));var o=je;for(je|=4,oe=e.current;oe!==null;){var l=oe,a=l.child;if(oe.flags&16){var d=l.deletions;if(d!==null){for(var h=0;h<d.length;h++){var v=d[h];for(oe=v;oe!==null;){var N=oe;switch(N.tag){case 0:case 11:case 15:ki(8,N,l)}var _=N.child;if(_!==null)_.return=N,oe=_;else for(;oe!==null;){N=oe;var C=N.sibling,B=N.return;if(bf(N),N===v){oe=null;break}if(C!==null){C.return=B,oe=C;break}oe=B}}}var F=l.alternate;if(F!==null){var $=F.child;if($!==null){F.child=null;do{var he=$.sibling;$.sibling=null,$=he}while($!==null)}}oe=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,oe=a;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ki(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,oe=S;break e}oe=l.return}}var w=e.current;for(oe=w;oe!==null;){a=oe;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,oe=E;else e:for(a=w;oe!==null;){if(d=oe,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ml(9,d)}}catch(Y){tt(d,d.return,Y)}if(d===a){oe=null;break e}var R=d.sibling;if(R!==null){R.return=d.return,oe=R;break e}oe=d.return}}if(je=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(sl,e)}catch{}r=!0}return r}finally{Re=n,Xt.transition=t}}return!1}function Hc(e,t,n){t=Qr(n,t),t=Bf(e,t,1),e=Kn(e,t,1),t=jt(),e!==null&&(Vi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Hc(e,e,n);else for(;t!==null;){if(t.tag===3){Hc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){e=Qr(n,e),e=$f(t,e,1),t=Kn(t,e,1),e=jt(),t!==null&&(Vi(t,1,e),Rt(t,e));break}}t=t.return}}function fv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ya?cr(e,0):Qa|=n),Rt(e,t)}function lh(e,t){t===0&&(e.mode&1?(t=co,co<<=1,!(co&130023424)&&(co=4194304)):t=1);var n=jt();e=Tn(e,t),e!==null&&(Vi(e,t,n),Rt(e,n))}function hv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lh(e,n)}function pv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),lh(e,n)}var sh;sh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,tv(e,t,n);It=!!(e.flags&131072)}else It=!1,Ge&&t.flags&1048576&&df(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;To(e,t),e=t.pendingProps;var o=Hr(t,xt.current);Br(t,n),o=$a(null,t,r,e,o,n);var l=Ua();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(l=!0,Go(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,La(t),o.updater=pl,t.stateNode=o,o._reactInternals=t,Vs(t,r,e,n),t=Ys(null,t,r,!0,l,n)):(t.tag=0,Ge&&l&&Pa(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(To(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=vv(r),e=rn(r,e),o){case 0:t=Qs(null,t,r,e,n);break e;case 1:t=Ac(null,t,r,e,n);break e;case 11:t=Ic(null,t,r,e,n);break e;case 14:t=Tc(null,t,r,rn(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Qs(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ac(e,t,r,o,n);case 3:e:{if(Vf(t),e===null)throw Error(X(387));r=t.pendingProps,l=t.memoizedState,o=l.element,yf(e,t),bo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Qr(Error(X(423)),t),t=Rc(e,t,r,n,o);break e}else if(r!==o){o=Qr(Error(X(424)),t),t=Rc(e,t,r,n,o);break e}else for(Ft=Xn(t.stateNode.containerInfo.firstChild),Bt=t,Ge=!0,ln=null,n=mf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wr(),r===o){t=An(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return gf(t),e===null&&Us(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Os(r,o)?a=null:l!==null&&Os(r,l)&&(t.flags|=32),Wf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Us(t),null;case 13:return Gf(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ic(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Fe(Xo,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!Tt.current){t=An(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var d=l.dependencies;if(d!==null){a=l.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=Pn(-1,n&-n),h.tag=2;var v=l.updateQueue;if(v!==null){v=v.shared;var N=v.pending;N===null?h.next=h:(h.next=N.next,N.next=h),v.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Hs(l.return,n,t),d.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(X(341));a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Hs(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Br(t,n),o=Kt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),Tc(e,t,r,o,n);case 15:return Uf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),To(e,t),t.tag=1,At(r)?(e=!0,Go(t)):e=!1,Br(t,n),Ff(t,r,o),Vs(t,r,o,n),Ys(null,t,r,!0,e,n);case 19:return Qf(e,t,n);case 22:return Hf(e,t,n)}throw Error(X(156,t.tag))};function ah(e,t){return zd(e,t)}function mv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,r){return new mv(e,t,n,r)}function Ja(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vv(e){if(typeof e=="function")return Ja(e)?1:0;if(e!=null){if(e=e.$$typeof,e===va)return 11;if(e===ya)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Ja(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case ma:a=8,o|=8;break;case ps:return e=Yt(12,n,t,o|2),e.elementType=ps,e.lanes=l,e;case ms:return e=Yt(13,n,t,o),e.elementType=ms,e.lanes=l,e;case vs:return e=Yt(19,n,t,o),e.elementType=vs,e.lanes=l,e;case yd:return yl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case md:a=10;break e;case vd:a=9;break e;case va:a=11;break e;case ya:a=14;break e;case Bn:a=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Yt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Yt(7,e,r,t),e.lanes=n,e}function yl(e,t,n,r){return e=Yt(22,e,r,t),e.elementType=yd,e.lanes=n,e.stateNode={isHidden:!1},e}function ss(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function as(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Za(e,t,n,r,o,l,a,d,h){return e=new yv(e,t,n,d,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Yt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(l),e}function gv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uh(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(At(n))return uf(e,n,t)}return t}function ch(e,t,n,r,o,l,a,d,h){return e=Za(n,r,!0,e,o,l,a,d,h),e.context=uh(null),n=e.current,r=jt(),o=Jn(n),l=Pn(r,o),l.callback=t??null,Kn(n,l,o),e.current.lanes=o,Vi(e,o,r),Rt(e,r),e}function gl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=uh(n),t.context===null?t.context=n:t.pendingContext=n,t=Pn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(o,t,a),e!==null&&(un(e,o,a,l),Po(e,o,a)),a}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qa(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}function wv(){return null}var dh=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}wl.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));gl(e,t,null,null)};wl.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){gl(null,e,null,null)}),t[In]=null}};function wl(e){this._internalRoot=e}wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ud();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Wd(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vc(){}function xv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var v=il(a);l.call(v)}}var a=ch(t,r,e,0,null,!1,!1,"",Vc);return e._reactRootContainer=a,e[In]=a.current,zi(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var d=r;r=function(){var v=il(h);d.call(v)}}var h=Za(e,0,!1,null,null,!1,!1,"",Vc);return e._reactRootContainer=h,e[In]=h.current,zi(e.nodeType===8?e.parentNode:e),vr(function(){gl(t,h,n,r)}),h}function Sl(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var d=o;o=function(){var h=il(a);d.call(h)}}gl(t,a,e,o)}else a=xv(n,t,e,o,r);return il(a)}Bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pi(t.pendingLanes);n!==0&&(xa(t,n|1),Rt(t,nt()),!(je&6)&&(Yr=nt()+500,rr()))}break;case 13:vr(function(){var r=Tn(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),qa(e,1)}};Sa=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}qa(e,134217728)}};$d=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=jt();un(n,e,t,r)}qa(e,t)}};Ud=function(){return Re};Hd=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Ns=function(e,t,n){switch(t){case"input":if(ws(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=dl(r);if(!o)throw Error(X(90));wd(r),ws(r,o)}}}break;case"textarea":Sd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Pd=Xa;Md=vr;var Sv={usingClientEntryPoint:!1,Events:[Qi,Pr,dl,Nd,_d,Xa]},ci={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kv={bundleType:ci.bundleType,version:ci.version,rendererPackageName:ci.rendererPackageName,rendererConfig:ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ad(e),e===null?null:e.stateNode},findFiberByHostInstance:ci.findFiberByHostInstance||wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{sl=ko.inject(kv),kn=ko}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sv;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(t))throw Error(X(200));return gv(e,t,null,n)};Ut.createRoot=function(e,t){if(!tu(e))throw Error(X(299));var n=!1,r="",o=dh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Za(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,zi(e.nodeType===8?e.parentNode:e),new eu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Ad(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!xl(t))throw Error(X(200));return Sl(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=dh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ch(t,null,e,1,n??null,o,!1,l,a),e[In]=t.current,zi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new wl(t)};Ut.render=function(e,t,n){if(!xl(t))throw Error(X(200));return Sl(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!xl(e))throw Error(X(40));return e._reactRootContainer?(vr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Ut.unstable_batchedUpdates=Xa;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xl(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Sl(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fh)}catch(e){console.error(e)}}fh(),dd.exports=Ut;var Ev=dd.exports,Gc=Ev;fs.createRoot=Gc.createRoot,fs.hydrateRoot=Gc.hydrateRoot;function jv({onStart:e}){const[t,n]=P.useState("1"),[r,o]=P.useState("individual"),[l,a]=P.useState("15"),d=()=>{if(!t||!l){alert("Please fill in all fields");return}const v={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(v)},h=()=>{window.close()};return f.jsx("div",{className:"dialog-overlay",children:f.jsxs("div",{className:"dialog-box",children:[f.jsx("h2",{children:"The Creative Game"}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"ID:"}),f.jsx("input",{type:"text",value:t,onChange:v=>n(v.target.value)})]}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"Condition:"}),f.jsxs("select",{value:r,onChange:v=>o(v.target.value),children:[f.jsx("option",{value:"individual",children:"individual"}),f.jsx("option",{value:"group",children:"group"})]})]}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"Time (in minutes):"}),f.jsx("input",{type:"number",value:l,onChange:v=>a(v.target.value),min:"1"})]}),f.jsxs("div",{className:"dialog-buttons",children:[f.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),f.jsx("button",{className:"dialog-button ok",onClick:d,children:"OK"}),f.jsx("button",{className:"dialog-button cancel",onClick:h,children:"Cancel"})]})]})})}class Qc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}downloadCSV(){const t=[this.header.join(",")];this.logs.forEach(v=>{const N=this.header.map(_=>{const C=v[_];return C==null||C===""?"":Array.isArray(C)||typeof C=="object"?`"${JSON.stringify(C).replace(/"/g,'""')}"`:`"${String(C).replace(/"/g,'""')}"`});t.push(N.join(","))});const n=t.join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(r),d=new Date().toISOString().replace("T"," ").substring(0,19);o.setAttribute("href",l);const h=this.sessionId&&this.sessionId!==this.subjectId?`_${this.sessionId}`:"";o.setAttribute("download",`${this.subjectId}${h} (${d}).csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}clear(){this.logs=[]}}const Cv=.035,Nv=()=>{var e,t;try{return((t=(e=import.meta)==null?void 0:e.env)==null?void 0:t.VITE_API_BASE_URL)||"http://localhost:4000/api"}catch{return console.warn("[GameTracker] Unable to read VITE_API_BASE_URL, falling back to default."),"http://localhost:4000/api"}};class _v{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=Nv(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var n;this.sessionInfo={...t,startedAt:((n=this.sessionInfo)==null?void 0:n.startedAt)||new Date(this.startTime).toISOString()},await this.initializeSession()}async initializeSession(){var n;if(this.sessionInitialized||!((n=this.sessionInfo)!=null&&n.sessionGameId))return;const t={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,metadata:{config:this.sessionInfo}};try{const r=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const l=(await r.json().catch(()=>({}))).message||`Failed to initialize session (${r.status})`;throw r.status===409?(alert(` Session ID Conflict

${l}

Please choose a different Session ID.`),this.stop(),new Error(l)):new Error(l)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(r){throw console.error("[GameTracker] Failed to initialize session:",r),r}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/Cv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),d=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(C=>this.relativeToGrid(C)):null),v={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:d,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:d,grid_all_positions:h};(r||t.camera_frame)&&(v.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(v.gallery_shape_number=t.gallery_shape_number,v.gallery=t.gallery,v.gallery_normalized=t.gallery_normalized,v.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(C=>this.relativeToGrid(C)):null),v.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(C=>this.relativeToGrid(C)):null)),this.moves.push(v),this.persistMove(v).catch(C=>{console.error("[GameTracker] Failed to persist move to server:",C)});const N=this.getCurrentBraceletStatus(),_=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:d,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:N,lastKnownPlayer:_,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(C=>({status:C.status,elapsed:C.elapsed.toFixed(2)}))}})}async persistMove(t){var n;if(!(!this.sessionInitialized||!((n=this.sessionInfo)!=null&&n.sessionGameId)))try{const r=await fetch(`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to persist move (${r.status})`)}catch(r){throw console.error("[GameTracker] persistMove error:",r),r}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(d=>d.timestamp>=o&&d.timestamp<=l);if(a.length>0){const d={};a.forEach(v=>{(v.status==="Player A"||v.status==="Player B")&&(d[v.status]=(d[v.status]||0)+1)});const h=Object.keys(d).reduce((v,N)=>d[v]>d[N]?v:N,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}downloadJSON(){var a,d;const t=this.exportToJSON(),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r;const l=((a=this.sessionInfo)==null?void 0:a.sessionGameId)||((d=this.sessionInfo)==null?void 0:d.id)||"game_session";o.download=`${l}_${new Date().toISOString().split("T")[0]}_${Date.now()}.json`,o.click(),URL.revokeObjectURL(r)}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let us=null;const oa=()=>(us||(us=new _v),us),sn=.07,Ci=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Ke=e=>Math.round(e*1e3)/1e3,Pv=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Ke(l.position[0]-sn),Ke(l.position[1])],[Ke(l.position[0]+sn),Ke(l.position[1])],[Ke(l.position[0]),Ke(l.position[1]-sn)],[Ke(l.position[0]),Ke(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Mv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},la=e=>e.map(t=>{const n=[],r=[[Ke(t.position[0]-sn),Ke(t.position[1])],[Ke(t.position[0]+sn),Ke(t.position[1])],[Ke(t.position[0]),Ke(t.position[1]-sn)],[Ke(t.position[0]),Ke(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Ke(o.position[0])===l[0]&&Ke(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Iv=e=>{const t=new Set;if(e.forEach((a,d)=>{a.forEach((h,v)=>{h&&t.add(`${d},${v}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,d]=l.shift(),h=`${a},${d}`;o.has(h)||(o.add(h),n.forEach(([v,N])=>{const _=`${a+v},${d+N}`;t.has(_)&&!o.has(_)&&l.push([a+v,d+N])}))}return o.size===t.size},Tv=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Ke(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Ke(l));for(let l=0;l<=.77;l+=sn)r.push(Ke(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const d=n.findIndex(v=>Math.abs(v-l[0])<.001),h=r.findIndex(v=>Math.abs(v-l[1])<.001);d!==-1&&h!==-1&&(o[h][d]=!0)}}),Iv(o)},sa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=Tv(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},Yc=e=>{if(e.length===0)return null;try{const t=e.map(N=>N[0]),n=e.map(N=>N[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(N=>{const _=Math.sqrt(Math.pow(N[0]-r,2)+Math.pow(N[1]-o,2));_<l&&(l=_,a=N)});const d=-a[0],h=-a[1],v=e.map(N=>[Ke(N[0]+d),Ke(N[1]+h)]);return v.sort((N,_)=>N[0]-_[0]||N[1]-_[1]),v}catch{return null}},Av=60,Xc=.07,cs=120;function Rv({config:e,interfaceHidden:t=!1}){const[n,r]=P.useState(Ci()),[o,l]=P.useState(null),[a,d]=P.useState({x:0,y:0}),[h,v]=P.useState(!0),[N,_]=P.useState(e.timeSeconds),[C,B]=P.useState(0),[F,$]=P.useState(null),[he,S]=P.useState(!0),[w,E]=P.useState(""),[R,Y]=P.useState({blockSize:Av,bottomPadding:cs}),M=P.useRef(null),U=P.useRef(new Qc(e)),z=P.useRef(oa()),Z=P.useRef(null),Q=P.useRef(Date.now()),ue=P.useRef(cs),ze=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,Pe=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,Ce="The experiment is done. Thank you very much for your participation!",Qe=P.useCallback(()=>{const O=M.current;if(!O)return;const W=O.offsetWidth,K=O.offsetHeight;if(!W||!K)return;const ae=ue.current||cs;let q=Math.max(1,Math.min(W,K-ae)),ie=Math.max(38,Math.min(q*Xc*.95,q/4)),D=Math.max(ie*2.5,110);q=Math.max(1,Math.min(W,K-D)),ie=Math.max(38,Math.min(q*Xc*.95,q/4)),D=Math.max(ie*2.5,110),ue.current=D,Y(y=>{const T=Math.abs(y.blockSize-ie),j=Math.abs(y.bottomPadding-D);return T<.5&&j<.5?y:{blockSize:ie,bottomPadding:D}})},[]);P.useEffect(()=>(E(ze),(async()=>{try{z.current.start(),await z.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(W){console.error("[GameCanvas] Failed to initialize tracker:",W),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),()=>{z.current.stop()}),[]),P.useEffect(()=>{Qe()},[Qe,t]),P.useEffect(()=>{const O=()=>{Qe()};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[Qe]),P.useEffect(()=>{if(!h&&N>0){const O=setInterval(()=>{_(W=>W<=1?(clearInterval(O),S(!0),E(Ce),setTimeout(()=>{U.current.downloadCSV(),z.current.downloadJSON()},1e3),0):W-1)},1e3);return()=>clearInterval(O)}},[h,N]),P.useEffect(()=>{r(O=>sa(la(O),h))},[h]);const Ve=()=>(Date.now()-Q.current)/1e3,Ie=(O,W)=>{const K=M.current;if(!K)return 0;const ae=K.offsetHeight-ue.current,q=Math.min(K.offsetWidth,ae),ie=W==="x"?(K.offsetWidth-q)/2:(K.offsetHeight-ue.current-q)/2;return(O-ie)/q-.5},b=(O,W)=>{const K=M.current;if(!K)return 0;const ae=K.offsetHeight-ue.current,q=Math.min(K.offsetWidth,ae),ie=W==="x"?(K.offsetWidth-q)/2:(K.offsetHeight-ue.current-q)/2;return(O+.5)*q+ie},le=O=>{var q,ie,D,y;const W=M.current.getBoundingClientRect(),K=O.clientX!==void 0?O.clientX:(ie=(q=O.touches)==null?void 0:q[0])==null?void 0:ie.clientX,ae=O.clientY!==void 0?O.clientY:(y=(D=O.touches)==null?void 0:D[0])==null?void 0:y.clientY;return{x:K-W.left,y:ae-W.top}},se=(O,W)=>{const K=n.find(D=>D.id===W);if(!K||!K.canMove)return;O.preventDefault();const ae=le(O),q=b(K.position[0],"x"),ie=b(K.position[1],"y");Z.current=Date.now(),l(W),d({x:ae.x-q,y:ae.y-ie})},ve=O=>{if(o===null)return;O.preventDefault();const W=le(O),K=Ie(W.x-a.x,"x"),ae=Ie(W.y-a.y,"y");r(q=>q.map(ie=>ie.id===o?{...ie,position:[K,ae]}:ie))},we=()=>{try{const O=window.braceletDetectorCanvas,W=window.braceletDetectorVideo;let K=null;if(O&&O.width>0&&O.height>0?K=O:W&&W.videoWidth>0&&W.videoHeight>0&&(K=W),!K)return console.warn("[GameCanvas] No camera source available for frame capture"),null;const ae=document.createElement("canvas"),q=640,ie=480;let D=K.videoWidth||K.width,y=K.videoHeight||K.height;const T=D/y;return D>q&&(D=q,y=D/T),y>ie&&(y=ie,D=y*T),ae.width=Math.floor(D),ae.height=Math.floor(y),ae.getContext("2d").drawImage(K,0,0,ae.width,ae.height),ae.toDataURL("image/jpeg",.6)}catch(O){return console.error("[GameCanvas] Error capturing camera frame:",O),null}},Ye=()=>{if(o===null)return;const O=n.find(T=>T.id===o),W=Pv(n,o),K=Mv(W,O.position),ae=Z.current?(Date.now()-Z.current)/1e3:0,q=n.map(T=>T.id===o?{...T,position:K}:T),ie=we(),D=window.currentBraceletStatus||"Unknown",y={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:Ve(),unit:o,end_position:K,all_positions:q.map(T=>T.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:ie,player:D};U.current.write(y),z.current.recordMove(y,ae,ie),r(T=>{const j=T.map(x=>x.id===o?{...x,position:K}:x);return sa(la(j),h)}),l(null),Z.current=null},Oe=()=>{const O=n.map(y=>y.position),W=Yc(O),K=C+1,ae=we(),q=window.currentBraceletStatus||"Unknown",ie={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:Ve(),unit:null,end_position:null,all_positions:null,gallery_shape_number:K,gallery:O,gallery_normalized:W,camera_frame:ae,player:q};U.current.write(ie),z.current.recordMove(ie,0,ae);const D=Le();$(D),B(K)},Le=()=>{const O=document.createElement("canvas");O.width=400,O.height=400;const W=O.getContext("2d");W.fillStyle="#000",W.fillRect(0,0,400,400);const K=n.map(q=>q.position),ae=Yc(K);return ae&&ae.forEach(q=>{const ie=(q[0]+.5)*400,D=(q[1]+.5)*400;W.fillStyle="green",W.fillRect(ie-15,D-15,30,30)}),O.toDataURL()},Te=P.useCallback(O=>{O.key==="p"&&h?(v(!1),S(!0),E(Pe),Q.current=Date.now(),r(Ci()),$(null),B(0),U.current=new Qc(e),z.current.stop(),z.current=oa(),z.current.start(),z.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):O.key==="q"&&!h&&(S(!0),E(Ce),setTimeout(()=>{U.current.downloadCSV(),z.current.downloadJSON()},1e3))},[h,e.id]);P.useEffect(()=>(window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)),[Te]);const V=()=>{if(!h&&w===Pe)try{const O=new(window.AudioContext||window.webkitAudioContext),W=O.createOscillator(),K=O.createGain();W.connect(K),K.connect(O.destination),W.frequency.setValueAtTime(800,O.currentTime),W.frequency.setValueAtTime(600,O.currentTime+.15),K.gain.setValueAtTime(.3,O.currentTime),K.gain.exponentialRampToValueAtTime(.01,O.currentTime+.3),W.start(O.currentTime),W.stop(O.currentTime+.3),console.log("[GameCanvas]  Playing start sound - Real experiment begins!")}catch(O){console.error("[GameCanvas] Error playing sound:",O)}S(!1)},ne=O=>{O.preventDefault()};return f.jsxs("div",{className:"game-canvas",ref:M,style:{"--block-size":`${R.blockSize}px`,"--bottom-padding":`${R.bottomPadding}px`},onMouseMove:ve,onMouseUp:Ye,onMouseLeave:Ye,onTouchMove:ve,onTouchEnd:Ye,onTouchCancel:Ye,onContextMenu:ne,children:[f.jsx("div",{className:"gallery",onClick:Oe,children:f.jsx("div",{className:"gallery-frame",children:F?f.jsx("img",{src:F,alt:"Gallery",className:"gallery-image"}):f.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&f.jsxs("div",{className:"timer",children:["Time: ",Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]}),n.map(O=>f.jsx("div",{className:`block ${O.canMove?"movable":""}`,style:{left:`${b(O.position[0],"x")}px`,top:`${b(O.position[1],"y")}px`,backgroundColor:O.color||"green",cursor:O.canMove?"grab":"default"},onMouseDown:W=>se(W,O.id),onTouchStart:W=>se(W,O.id)},O.id)),he&&f.jsx("div",{className:"message-overlay",onClick:V,children:f.jsxs("div",{className:"message-box",children:[w,f.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var ol={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var p=i[c];if(!(p in u))break e;u=u[p]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(g||"")+"_"+p++,g)}function u(g,m){this.h=g,n(this,"description",{configurable:!0,writable:!0,value:m})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",p=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function d(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=d(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var v=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(i[p]=c[p])}return i};l("Object.assign",function(i){return i||v});var N=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},_;if(typeof Object.setPrototypeOf=="function")_=Object.setPrototypeOf;else{var C;e:{var B={a:!0},F={};try{F.__proto__=B,C=F.a;break e}catch{}C=!1}_=C?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var $=_;function he(i,s){if(i.prototype=N(s.prototype),i.prototype.constructor=i,$)$(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}S.prototype.u=function(i){this.i=i};function E(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}S.prototype.return=function(i){this.l={return:i},this.h=this.v};function R(i,s,u){return i.h=u,{value:s}}function Y(i){this.h=new S,this.i=i}function M(i,s){w(i.h);var u=i.h.j;return u?U(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),z(i))}function U(i,s,u,c){try{var p=s.call(i.h.j,u);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return i.h.m=!1,p;var g=p.value}catch(m){return i.h.j=null,E(i.h,m),z(i)}return i.h.j=null,c.call(i.h,g),z(i)}function z(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,E(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function Z(i){this.next=function(s){return w(i.h),i.h.j?s=U(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=z(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=U(i,i.h.j.throw,s,i.h.u):(E(i.h,s),s=z(i)),s},this.return=function(s){return M(i,s)},this[Symbol.iterator]=function(){return this}}function Q(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,p){function g(m){m.done?c(m.value):Promise.resolve(m.value).then(s,u).then(g,p)}g(i.next())})}function ue(i){return Q(new Z(new Y(i)))}l("Promise",function(i){function s(m){this.i=0,this.j=void 0,this.h=[],this.u=!1;var k=this.l();try{m(k.resolve,k.reject)}catch(A){k.reject(A)}}function u(){this.h=null}function c(m){return m instanceof s?m:new s(function(k){k(m)})}if(i)return i;u.prototype.i=function(m){if(this.h==null){this.h=[];var k=this;this.j(function(){k.m()})}this.h.push(m)};var p=o.setTimeout;u.prototype.j=function(m){p(m,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var m=this.h;this.h=[];for(var k=0;k<m.length;++k){var A=m[k];m[k]=null;try{A()}catch(G){this.l(G)}}}this.h=null},u.prototype.l=function(m){this.j(function(){throw m})},s.prototype.l=function(){function m(G){return function(J){A||(A=!0,G.call(k,J))}}var k=this,A=!1;return{resolve:m(this.I),reject:m(this.m)}},s.prototype.I=function(m){if(m===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(m instanceof s)this.L(m);else{e:switch(typeof m){case"object":var k=m!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.F(m):this.s(m)}},s.prototype.F=function(m){var k=void 0;try{k=m.then}catch(A){this.m(A);return}typeof k=="function"?this.M(k,m):this.s(m)},s.prototype.m=function(m){this.v(2,m)},s.prototype.s=function(m){this.v(1,m)},s.prototype.v=function(m,k){if(this.i!=0)throw Error("Cannot settle("+m+", "+k+"): Promise already settled in state"+this.i);this.i=m,this.j=k,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var m=this;p(function(){if(m.D()){var k=o.console;typeof k<"u"&&k.error(m.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var m=o.CustomEvent,k=o.Event,A=o.dispatchEvent;return typeof A>"u"?!0:(typeof m=="function"?m=new m("unhandledrejection",{cancelable:!0}):typeof k=="function"?m=new k("unhandledrejection",{cancelable:!0}):(m=o.document.createEvent("CustomEvent"),m.initCustomEvent("unhandledrejection",!1,!0,m)),m.promise=this,m.reason=this.j,A(m))},s.prototype.H=function(){if(this.h!=null){for(var m=0;m<this.h.length;++m)g.i(this.h[m]);this.h=null}};var g=new u;return s.prototype.L=function(m){var k=this.l();m.T(k.resolve,k.reject)},s.prototype.M=function(m,k){var A=this.l();try{m.call(k,A.resolve,A.reject)}catch(G){A.reject(G)}},s.prototype.then=function(m,k){function A(ce,te){return typeof ce=="function"?function(me){try{G(ce(me))}catch(ge){J(ge)}}:te}var G,J,pe=new s(function(ce,te){G=ce,J=te});return this.T(A(m,G),A(k,J)),pe},s.prototype.catch=function(m){return this.then(void 0,m)},s.prototype.T=function(m,k){function A(){switch(G.i){case 1:m(G.j);break;case 2:k(G.j);break;default:throw Error("Unexpected state: "+G.i)}}var G=this;this.h==null?g.i(A):this.h.push(A),this.u=!0},s.resolve=c,s.reject=function(m){return new s(function(k,A){A(m)})},s.race=function(m){return new s(function(k,A){for(var G=d(m),J=G.next();!J.done;J=G.next())c(J.value).T(k,A)})},s.all=function(m){var k=d(m),A=k.next();return A.done?c([]):new s(function(G,J){function pe(me){return function(ge){ce[me]=ge,te--,te==0&&G(ce)}}var ce=[],te=0;do ce.push(void 0),te++,c(A.value).T(pe(ce.length-1),J),A=k.next();while(!A.done)})},s});function ze(i,s){i instanceof String&&(i+="");var u=0,c=!1,p={next:function(){if(!c&&u<i.length){var g=u++;return{value:s(g,i[g]),done:!1}}return c=!0,{done:!0,value:void 0}}};return p[Symbol.iterator]=function(){return p},p}l("Array.prototype.keys",function(i){return i||function(){return ze(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var p=this.length||0;for(0>u&&(u=Math.max(0,p+u)),(c==null||c>p)&&(c=p),c=Number(c),0>c&&(c=Math.max(0,p+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function Pe(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",Pe),l("Uint8Array.prototype.fill",Pe),l("Uint8ClampedArray.prototype.fill",Pe),l("Int16Array.prototype.fill",Pe),l("Uint16Array.prototype.fill",Pe),l("Int32Array.prototype.fill",Pe),l("Uint32Array.prototype.fill",Pe),l("Float32Array.prototype.fill",Pe),l("Float64Array.prototype.fill",Pe),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var p=c.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var g=c[u];if(g===s||Object.is(g,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var Ce=this||self;function Qe(i,s){i=i.split(".");var u=Ce;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function Ve(i){var s;e:{if((s=Ce.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var Ie=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),p=typeof i=="string"?i.split(""):i,g=0;g<u;g++)g in p&&(c[g]=s.call(void 0,p[g],g,i));return c},b={},le=null;function se(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),p=0;return ve(i,function(g){c[p++]=g}),p!==u?c.subarray(0,p):c}function ve(i,s){function u(A){for(;c<i.length;){var G=i.charAt(c++),J=le[G];if(J!=null)return J;if(!/^[\s\xa0]*$/.test(G))throw Error("Unknown base64 encoding at char: "+G)}return A}we();for(var c=0;;){var p=u(-1),g=u(0),m=u(64),k=u(64);if(k===64&&p===-1)break;s(p<<2|g>>4),m!=64&&(s(g<<4&240|m>>2),k!=64&&s(m<<6&192|k))}}function we(){if(!le){le={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));b[u]=c;for(var p=0;p<c.length;p++){var g=c[p];le[g]===void 0&&(le[g]=p)}}}}var Ye=typeof Uint8Array<"u",Oe=!(Ve("Trident")||Ve("MSIE"))&&typeof Ce.btoa=="function";function Le(i){if(!Oe){var s;s===void 0&&(s=0),we(),s=b[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",p=0,g=0;p<i.length-2;p+=3){var m=i[p],k=i[p+1],A=i[p+2],G=s[m>>2];m=s[(m&3)<<4|k>>4],k=s[(k&15)<<2|A>>6],A=s[A&63],u[g++]=G+m+k+A}switch(G=0,A=c,i.length-p){case 2:G=i[p+1],A=s[(G&15)<<2]||c;case 1:i=i[p],u[g]=s[i>>2]+s[(i&3)<<4|G>>4]+A+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var Te=RegExp("[-_.]","g");function V(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function ne(i){if(!Oe)return se(i);Te.test(i)&&(i=i.replace(Te,V)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var O;function W(){return O||(O=new Uint8Array(0))}var K={},ae=typeof Uint8Array.prototype.slice=="function",q=0,ie=0;function D(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=d(T(u,i)),s=u.next().value,i=u.next().value,u=s),q=u>>>0,ie=i>>>0}var y=typeof BigInt=="function";function T(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function j(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return I||(I=new j(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)D(Number(i));else if(y)i=BigInt(i),q=Number(i&BigInt(4294967295))>>>0,ie=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");ie=q=0;for(var u=i.length,c=s,p=(u-s)%6+s;p<=u;c=p,p+=6)c=Number(i.slice(c,p)),ie*=1e6,q=1e6*q+c,4294967296<=q&&(ie+=q/4294967296|0,q%=4294967296);s&&(s=d(T(q,ie)),i=s.next().value,s=s.next().value,q=i,ie=s)}return new j(q,ie)}var I;function L(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function H(){return Error("Failed to read varint, encoding is invalid.")}function ee(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function re(){throw Error("Invalid UTF8")}function de(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var fe=void 0,xe,Me=typeof TextDecoder<"u",Ae,Be=typeof TextEncoder<"u",$e;function ke(i){if(i!==K)throw Error("illegal external caller")}function ye(i,s){if(ke(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function Ee(){return $e||($e=new ye(null,K))}function Ne(i){ke(K);var s=i.V;return s=s==null||Ye&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?ne(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:ne(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===ye)return{buffer:Ne(i)||W(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Xe(this,i,s)}function Xe(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw ee(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],p=c&127;if(c&128&&(c=s[u++],p|=(c&127)<<7,c&128&&(c=s[u++],p|=(c&127)<<14,c&128&&(c=s[u++],p|=(c&127)<<21,c&128&&(c=s[u++],p|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw H();return at(i,u),p}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw ee(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Xe(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw L(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw H()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw L(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Xi(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,Ne(s[u])||W())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Jr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function kl(i){return fn(i,1),i}function ph(i,s){hn(s,(i|0)&-51)}function Ki(i,s){hn(s,(i|18)&-41)}var El={};function bi(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var Zr,nu=[];hn(nu,23),Zr=Object.freeze(nu);function jl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Cl(i){var s=i.length;(s=s?i[s-1]:void 0)&&bi(s)?s.g=1:(s={},i.push((s.g=1,s)))}function ru(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){jl(i),qr(i,s,u,c)}function qr(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?ru(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Nl(i,s,u,c){var p=en(i,s);Array.isArray(p)||(p=Zr);var g=qe(p);if(g&1||kl(p),c)g&2||fn(p,2),u&1||Object.freeze(p);else{c=!(u&2);var m=g&2;u&1||!m?c&&g&16&&!m&&Jr(p,16):(p=kl(Array.prototype.slice.call(p)),qr(i,s,p))}return p}function _l(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&qr(i,s,c),c}function iu(i,s,u,c,p){i.h||(i.h={});var g=i.h[u],m=Nl(i,u,3,p);if(!g){var k=m;g=[];var A=!!(qe(i.o)&16);m=!!(qe(k)&2);var G=k;!p&&m&&(k=Array.prototype.slice.call(k));for(var J=m,pe=0;pe<k.length;pe++){var ce=k[pe],te=s,me=!1;if(me=me===void 0?!1:me,ce=Array.isArray(ce)?new te(ce):me?new te:void 0,ce!==void 0){te=ce.o;var ge=me=qe(te);m&&(ge|=2),A&&(ge|=16),ge!=me&&hn(te,ge),te=ge,J=J||!!(2&te),g.push(ce)}}return i.h[u]=g,A=qe(k),s=A|33,s=J?s&-9:s|8,A!=s&&(J=k,Object.isFrozen(J)&&(J=Array.prototype.slice.call(J)),hn(J,s),k=J),G!==k&&qr(i,u,k),(p||c&&m)&&fn(g,2),c&&Object.freeze(g),g}return p||(p=Object.isFrozen(g),c&&!p?Object.freeze(g):!c&&p&&(g=Array.prototype.slice.call(g),i.h[u]=g)),g}function Ji(i,s,u){var c=!!(qe(i.o)&2);if(s=iu(i,s,u,c,c),i=Nl(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var p=cu(u,!1);p.j=u}else p=u;u!==p&&(s[c]=p,i[c]=p.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function ou(i,s,u,c,p){jl(i);var g=iu(i,u,s,!1,!1);return u=c??new u,i=Nl(i,s,2,!1),p!=null?(g.splice(p,0,u),i.splice(p,0,u.o)):(g.push(u),i.push(u.o)),u.C()&&Jr(i,8),u}function Zi(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,Zi(_l(i,s),u)}var qi;function mh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Cl(i),i}else{if(Ye&&i!=null&&i instanceof Uint8Array)return Le(i);if(i instanceof ye){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=Le(s)}}}return i}function lu(i,s,u,c){if(i!=null){if(Array.isArray(i))i=Pl(i,s,u,c!==void 0);else if(bi(i)){var p={},g;for(g in i)p[g]=lu(i[g],s,u,c);i=p}else i=s(i,c);return i}}function Pl(i,s,u,c){var p=qe(i);c=c?!!(p&16):void 0,i=Array.prototype.slice.call(i);for(var g=0;g<i.length;g++)i[g]=lu(i[g],s,u,c);return u(p,i),i}function vh(i){return i.ja===El?i.toJSON():mh(i)}function yh(i,s){i&128&&Cl(s)}function su(i,s,u){if(u=u===void 0?Ki:u,i!=null){if(Ye&&i instanceof Uint8Array)return i.length?new ye(new Uint8Array(i),K):Ee();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=Pl(i,su,c&4?Ki:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===El?uu(i):i}}function au(i,s,u,c,p,g,m){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(g=Ie(i,uu),Ki(c,g),Object.freeze(g),c=g),jl(s),m=c==null?Zr:kl([]),c!=null){for(g=!!c.length,i=0;i<c.length;i++){var k=c[i];g=g&&!(qe(k.o)&2),m[i]=k.o}g=(g?8:0)|1,i=qe(m),(i&g)!==g&&(Object.isFrozen(m)&&(m=Array.prototype.slice.call(m)),hn(m,i|g)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);qr(s,u,m,p)}else pn(s,u,su(c,g,m),p)}function uu(i){return qe(i.o)&2||(i=cu(i,!0),fn(i.o,2)),i}function cu(i,s){var u=i.o,c=[];fn(c,16);var p=i.constructor.h;if(p&&c.push(p),p=i.B,p){c.length=u.length,c.fill(void 0,c.length,u.length);var g={};c[c.length-1]=g}qe(u)&128&&Cl(c),s=s||i.C()?Ki:ph,g=i.constructor,qi=c,c=new g(c),qi=void 0,i.R&&(c.R=i.R.slice()),g=!!(qe(u)&16);for(var m=p?u.length-1:u.length,k=0;k<m;k++)au(i,c,k-i.G,u[k],!1,g,s);if(p)for(var A in p)au(i,c,+A,p[A],!0,g,s);return c}function _t(i,s,u){i==null&&(i=qi),qi=void 0;var c=this.constructor.i||0,p=0<c,g=this.constructor.h,m=!1;if(i==null){i=g?[g]:[];var k=48,A=!0;p&&(c=0,k|=128),hn(i,k)}else{if(!Array.isArray(i)||g&&g!==i[0])throw Error();var G=k=fn(i,0);if((A=(16&G)!==0)&&((m=(32&G)!==0)||(G|=32)),p){if(128&G)c=0;else if(0<i.length){var J=i[i.length-1];if(bi(J)&&"g"in J){c=0,G|=128,delete J.g;var pe=!0,ce;for(ce in J){pe=!1;break}pe&&i.pop()}}}else if(128&G)throw Error();k!==G&&hn(i,G)}this.G=(g?0:-1)-c,this.h=void 0,this.o=i;e:{if(g=this.o.length,c=g-1,g&&(g=this.o[c],bi(g))){this.B=g,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!p&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=A&&!m&&!0,p=this.i;var te;for(A=0;A<u.length;A++)m=u[A],m<p?(m+=this.G,(c=i[m])?du(c,s):i[m]=Zr):(te||(te=ru(this)),(c=te[m])?du(c,s):te[m]=Zr)}}_t.prototype.toJSON=function(){return Pl(this.o,vh,yh)},_t.prototype.C=function(){return!!(qe(this.o)&2)};function du(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}_t.prototype.ja=El,_t.prototype.toString=function(){return this.o.toString()};function fu(i,s,u){if(u){var c={},p;for(p in u){var g=u[p],m=g.qa;m||(c.J=g.wa||g.oa.W,g.ia?(c.aa=yu(g.ia),m=function(k){return function(A,G,J){return k.J(A,G,J,k.aa)}}(c)):g.ka?(c.Z=gu(g.da.P,g.ka),m=function(k){return function(A,G,J){return k.J(A,G,J,k.Z)}}(c)):m=c.J,g.qa=m),m(s,i,g.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Xi(s,i)}var eo=Symbol();function hu(i,s,u){return i[eo]||(i[eo]=function(c,p){return s(c,p,u)})}function pu(i){var s=i[eo];if(!s){var u=Il(i);s=function(c,p){return wu(c,p,u)},i[eo]=s}return s}function gh(i){var s=i.ia;if(s)return pu(s);if(s=i.va)return hu(i.da.P,s,i.ka)}function wh(i){var s=gh(i),u=i.da,c=i.oa.U;return s?function(p,g){return c(p,g,u,s)}:function(p,g){return c(p,g,u)}}function mu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ti in u||ei in u||0<u.length&&typeof u[0]=="function")?u:void 0}function vu(i,s,u,c,p,g){s.P=i[0];var m=1;if(i.length>m&&typeof i[m]!="number"){var k=i[m++];u(s,k)}for(;m<i.length;){u=i[m++];for(var A=m+1;A<i.length&&typeof i[A]!="number";)A++;switch(k=i[m++],A-=m,A){case 0:c(s,u,k);break;case 1:(A=mu(i,m))?(m++,p(s,u,k,A)):c(s,u,k,i[m++]);break;case 2:A=m++,A=mu(i,A),p(s,u,k,A,i[m++]);break;case 3:g(s,u,k,i[m++],i[m++],i[m++]);break;case 4:g(s,u,k,i[m++],i[m++],i[m++],i[m++]);break;default:throw Error("unexpected number of binary field arguments: "+A)}}return s}var to=Symbol();function yu(i){var s=i[to];if(!s){var u=Ml(i);s=function(c,p){return xu(c,p,u)},i[to]=s}return s}function gu(i,s){var u=i[to];return u||(u=function(c,p){return fu(c,p,s)},i[to]=u),u}var ei=Symbol();function xh(i,s){i.push(s)}function Sh(i,s,u){i.push(s,u.W)}function kh(i,s,u,c){var p=yu(c),g=Ml(c).P,m=u.W;i.push(s,function(k,A,G){return m(k,A,G,g,p)})}function Eh(i,s,u,c,p,g){var m=gu(c,g),k=u.W;i.push(s,function(A,G,J){return k(A,G,J,c,m)})}function Ml(i){var s=i[ei];return s||(s=vu(i,i[ei]=[],xh,Sh,kh,Eh),ti in i&&ei in i&&(i.length=0),s)}var ti=Symbol();function jh(i,s){i[0]=s}function Ch(i,s,u,c){var p=u.U;i[s]=c?function(g,m,k){return p(g,m,k,c)}:p}function Nh(i,s,u,c,p){var g=u.U,m=pu(c),k=Il(c).P;i[s]=function(A,G,J){return g(A,G,J,k,m,p)}}function _h(i,s,u,c,p,g,m){var k=u.U,A=hu(c,p,g);i[s]=function(G,J,pe){return k(G,J,pe,c,A,m)}}function Il(i){var s=i[ti];return s||(s=vu(i,i[ti]={},jh,Ch,Nh,_h),ti in i&&ei in i&&(i.length=0),s)}function wu(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,p=u[c];if(!p){var g=u[0];g&&(g=g[c])&&(p=u[c]=wh(g))}if(!p||!p(s,i,c)){p=s,c=i,g=p.j,Ln(p);var m=p;if(!m.ca){if(p=m.h.h-g,m.h.h=g,m=m.h,p==0)p=Ee();else{if(g=St(m,p),m.S&&m.m)p=m.i.subarray(g,g+p);else{m=m.i;var k=g;p=g+p,p=k===p?W():ae?m.slice(k,p):new Uint8Array(m.subarray(k,p))}p=p.length==0?Ee():new ye(p,K)}(g=c.R)?g.push(p):c.R=[p]}}}return i}function xu(i,s,u){for(var c=u.length,p=c%2==1,g=p?1:0;g<c;g+=2)(0,u[g+1])(s,i,u[g]);fu(i,s,p?u[0]:void 0)}function ni(i,s){return{U:i,W:s}}var tn=ni(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,p=i.h,g=c[p],m=c[p+1],k=c[p+2];return c=c[p+3],at(i,i.h+4),m=(g<<0|m<<8|k<<16|c<<24)>>>0,i=2*(m>>31)+1,g=m>>>23&255,m&=8388607,pn(s,u,g==255?m?NaN:1/0*i:g==0?i*Math.pow(2,-149)*m:i*Math.pow(2,g-150)*(m+Math.pow(2,23))),!0},function(i,s,u){if(s=_l(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?q=ie=0:(ie=0,q=2147483648):isNaN(c)?(ie=0,q=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(ie=0,q=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),ie=0,q=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,ie=0,q=(u|s+127<<23|c&8388607)>>>0)),u=q,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),Ph=ni(function(i,s,u){if(i.i!==0)return!1;var c=i.h,p=0,g=i=0,m=c.i,k=c.h;do{var A=m[k++];p|=(A&127)<<g,g+=7}while(32>g&&A&128);for(32<g&&(i|=(A&127)>>4),g=3;32>g&&A&128;g+=7)A=m[k++],i|=(A&127)<<g;if(at(c,k),128>A)c=p>>>0,A=i>>>0,(i=A&2147483648)&&(c=~c+1>>>0,A=~A>>>0,c==0&&(A=A+1>>>0)),c=4294967296*A+(c>>>0);else throw H();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,D(s),dn(i,q,ie)):(u=x(s),dn(i.h,u.i,u.h))))}),Mh=ni(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),Su=ni(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var p=St(i,c);if(i=i.i,Me){var g=i,m;(m=xe)||(m=xe=new TextDecoder("utf-8",{fatal:!0})),i=p+c,g=p===0&&i===g.length?g:g.subarray(p,i);try{var k=m.decode(g)}catch(pe){if(fe===void 0){try{m.decode(new Uint8Array([128]))}catch{}try{m.decode(new Uint8Array([97])),fe=!0}catch{fe=!1}}throw!fe&&(xe=void 0),pe}}else{k=p,c=k+c,p=[];for(var A=null,G,J;k<c;)G=i[k++],128>G?p.push(G):224>G?k>=c?re():(J=i[k++],194>G||(J&192)!==128?(k--,re()):p.push((G&31)<<6|J&63)):240>G?k>=c-1?re():(J=i[k++],(J&192)!==128||G===224&&160>J||G===237&&160<=J||((g=i[k++])&192)!==128?(k--,re()):p.push((G&15)<<12|(J&63)<<6|g&63)):244>=G?k>=c-2?re():(J=i[k++],(J&192)!==128||(G<<28)+(J-144)>>30||((g=i[k++])&192)!==128||((m=i[k++])&192)!==128?(k--,re()):(G=(G&7)<<18|(J&63)<<12|(g&63)<<6|m&63,G-=65536,p.push((G>>10&1023)+55296,(G&1023)+56320))):re(),8192<=p.length&&(A=de(A,p),p.length=0);k=de(A,p)}return pn(s,u,k),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,Be){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Ae||(Ae=new TextEncoder)).encode(s)}else{for(var p=0,g=new Uint8Array(3*s.length),m=0;m<s.length;m++){var k=s.charCodeAt(m);if(128>k)g[p++]=k;else{if(2048>k)g[p++]=k>>6|192;else{if(55296<=k&&57343>=k){if(56319>=k&&m<s.length){var A=s.charCodeAt(++m);if(56320<=A&&57343>=A){k=1024*(k-55296)+A-56320+65536,g[p++]=k>>18|240,g[p++]=k>>12&63|128,g[p++]=k>>6&63|128,g[p++]=k&63|128;continue}else m--}if(c)throw Error("Found an unpaired surrogate");k=65533}g[p++]=k>>12|224,g[p++]=k>>6&63|128}g[p++]=k&63|128}}s=p===g.length?g:g.subarray(0,p)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),ku=ni(function(i,s,u,c,p){if(i.i!==2)return!1;s=ou(s,u,c),u=i.h.j,c=it(i.h)>>>0;var g=i.h.h+c,m=g-u;if(0>=m&&(i.h.j=g,p(s,i,void 0,void 0,void 0),m=g-i.h.h),m)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-m)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=g,i.h.j=u,!0},function(i,s,u,c,p){if(s=Ji(s,c,u),s!=null)for(c=0;c<s.length;c++){var g=i;Wt(g.h,8*u+2);var m=g.h.end();Zt(g,m),m.push(g.i),g=m,p(s[c],i),m=i;var k=g.pop();for(k=m.i+m.h.length()-k;127<k;)g.push(k&127|128),k>>>=7,m.i++;g.push(k),m.i++}});function Tl(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Xe(c.h,s,u),s=c}else s=new ir(s,u);try{var p=Il(i),g=wu(new p.P,s,p);break e}finally{p=s.h,p.i=null,p.m=!1,p.l=0,p.j=0,p.h=0,p.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}g=void 0}return g}}function Al(i){return function(){var s=new wr;xu(this,s,Ml(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,p=c.length,g=0,m=0;m<p;m++){var k=c[m];u.set(k,g),g+=k.length}return s.j=[u],u}}function xr(i){_t.call(this,i)}he(xr,_t);var Eu=[xr,1,Mh,2,tn,3,Su,4,Su];xr.prototype.l=Al(Eu);function Rl(i){_t.call(this,i,-1,Ih)}he(Rl,_t),Rl.prototype.addClassification=function(i,s){return ou(this,1,xr,i,s),this};var Ih=[1],ju=Tl([Rl,1,ku,Eu]);function Sr(i){_t.call(this,i)}he(Sr,_t);var Cu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=Al(Cu);function Nu(i){_t.call(this,i,-1,Th)}he(Nu,_t);var Th=[1],_u=Tl([Nu,1,ku,Cu]);function no(i){_t.call(this,i)}he(no,_t);var Pu=[no,1,tn,2,tn,3,tn,4,tn,5,tn,6,Ph],Ah=Tl(Pu);no.prototype.l=Al(Pu);function Mu(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Iu(i){return Ji(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?Zi(en(s,3),""):void 0,displayName:en(s,4)!=null?Zi(en(s,4),""):void 0}})}function Tu(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:_l(i,4)!=null?vn(i,4):void 0}}function Au(i){return i.map(function(s){return Ji(_u(s),Sr,1).map(Tu)})}function zl(i,s){this.i=i,this.h=s,this.m=0}function Ru(i,s,u){return Rh(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function Rh(i,s){var u=i.h;if(i.s===void 0){var c=Mu(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),p=Mu(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),g=u.createProgram();if(u.attachShader(g,c),u.attachShader(g,p),u.linkProgram(g),!u.getProgramParameter(g,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(g));c=i.s=g,u.useProgram(c),p=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:p},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(p,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function zh(i){this.h=i}var Lh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Oh(i,s){return s+i}function zu(i,s){window[i]=s}function Dh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Fh(){return ue(function(i){switch(i.h){case 1:return i.s=2,R(i,WebAssembly.instantiate(Lh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Ll(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Oh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=d(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Ll.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Bh(i){var s,u,c,p,g,m,k,A,G,J,pe;return ue(function(ce){switch(ce.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,R(ce,Fh(),2)):ce.return();case 2:if(u=ce.i,typeof window=="object")return zu("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),zu("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),m=s.filter(function(te){return te.data!==void 0}),k=s.filter(function(te){return te.data===void 0}),A=Promise.all(m.map(function(te){var me=ro(i,te.url);if(te.path!==void 0){var ge=te.path;me=me.then(function(Ue){return i.overrideFile(ge,Ue),Promise.resolve(Ue)})}return me})),G=Promise.all(k.map(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u?Dh(i.locateFile(te.url,i.ha)):Promise.resolve()})).then(function(){var te,me,ge;return ue(function(Ue){if(Ue.h==1)return te=window.createMediapipeSolutionsWasm,me=window.createMediapipeSolutionsPackedAssets,ge=i,R(Ue,te(me),2);ge.i=Ue.i,Ue.h=0})}),J=function(){return ue(function(te){return i.h.graph&&i.h.graph.url?te=R(te,ro(i,i.h.graph.url),0):(te.h=0,te=void 0),te})}(),R(ce,Promise.all([G,A,J]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u}).map(function(te){return i.locateFile(te.url,i.ha)}),importScripts.apply(null,h(c)),p=i,R(ce,createMediapipeSolutionsWasm(Module),6);case 6:p.i=ce.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,g=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(g),ce.h=4;break;case 7:if(i.m=document.createElement("canvas"),pe=i.m.getContext("webgl2",{}),!pe&&(pe=i.m.getContext("webgl",{}),!pe))return alert("Failed to create WebGL canvas context when passing video frame."),ce.return();i.K=pe,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,ce.h=0}})}function $h(i){var s,u,c,p,g,m,k,A;return ue(function(G){if(G.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return G.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){G.h=2;return}return i.fa=i.h.graph.url,R(G,ro(i,i.h.graph.url),3)}for(G.h!=2&&(s=G.i,i.j.loadGraph(s)),u=d(Object.keys(i.D)),c=u.next();!c.done;c=u.next())p=c.value,i.j.overrideFile(p,i.D[p]);if(i.D={},i.h.listeners)for(g=d(i.h.listeners),m=g.next();!m.done;m=g.next())k=m.value,Vh(i,k);A=i.l,i.l={},i.setOptions(A),G.h=0})}e.reset=function(){var i=this;return ue(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],p=[],g={},m=d(Object.keys(i)),k=m.next();!k.done;g={X:g.X,Y:g.Y},k=m.next())if(k=k.value,!(k in this.l&&this.l[k]===i[k])){this.l[k]=i[k];var A=s[k];A!==void 0&&(A.onChange&&(g.X=A.onChange,g.Y=i[k],c.push(function(G){return function(){var J;return ue(function(pe){if(pe.h==1)return R(pe,G.X(G.Y),2);J=pe.i,J===!0&&(u.u=!0),pe.h=0})}}(g))),A.graphOptionXref&&(k=Object.assign({},{calculatorName:"",calculatorIndex:0},A.graphOptionXref,{valueNumber:A.type===1?i[k]:0,valueBoolean:A.type===0?i[k]:!1,valueString:A.type===2?i[k]:""}),p.push(k)))}(c.length!==0||p.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(p),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Uh(i){var s,u,c,p,g,m,k;return ue(function(A){switch(A.h){case 1:if(!i.u)return A.return();if(!i.F){A.h=2;break}s=d(i.F),u=s.next();case 3:if(u.done){A.h=5;break}return c=u.value,R(A,c(),4);case 4:u=s.next(),A.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(p=new i.i.GraphOptionChangeRequestList,g=d(i.H),m=g.next();!m.done;m=g.next())k=m.value,p.push_back(k);i.j.changeOptions(p),p.delete(),i.H=void 0}i.u=!1,A.h=0}})}e.initialize=function(){var i=this;return ue(function(s){return s.h==1?R(s,Bh(i),2):s.h!=3?R(s,$h(i),3):R(s,Uh(i),0)})};function ro(i,s){var u,c;return ue(function(p){return s in i.L?p.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(g){return g.arrayBuffer()}),i.L[s]=c,p.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,p,g,m,k,A,G,J,pe;return ue(function(ce){switch(ce.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),R(ce,u.I,2)):ce.return();case 2:return R(ce,u.initialize(),3);case 3:for(p=new u.i.PacketDataList,g=d(Object.keys(i)),m=g.next();!m.done;m=g.next())if(k=m.value,A=u.h.inputs[k]){e:{var te=i[k];switch(A.type){case"video":var me=u.s[A.stream];if(me||(me=new zl(u.i,u.K),u.s[A.stream]=me),me.m===0&&(me.m=me.i.createTexture()),typeof HTMLVideoElement<"u"&&te instanceof HTMLVideoElement)var ge=te.videoWidth,Ue=te.videoHeight;else typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(ge=te.naturalWidth,Ue=te.naturalHeight):(ge=te.width,Ue=te.height);Ue={glName:me.m,width:ge,height:Ue},ge=me.h,ge.canvas.width=Ue.width,ge.canvas.height=Ue.height,ge.activeTexture(ge.TEXTURE0),me.i.bindTexture2d(me.m),ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,ge.RGBA,ge.UNSIGNED_BYTE,te),me.i.bindTexture2d(0),me=Ue;break e;case"detections":for(me=u.s[A.stream],me||(me=new zh(u.i),u.s[A.stream]=me),me.data||(me.data=new me.h.DetectionListData),me.data.reset(te.length),Ue=0;Ue<te.length;++Ue){ge=te[Ue];var De=me.data,ft=De.setBoundingBox,Vt=Ue,Pt=ge.la,_e=new no;if(mn(_e,1,Pt.ra),mn(_e,2,Pt.sa),mn(_e,3,Pt.height),mn(_e,4,Pt.width),mn(_e,5,Pt.rotation),pn(_e,6,Pt.pa),Pt=_e.l(),ft.call(De,Vt,Pt),ge.ea)for(De=0;De<ge.ea.length;++De){_e=ge.ea[De],ft=me.data,Vt=ft.addNormalizedLandmark,Pt=Ue,_e=Object.assign({},_e,{visibility:_e.visibility?_e.visibility:0});var ht=new Sr;mn(ht,1,_e.x),mn(ht,2,_e.y),mn(ht,3,_e.z),_e.visibility&&mn(ht,4,_e.visibility),_e=ht.l(),Vt.call(ft,Pt,_e)}if(ge.ba)for(De=0;De<ge.ba.length;++De)ft=me.data,Vt=ft.addClassification,Pt=Ue,_e=ge.ba[De],ht=new xr,mn(ht,2,_e.score),_e.index&&pn(ht,1,_e.index),_e.label&&pn(ht,3,_e.label),_e.displayName&&pn(ht,4,_e.displayName),_e=ht.l(),Vt.call(ft,Pt,_e)}me=me.data;break e;default:me={}}}switch(G=me,J=A.stream,A.type){case"video":p.pushTexture2d(Object.assign({},G,{stream:J,timestamp:c}));break;case"detections":pe=G,pe.stream=J,pe.timestamp=c,p.pushDetectionList(pe);break;default:throw Error("Unknown input config type: '"+A.type+"'")}}return u.j.send(p),R(ce,u.I,4);case 4:p.delete(),ce.h=0}})};function Hh(i,s,u){var c,p,g,m,k,A,G,J,pe,ce,te,me,ge,Ue;return ue(function(De){switch(De.h){case 1:if(!u)return De.return(s);for(c={},p=0,g=d(Object.keys(u)),m=g.next();!m.done;m=g.next())k=m.value,A=u[k],typeof A!="string"&&A.type==="texture"&&s[A.stream]!==void 0&&++p;1<p&&(i.M=!1),G=d(Object.keys(u)),m=G.next();case 2:if(m.done){De.h=4;break}if(J=m.value,pe=u[J],typeof pe=="string")return ge=c,Ue=J,R(De,Wh(i,J,s[pe]),14);if(ce=s[pe.stream],pe.type==="detection_list"){if(ce){for(var ft=ce.getRectList(),Vt=ce.getLandmarksList(),Pt=ce.getClassificationsList(),_e=[],ht=0;ht<ft.size();++ht){var Dn=Ah(ft.get(ht)),Gh=vn(Dn,1),Qh=vn(Dn,2),Yh=vn(Dn,3),Xh=vn(Dn,4),Kh=vn(Dn,5,0),io=void 0;io=io===void 0?0:io,Dn={la:{ra:Gh,sa:Qh,height:Yh,width:Xh,rotation:Kh,pa:Zi(en(Dn,6),io)},ea:Ji(_u(Vt.get(ht)),Sr,1).map(Tu),ba:Iu(ju(Pt.get(ht)))},_e.push(Dn)}ft=_e}else ft=[];c[J]=ft,De.h=7;break}if(pe.type==="proto_list"){if(ce){for(ft=Array(ce.size()),Vt=0;Vt<ce.size();Vt++)ft[Vt]=ce.get(Vt);ce.delete()}else ft=[];c[J]=ft,De.h=7;break}if(ce===void 0){De.h=3;break}if(pe.type==="float_list"){c[J]=ce,De.h=7;break}if(pe.type==="proto"){c[J]=ce,De.h=7;break}if(pe.type!=="texture")throw Error("Unknown output config type: '"+pe.type+"'");return te=i.v[J],te||(te=new zl(i.i,i.K),i.v[J]=te),R(De,Ru(te,ce,i.M),13);case 13:me=De.i,c[J]=me;case 7:pe.transform&&c[J]&&(c[J]=pe.transform(c[J])),De.h=3;break;case 14:ge[Ue]=De.i;case 3:m=G.next(),De.h=2;break;case 4:return De.return(c)}})}function Wh(i,s,u){var c;return ue(function(p){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?p.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new zl(i.i,i.K),i.v[s]=c),p.return(Ru(c,u,i.M))):p.return(void 0)})}function Vh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),p=new i.i.StringList,g=d(s.wants),m=g.next();!m.done;m=g.next())p.push_back(m.value);g=i.i.PacketListener.implement({onResults:function(k){for(var A={},G=0;G<s.wants.length;++G)A[c[G]]=k.get(G);var J=i.listeners[u];J&&(i.I=Hh(i,A,s.outs).then(function(pe){pe=J(pe);for(var ce=0;ce<s.wants.length;++ce){var te=A[c[ce]];typeof te=="object"&&te.hasOwnProperty&&te.hasOwnProperty("delete")&&te.delete()}pe&&(i.I=pe)}))}}),i.j.attachMultiListener(p,g),p.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},Qe("Solution",Ll),Qe("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Lu(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Ou(i){var s=this;i=i||{},this.h=new Ll({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Lu(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Au},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Au},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Iu(ju(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,p,g;return ue(function(m){return m.h==1?(c=Lu(u),p="third_party/mediapipe/modules/hand_landmark/"+c,R(m,ro(s.h,c),2)):(g=m.i,s.h.overrideFile(p,g),m.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Ou.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return ue(function(s){return R(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return ue(function(u){return R(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},Qe("Hands",Ou),Qe("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Qe("VERSION","0.4.1675469240")}).call(Ol);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function Kc({hidden:e=!1}){const t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),[l,a]=P.useState(!1),[d,h]=P.useState("None"),[v,N]=P.useState([]),[_,C]=P.useState(null),[B,F]=P.useState(null),[$,he]=P.useState(null),[S,w]=P.useState({a:null,b:null}),E=P.useRef(null),R=P.useRef(null),Y=(D,y)=>{const T=localStorage.getItem(D);if(T===null)return y;const j=parseFloat(T);return Number.isFinite(j)?j:y},[M,U]=P.useState(()=>({roiSize:(()=>{const D=Y(et.roiSize,44);return D>10?D:44})(),hueWeight:Y(et.hueWeight,4),satWeight:Y(et.satWeight,2),valWeight:Y(et.valWeight,1),sensitivity:Y(et.sensitivity,0)})),z=P.useRef(M),Z=P.useRef(null),Q=P.useRef(!1),ue=P.useRef(0),ze=P.useRef(null),[Pe,Ce]=P.useState([]),Qe=P.useRef([]),[Ve,Ie]=P.useState(()=>localStorage.getItem(et.selectedCamera)||""),b=P.useCallback(async()=>{try{const y=(await navigator.mediaDevices.enumerateDevices()).filter(T=>T.kind==="videoinput");return Ce(y),Qe.current=y,y}catch{return[]}},[]),le=P.useCallback(D=>{},[Ot]),se=P.useCallback(async(D=null)=>{const y=t.current;if(!y)return;Z.current&&(Z.current.getTracks().forEach(x=>x.stop()),Z.current=null),K();const T=++ue.current;ze.current=null;const j=D!==null?D:Ve;try{const x=j?{video:{deviceId:{exact:j}}}:{video:!0};if(j){const H=Qe.current.find(ee=>ee.deviceId===j);console.log("[Detector]  Loading SELECTED camera:",{deviceId:j,label:(H==null?void 0:H.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const I=await navigator.mediaDevices.getUserMedia(x);if(!Q.current||T!==ue.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),I.getTracks().forEach(H=>H.stop());return}Z.current=I;const L=I.getVideoTracks();if(Ot("getUserMedia success. Tracks:",L),L.length>0){const H=L[0];console.log("[Detector]  Camera loaded successfully:",{label:H.label,deviceId:H.getSettings().deviceId,resolution:`${H.getSettings().width}x${H.getSettings().height}`,frameRate:H.getSettings().frameRate})}if(y.srcObject=I,await new Promise(H=>{if(y.readyState>=1&&y.videoWidth>0&&y.videoHeight>0)return H();const re=()=>{y.removeEventListener("loadedmetadata",re),H()};y.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{y.removeEventListener("loadedmetadata",re),H()},1500)}),!Q.current||T!==ue.current){Ot("Stale request before play(). Stopping stream."),I.getTracks().forEach(H=>H.stop());return}try{await y.play(),Ot("video.play() promise resolved. Video should be playing.")}catch(H){if(console.error("[Detector] video.play() promise rejected:",H),Ot("video.play() promise rejected:",H.name,H.message),T!==ue.current){Ot("play() aborted due to newer request."),I.getTracks().forEach(ee=>ee.stop());return}}if(ze.current!==T&&(ze.current=T,Ot("Initializing MediaPipe for request id",T),Le()),Q.current){const H=await b();if(!j||!D){const ee=H.find(re=>re.deviceId);ee&&ee.deviceId&&ee.deviceId!==Ve&&(Ie(ee.deviceId),localStorage.setItem(et.selectedCamera,ee.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,b,le,Ve]),ve=(D,y,T)=>{const j=(D||0)*2,x=(y||0)/255,I=(T||0)/255,L=I*x,H=L*(1-Math.abs(j/60%2-1)),ee=I-L;let re=0,de=0,fe=0;j>=0&&j<60?(re=L,de=H,fe=0):j<120?(re=H,de=L,fe=0):j<180?(re=0,de=L,fe=H):j<240?(re=0,de=H,fe=L):j<300?(re=H,de=0,fe=L):(re=L,de=0,fe=H);const xe=Math.round((re+ee)*255),Me=Math.round((de+ee)*255),Ae=Math.round((fe+ee)*255);return`rgb(${xe}, ${Me}, ${Ae})`},we=D=>D?ve(D.h,D.s,D.v):"#ffffff",Ye=D=>D==="Player A"&&B?we(B):D==="Player B"&&$?we($):D==="Red"?"#ff0000":D==="Blue"?"#0000ff":"#ffffff";P.useEffect(()=>{Q.current=!0;const D=()=>{try{const j=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");j&&F({h:j.h,s:j.s,v:j.v}),x&&he({h:x.h,s:x.s,v:x.v})}catch{}},y=j=>{!j||!j.key||(["calibrationA","calibrationB"].includes(j.key)&&D(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(j.key)&&U(x=>({roiSize:(()=>{const I=Y(et.roiSize,(x==null?void 0:x.roiSize)??44);return I>10?I:(x==null?void 0:x.roiSize)??44})(),hueWeight:Y(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:Y(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:Y(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:Y(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const j=await b();if(!Q.current)return;const x=localStorage.getItem(et.selectedCamera);let I="";if(x&&j.some(L=>L.deviceId&&L.deviceId===x)){const L=j.find(H=>H.deviceId===x);I=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(L==null?void 0:L.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const L=j.find(H=>H.deviceId);L&&L.deviceId?(I=L.deviceId,localStorage.setItem(et.selectedCamera,L.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:L.deviceId,label:L.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",L.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}Ie(I?L=>L===I?L:I:L=>L||""),D()})(),window.addEventListener("storage",y),()=>{Q.current=!1,ue.current+=1,ze.current=null,o.current&&(o.current.stop(),o.current=null),Z.current&&(Z.current.getTracks().forEach(x=>x.stop()),Z.current=null);const j=t.current;j&&(j.srcObject=null,le(j)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",y)}},[]),P.useEffect(()=>{E.current=B},[B]),P.useEffect(()=>{R.current=$},[$]),P.useEffect(()=>{z.current=M},[M]),P.useEffect(()=>{se(Ve||null)},[Ve,se]),P.useEffect(()=>{const D=setInterval(()=>{h(y=>(Oe(y),y))},1e3);return()=>clearInterval(D)},[]);const Oe=D=>{const T={timestamp:new Date().toISOString(),status:D};N(x=>[...x,T]);const j=JSON.parse(localStorage.getItem("braceletDetections")||"[]");j.push(T),localStorage.setItem("braceletDetections",JSON.stringify(j))},Le=async()=>{try{const D=await(async()=>{try{if(typeof ol.Hands=="function")return ol.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((T,j)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return T();const I=document.createElement("script");I.id=x,I.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",I.async=!0,I.onload=()=>T(),I.onerror=L=>j(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(I)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),y=new D({locateFile:T=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${T}`});if(y.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),y.onResults(Te),r.current=y,t.current){const T=t.current;console.log("[Detector]  Starting manual frame capture from video element");let j;const x=async()=>{if(T.readyState>=2&&T.videoWidth>0)try{await y.send({image:T})}catch(I){console.error("[Detector] Error sending frame to MediaPipe:",I)}j=requestAnimationFrame(x)};x(),o.current={stop:()=>{j&&(cancelAnimationFrame(j),console.log("[Detector]  Stopped frame capture"))}}}}catch(D){console.error("MediaPipe initialization error:",D),C(`MediaPipe error: ${D.message}`)}},Te=D=>{var L;const y=n.current,T=t.current;if(!y||!T)return;const j=y.getContext("2d");y.width=T.videoWidth,y.height=T.videoHeight,j.drawImage(T,0,0,y.width,y.height);let x="None";if(D.multiHandLandmarks&&D.multiHandLandmarks.length>0){Ot("onResults: hands=",D.multiHandLandmarks.length);let H=null,ee=0;if(D.multiHandLandmarks.forEach(re=>{const de=re[0];de.y>ee&&(ee=de.y,H=re)}),D.multiHandLandmarks.forEach(re=>{V(j,re,y.width,y.height)}),H){const re=H[0],de=re.x*y.width,fe=re.y*y.height;j.fillStyle="lime",j.beginPath(),j.arc(de,fe,10,0,2*Math.PI),j.fill(),j.fillStyle="lime",j.font="16px Arial",j.fillText("SELECTED",de-40,fe-15);const Me=Math.max(10,Math.min(300,Math.floor(((L=z.current)==null?void 0:L.roiSize)||60)))/2,Ae=Math.max(0,de-Me),Be=Math.max(0,fe-Me),$e=Math.min(y.width,de+Me),ke=Math.min(y.height,fe+Me);j.strokeStyle="lime",j.lineWidth=3,j.strokeRect(Ae,Be,$e-Ae,ke-Be);const ye=$e-Ae,Ee=ke-Be;if(ye>0&&Ee>0)try{const Ne=j.getImageData(Ae,Be,ye,Ee),rt=E.current,Jt=R.current,Xe=O(Ne,rt,Jt);x=Xe.status,w({a:Xe.percentA,b:Xe.percentB}),Ot("Detection result:",x,{roi:{x1:Ae,y1:Be,w:ye,h:Ee}})}catch(Ne){console.warn("[Detector] Failed to get ROI image data:",Ne.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:ye,height:Ee}),x="None",w({a:null,b:null})}}let I="#ffffff";x==="Player A"&&E.current?I=we(E.current):x==="Player B"&&R.current&&(I=we(R.current)),j.fillStyle=I,j.font="bold 32px Arial",j.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=y,window.braceletDetectorVideo=T)},V=(D,y,T,j)=>{D.strokeStyle="white",D.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([I,L])=>{const H=y[I],ee=y[L];D.beginPath(),D.moveTo(H.x*T,H.y*j),D.lineTo(ee.x*T,ee.y*j),D.stroke()}),y.forEach(I=>{D.fillStyle="red",D.beginPath(),D.arc(I.x*T,I.y*j,5,0,2*Math.PI),D.fill()})},ne=D=>{const y=D.data;let T=0,j=0;for(let x=0;x<y.length;x+=4){const I=y[x],L=y[x+1],H=y[x+2],ee=W(I,L,H);(ee[0]>=gn.red.lower1[0]&&ee[0]<=gn.red.upper1[0]||ee[0]>=gn.red.lower2[0]&&ee[0]<=gn.red.upper2[0])&&ee[1]>=gn.red.lower1[1]&&ee[2]>=gn.red.lower1[2]&&T++,ee[0]>=gn.blue.lower[0]&&ee[0]<=gn.blue.upper[0]&&ee[1]>=gn.blue.lower[1]&&ee[2]>=gn.blue.lower[2]&&j++}return{redCount:T,blueCount:j}},O=(D,y,T)=>{var Me,Ae,Be,$e;const j=D.data;if(y&&!T)return{status:"Player A",percentA:null,percentB:null};if(T&&!y)return{status:"Player B",percentA:null,percentB:null};const x=((Me=z.current)==null?void 0:Me.hueWeight)??4,I=((Ae=z.current)==null?void 0:Ae.satWeight)??2,L=((Be=z.current)==null?void 0:Be.valWeight)??1,H=(($e=z.current)==null?void 0:$e.sensitivity)??0;if(y&&T){let ke=0,ye=0,Ee=0;for(let Xe=0;Xe<j.length;Xe+=4){const at=j[Xe],it=j[Xe+1],St=j[Xe+2],[zt,Lt,dn]=W(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-y.h),180-Math.abs(zt-y.h)),On=Math.min(Math.abs(zt-T.h),180-Math.abs(zt-T.h)),wr=Math.abs(Lt-y.s),Zt=Math.abs(Lt-T.s),Xi=Math.abs(dn-y.v),qt=Math.abs(dn-T.v),fn=Ln*x+wr*I+Xi*L,Jr=On*x+Zt*I+qt*L;Math.min(fn,Jr)>180||(fn<=Jr?ke+=zn:ye+=zn,Ee+=zn)}if(Ee===0)return{status:"None",percentA:0,percentB:0};const Ne=ke/Math.max(1e-6,Ee),rt=ye/Math.max(1e-6,Ee),Jt=.12*(1+.8*Math.max(0,Math.min(1,H)));return Ne>=Jt&&Ne>=rt?{status:"Player A",percentA:Ne,percentB:rt}:rt>=Jt&&rt>Ne?{status:"Player B",percentA:Ne,percentB:rt}:{status:"None",percentA:Ne,percentB:rt}}const{redCount:ee,blueCount:re}=ne(D),de=ee+re;if(de===0)return{status:"None",percentA:0,percentB:0};const fe=ee/de,xe=re/de;return fe>=.15&&fe>=xe?{status:"Player A",percentA:fe,percentB:xe}:xe>=.15&&xe>fe?{status:"Player B",percentA:fe,percentB:xe}:{status:"None",percentA:fe,percentB:xe}},W=(D,y,T)=>{D/=255,y/=255,T/=255;const j=Math.max(D,y,T),x=Math.min(D,y,T),I=j-x;let L=0;I!==0&&(j===D?L=60*((y-T)/I%6):j===y?L=60*((T-D)/I+2):L=60*((D-y)/I+4)),L<0&&(L+=360);const H=j===0?0:I/j*255,ee=j*255;return[L/2,H,ee]},K=D=>{},ae=D=>{Ie(D),D?localStorage.setItem(et.selectedCamera,D):localStorage.removeItem(et.selectedCamera)},q=()=>{const D=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),y=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),T=URL.createObjectURL(y),j=document.createElement("a");j.href=T,j.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,j.click();const x=D.map(ee=>`${ee.timestamp}: ${ee.status}`).join(`
`),I=new Blob([x],{type:"text/plain"}),L=URL.createObjectURL(I),H=document.createElement("a");H.href=L,H.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,H.click()},ie=()=>{localStorage.removeItem("braceletDetections"),N([])};return f.jsx(f.Fragment,{children:f.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[f.jsxs("div",{className:"detector-header",children:[f.jsx("span",{children:"Bracelet Detector"}),f.jsxs("div",{className:"detector-controls",children:[f.jsx("button",{onClick:q,title:"Download Logs",children:""}),f.jsx("button",{onClick:ie,title:"Clear Logs",children:""}),f.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),f.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{children:"Camera:"}),f.jsxs("select",{value:Ve,onChange:D=>ae(D.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[f.jsx("option",{value:"",children:"System Default"}),Pe.map((D,y)=>{var H;const T=!!D.deviceId,j=T?D.deviceId:"",x=T?D.deviceId:`camera-${y}`,I=((H=D.label)==null?void 0:H.trim())||`Camera ${y+1}`,L=T?`  ${D.deviceId.slice(0,8)}`:" (needs permission)";return f.jsxs("option",{value:j,disabled:!T,children:[I,L]},x)})]})]}),f.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),f.jsx("canvas",{ref:n,className:"output_canvas"}),f.jsxs("div",{className:"detector-info",children:[f.jsxs("div",{className:"status-display",children:["Status: ",f.jsx("span",{style:{color:Ye(d),fontWeight:700},children:d})]}),f.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),f.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:B?we(B):"#444"}}),f.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:S.a==null?"":`${Math.round(Math.max(0,Math.min(1,S.a))*100)}%`})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),f.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:$?we($):"#444"}}),f.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:S.b==null?"":`${Math.round(Math.max(0,Math.min(1,S.b))*100)}%`})]})]}),f.jsxs("div",{className:"log-count",children:["Logs: ",v?v.length:0]}),f.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[f.jsxs("div",{children:["A: ",B?`h${Math.round(B.h)} s${Math.round(B.s)} v${Math.round(B.v)}`:""]}),f.jsxs("div",{children:["B: ",$?`h${Math.round($.h)} s${Math.round($.s)} v${Math.round($.v)}`:""]})]})]})]})]})})}const ds=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},zv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,d=a*(1-Math.abs(r/60%2-1)),h=l-a;let v=0,N=0,_=0;r>=0&&r<60?(v=a,N=d,_=0):r<120?(v=d,N=a,_=0):r<180?(v=0,N=a,_=d):r<240?(v=0,N=d,_=a):r<300?(v=d,N=0,_=a):(v=a,N=0,_=d);const C=Math.round((v+h)*255),B=Math.round((N+h)*255),F=Math.round((_+h)*255);return`rgb(${C}, ${B}, ${F})`},bc=e=>e?zv(e.h,e.s,e.v):"#444";function Lv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(!1),o=P.useRef(0),[l,a]=P.useState(!1),[d,h]=P.useState(""),[v,N]=P.useState(null),[_,C]=P.useState(null),B=(V,ne)=>{const O=localStorage.getItem(V);if(O===null)return ne;const W=parseFloat(O);return Number.isFinite(W)?W:ne},[F,$]=P.useState(()=>{const V=B(wn.roiSize,44);return V>10?V:44}),[he,S]=P.useState(()=>B(wn.hueWeight,4)),[w,E]=P.useState(()=>B(wn.satWeight,2)),[R,Y]=P.useState(()=>B(wn.valWeight,1)),[M,U]=P.useState(()=>B(wn.sensitivity,0)),[z,Z]=P.useState(!1),[Q,ue]=P.useState("idle"),[ze,Pe]=P.useState(5),Ce=P.useRef({A:[],B:[]});P.useEffect(()=>{r.current=!0;try{const V=JSON.parse(localStorage.getItem("calibrationA")||"null"),ne=JSON.parse(localStorage.getItem("calibrationB")||"null");V&&N(V),ne&&C(ne)}catch{}return(async()=>await Qe())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(ne=>ne.stop()),n.current=null);const V=e.current;V&&(V.srcObject=null)}},[]),P.useEffect(()=>{localStorage.setItem(wn.roiSize,String(F))},[F]),P.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(he))},[he]),P.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),P.useEffect(()=>{localStorage.setItem(wn.valWeight,String(R))},[R]),P.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(M))},[M]);const Qe=P.useCallback(async()=>{const V=e.current;if(!V)return;n.current&&(n.current.getTracks().forEach(O=>O.stop()),n.current=null);const ne=++o.current;a(!1),h("Requesting camera...");try{const O=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||ne!==o.current){O.getTracks().forEach(W=>W.stop());return}if(n.current=O,V.srcObject=O,await new Promise(W=>{if(V.readyState>=1&&V.videoWidth>0)return W();const ae=()=>{V.removeEventListener("loadedmetadata",ae),W()};V.addEventListener("loadedmetadata",ae,{once:!0}),setTimeout(()=>{V.removeEventListener("loadedmetadata",ae),W()},1500)}),!r.current||ne!==o.current){O.getTracks().forEach(W=>W.stop());return}try{await V.play(),ds("video.play resolved")}catch(W){ds("video.play rejected",W)}a(!0),h("")}catch(O){h(`Camera error: ${(O==null?void 0:O.message)||O}`),ds("getUserMedia error",O)}},[]),Ve=(V,ne,O)=>{V/=255,ne/=255,O/=255;const W=Math.max(V,ne,O),K=Math.min(V,ne,O),ae=W-K;let q=0;ae!==0&&(W===V?q=60*((ne-O)/ae%6):W===ne?q=60*((O-V)/ae+2):q=60*((V-ne)/ae+4)),q<0&&(q+=360);const ie=W===0?0:ae/W*255,D=W*255;return[q/2,ie,D]},Ie=()=>{const V=e.current,ne=t.current;if(!V||!ne||V.videoWidth===0)return null;const O=V.videoWidth,W=V.videoHeight;ne.width=O,ne.height=W;const K=ne.getContext("2d");K.drawImage(V,0,0,O,W);const ae=Math.max(10,Math.min(300,Math.floor(F))),q=Math.floor(O/2-ae/2),ie=Math.floor(W/2-ae/2),y=K.getImageData(q,ie,ae,ae).data;let T=0,j=0,x=0,I=0,L=0;for(let Ae=0;Ae<y.length;Ae+=4){const[Be,$e,ke]=Ve(y[Ae],y[Ae+1],y[Ae+2]),ye=Be*2*(Math.PI/180);T+=Math.cos(ye),j+=Math.sin(ye),x+=$e,I+=ke,L++}if(L===0)return null;const H=x/L,ee=I/L,re=T/L,de=j/L;let xe=Math.atan2(de,re)*(180/Math.PI);return xe<0&&(xe+=360),{h:xe/2,s:H,v:ee}},b=V=>{const ne=Ie();if(!ne){h("Could not sample video frame.");return}V==="A"?(localStorage.setItem("calibrationA",JSON.stringify(ne)),N(ne),h(`Saved Player A: h${ne.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(ne)),C(ne),h(`Saved Player B: h${ne.h.toFixed(0)}`))},le=V=>{V==="A"?(localStorage.removeItem("calibrationA"),N(null)):(localStorage.removeItem("calibrationB"),C(null)),h("Cleared")},se=()=>{Z(!0),ue("playerA"),Pe(5),Ce.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};P.useEffect(()=>{if(!(!z||Q==="idle"||Q==="optimizing"||Q==="complete"))if(ze>0){const V=setTimeout(()=>{Pe(ze-1)},1e3);return()=>clearTimeout(V)}else Q==="playerA"?(ue("switching"),Pe(3),h("Switch to Player B... Get ready!")):Q==="switching"?(ue("playerB"),Pe(5),h("Hold Player B bracelet in center square...")):Q==="playerB"&&(ue("optimizing"),ve())},[z,Q,ze]),P.useEffect(()=>{if(!z||Q==="idle"||Q==="switching"||Q==="optimizing"||Q==="complete")return;const V=setInterval(()=>{const ne=Ie();ne&&(Q==="playerA"?Ce.current.A.push(ne):Q==="playerB"&&Ce.current.B.push(ne))},200);return()=>clearInterval(V)},[z,Q]);const ve=()=>{h("Optimizing parameters...");const V=Ce.current.A,ne=Ce.current.B;if(V.length===0||ne.length===0){h("Error: Not enough samples collected!"),Z(!1),ue("idle");return}const O=we(V),W=we(ne),K=Math.min(Math.abs(O.h-W.h),180-Math.abs(O.h-W.h)),ae=Math.abs(O.s-W.s),q=Math.abs(O.v-W.v),ie=K/90,D=ae/255,y=q/255,T=Ye(V),j=Ye(ne),x={h:(T.h+j.h)/2,s:(T.s+j.s)/2,v:(T.v+j.v)/2},I=ie+D+y,L=I>0?ie/I*(1/(1+x.h/20))*6:2,H=I>0?D/I*(1/(1+x.s/50))*4:1,ee=I>0?y/I*(1/(1+x.v/50))*3:.5;S(Math.max(.5,Math.min(6,L))),E(Math.max(.1,Math.min(4,H))),Y(Math.max(.1,Math.min(3,ee)));const re=Oe(V,ne,O,W),de=Math.max(0,Math.min(.8,re*.5));U(de),localStorage.setItem("calibrationA",JSON.stringify(O)),localStorage.setItem("calibrationB",JSON.stringify(W)),N(O),C(W),ue("complete"),h(` Auto-calibration complete! Collected ${V.length+ne.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{Z(!1),ue("idle")},3e3)},we=V=>{const ne=V.map(j=>j.h),O=V.map(j=>j.s).sort((j,x)=>j-x),W=V.map(j=>j.v).sort((j,x)=>j-x);let K=0,ae=0;ne.forEach(j=>{const x=j*2*(Math.PI/180);K+=Math.cos(x),ae+=Math.sin(x)});let ie=Math.atan2(ae/ne.length,K/ne.length)*(180/Math.PI);ie<0&&(ie+=360);const D=ie/2,y=O[Math.floor(O.length/2)],T=W[Math.floor(W.length/2)];return{h:D,s:y,v:T}},Ye=V=>{const ne=V.reduce((W,K)=>({h:W.h+K.h,s:W.s+K.s,v:W.v+K.v}),{h:0,s:0,v:0});ne.h/=V.length,ne.s/=V.length,ne.v/=V.length;const O=V.reduce((W,K)=>({h:W.h+Math.pow(K.h-ne.h,2),s:W.s+Math.pow(K.s-ne.s,2),v:W.v+Math.pow(K.v-ne.v,2)}),{h:0,s:0,v:0});return{h:O.h/V.length,s:O.s/V.length,v:O.v/V.length}},Oe=(V,ne,O,W)=>{let K=0;const ae=Math.min(V.length,ne.length)*2;return V.forEach(q=>{const ie=Le(q,O);Le(q,W)<ie*1.5&&K++}),ne.forEach(q=>{const ie=Le(q,O),D=Le(q,W);ie<D*1.5&&K++}),K/ae},Le=(V,ne)=>{const O=Math.min(Math.abs(V.h-ne.h),180-Math.abs(V.h-ne.h)),W=Math.abs(V.s-ne.s),K=Math.abs(V.v-ne.v);return Math.sqrt(O*O+W*W+K*K)},Te=()=>{Z(!1),ue("idle"),Pe(5),h("Generic mode cancelled")};return f.jsxs("div",{className:"calib-root",children:[f.jsxs("div",{className:"calib-header",children:[f.jsx("h2",{children:"Color Calibration"}),f.jsxs("div",{className:"calib-actions",children:[f.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),f.jsx("button",{onClick:Qe,children:"Restart Camera"})]})]}),d&&f.jsx("div",{className:"calib-message",children:d}),f.jsxs("div",{className:"calib-content",children:[f.jsx("div",{children:f.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[f.jsx("div",{className:"label",children:"Live Preview"}),f.jsx("div",{className:"value",style:{marginBottom:8},children:z?`Generic Mode Active: ${Q==="playerA"?"Player A":Q==="switching"?"Switching...":Q==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),f.jsxs("div",{className:"calib-video-wrap",children:[f.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),f.jsx("div",{className:"calib-center-box",style:{width:F,height:F,borderColor:"#22d3ee",borderWidth:z?"4px":"3px",boxShadow:z?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),z&&ze>0&&f.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:ze})]})]})}),f.jsxs("div",{className:"calib-controls",children:[f.jsxs("div",{className:"calib-block",style:{background:z?"#1a2332":"#0f172a",border:z?"2px solid #22d3ee":"1px solid #1f2937"},children:[f.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),f.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),z?f.jsxs("div",{style:{marginTop:8},children:[f.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[Q==="playerA"&&`Player A: Hold bracelet steady... ${ze}s`,Q==="switching"&&`Switch hands! Get Player B ready... ${ze}s`,Q==="playerB"&&`Player B: Hold bracelet steady... ${ze}s`,Q==="optimizing"&&"Optimizing parameters...",Q==="complete"&&" Complete!"]}),f.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[Q==="playerA"&&`Samples collected: ${Ce.current.A.length}`,Q==="switching"&&`Player A: ${Ce.current.A.length} samples collected`,Q==="playerB"&&`Samples collected: ${Ce.current.B.length}`]}),Q!=="complete"&&f.jsx("button",{onClick:Te,style:{background:"#ef4444"},children:"Cancel"})]}):f.jsx("div",{className:"buttons",children:f.jsx("button",{onClick:se,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Detector Settings"}),f.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Detection square size"}),f.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:F,onChange:V=>$(Number(V.target.value))}),f.jsxs("span",{style:{textAlign:"right"},children:[F,"px"]})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Hue weight"}),f.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:he,onChange:V=>S(Number(V.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:he.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Saturation weight"}),f.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:V=>E(Number(V.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Value weight"}),f.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:R,onChange:V=>Y(Number(V.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:R.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:M,onChange:V=>U(Number(V.target.value))}),f.jsxs("span",{style:{textAlign:"right"},children:[(M*100).toFixed(0),"%"]})]}),f.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Player A"}),f.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:bc(v)}}),f.jsx("span",{children:v?`h${v.h.toFixed(0)} s${v.s.toFixed(0)} v${v.v.toFixed(0)}`:""})]}),f.jsxs("div",{className:"buttons",children:[f.jsx("button",{onClick:()=>b("A"),disabled:!l,children:"Save A"}),f.jsx("button",{onClick:()=>le("A"),children:"Clear A"})]})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Player B"}),f.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:bc(_)}}),f.jsx("span",{children:_?`h${_.h.toFixed(0)} s${_.s.toFixed(0)} v${_.v.toFixed(0)}`:""})]}),f.jsxs("div",{className:"buttons",children:[f.jsx("button",{onClick:()=>b("B"),disabled:!l,children:"Save B"}),f.jsx("button",{onClick:()=>le("B"),children:"Clear B"})]})]})]})]}),f.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function hh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var D;const[a,d]=P.useState(e),[h,v]=P.useState(0),[N,_]=P.useState(!1),[C,B]=P.useState(1),[F,$]=P.useState(Ci()),[he,S]=P.useState(!0),[w,E]=P.useState([]),[R,Y]=P.useState(null),[M,U]=P.useState(!1),z=P.useRef(null),Z=P.useRef(null),Q=P.useRef(null),ue=n&&!e,ze=["summary-container",r].filter(Boolean).join(" "),Pe=(y,T)=>{const j=Q.current;if(!j)return 0;const x=j.offsetHeight;return(y+.5)*x},Ce=P.useCallback((y,T=null)=>{const j=T||a;if(!j)return;let x=Ci(),I=!0;const L=[];let H=null;for(let ee=0;ee<=y&&ee<j.moves.length;ee++){const re=j.moves[ee];re.phase==="experiment"&&I&&(I=!1,x=Ci());const de=re.all_positions||(re.allPositions?re.allPositions.map(fe=>[fe[0]*.07,fe[1]*.07]):null);if(re.type==="moveblock"&&de)de.length===10&&x.length===10?x=x.map((fe,xe)=>{const Me=de[xe];return Me&&Array.isArray(Me)&&Me.length===2?{...fe,position:[Me[0],Me[1]]}:fe}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${de==null?void 0:de.length}`),x=sa(la(x),I),H=re.blockId!==void 0?re.blockId:re.unit;else if(re.type==="added shape to gallery"&&re.gallery_normalized){const fe=document.createElement("canvas");fe.width=400,fe.height=400;const xe=fe.getContext("2d");xe.fillStyle="#000",xe.fillRect(0,0,400,400),re.gallery_normalized.forEach(Me=>{const Ae=(Me[0]+.5)*400,Be=(Me[1]+.5)*400;xe.fillStyle="green";const $e=60;xe.fillRect(Ae-$e/2,Be-$e/2,$e,$e)}),L.push({number:re.gallery_shape_number,image:fe.toDataURL()}),H=null}}$(x),S(I),E(L),Y(H)},[a]),Qe=y=>{d(y),v(0),_(!1),setTimeout(()=>{Ce(0,y)},0)},Ve=y=>{if(!ue)return;const T=y.target.files[0];if(!T)return;const j=new FileReader;j.onload=x=>{try{const I=JSON.parse(x.target.result);Qe(I)}catch(I){alert("Failed to parse JSON file: "+I.message)}},j.readAsText(T)};P.useEffect(()=>{e&&Qe(e)},[e]),P.useEffect(()=>{a&&h>=0&&Ce(h)},[a,h,Ce]),P.useEffect(()=>{const y=()=>{a&&h>=0&&setTimeout(()=>{Ce(h)},100)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[a,h,Ce]);const Ie=y=>{a&&(y<0||y>=a.moves.length||(Ce(y),v(y)))},b=()=>{if(!a||N)return;_(!0),v(0),Ce(0);let y=0;Z.current=setInterval(()=>{if(y>=a.moves.length){le();return}y++,Ce(y),v(y)},1e3/C)},le=()=>{Z.current&&(clearInterval(Z.current),Z.current=null),_(!1)};if(P.useEffect(()=>()=>{Z.current&&clearInterval(Z.current)},[]),P.useEffect(()=>{if(N&&Z.current){clearInterval(Z.current),Z.current=null;const y=h;v(0),_(!1),setTimeout(()=>{v(y),b()},0)}},[C]),!a)return ue?f.jsx("div",{className:ze,children:f.jsxs("div",{className:"summary-upload",children:[f.jsx("h1",{children:t}),f.jsx("p",{children:"Load a game session JSON file to view the replay"}),f.jsx("input",{ref:z,type:"file",accept:".json",onChange:Ve,style:{display:"none"}}),f.jsx("button",{onClick:()=>{var y;return(y=z.current)==null?void 0:y.click()},children:"Load JSON File"})]})}):null;const se=a.moves[h],ve=a.moves.length,we=((D=a.summary)==null?void 0:D.movesByPlayer)||{},Ye=Object.entries(we||{}),Oe=(y,T=1)=>Number.isFinite(y)?y.toFixed(T):"",Le=a.sessionInfo||{},Te=Le.subjectId||Le.id||a.subjectId||a.id||null,V=Le.sessionGameId||a.sessionGameId||Te||null,ne=Le.condition||a.condition||null,O=a.startTime||Le.startedAt||Le.date||null,W=a.endTime||Le.endedAt||null,K=y=>{if(!y)return null;try{const T=new Date(y);if(!Number.isNaN(T.getTime()))return T.toLocaleString()}catch{}return y},ae=[];V&&ae.push({label:"Session ID",value:V}),Te&&Te!==V&&ae.push({label:"Participant",value:Te}),ne&&ae.push({label:"Condition",value:ne});const q=K(O);q&&ae.push({label:"Start",value:q});const ie=K(W);return ie&&ae.push({label:"End",value:ie}),f.jsxs("div",{className:ze,children:[f.jsxs("div",{className:"summary-header",children:[f.jsx("h1",{children:t}),ae.length>0&&f.jsx("div",{className:"summary-session-info",children:ae.map(y=>f.jsxs("div",{className:"summary-session-info-item",children:[f.jsx("span",{className:"summary-session-info-label",children:y.label}),f.jsx("span",{className:"summary-session-info-value",children:y.value})]},`${y.label}-${y.value}`))})]}),f.jsxs("div",{className:"summary-main",children:[f.jsxs("div",{className:"summary-left",children:[f.jsx("div",{className:"summary-game-area",children:f.jsxs("div",{className:"game-canvas",ref:Q,children:[f.jsx("div",{className:"gallery",children:f.jsx("div",{className:"gallery-frame",children:w.length>0?f.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):f.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),F.map((y,T)=>{const j=y.position||[0,0];return!Array.isArray(j)||j.length!==2||!Number.isFinite(j[0])||!Number.isFinite(j[1])?(console.warn(`Invalid position for block ${y.id}:`,j),null):f.jsx("div",{className:`block ${y.canMove?"movable":""} ${y.id===R?"highlighted":""}`,style:{left:`${Pe(j[0])}px`,top:`${Pe(j[1])}px`,backgroundColor:y.color||"green",cursor:y.canMove?"grab":"default",zIndex:y.id===R?20:T+1}},y.id)})]})}),f.jsxs("div",{className:"summary-progress",children:[f.jsx("input",{type:"range",min:"0",max:Math.max(0,ve-1),value:h,onChange:y=>Ie(parseInt(y.target.value)),style:{width:"100%"}}),f.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",ve,se&&f.jsxs("span",{className:"move-info",children:[" "," Player: ",se.player,Array.isArray(se.position)&&se.position.length===2&&`  Position: (${se.position[0]}, ${se.position[1]})`,Number.isFinite(se.holdTime)&&`  Hold: ${Oe(se.holdTime,2)}s`," "," Time: ",Oe(se.elapsed,1),"s"]})]})]})]}),f.jsxs("div",{className:"summary-right",children:[f.jsxs("div",{className:"summary-stats",children:[f.jsxs("div",{className:"summary-stats-row",children:[f.jsx("span",{className:"summary-stats-label",children:"Duration"}),f.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),f.jsxs("div",{className:"summary-stats-row",children:[f.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),f.jsx("span",{className:"summary-stats-value",children:ve})]}),f.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[f.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),f.jsx("div",{className:"summary-stats-value",children:Ye.length===0?f.jsx("span",{children:""}):Ye.map(([y,T])=>f.jsxs("div",{children:[y,": ",T]},y))})]})]}),f.jsxs("div",{className:"summary-controls",children:[f.jsx("button",{onClick:()=>Ie(0),disabled:h===0,children:" First"}),f.jsx("button",{onClick:()=>Ie(h-1),disabled:h===0,children:" Previous"}),f.jsx("button",{onClick:N?le:b,children:N?" Pause":" Play"}),f.jsx("button",{onClick:()=>Ie(h+1),disabled:h>=ve-1,children:" Next"}),f.jsx("button",{onClick:()=>Ie(ve-1),disabled:h>=ve-1,children:" Last"}),f.jsxs("div",{className:"speed-control",children:[f.jsx("label",{children:"Speed:"}),f.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:C,onChange:y=>B(parseFloat(y.target.value))}),f.jsxs("span",{children:[C,"x"]})]}),ue&&f.jsxs(f.Fragment,{children:[f.jsx("input",{ref:z,type:"file",accept:".json",onChange:Ve,style:{display:"none"}}),f.jsx("button",{onClick:()=>{var y;return(y=z.current)==null?void 0:y.click()},children:" Load New File"})]})]}),f.jsxs("div",{className:"summary-moves-list",children:[f.jsxs("div",{className:"move-list-header",children:[f.jsx("h2",{children:"Move History"}),l&&f.jsx("button",{className:`edit-mode-toggle ${M?"active":""}`,onClick:()=>U(!M),children:M?" Done Editing":"Edit Players"})]}),f.jsx("div",{className:"moves-scroll",children:a.moves.map((y,T)=>f.jsxs("div",{className:`move-item ${T===h?"active":""} ${M?"edit-mode":""}`,onClick:()=>!M&&Ie(T),children:[f.jsx("div",{className:"move-number",children:T+1}),y.camera_frame&&f.jsx("div",{className:"move-camera-frame",children:f.jsx("img",{src:y.camera_frame,alt:`Camera frame for move ${T+1}`,className:"camera-frame-thumbnail"})}),f.jsxs("div",{className:"move-details",children:[f.jsx("div",{className:"move-type",children:y.type}),M&&l?f.jsxs("div",{className:"move-player-edit",children:[f.jsx("label",{children:"Player:"}),f.jsxs("select",{value:y.player||"Unknown",onChange:j=>{const x=j.target.value;l(y._id,x)},onClick:j=>j.stopPropagation(),children:[f.jsx("option",{value:"Player A",children:"Player A"}),f.jsx("option",{value:"Player B",children:"Player B"}),f.jsx("option",{value:"None",children:"None"}),f.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):f.jsxs("div",{className:"move-player",children:["Player: ",y.player]}),y.blockId!==null&&y.blockId!==void 0||y.unit!==null&&y.unit!==void 0?f.jsxs("div",{className:"move-unit",children:["Block: ",y.blockId!==void 0?y.blockId:y.unit]}):null,Array.isArray(y.position)&&y.position.length===2&&f.jsxs("div",{className:"move-position",children:["Position: (",y.position[0],", ",y.position[1],")"]}),Number.isFinite(y.holdTime)&&y.holdTime>0&&f.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",Oe(y.holdTime,2),"s"]}),f.jsxs("div",{className:"move-time",children:["Time: ",Oe(y.elapsed,1),"s"]})]})]},T))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Ov(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),l=P.useRef(null),a=P.useRef(null),d=P.useRef(null),h=P.useRef(null),[v,N]=P.useState(""),[_,C]=P.useState(!1),[B,F]=P.useState({camA:"None",camB:"None",merged:"None"}),[$,he]=P.useState(!0),[S,w]=P.useState(null),[E,R]=P.useState(null),Y=P.useRef(null),M=P.useRef(null),U=(y,T)=>{const j=localStorage.getItem(y);if(j===null)return T;const x=parseFloat(j);return Number.isFinite(x)?x:T},[z,Z]=P.useState(()=>({roiSize:(()=>{const y=U(kt.roiSize,44);return y>10?y:44})(),hueWeight:U(kt.hueWeight,4),satWeight:U(kt.satWeight,2),valWeight:U(kt.valWeight,1),sensitivity:U(kt.sensitivity,0)})),Q=P.useRef(z),[ue,ze]=P.useState([]),[Pe,Ce]=P.useState(""),[Qe,Ve]=P.useState("");P.useEffect(()=>{let y=!0;(async()=>{try{const I=(await navigator.mediaDevices.enumerateDevices()).filter(H=>H.kind==="videoinput");if(I.length===0){N("No cameras found");return}ze(I);const L=I.slice(0,2).map(H=>H.deviceId);Ce(L[0]||""),Ve(L[1]||L[0]||""),await Ie(L[0],e,d),L[1]?await Ie(L[1],t,h):await Ie(L[0],t,h),await Oe(),await Le("A",e,l),await Le("B",t,a)}catch(x){if(!y)return;N((x==null?void 0:x.message)||String(x))}})();const T=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),I=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),I&&R({h:I.h,s:I.s,v:I.v})}catch{ut("No existing calibrations")}};T();const j=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&T(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&Z(I=>({roiSize:(()=>{const L=U(kt.roiSize,(I==null?void 0:I.roiSize)??44);return L>10?L:(I==null?void 0:I.roiSize)??44})(),hueWeight:U(kt.hueWeight,(I==null?void 0:I.hueWeight)??4),satWeight:U(kt.satWeight,(I==null?void 0:I.satWeight)??2),valWeight:U(kt.valWeight,(I==null?void 0:I.valWeight)??1),sensitivity:U(kt.sensitivity,(I==null?void 0:I.sensitivity)??0)})))};return window.addEventListener("storage",j),()=>{if(y=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),d.current&&(d.current.getTracks().forEach(L=>L.stop()),d.current=null),h.current&&(h.current.getTracks().forEach(L=>L.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const I=t.current;I&&(I.srcObject=null),window.removeEventListener("storage",j)}},[]);const Ie=async(y,T,j)=>{const x={video:{deviceId:{exact:y}}};ut("Starting camera with deviceId:",y);const I=await navigator.mediaDevices.getUserMedia(x);j.current=I;const L=T.current;if(!L){ut("Video element not found!");return}L.srcObject=I,ut("Stream assigned to video element, waiting for metadata..."),await new Promise(H=>{if(L.readyState>=2&&L.videoWidth>0&&L.videoHeight>0)return ut("Video already ready:",L.videoWidth,"x",L.videoHeight),H();const re=()=>{ut("loadedmetadata event fired:",L.videoWidth,"x",L.videoHeight),L.removeEventListener("loadedmetadata",re),H()};L.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),L.removeEventListener("loadedmetadata",re),H()},2e3)});try{await L.play(),ut("Video play() succeeded")}catch(H){ut("Video play() failed:",H)}},b=P.useRef(null),le=P.useRef(null),se=P.useRef(null),ve=P.useRef(!1),we=async()=>{if(!ve.current){ve.current=!0;try{for(;le.current||se.current;){const y=o.current;if(!y)break;let T=null,j=null;if(le.current?(T="A",j=le.current,le.current=null):se.current&&(T="B",j=se.current,se.current=null),!!j){b.current=T;try{await y.send({image:j})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{ve.current=!1}}},Ye=(y,T)=>{y==="A"?le.current=T:se.current=T,Promise.resolve().then(we)},Oe=async()=>{if(o.current)return o.current;try{const y=await(async()=>{try{if(typeof ol.Hands=="function")return ol.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const j=document.getElementById("mp-hands-cdn-script");if(j&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const I=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(I),x())},50);setTimeout(()=>{clearInterval(I),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(j||await new Promise((x,I)=>{const L=document.createElement("script");L.id="mp-hands-cdn-script",L.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",L.async=!0,L.onload=()=>x(),L.onerror=H=>I(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(L)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),T=new y({locateFile:j=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${j}`});return T.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),T.onResults(j=>{const x=b.current;x==="A"?ne(j):x==="B"&&O(j)}),o.current=T,T}catch(y){return console.error("MediaPipe initialization error:",y),N(`MediaPipe error: ${y.message}`),null}},Le=async(y,T,j)=>{if(!await Oe())return;const I=T.current;if(!I){ut(`Video ref for ${y} not found`);return}ut(`Initializing manual frame capture for camera ${y}, video dimensions:`,I.videoWidth,"x",I.videoHeight);let L=null;const H=()=>{const ee=T.current;ee&&ee.readyState>=2&&ee.videoWidth>0&&Ye(y,ee),L=requestAnimationFrame(H)};L=requestAnimationFrame(H),j.current={stop:()=>{L&&(cancelAnimationFrame(L),L=null,ut(`Stopped manual frame capture for camera ${y}`))}},ut(`Manual frame capture started for camera ${y}`)},Te=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),V=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null});P.useEffect(()=>{Y.current=S},[S]),P.useEffect(()=>{M.current=E},[E]),P.useEffect(()=>{Q.current=z},[z]);const ne=y=>W(y,n,"A"),O=y=>W(y,r,"B"),W=(y,T,j)=>{var $e;const x=T.current;if(!x)return;const I=x.getContext("2d");if(!I)return;const L=j==="A"?e.current:t.current;if(!L||L.videoWidth===0||L.videoHeight===0){j==="A"?Te.current={wristY:null,wristX:null,landmarks:null,player:"None"}:V.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=L.videoWidth,x.height=L.videoHeight,I.drawImage(L,0,0,x.width,x.height),I.fillStyle="rgba(0, 0, 0, 0.6)",I.fillRect(x.width-80,5,75,20),I.fillStyle="white",I.font="bold 14px Arial",I.fillText(`Camera ${j}`,x.width-75,20);let H=null,ee=null,re=null,de=[];if(y.multiHandLandmarks&&y.multiHandLandmarks.length>0)for(const ke of y.multiHandLandmarks){const ye=ke[0],Ee=ye.x*x.width,Ne=ye.y*x.height;de.push({x:Ee,y:Ne,landmarks:ke}),(H===null||($?Ne<H:Ne>H))&&(H=Ne,ee=ke,re=Ee)}de.forEach(({x:ke,y:ye})=>{I.fillStyle="orange",I.beginPath(),I.arc(ke,ye,8,0,Math.PI*2),I.fill()});let fe="None";if(ee){I.fillStyle="lime",I.beginPath(),I.arc(re,H,10,0,2*Math.PI),I.fill(),I.fillStyle="lime",I.font="16px Arial",I.fillText("SELECTED",re-40,H-15);const ye=Math.max(10,Math.min(300,Math.floor((($e=Q.current)==null?void 0:$e.roiSize)||60)))/2,Ee=Math.max(0,re-ye),Ne=Math.max(0,H-ye),rt=Math.min(x.width,re+ye),Jt=Math.min(x.height,H+ye),Xe=Math.max(0,Math.floor(Ee)),at=Math.max(0,Math.floor(Ne));let it=Math.floor(rt-Ee),St=Math.floor(Jt-Ne);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Xe),St=Math.min(St,x.height-at),it>0&&St>0){I.strokeStyle="lime",I.lineWidth=3,I.strokeRect(Xe,at,it,St);try{const zt=I.getImageData(Xe,at,it,St),Lt=Y.current,dn=M.current;fe=ae(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),fe="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Xe,top:at})}if(de.length>=1){let ke=de[0].y,ye=de[0].y;de.forEach(rt=>{rt.y<ke&&(ke=rt.y),rt.y>ye&&(ye=rt.y)}),I.strokeStyle="yellow",I.setLineDash([6,4]),I.beginPath(),I.moveTo(0,$?ke:ye),I.lineTo(x.width,$?ke:ye),I.stroke(),I.strokeStyle="cyan",I.beginPath(),I.moveTo(0,$?ye:ke),I.lineTo(x.width,$?ye:ke),I.stroke(),I.setLineDash([]);const Ee=$?"A (top)":"A (bottom)",Ne=$?"B (bottom)":"B (top)";I.fillStyle="lime",I.font="16px Arial",I.fillText(Ee,6,Math.max(14,($?ke:ye)-6)),I.fillStyle="dodgerblue",I.fillText(Ne,6,Math.min(x.height-6,($?ye:ke)+18))}const xe={wristY:H,wristX:re,landmarks:ee,player:fe};j==="A"?Te.current=xe:V.current=xe;const Me=Te.current.wristY,Ae=V.current.wristY;let Be="None";if(Me!=null||Ae!=null){const ke=$?(Ee,Ne)=>Ee==null?Ne:Math.min(Ee,Ne):(Ee,Ne)=>Ee==null?Ne:Math.max(Ee,Ne);[Me,Ae].filter(Ee=>Ee!=null).reduce(ke,null)===Me?Be=Te.current.player:Be=V.current.player}F({camA:Te.current.player,camB:V.current.player,merged:Be})},K=(y,T,j)=>{y/=255,T/=255,j/=255;const x=Math.max(y,T,j),I=Math.min(y,T,j),L=x-I;let H=0;L!==0&&(x===y?H=60*((T-j)/L%6):x===T?H=60*((j-y)/L+2):H=60*((y-T)/L+4)),H<0&&(H+=360);const ee=x===0?0:L/x*255,re=x*255;return[H/2,ee,re]},ae=(y,T,j)=>{var re,de,fe,xe;const x=y.data;if(T&&!j)return{status:"Player A",percentA:null,percentB:null};if(j&&!T)return{status:"Player B",percentA:null,percentB:null};const I=((re=Q.current)==null?void 0:re.hueWeight)??4,L=((de=Q.current)==null?void 0:de.satWeight)??2,H=((fe=Q.current)==null?void 0:fe.valWeight)??1,ee=((xe=Q.current)==null?void 0:xe.sensitivity)??0;if(T&&j){let Me=0,Ae=0,Be=0;for(let Ee=0;Ee<x.length;Ee+=4){const Ne=x[Ee],rt=x[Ee+1],Jt=x[Ee+2],[Xe,at,it]=K(Ne,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Xe-T.h),180-Math.abs(Xe-T.h)),Wt=Math.min(Math.abs(Xe-j.h),180-Math.abs(Xe-j.h)),ir=Math.abs(at-T.s),zn=Math.abs(at-j.s),Ln=Math.abs(it-T.v),On=Math.abs(it-j.v),wr=dn*I+ir*L+Ln*H,Zt=Wt*I+zn*L+On*H;Math.min(wr,Zt)>180||(wr<=Zt?Me+=Lt:Ae+=Lt,Be+=Lt)}if(Be===0)return{status:"None",percentA:0,percentB:0};const $e=Me/Math.max(1e-6,Be),ke=Ae/Math.max(1e-6,Be),ye=.12*(1+.8*Math.max(0,Math.min(1,ee)));return $e>=ye&&$e>=ke?{status:"Player A",percentA:$e,percentB:ke}:ke>=ye&&ke>$e?{status:"Player B",percentA:$e,percentB:ke}:{status:"None",percentA:$e,percentB:ke}}return{status:"None",percentA:0,percentB:0}},q=(y,T,j)=>{const x=(y||0)*2,I=(T||0)/255,L=(j||0)/255,H=L*I,ee=H*(1-Math.abs(x/60%2-1)),re=L-H;let de=0,fe=0,xe=0;x>=0&&x<60?(de=H,fe=ee,xe=0):x<120?(de=ee,fe=H,xe=0):x<180?(de=0,fe=H,xe=ee):x<240?(de=0,fe=ee,xe=H):x<300?(de=ee,fe=0,xe=H):(de=H,fe=0,xe=ee);const Me=Math.round((de+re)*255),Ae=Math.round((fe+re)*255),Be=Math.round((xe+re)*255);return`rgb(${Me}, ${Ae}, ${Be})`},ie=y=>y?q(y.h,y.s,y.v):"#ffffff",D=async(y,T)=>{try{if(y==="A"){if(Ce(T),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}d.current&&(d.current.getTracks().forEach(x=>x.stop()),d.current=null);const j=e.current;j&&(j.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Ie(T,e,d),await new Promise(x=>setTimeout(x,200)),await Oe(),await Le("A",e,l),ut("Camera A switched to:",T)}else{if(Ve(T),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const j=t.current;j&&(j.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Ie(T,t,h),await new Promise(x=>setTimeout(x,200)),await Oe(),await Le("B",t,a),ut("Camera B switched to:",T)}}catch(j){console.error("[Detector2] Camera switch error:",j),N(`Camera switch error: ${j.message}`)}};return f.jsxs("div",{className:`detector-window ${_?"minimized":""}`,children:[f.jsxs("div",{className:"detector-header",children:[f.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),f.jsxs("div",{className:"detector-controls",children:[f.jsx("button",{onClick:()=>C(!_),children:_?"":""}),f.jsx("button",{onClick:()=>he(!$),title:"Toggle A criterion",children:$?"A=Top":"A=Bottom"})]})]}),f.jsxs("div",{className:"detector-content",style:{display:_?"none":"block"},children:[f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[f.jsx("span",{children:"Camera A:"}),f.jsx("select",{value:Pe,onChange:y=>D("A",y.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:ue.map(y=>f.jsx("option",{value:y.deviceId,children:y.label||`Camera ${y.deviceId.slice(0,8)}`},y.deviceId))})]}),f.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),f.jsx("canvas",{ref:n,className:"output_canvas"})]}),f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[f.jsx("span",{children:"Camera B:"}),f.jsx("select",{value:Qe,onChange:y=>D("B",y.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:ue.map(y=>f.jsx("option",{value:y.deviceId,children:y.label||`Camera ${y.deviceId.slice(0,8)}`},y.deviceId))})]}),f.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),f.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),f.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[f.jsxs("div",{className:"status-display",children:["Merged: ",f.jsx("strong",{children:B.merged})]}),f.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),f.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:S?ie(S):"#444"}})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),f.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:E?ie(E):"#444"}})]})]}),f.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[f.jsxs("div",{children:["A: ",S?`h${Math.round(S.h)} s${Math.round(S.s)} v${Math.round(S.v)}`:""]}),f.jsxs("div",{children:["B: ",E?`h${Math.round(E.h)} s${Math.round(E.s)} v${Math.round(E.v)}`:""]})]}),v&&f.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",v]}),f.jsxs("div",{style:{fontSize:12,marginTop:6},children:[f.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const Dv=()=>{var e,t;try{const n=(t=(e=import.meta)==null?void 0:e.env)==null?void 0:t.VITE_API_BASE_URL;if(n)return n.replace(/\/$/,"")}catch(n){console.warn("[Admin] Unable to read VITE_API_BASE_URL, using default.",n)}return"http://localhost:4000/api"},di=Dv(),Jc=e=>{var l,a,d,h,v;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((N,_)=>typeof _.elapsed=="number"&&_.elapsed>N?_.elapsed:N,0),r={},o={};return t.forEach(N=>{const _=(N==null?void 0:N.player)||"Unknown";r[_]=(r[_]||0)+1;const C=(N==null?void 0:N.phase)||"unknown";o[C]=(o[C]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((d=(a=e.metadata)==null?void 0:a.config)==null?void 0:d.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((v=e.metadata)==null?void 0:v.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Fv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e};function Bv(){var Y;const[e,t]=P.useState([]),[n,r]=P.useState(!0),[o,l]=P.useState(null),[a,d]=P.useState(null),[h,v]=P.useState(null),[N,_]=P.useState(!1),[C,B]=P.useState(null),[F,$]=P.useState(!1),he=P.useCallback(async()=>{r(!0),l(null);try{const M=await fetch(`${di}/sessions`);if(!M.ok)throw new Error(`Failed to load sessions (${M.status})`);const U=await M.json(),z=Array.isArray(U)?U:[];t(z),d(Z=>Z&&z.some(Q=>Q.sessionGameId===Z)?Z:z.length>0?z[0].sessionGameId:null)}catch(M){console.error("[Admin] Error fetching sessions:",M),l(M.message||"Failed to load sessions"),t([]),d(null)}finally{r(!1)}},[]);P.useEffect(()=>{he()},[he]),P.useEffect(()=>{if(!a){v(null);return}let M=!1;return(async()=>{_(!0),B(null);try{const z=await fetch(`${di}/sessions/${encodeURIComponent(a)}`);if(!z.ok)throw z.status===404?new Error("Session not found"):new Error(`Failed to load session (${z.status})`);const Z=await z.json();M||v(Jc(Z))}catch(z){console.error("[Admin] Error fetching session detail:",z),M||(B(z.message||"Failed to load session"),v(null))}finally{M||_(!1)}})(),()=>{M=!0}},[a]);const S=M=>{d(M),$(!1)},w=async()=>{if(!a)return;const M=!F;$(M),_(!0),B(null);try{const U=M?`${di}/sessions/${encodeURIComponent(a)}/experiment-only`:`${di}/sessions/${encodeURIComponent(a)}`,z=await fetch(U);if(!z.ok)throw new Error(`Failed to load session data (${z.status})`);const Z=await z.json();v(Jc(Z))}catch(U){console.error("[Admin] Error loading session data:",U),B(U.message||"Failed to load session data"),$(!M)}finally{_(!1)}},E=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},R=async(M,U)=>{if(!(!a||!M))try{const z=await fetch(`${di}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(M)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({player:U})});if(!z.ok)throw new Error(`Failed to update player (${z.status})`);v(Z=>Z&&{...Z,moves:Z.moves.map(Q=>Q._id===M?{...Q,player:U}:Q)}),console.log("[Admin] Player updated:",M,U)}catch(z){console.error("[Admin] Error updating player:",z),alert("Failed to update player: "+z.message)}};return f.jsxs("div",{className:"admin-container",children:[f.jsxs("aside",{className:"admin-sidebar",children:[f.jsxs("div",{className:"admin-sidebar-header",children:[f.jsx("h1",{children:"Admin"}),f.jsx("button",{className:"admin-refresh-button",onClick:he,disabled:n,children:n?"Refreshing":"Refresh"})]}),o&&f.jsx("div",{className:"admin-error",children:o}),f.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&f.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&f.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(M=>{const U=typeof M.movesCount=="number"?M.movesCount:Array.isArray(M.moves)?M.moves.length:0,z=M.sessionGameId===a;return f.jsxs("button",{className:`admin-session-card ${z?"active":""}`,onClick:()=>S(M.sessionGameId),children:[f.jsx("div",{className:"admin-session-id",children:M.sessionGameId}),f.jsxs("div",{className:"admin-session-meta",children:[f.jsxs("span",{children:["Participant: ",M.subjectId||""]}),f.jsxs("span",{children:["Condition: ",M.condition||""]})]}),f.jsxs("div",{className:"admin-session-meta",children:[f.jsxs("span",{children:["Moves: ",U]}),f.jsxs("span",{children:["Updated: ",Fv(M.updatedAt)]})]})]},M.sessionGameId)})]})]}),f.jsxs("main",{className:"admin-content",children:[N&&f.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),C&&f.jsx("div",{className:"admin-error admin-error--content",children:C}),!N&&!C&&h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"admin-toolbar",children:[f.jsx("button",{className:`admin-toolbar-button experiment-toggle ${F?"active":""}`,onClick:w,title:F?"Show all moves (including practice)":"Show only experiment phase moves",children:F?"Show All Moves":"Experiment Only"}),f.jsx("button",{className:"admin-toolbar-button edit-players",onClick:E,title:"Open dedicated editor for player assignments",children:"Edit Players"})]}),f.jsx("div",{className:"admin-summary-wrapper",children:f.jsx(hh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((Y=h.sessionInfo)==null?void 0:Y.sessionGameId)||a||""}${F?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:R})})]}),!N&&!C&&!h&&f.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const $v=()=>{var e,t;try{return((t=(e=import.meta)==null?void 0:e.env)==null?void 0:t.VITE_API_BASE_URL)||"http://localhost:4000/api"}catch{return"http://localhost:4000/api"}},Zc=$v(),qc=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Uv({sessionGameId:e}){var w,E,R,Y;const[t,n]=P.useState(null),[r,o]=P.useState(!0),[l,a]=P.useState(null),[d,h]=P.useState(null),[v,N]=P.useState(null),[_,C]=P.useState("all");P.useEffect(()=>{e&&B()},[e]);const B=async()=>{o(!0),a(null);try{const M=await fetch(`${Zc}/sessions/${encodeURIComponent(e)}`);if(!M.ok)throw new Error(`Failed to load session (${M.status})`);const U=await M.json();n(U)}catch(M){console.error("[MoveHistoryEditor] Error loading session:",M),a(M.message)}finally{o(!1)}},F=async(M,U)=>{if(!(!e||!M))try{const z=await fetch(`${Zc}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent(M)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({player:U})});if(!z.ok)throw new Error(`Failed to update player (${z.status})`);n(Z=>Z&&{...Z,moves:Z.moves.map(Q=>Q._id===M?{...Q,player:U}:Q)}),console.log("[MoveHistoryEditor] Player updated:",M,U)}catch(z){console.error("[MoveHistoryEditor] Error updating player:",z),alert("Failed to update player: "+z.message)}},$=((w=t==null?void 0:t.moves)==null?void 0:w.filter(M=>_==="all"?!0:M.phase===_))||[];if(r)return f.jsx("div",{className:"move-editor-container",children:f.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return f.jsx("div",{className:"move-editor-container",children:f.jsxs("div",{className:"move-editor-error",children:[f.jsx("h2",{children:"Error Loading Session"}),f.jsx("p",{children:l}),f.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return f.jsx("div",{className:"move-editor-container",children:f.jsx("div",{className:"move-editor-error",children:"Session not found"})});const he=((E=t.moves)==null?void 0:E.filter(M=>M.phase==="practice").length)||0,S=((R=t.moves)==null?void 0:R.filter(M=>M.phase==="experiment").length)||0;return f.jsxs("div",{className:"move-editor-container",children:[f.jsxs("header",{className:"move-editor-header",children:[f.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),f.jsxs("div",{className:"move-editor-title",children:[f.jsx("h1",{children:"Move History Editor"}),f.jsxs("div",{className:"session-info",children:[f.jsxs("span",{className:"session-id",children:["Session: ",e]}),f.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),f.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),f.jsxs("div",{className:"phase-filter",children:[f.jsxs("button",{className:`filter-btn ${_==="all"?"active":""}`,onClick:()=>C("all"),children:["All (",((Y=t.moves)==null?void 0:Y.length)||0,")"]}),f.jsxs("button",{className:`filter-btn ${_==="practice"?"active":""}`,onClick:()=>C("practice"),children:["Practice (",he,")"]}),f.jsxs("button",{className:`filter-btn ${_==="experiment"?"active":""}`,onClick:()=>C("experiment"),children:["Experiment (",S,")"]})]})]}),f.jsxs("div",{className:"move-editor-content",children:[f.jsx("div",{className:"moves-grid",children:$.map((M,U)=>{var z;return f.jsxs("div",{className:`move-card ${(d==null?void 0:d._id)===M._id?"selected":""}`,onClick:()=>h(M),children:[f.jsxs("div",{className:"move-card-header",children:[f.jsxs("span",{className:"move-number",children:["#",U+1]}),f.jsx("span",{className:`move-phase ${M.phase}`,children:M.phase})]}),M.camera_frame&&f.jsxs("div",{className:"move-image",onClick:Z=>{Z.stopPropagation(),N(M.camera_frame)},children:[f.jsx("img",{src:M.camera_frame,alt:`Move ${U+1}`}),f.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),f.jsxs("div",{className:"move-card-body",children:[f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Type:"}),f.jsx("span",{className:"value",children:M.type})]}),f.jsxs("div",{className:"move-info-row player-row",children:[f.jsx("span",{className:"label",children:"Player:"}),f.jsxs("select",{className:`player-select ${(z=M.player)==null?void 0:z.toLowerCase().replace(" ","-")}`,value:M.player||"Unknown",onChange:Z=>F(M._id,Z.target.value),onClick:Z=>Z.stopPropagation(),children:[f.jsx("option",{value:"Player A",children:"Player A"}),f.jsx("option",{value:"Player B",children:"Player B"}),f.jsx("option",{value:"None",children:"None"}),f.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),M.blockId!==null&&M.blockId!==void 0&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Block:"}),f.jsx("span",{className:"value",children:M.blockId})]}),Array.isArray(M.position)&&M.position.length===2&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Position:"}),f.jsxs("span",{className:"value",children:["(",M.position[0],", ",M.position[1],")"]})]}),f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Time:"}),f.jsxs("span",{className:"value",children:[qc(M.elapsed,1),"s"]})]}),Number.isFinite(M.holdTime)&&M.holdTime>0&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Hold:"}),f.jsxs("span",{className:"value",children:[qc(M.holdTime,2),"s"]})]})]})]},M._id||U)})}),$.length===0&&f.jsx("div",{className:"no-moves",children:f.jsx("p",{children:"No moves found for selected filter."})})]}),v&&f.jsx("div",{className:"image-modal",onClick:()=>N(null),children:f.jsxs("div",{className:"image-modal-content",onClick:M=>M.stopPropagation(),children:[f.jsx("button",{className:"close-modal",onClick:()=>N(null),children:""}),f.jsx("img",{src:v,alt:"Expanded view"})]})})]})}const Hv=!1;function Wv(){const[e,t]=P.useState(!1),[n,r]=P.useState(null),[o,l]=P.useState(null),[a,d]=P.useState(window.location.hash),[h,v]=P.useState(!1);P.useEffect(()=>{const F=()=>{d(window.location.hash)};return window.addEventListener("hashchange",F),()=>window.removeEventListener("hashchange",F)},[]);const N=F=>{r(F),t(!0)},_=()=>{o&&!o.closed&&o.close();const F=window.location.origin+window.location.pathname+"#/detector",$=window.open(F,"BraceletDetector","width=700,height=600,left=100,top=100");l($)};P.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),P.useEffect(()=>(window.secEnd=()=>{try{const F=oa();F.stop();const $=F.exportToJSON();localStorage.setItem("lastGameSession",$),F.downloadJSON(),window.location.hash="#/summary",console.log("Experience ended. JSON downloaded and saved. Redirecting to summary...")}catch(F){console.error("Error ending experience:",F),alert("Error ending experience: "+F.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let C=null;const B=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")C=f.jsx(Kc,{});else if(a==="#/calibrate")C=f.jsx(Lv,{});else if(a==="#/detector2")C=f.jsx(Ov,{});else if(a==="#/summary")C=f.jsx(hh,{});else if(a==="#/admin")C=f.jsx(Bv,{});else if(B){const F=decodeURIComponent(B[1]);C=f.jsx(Uv,{sessionGameId:F},F)}else C=e?f.jsxs(f.Fragment,{children:[f.jsx(Rv,{config:n,interfaceHidden:h}),f.jsx(Kc,{hidden:h}),Hv,!h&&f.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[f.jsx("button",{onClick:_,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),f.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),f.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&f.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:f.jsx("button",{onClick:()=>v(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):f.jsx(jv,{onStart:N});return f.jsx("div",{className:"App",children:C})}fs.createRoot(document.getElementById("root")).render(f.jsx(fp.StrictMode,{children:f.jsx(Wv,{})}));
