(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var id={exports:{}},sl={},od={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),rp=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),dp=Symbol.for("react.memo"),fp=Symbol.for("react.lazy"),Bu=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Bu&&e[Bu]||e["@@iterator"],typeof e=="function"?e:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,ad={};function Xr(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ud(){}ud.prototype=Xr.prototype;function ua(e,t,n){this.props=e,this.context=t,this.refs=ad,this.updater=n||ld}var ca=ua.prototype=new ud;ca.constructor=ua;sd(ca,Xr.prototype);ca.isPureReactComponent=!0;var $u=Array.isArray,cd=Object.prototype.hasOwnProperty,da={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)cd.call(t,r)&&!dd.hasOwnProperty(r)&&(o[r]=t[r]);var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){for(var h=Array(d),g=0;g<d;g++)h[g]=arguments[g+2];o.children=h}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)o[r]===void 0&&(o[r]=d[r]);return{$$typeof:Vi,type:e,key:l,ref:a,props:o,_owner:da.current}}function pp(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function mp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uu=/\/+/g;function Fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mp(""+e.key):t.toString(36)}function jo(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vi:case rp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Fl(a,0):r,$u(o)?(n="",e!=null&&(n=e.replace(Uu,"$&/")+"/"),jo(o,t,n,"",function(g){return g})):o!=null&&(fa(o)&&(o=pp(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Uu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",$u(e))for(var d=0;d<e.length;d++){l=e[d];var h=r+Fl(l,d);a+=jo(l,t,n,h,o)}else if(h=hp(e),typeof h=="function")for(e=h.call(e),d=0;!(l=e.next()).done;)l=l.value,h=r+Fl(l,d++),a+=jo(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function lo(e,t,n){if(e==null)return e;var r=[],o=0;return jo(e,r,"","",function(l){return t.call(n,l,o++)}),r}function vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},Co={transition:null},yp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Co,ReactCurrentOwner:da};function hd(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Xr;je.Fragment=ip;je.Profiler=lp;je.PureComponent=ua;je.StrictMode=op;je.Suspense=cp;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp;je.act=hd;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sd({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=da.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)cd.call(t,h)&&!dd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var g=0;g<h;g++)d[g]=arguments[g+2];r.children=d}return{$$typeof:Vi,type:e.type,key:o,ref:l,props:r,_owner:a}};je.createContext=function(e){return e={$$typeof:ap,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sp,_context:e},e.Consumer=e};je.createElement=fd;je.createFactory=function(e){var t=fd.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:up,render:e}};je.isValidElement=fa;je.lazy=function(e){return{$$typeof:fp,_payload:{_status:-1,_result:e},_init:vp}};je.memo=function(e,t){return{$$typeof:dp,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};je.unstable_act=hd;je.useCallback=function(e,t){return Ct.current.useCallback(e,t)};je.useContext=function(e){return Ct.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};je.useEffect=function(e,t){return Ct.current.useEffect(e,t)};je.useId=function(){return Ct.current.useId()};je.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Ct.current.useMemo(e,t)};je.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};je.useRef=function(e){return Ct.current.useRef(e)};je.useState=function(e){return Ct.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Ct.current.useTransition()};je.version="18.3.1";od.exports=je;var M=od.exports;const gp=np(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=M,xp=Symbol.for("react.element"),Sp=Symbol.for("react.fragment"),kp=Object.prototype.hasOwnProperty,Ep=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function pd(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kp.call(t,r)&&!jp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:xp,type:e,key:l,ref:a,props:o,_owner:Ep.current}}sl.Fragment=Sp;sl.jsx=pd;sl.jsxs=pd;id.exports=sl;var f=id.exports,hs={},md={exports:{}},Ut={},vd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,se){var ae=b.length;b.push(se);e:for(;0<ae;){var ge=ae-1>>>1,ke=b[ge];if(0<o(ke,se))b[ge]=se,b[ae]=ke,ae=ge;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var se=b[0],ae=b.pop();if(ae!==se){b[0]=ae;e:for(var ge=0,ke=b.length,Ye=ke>>>1;ge<Ye;){var Oe=2*(ge+1)-1,Le=b[Oe],Ae=Oe+1,W=b[Ae];if(0>o(Le,ae))Ae<ke&&0>o(W,Le)?(b[ge]=W,b[Ae]=ae,ge=Ae):(b[ge]=Le,b[Oe]=ae,ge=Oe);else if(Ae<ke&&0>o(W,ae))b[ge]=W,b[Ae]=ae,ge=Ae;else break e}}return se}function o(b,se){var ae=b.sortIndex-se.sortIndex;return ae!==0?ae:b.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,d=a.now();e.unstable_now=function(){return a.now()-d}}var h=[],g=[],N=1,P=null,E=3,B=!1,F=!1,$=!1,ce=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(b){for(var se=n(g);se!==null;){if(se.callback===null)r(g);else if(se.startTime<=b)r(g),se.sortIndex=se.expirationTime,t(h,se);else break;se=n(g)}}function R(b){if($=!1,j(b),!F)if(n(h)!==null)F=!0,Ve(Q);else{var se=n(g);se!==null&&Te(R,se.startTime-b)}}function Q(b,se){F=!1,$&&($=!1,S(T),T=-1),B=!0;var ae=E;try{for(j(se),P=n(h);P!==null&&(!(P.expirationTime>se)||b&&!J());){var ge=P.callback;if(typeof ge=="function"){P.callback=null,E=P.priorityLevel;var ke=ge(P.expirationTime<=se);se=e.unstable_now(),typeof ke=="function"?P.callback=ke:P===n(h)&&r(h),j(se)}else r(h);P=n(h)}if(P!==null)var Ye=!0;else{var Oe=n(g);Oe!==null&&Te(R,Oe.startTime-se),Ye=!1}return Ye}finally{P=null,E=ae,B=!1}}var K=!1,Y=null,T=-1,oe=5,z=-1;function J(){return!(e.unstable_now()-z<oe)}function de(){if(Y!==null){var b=e.unstable_now();z=b;var se=!0;try{se=Y(!0,b)}finally{se?ye():(K=!1,Y=null)}}else K=!1}var ye;if(typeof w=="function")ye=function(){w(de)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Qe=Se.port2;Se.port1.onmessage=de,ye=function(){Qe.postMessage(null)}}else ye=function(){ce(de,0)};function Ve(b){Y=b,K||(K=!0,ye())}function Te(b,se){T=ce(function(){b(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){F||B||(F=!0,Ve(Q))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(b){switch(E){case 1:case 2:case 3:var se=3;break;default:se=E}var ae=E;E=se;try{return b()}finally{E=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,se){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var ae=E;E=b;try{return se()}finally{E=ae}},e.unstable_scheduleCallback=function(b,se,ae){var ge=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ge+ae:ge):ae=ge,b){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=ae+ke,b={id:N++,callback:se,priorityLevel:b,startTime:ae,expirationTime:ke,sortIndex:-1},ae>ge?(b.sortIndex=ae,t(g,b),n(h)===null&&b===n(g)&&($?(S(T),T=-1):$=!0,Te(R,ae-ge))):(b.sortIndex=ke,t(h,b),F||B||(F=!0,Ve(Q))),b},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(b){var se=E;return function(){var ae=E;E=se;try{return b.apply(this,arguments)}finally{E=ae}}}})(yd);vd.exports=yd;var Cp=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=M,$t=Cp;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Pi={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Pi[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ps=Object.prototype.hasOwnProperty,Pp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},Wu={};function Mp(e){return ps.call(Wu,e)?!0:ps.call(Hu,e)?!1:Pp.test(e)?Wu[e]=!0:(Hu[e]=!0,!1)}function Ip(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _p(e,t,n,r){if(t===null||typeof t>"u"||Ip(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ha=/[\-:]([a-z])/g;function pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ma(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_p(t,n,o,r)&&(n=null),r||o===null?Mp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),va=Symbol.for("react.strict_mode"),ms=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),ya=Symbol.for("react.forward_ref"),vs=Symbol.for("react.suspense"),ys=Symbol.for("react.suspense_list"),ga=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Vu=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=Vu&&e[Vu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Bl;function hi(e){if(Bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var $l=!1;function Ul(e,t){if(!e||$l)return"";$l=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,d=l.length-1;1<=a&&0<=d&&o[a]!==l[d];)d--;for(;1<=a&&0<=d;a--,d--)if(o[a]!==l[d]){if(a!==1||d!==1)do if(a--,d--,0>d||o[a]!==l[d]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=d);break}}}finally{$l=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function Tp(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=Ul(e.type,!1),e;case 11:return e=Ul(e.type.render,!1),e;case 1:return e=Ul(e.type,!0),e;default:return""}}function gs(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case ms:return"Profiler";case va:return"StrictMode";case vs:return"Suspense";case ys:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case wd:return(e._context.displayName||"Context")+".Provider";case ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ga:return t=e.displayName||null,t!==null?t:gs(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return gs(e(t))}catch{}}return null}function Ap(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gs(t);case 8:return t===va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rp(e){var t=kd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=Rp(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ws(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jd(e,t){t=t.checked,t!=null&&ma(e,"checked",t,!1)}function xs(e,t){jd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ss(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ss(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ss(e,t,n){(t!=="number"||Oo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ks(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(pi(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Cd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ku(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Es(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uo,Pd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zp=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(e){zp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yi[t]=yi[e]})});function Md(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yi.hasOwnProperty(e)&&yi[e]?(""+t).trim():t+"px"}function Id(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Md(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Lp=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function js(e,t){if(t){if(Lp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Cs(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ns=null;function wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ps=null,Or=null,Dr=null;function Xu(e){if(e=Yi(e)){if(typeof Ps!="function")throw Error(G(280));var t=e.stateNode;t&&(t=fl(t),Ps(e.stateNode,e.type,t))}}function _d(e){Or?Dr?Dr.push(e):Dr=[e]:Or=e}function Td(){if(Or){var e=Or,t=Dr;if(Dr=Or=null,Xu(e),t)for(e=0;e<t.length;e++)Xu(t[e])}}function Ad(e,t){return e(t)}function Rd(){}var Hl=!1;function zd(e,t,n){if(Hl)return e(t,n);Hl=!0;try{return Ad(e,t,n)}finally{Hl=!1,(Or!==null||Dr!==null)&&(Rd(),Td())}}function Ii(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Ms=!1;if(In)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Ms=!1}function Op(e,t,n,r,o,l,a,d,h){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(N){this.onError(N)}}var gi=!1,Do=null,Fo=!1,Is=null,Dp={onError:function(e){gi=!0,Do=e}};function Fp(e,t,n,r,o,l,a,d,h){gi=!1,Do=null,Op.apply(Dp,arguments)}function Bp(e,t,n,r,o,l,a,d,h){if(Fp.apply(this,arguments),gi){if(gi){var g=Do;gi=!1,Do=null}else throw Error(G(198));Fo||(Fo=!0,Is=g)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bu(e){if(gr(e)!==e)throw Error(G(188))}function $p(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return bu(o),e;if(l===r)return bu(o),t;l=l.sibling}throw Error(G(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,d=o.child;d;){if(d===n){a=!0,n=o,r=l;break}if(d===r){a=!0,r=o,n=l;break}d=d.sibling}if(!a){for(d=l.child;d;){if(d===n){a=!0,n=l,r=o;break}if(d===r){a=!0,r=l,n=o;break}d=d.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function Od(e){return e=$p(e),e!==null?Dd(e):null}function Dd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=$t.unstable_scheduleCallback,Ju=$t.unstable_cancelCallback,Up=$t.unstable_shouldYield,Hp=$t.unstable_requestPaint,nt=$t.unstable_now,Wp=$t.unstable_getCurrentPriorityLevel,xa=$t.unstable_ImmediatePriority,Bd=$t.unstable_UserBlockingPriority,Bo=$t.unstable_NormalPriority,Vp=$t.unstable_LowPriority,$d=$t.unstable_IdlePriority,al=null,kn=null;function Gp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(al,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Kp,Qp=Math.log,Yp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(Qp(e)/Yp|0)|0}var co=64,fo=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $o(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var d=a&~o;d!==0?r=mi(d):(l&=a,l!==0&&(r=mi(l)))}else a=n&~o,a!==0?r=mi(a):l!==0&&(r=mi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Xp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),d=1<<a,h=o[a];h===-1?(!(d&n)||d&r)&&(o[a]=Xp(d,t)):h<=t&&(e.expiredLanes|=d),l&=~d}}function _s(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function Wl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Jp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ze=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wd,ka,Vd,Gd,Qd,Ts=!1,ho=[],Gn=null,Qn=null,Yn=null,_i=new Map,Ti=new Map,Un=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function li(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Yi(t),t!==null&&ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function qp(e,t,n,r,o){switch(t){case"focusin":return Gn=li(Gn,e,t,n,r,o),!0;case"dragenter":return Qn=li(Qn,e,t,n,r,o),!0;case"mouseover":return Yn=li(Yn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return _i.set(l,li(_i.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Ti.set(l,li(Ti.get(l)||null,e,t,n,r,o)),!0}return!1}function Yd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ld(n),t!==null){e.blockedOn=t,Qd(e.priority,function(){Vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function No(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=As(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ns=r,n.target.dispatchEvent(r),Ns=null}else return t=Yi(n),t!==null&&ka(t),e.blockedOn=n,!1;t.shift()}return!0}function qu(e,t,n){No(e)&&n.delete(t)}function em(){Ts=!1,Gn!==null&&No(Gn)&&(Gn=null),Qn!==null&&No(Qn)&&(Qn=null),Yn!==null&&No(Yn)&&(Yn=null),_i.forEach(qu),Ti.forEach(qu)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Ts||(Ts=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,em)))}function Ai(e){function t(o){return si(o,e)}if(0<ho.length){si(ho[0],e);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&si(Gn,e),Qn!==null&&si(Qn,e),Yn!==null&&si(Yn,e),_i.forEach(t),Ti.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&Un.shift()}var Fr=Rn.ReactCurrentBatchConfig,Uo=!0;function tm(e,t,n,r){var o=ze,l=Fr.transition;Fr.transition=null;try{ze=1,Ea(e,t,n,r)}finally{ze=o,Fr.transition=l}}function nm(e,t,n,r){var o=ze,l=Fr.transition;Fr.transition=null;try{ze=4,Ea(e,t,n,r)}finally{ze=o,Fr.transition=l}}function Ea(e,t,n,r){if(Uo){var o=As(e,t,n,r);if(o===null)ql(e,t,r,Ho,n),Zu(e,r);else if(qp(o,e,t,n,r))r.stopPropagation();else if(Zu(e,r),t&4&&-1<Zp.indexOf(e)){for(;o!==null;){var l=Yi(o);if(l!==null&&Wd(l),l=As(e,t,n,r),l===null&&ql(e,t,r,Ho,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else ql(e,t,r,null,n)}}var Ho=null;function As(e,t,n,r){if(Ho=null,e=wa(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ho=e,null}function Kd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wp()){case xa:return 1;case Bd:return 4;case Bo:case Vp:return 16;case $d:return 536870912;default:return 16}default:return 16}}var Wn=null,ja=null,Po=null;function Xd(){if(Po)return Po;var e,t=ja,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Po=o.slice(e,1<r?1-r:void 0)}function Mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function po(){return!0}function ec(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?po:ec,this.isPropagationStopped=ec,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),t}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(br),Qi=Ze({},br,{view:0,detail:0}),rm=Ht(Qi),Vl,Gl,ai,ul=Ze({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(Vl=e.screenX-ai.screenX,Gl=e.screenY-ai.screenY):Gl=Vl=0,ai=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:Gl}}),tc=Ht(ul),im=Ze({},ul,{dataTransfer:0}),om=Ht(im),lm=Ze({},Qi,{relatedTarget:0}),Ql=Ht(lm),sm=Ze({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Ht(sm),um=Ze({},br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=Ht(um),dm=Ze({},br,{data:0}),nc=Ht(dm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pm[e])?!!t[e]:!1}function Na(){return mm}var vm=Ze({},Qi,{key:function(e){if(e.key){var t=fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ym=Ht(vm),gm=Ze({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Ht(gm),wm=Ze({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),xm=Ht(wm),Sm=Ze({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=Ht(Sm),Em=Ze({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=Ht(Em),Cm=[9,13,27,32],Pa=In&&"CompositionEvent"in window,wi=null;In&&"documentMode"in document&&(wi=document.documentMode);var Nm=In&&"TextEvent"in window&&!wi,bd=In&&(!Pa||wi&&8<wi&&11>=wi),ic=" ",oc=!1;function Jd(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Pm(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(oc=!0,ic);case"textInput":return e=t.data,e===ic&&oc?null:e;default:return null}}function Mm(e,t){if(Cr)return e==="compositionend"||!Pa&&Jd(e,t)?(e=Xd(),Po=ja=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bd&&t.locale!=="ko"?null:t.data;default:return null}}var Im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Im[e.type]:t==="textarea"}function qd(e,t,n,r){_d(r),t=Wo(t,"onChange"),0<t.length&&(n=new Ca("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xi=null,Ri=null;function _m(e){df(e,0)}function cl(e){var t=Mr(e);if(Ed(t))return e}function Tm(e,t){if(e==="change")return t}var ef=!1;if(In){var Yl;if(In){var Kl="oninput"in document;if(!Kl){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),Kl=typeof sc.oninput=="function"}Yl=Kl}else Yl=!1;ef=Yl&&(!document.documentMode||9<document.documentMode)}function ac(){xi&&(xi.detachEvent("onpropertychange",tf),Ri=xi=null)}function tf(e){if(e.propertyName==="value"&&cl(Ri)){var t=[];qd(t,Ri,e,wa(e)),zd(_m,t)}}function Am(e,t,n){e==="focusin"?(ac(),xi=t,Ri=n,xi.attachEvent("onpropertychange",tf)):e==="focusout"&&ac()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(Ri)}function zm(e,t){if(e==="click")return cl(t)}function Lm(e,t){if(e==="input"||e==="change")return cl(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Om;function zi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ps.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cc(e,t){var n=uc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uc(n)}}function nf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rf(){for(var e=window,t=Oo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oo(e.document)}return t}function Ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dm(e){var t=rf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(r!==null&&Ma(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=cc(n,l);var a=cc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=In&&"documentMode"in document&&11>=document.documentMode,Nr=null,Rs=null,Si=null,zs=!1;function dc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zs||Nr==null||Nr!==Oo(r)||(r=Nr,"selectionStart"in r&&Ma(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&zi(Si,r)||(Si=r,r=Wo(Rs,"onSelect"),0<r.length&&(t=new Ca("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Xl={},of={};In&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function dl(e){if(Xl[e])return Xl[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in of)return Xl[e]=t[n];return e}var lf=dl("animationend"),sf=dl("animationiteration"),af=dl("animationstart"),uf=dl("transitionend"),cf=new Map,fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){cf.set(e,t),yr(t,[e])}for(var bl=0;bl<fc.length;bl++){var Jl=fc[bl],Bm=Jl.toLowerCase(),$m=Jl[0].toUpperCase()+Jl.slice(1);tr(Bm,"on"+$m)}tr(lf,"onAnimationEnd");tr(sf,"onAnimationIteration");tr(af,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(uf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Um=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function hc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Bp(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var d=r[a],h=d.instance,g=d.currentTarget;if(d=d.listener,h!==l&&o.isPropagationStopped())break e;hc(o,d,g),l=h}else for(a=0;a<r.length;a++){if(d=r[a],h=d.instance,g=d.currentTarget,d=d.listener,h!==l&&o.isPropagationStopped())break e;hc(o,d,g),l=h}}}if(Fo)throw e=Is,Fo=!1,Is=null,e}function He(e,t){var n=t[Bs];n===void 0&&(n=t[Bs]=new Set);var r=e+"__bubble";n.has(r)||(ff(t,e,2,!1),n.add(r))}function Zl(e,t,n){var r=0;t&&(r|=4),ff(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[vo]){e[vo]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Um.has(n)||Zl(n,!1,e),Zl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,Zl("selectionchange",!1,t))}}function ff(e,t,n,r){switch(Kd(t)){case 1:var o=tm;break;case 4:o=nm;break;default:o=Ea}n=o.bind(null,t,n,e),o=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ql(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var d=r.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;d!==null;){if(a=sr(d),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}d=d.parentNode}}r=r.return}zd(function(){var g=l,N=wa(n),P=[];e:{var E=cf.get(e);if(E!==void 0){var B=Ca,F=e;switch(e){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":B=ym;break;case"focusin":F="focus",B=Ql;break;case"focusout":F="blur",B=Ql;break;case"beforeblur":case"afterblur":B=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=xm;break;case lf:case sf:case af:B=am;break;case uf:B=km;break;case"scroll":B=rm;break;case"wheel":B=jm;break;case"copy":case"cut":case"paste":B=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=rc}var $=(t&4)!==0,ce=!$&&e==="scroll",S=$?E!==null?E+"Capture":null:E;$=[];for(var w=g,j;w!==null;){j=w;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,S!==null&&(R=Ii(w,S),R!=null&&$.push(Oi(w,R,j)))),ce)break;w=w.return}0<$.length&&(E=new B(E,F,null,n,N),P.push({event:E,listeners:$}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",E&&n!==Ns&&(F=n.relatedTarget||n.fromElement)&&(sr(F)||F[_n]))break e;if((B||E)&&(E=N.window===N?N:(E=N.ownerDocument)?E.defaultView||E.parentWindow:window,B?(F=n.relatedTarget||n.toElement,B=g,F=F?sr(F):null,F!==null&&(ce=gr(F),F!==ce||F.tag!==5&&F.tag!==6)&&(F=null)):(B=null,F=g),B!==F)){if($=tc,R="onMouseLeave",S="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&($=rc,R="onPointerLeave",S="onPointerEnter",w="pointer"),ce=B==null?E:Mr(B),j=F==null?E:Mr(F),E=new $(R,w+"leave",B,n,N),E.target=ce,E.relatedTarget=j,R=null,sr(N)===g&&($=new $(S,w+"enter",F,n,N),$.target=j,$.relatedTarget=ce,R=$),ce=R,B&&F)t:{for($=B,S=F,w=0,j=$;j;j=kr(j))w++;for(j=0,R=S;R;R=kr(R))j++;for(;0<w-j;)$=kr($),w--;for(;0<j-w;)S=kr(S),j--;for(;w--;){if($===S||S!==null&&$===S.alternate)break t;$=kr($),S=kr(S)}$=null}else $=null;B!==null&&pc(P,E,B,$,!1),F!==null&&ce!==null&&pc(P,ce,F,$,!0)}}e:{if(E=g?Mr(g):window,B=E.nodeName&&E.nodeName.toLowerCase(),B==="select"||B==="input"&&E.type==="file")var Q=Tm;else if(lc(E))if(ef)Q=Lm;else{Q=Rm;var K=Am}else(B=E.nodeName)&&B.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Q=zm);if(Q&&(Q=Q(e,g))){qd(P,Q,n,N);break e}K&&K(e,E,g),e==="focusout"&&(K=E._wrapperState)&&K.controlled&&E.type==="number"&&Ss(E,"number",E.value)}switch(K=g?Mr(g):window,e){case"focusin":(lc(K)||K.contentEditable==="true")&&(Nr=K,Rs=g,Si=null);break;case"focusout":Si=Rs=Nr=null;break;case"mousedown":zs=!0;break;case"contextmenu":case"mouseup":case"dragend":zs=!1,dc(P,n,N);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":dc(P,n,N)}var Y;if(Pa)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Cr?Jd(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(bd&&n.locale!=="ko"&&(Cr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Cr&&(Y=Xd()):(Wn=N,ja="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),K=Wo(g,T),0<K.length&&(T=new nc(T,e,null,n,N),P.push({event:T,listeners:K}),Y?T.data=Y:(Y=Zd(n),Y!==null&&(T.data=Y)))),(Y=Nm?Pm(e,n):Mm(e,n))&&(g=Wo(g,"onBeforeInput"),0<g.length&&(N=new nc("onBeforeInput","beforeinput",null,n,N),P.push({event:N,listeners:g}),N.data=Y))}df(P,t)})}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Ii(e,n),l!=null&&r.unshift(Oi(e,l,o)),l=Ii(e,t),l!=null&&r.push(Oi(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var d=n,h=d.alternate,g=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&g!==null&&(d=g,o?(h=Ii(n,l),h!=null&&a.unshift(Oi(n,h,d))):o||(h=Ii(n,l),h!=null&&a.push(Oi(n,h,d)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(Hm,`
`).replace(Wm,"")}function yo(e,t,n){if(t=mc(t),mc(e)!==t&&n)throw Error(G(425))}function Vo(){}var Ls=null,Os=null;function Ds(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(Qm)}:Fs;function Qm(e){setTimeout(function(){throw e})}function es(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ai(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ai(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jr,Di="__reactProps$"+Jr,_n="__reactContainer$"+Jr,Bs="__reactEvents$"+Jr,Ym="__reactListeners$"+Jr,Km="__reactHandles$"+Jr;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_n]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yc(e);e!==null;){if(n=e[Sn])return n;e=yc(e)}return t}e=n,n=e.parentNode}return null}function Yi(e){return e=e[Sn]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function fl(e){return e[Di]||null}var $s=[],Ir=-1;function nr(e){return{current:e}}function We(e){0>Ir||(e.current=$s[Ir],$s[Ir]=null,Ir--)}function Fe(e,t){Ir++,$s[Ir]=e.current,e.current=t}var er={},xt=nr(er),Tt=nr(!1),fr=er;function Wr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function At(e){return e=e.childContextTypes,e!=null}function Go(){We(Tt),We(xt)}function gc(e,t,n){if(xt.current!==er)throw Error(G(168));Fe(xt,t),Fe(Tt,n)}function hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(G(108,Ap(e)||"Unknown",o));return Ze({},n,r)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Fe(xt,e),Fe(Tt,Tt.current),!0}function wc(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=hf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,We(Tt),We(xt),Fe(xt,e)):We(Tt),Fe(Tt,n)}var Cn=null,hl=!1,ts=!1;function pf(e){Cn===null?Cn=[e]:Cn.push(e)}function Xm(e){hl=!0,pf(e)}function rr(){if(!ts&&Cn!==null){ts=!0;var e=0,t=ze;try{var n=Cn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,hl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Fd(xa,rr),o}finally{ze=t,ts=!1}}return null}var _r=[],Tr=0,Yo=null,Ko=0,Gt=[],Qt=0,hr=null,Nn=1,Pn="";function or(e,t){_r[Tr++]=Ko,_r[Tr++]=Yo,Yo=e,Ko=t}function mf(e,t,n){Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,hr=e;var r=Nn;e=Pn;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,Pn=l+e}else Nn=1<<l|n<<o|r,Pn=e}function Ia(e){e.return!==null&&(or(e,1),mf(e,1,0))}function _a(e){for(;e===Yo;)Yo=_r[--Tr],_r[Tr]=null,Ko=_r[--Tr],_r[Tr]=null;for(;e===hr;)hr=Gt[--Qt],Gt[Qt]=null,Pn=Gt[--Qt],Gt[Qt]=null,Nn=Gt[--Qt],Gt[Qt]=null}var Bt=null,Ft=null,Ge=!1,ln=null;function vf(e,t){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bt=e,Ft=null,!0):!1;default:return!1}}function Us(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hs(e){if(Ge){var t=Ft;if(t){var n=t;if(!xc(e,t)){if(Us(e))throw Error(G(418));t=Kn(n.nextSibling);var r=Bt;t&&xc(e,t)?vf(r,n):(e.flags=e.flags&-4097|2,Ge=!1,Bt=e)}}else{if(Us(e))throw Error(G(418));e.flags=e.flags&-4097|2,Ge=!1,Bt=e}}}function Sc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bt=e}function go(e){if(e!==Bt)return!1;if(!Ge)return Sc(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ds(e.type,e.memoizedProps)),t&&(t=Ft)){if(Us(e))throw yf(),Error(G(418));for(;t;)vf(e,t),t=Kn(t.nextSibling)}if(Sc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Bt?Kn(e.stateNode.nextSibling):null;return!0}function yf(){for(var e=Ft;e;)e=Kn(e.nextSibling)}function Vr(){Ft=Bt=null,Ge=!1}function Ta(e){ln===null?ln=[e]:ln.push(e)}var bm=Rn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var d=o.refs;a===null?delete d[l]:d[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kc(e){var t=e._init;return t(e._payload)}function gf(e){function t(S,w){if(e){var j=S.deletions;j===null?(S.deletions=[w],S.flags|=16):j.push(w)}}function n(S,w){if(!e)return null;for(;w!==null;)t(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function o(S,w){return S=Zn(S,w),S.index=0,S.sibling=null,S}function l(S,w,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<w?(S.flags|=2,w):j):(S.flags|=2,w)):(S.flags|=1048576,w)}function a(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,w,j,R){return w===null||w.tag!==6?(w=as(j,S.mode,R),w.return=S,w):(w=o(w,j),w.return=S,w)}function h(S,w,j,R){var Q=j.type;return Q===jr?N(S,w,j.props.children,R,j.key):w!==null&&(w.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Bn&&kc(Q)===w.type)?(R=o(w,j.props),R.ref=ui(S,w,j),R.return=S,R):(R=Lo(j.type,j.key,j.props,null,S.mode,R),R.ref=ui(S,w,j),R.return=S,R)}function g(S,w,j,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=us(j,S.mode,R),w.return=S,w):(w=o(w,j.children||[]),w.return=S,w)}function N(S,w,j,R,Q){return w===null||w.tag!==7?(w=dr(j,S.mode,R,Q),w.return=S,w):(w=o(w,j),w.return=S,w)}function P(S,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=as(""+w,S.mode,j),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case so:return j=Lo(w.type,w.key,w.props,null,S.mode,j),j.ref=ui(S,null,w),j.return=S,j;case Er:return w=us(w,S.mode,j),w.return=S,w;case Bn:var R=w._init;return P(S,R(w._payload),j)}if(pi(w)||ii(w))return w=dr(w,S.mode,j,null),w.return=S,w;wo(S,w)}return null}function E(S,w,j,R){var Q=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return Q!==null?null:d(S,w,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case so:return j.key===Q?h(S,w,j,R):null;case Er:return j.key===Q?g(S,w,j,R):null;case Bn:return Q=j._init,E(S,w,Q(j._payload),R)}if(pi(j)||ii(j))return Q!==null?null:N(S,w,j,R,null);wo(S,j)}return null}function B(S,w,j,R,Q){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(j)||null,d(w,S,""+R,Q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case so:return S=S.get(R.key===null?j:R.key)||null,h(w,S,R,Q);case Er:return S=S.get(R.key===null?j:R.key)||null,g(w,S,R,Q);case Bn:var K=R._init;return B(S,w,j,K(R._payload),Q)}if(pi(R)||ii(R))return S=S.get(j)||null,N(w,S,R,Q,null);wo(w,R)}return null}function F(S,w,j,R){for(var Q=null,K=null,Y=w,T=w=0,oe=null;Y!==null&&T<j.length;T++){Y.index>T?(oe=Y,Y=null):oe=Y.sibling;var z=E(S,Y,j[T],R);if(z===null){Y===null&&(Y=oe);break}e&&Y&&z.alternate===null&&t(S,Y),w=l(z,w,T),K===null?Q=z:K.sibling=z,K=z,Y=oe}if(T===j.length)return n(S,Y),Ge&&or(S,T),Q;if(Y===null){for(;T<j.length;T++)Y=P(S,j[T],R),Y!==null&&(w=l(Y,w,T),K===null?Q=Y:K.sibling=Y,K=Y);return Ge&&or(S,T),Q}for(Y=r(S,Y);T<j.length;T++)oe=B(Y,S,T,j[T],R),oe!==null&&(e&&oe.alternate!==null&&Y.delete(oe.key===null?T:oe.key),w=l(oe,w,T),K===null?Q=oe:K.sibling=oe,K=oe);return e&&Y.forEach(function(J){return t(S,J)}),Ge&&or(S,T),Q}function $(S,w,j,R){var Q=ii(j);if(typeof Q!="function")throw Error(G(150));if(j=Q.call(j),j==null)throw Error(G(151));for(var K=Q=null,Y=w,T=w=0,oe=null,z=j.next();Y!==null&&!z.done;T++,z=j.next()){Y.index>T?(oe=Y,Y=null):oe=Y.sibling;var J=E(S,Y,z.value,R);if(J===null){Y===null&&(Y=oe);break}e&&Y&&J.alternate===null&&t(S,Y),w=l(J,w,T),K===null?Q=J:K.sibling=J,K=J,Y=oe}if(z.done)return n(S,Y),Ge&&or(S,T),Q;if(Y===null){for(;!z.done;T++,z=j.next())z=P(S,z.value,R),z!==null&&(w=l(z,w,T),K===null?Q=z:K.sibling=z,K=z);return Ge&&or(S,T),Q}for(Y=r(S,Y);!z.done;T++,z=j.next())z=B(Y,S,T,z.value,R),z!==null&&(e&&z.alternate!==null&&Y.delete(z.key===null?T:z.key),w=l(z,w,T),K===null?Q=z:K.sibling=z,K=z);return e&&Y.forEach(function(de){return t(S,de)}),Ge&&or(S,T),Q}function ce(S,w,j,R){if(typeof j=="object"&&j!==null&&j.type===jr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case so:e:{for(var Q=j.key,K=w;K!==null;){if(K.key===Q){if(Q=j.type,Q===jr){if(K.tag===7){n(S,K.sibling),w=o(K,j.props.children),w.return=S,S=w;break e}}else if(K.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Bn&&kc(Q)===K.type){n(S,K.sibling),w=o(K,j.props),w.ref=ui(S,K,j),w.return=S,S=w;break e}n(S,K);break}else t(S,K);K=K.sibling}j.type===jr?(w=dr(j.props.children,S.mode,R,j.key),w.return=S,S=w):(R=Lo(j.type,j.key,j.props,null,S.mode,R),R.ref=ui(S,w,j),R.return=S,S=R)}return a(S);case Er:e:{for(K=j.key;w!==null;){if(w.key===K)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(S,w.sibling),w=o(w,j.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else t(S,w);w=w.sibling}w=us(j,S.mode,R),w.return=S,S=w}return a(S);case Bn:return K=j._init,ce(S,w,K(j._payload),R)}if(pi(j))return F(S,w,j,R);if(ii(j))return $(S,w,j,R);wo(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(S,w.sibling),w=o(w,j),w.return=S,S=w):(n(S,w),w=as(j,S.mode,R),w.return=S,S=w),a(S)):n(S,w)}return ce}var Gr=gf(!0),wf=gf(!1),Xo=nr(null),bo=null,Ar=null,Aa=null;function Ra(){Aa=Ar=bo=null}function za(e){var t=Xo.current;We(Xo),e._currentValue=t}function Ws(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){bo=e,Aa=Ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},Ar===null){if(bo===null)throw Error(G(308));Ar=e,bo.dependencies={lanes:0,firstContext:e}}else Ar=Ar.next=e;return t}var ar=null;function La(e){ar===null?ar=[e]:ar.push(e)}function xf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function Io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}function Ec(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var h=d,g=h.next;h.next=null,a===null?l=g:a.next=g,a=h;var N=e.alternate;N!==null&&(N=N.updateQueue,d=N.lastBaseUpdate,d!==a&&(d===null?N.firstBaseUpdate=g:d.next=g,N.lastBaseUpdate=h))}if(l!==null){var P=o.baseState;a=0,N=g=h=null,d=l;do{var E=d.lane,B=d.eventTime;if((r&E)===E){N!==null&&(N=N.next={eventTime:B,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var F=e,$=d;switch(E=t,B=n,$.tag){case 1:if(F=$.payload,typeof F=="function"){P=F.call(B,P,E);break e}P=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=$.payload,E=typeof F=="function"?F.call(B,P,E):F,E==null)break e;P=Ze({},P,E);break e;case 2:$n=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,E=o.effects,E===null?o.effects=[d]:E.push(d))}else B={eventTime:B,lane:E,tag:d.tag,payload:d.payload,callback:d.callback,next:null},N===null?(g=N=B,h=P):N=N.next=B,a|=E;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;E=d,d=E.next,E.next=null,o.lastBaseUpdate=E,o.shared.pending=null}}while(!0);if(N===null&&(h=P),o.baseState=h,o.firstBaseUpdate=g,o.lastBaseUpdate=N,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=P}}function jc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(G(191,o));o.call(r)}}}var Ki={},En=nr(Ki),Fi=nr(Ki),Bi=nr(Ki);function ur(e){if(e===Ki)throw Error(G(174));return e}function Da(e,t){switch(Fe(Bi,t),Fe(Fi,e),Fe(En,Ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Es(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Es(t,e)}We(En),Fe(En,t)}function Qr(){We(En),We(Fi),We(Bi)}function kf(e){ur(Bi.current);var t=ur(En.current),n=Es(t,e.type);t!==n&&(Fe(Fi,e),Fe(En,n))}function Fa(e){Fi.current===e&&(We(En),We(Fi))}var be=nr(0);function Zo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function Ba(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var _o=Rn.ReactCurrentDispatcher,rs=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,qo=!1,ki=!1,$i=0,Jm=0;function yt(){throw Error(G(321))}function $a(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_o.current=e===null||e.memoizedState===null?tv:nv,e=n(r,o),ki){l=0;do{if(ki=!1,$i=0,25<=l)throw Error(G(301));l+=1,ct=lt=null,t.updateQueue=null,_o.current=rv,e=n(r,o)}while(ki)}if(_o.current=el,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,qo=!1,t)throw Error(G(300));return e}function Ha(){var e=$i!==0;return $i=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function bt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(G(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function Ui(e,t){return typeof t=="function"?t(e):t}function is(e){var t=bt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var d=a=null,h=null,g=l;do{var N=g.lane;if((pr&N)===N)h!==null&&(h=h.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var P={lane:N,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};h===null?(d=h=P,a=r):h=h.next=P,Je.lanes|=N,mr|=N}g=g.next}while(g!==null&&g!==l);h===null?a=r:h.next=d,cn(r,t.memoizedState)||(_t=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function os(e){var t=bt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(_t=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Ef(){}function jf(e,t){var n=Je,r=bt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,_t=!0),r=r.queue,Wa(Pf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Nf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(G(349));pr&30||Cf(n,t,o)}return o}function Cf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nf(e,t,n,r){t.value=n,t.getSnapshot=r,Mf(t)&&If(e)}function Pf(e,t,n){return n(function(){Mf(t)&&If(e)})}function Mf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function If(e){var t=Tn(e,1);t!==null&&un(t,e,1,-1)}function Cc(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=ev.bind(null,Je,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function _f(){return bt().memoizedState}function To(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var o=bt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&$a(r,a.deps)){o.memoizedState=Hi(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Hi(1|t,n,l,r)}function Nc(e,t){return To(8390656,8,e,t)}function Wa(e,t){return pl(2048,8,e,t)}function Tf(e,t){return pl(4,2,e,t)}function Af(e,t){return pl(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zf(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,Rf.bind(null,t,e),n)}function Va(){}function Lf(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Of(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Df(e,t,n){return pr&21?(cn(n,t)||(n=Ud(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=n)}function Zm(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=rs.transition;rs.transition={};try{e(!1),t()}finally{ze=n,rs.transition=r}}function Ff(){return bt().memoizedState}function qm(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bf(e))$f(t,n);else if(n=xf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Uf(n,t,r)}}function ev(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bf(e))$f(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,d=l(a,n);if(o.hasEagerState=!0,o.eagerState=d,cn(d,a)){var h=t.interleaved;h===null?(o.next=o,La(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=xf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Uf(n,t,r))}}function Bf(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function $f(e,t){ki=qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}var el={readContext:Xt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},tv={readContext:Xt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Nc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:Cc,useDebugValue:Va,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=Cc(!1),t=e[0];return e=Zm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(Ge){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),dt===null)throw Error(G(349));pr&30||Cf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Nc(Pf.bind(null,r,l,e),[e]),r.flags|=2048,Hi(9,Nf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(Ge){var n=Pn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$i++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nv={readContext:Xt,useCallback:Lf,useContext:Xt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:Tf,useLayoutEffect:Af,useMemo:Of,useReducer:is,useRef:_f,useState:function(){return is(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=bt();return Df(t,lt.memoizedState,e)},useTransition:function(){var e=is(Ui)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1},rv={readContext:Xt,useCallback:Lf,useContext:Xt,useEffect:Wa,useImperativeHandle:zf,useInsertionEffect:Tf,useLayoutEffect:Af,useMemo:Of,useReducer:os,useRef:_f,useState:function(){return os(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=bt();return lt===null?t.memoizedState=e:Df(t,lt.memoizedState,e)},useTransition:function(){var e=os(Ui)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Ff,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Mn(r,o);l.payload=t,n!=null&&(l.callback=n),t=Xn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=Mn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Xn(e,l,o),t!==null&&(un(t,e,o,r),Io(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=Mn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Xn(e,o,r),t!==null&&(un(t,e,r,n),Io(t,e,r))}};function Pc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(o,l):!0}function Hf(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Xt(l):(o=At(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Mc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oa(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Xt(l):(l=At(t)?fr:xt.current,o.context=Wr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Vs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ml.enqueueReplaceState(o,o.state,null),Jo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var n="",r=t;do n+=Tp(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iv=typeof WeakMap=="function"?WeakMap:Map;function Wf(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nl||(nl=!0,na=r),Qs(e,t)},n}function Vf(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Qs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qs(e,t),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ic(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gv.bind(null,e,t,n),t.then(e,e))}function _c(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var ov=Rn.ReactCurrentOwner,_t=!1;function Et(e,t,n,r){t.child=e===null?wf(t,null,n,r):Gr(t,e.child,n,r)}function Ac(e,t,n,r,o){n=n.render;var l=t.ref;return Br(t,o),r=Ua(e,t,n,r,l,o),n=Ha(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ge&&n&&Ia(t),t.flags|=1,Et(e,t,r,o),t.child)}function Rc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Za(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Gf(e,t,l,r,o)):(e=Lo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(a,r)&&e.ref===t.ref)return An(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Gf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(zi(l,r)&&e.ref===t.ref)if(_t=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,An(e,t,o)}return Ys(e,t,n,r,o)}function Qf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(zr,Dt),Dt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(zr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Fe(zr,Dt),Dt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Fe(zr,Dt),Dt|=r;return Et(e,t,o,n),t.child}function Yf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,n,r,o){var l=At(n)?fr:xt.current;return l=Wr(t,l),Br(t,o),n=Ua(e,t,n,r,l,o),r=Ha(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(Ge&&r&&Ia(t),t.flags|=1,Et(e,t,n,o),t.child)}function zc(e,t,n,r,o){if(At(n)){var l=!0;Qo(t)}else l=!1;if(Br(t,o),t.stateNode===null)Ao(e,t),Hf(t,n,r),Gs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,d=t.memoizedProps;a.props=d;var h=a.context,g=n.contextType;typeof g=="object"&&g!==null?g=Xt(g):(g=At(n)?fr:xt.current,g=Wr(t,g));var N=n.getDerivedStateFromProps,P=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function";P||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==r||h!==g)&&Mc(t,a,r,g),$n=!1;var E=t.memoizedState;a.state=E,Jo(t,r,a,o),h=t.memoizedState,d!==r||E!==h||Tt.current||$n?(typeof N=="function"&&(Vs(t,n,N,r),h=t.memoizedState),(d=$n||Pc(t,n,d,r,E,h,g))?(P||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=g,r=d):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Sf(e,t),d=t.memoizedProps,g=t.type===t.elementType?d:rn(t.type,d),a.props=g,P=t.pendingProps,E=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Xt(h):(h=At(n)?fr:xt.current,h=Wr(t,h));var B=n.getDerivedStateFromProps;(N=typeof B=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==P||E!==h)&&Mc(t,a,r,h),$n=!1,E=t.memoizedState,a.state=E,Jo(t,r,a,o);var F=t.memoizedState;d!==P||E!==F||Tt.current||$n?(typeof B=="function"&&(Vs(t,n,B,r),F=t.memoizedState),(g=$n||Pc(t,n,g,r,E,F,h)||!1)?(N||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,F,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,F,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),a.props=r,a.state=F,a.context=h,r=g):(typeof a.componentDidUpdate!="function"||d===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return Ks(e,t,n,r,l,o)}function Ks(e,t,n,r,o,l){Yf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&wc(t,n,!1),An(e,t,l);r=t.stateNode,ov.current=t;var d=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,l),t.child=Gr(t,null,d,l)):Et(e,t,d,l),t.memoizedState=r.state,o&&wc(t,n,!0),t.child}function Kf(e){var t=e.stateNode;t.pendingContext?gc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gc(e,t.context,!1),Da(e,t.containerInfo)}function Lc(e,t,n,r,o){return Vr(),Ta(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xf(e,t,n){var r=t.pendingProps,o=be.current,l=!1,a=(t.flags&128)!==0,d;if((d=a)||(d=e!==null&&e.memoizedState===null?!1:(o&2)!==0),d?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Fe(be,o&1),e===null)return Hs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=gl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=bs(n),t.memoizedState=Xs,e):Ga(t,a));if(o=e.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return lv(e,t,a,r,d,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,d=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),d!==null?l=Zn(d,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?bs(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ga(e,t){return t=gl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xo(e,t,n,r){return r!==null&&Ta(r),Gr(t,e.child,null,n),e=Ga(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lv(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ls(Error(G(422))),xo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=gl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Gr(t,e.child,null,a),t.child.memoizedState=bs(a),t.memoizedState=Xs,l);if(!(t.mode&1))return xo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var d=r.dgst;return r=d,l=Error(G(419)),r=ls(l,r,void 0),xo(e,t,a,r)}if(d=(a&e.childLanes)!==0,_t||d){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Tn(e,o),un(r,e,o,-1))}return Ja(),r=ls(Error(G(421))),xo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=wv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ft=Kn(o.nextSibling),Bt=t,Ge=!0,ln=null,e!==null&&(Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,Nn=e.id,Pn=e.overflow,hr=t),t=Ga(t,r.children),t.flags|=4096,t)}function Oc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ws(e.return,t,n)}function ss(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function bf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,n,t);else if(e.tag===19)Oc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(be,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ss(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ss(t,!0,n,null,l);break;case"together":ss(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ao(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sv(e,t,n){switch(t.tag){case 3:Kf(t),Vr();break;case 5:kf(t);break;case 1:At(t.type)&&Qo(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Fe(Xo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?Xf(e,t,n):(Fe(be,be.current&1),e=An(e,t,n),e!==null?e.sibling:null);Fe(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Fe(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Qf(e,t,n)}return An(e,t,n)}var Jf,Js,Zf,qf;Jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Js=function(){};Zf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=ws(e,o),r=ws(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=ks(e,o),r=ks(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vo)}js(n,r);var a;n=null;for(g in o)if(!r.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var d=o[g];for(a in d)d.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Pi.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in r){var h=r[g];if(d=o!=null?o[g]:void 0,r.hasOwnProperty(g)&&h!==d&&(h!=null||d!=null))if(g==="style")if(d){for(a in d)!d.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&d[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(g,n)),n=h;else g==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(l=l||[]).push(g,h)):g==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(g,""+h):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(g)?(h!=null&&g==="onScroll"&&He("scroll",e),l||d===h||(l=[])):(l=l||[]).push(g,h))}n&&(l=l||[]).push("style",n);var g=l;(t.updateQueue=g)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function av(e,t,n){var r=t.pendingProps;switch(_a(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return At(t.type)&&Go(),gt(t),null;case 3:return r=t.stateNode,Qr(),We(Tt),We(xt),Ba(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(go(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(oa(ln),ln=null))),Js(e,t),gt(t),null;case 5:Fa(t);var o=ur(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return gt(t),null}if(e=ur(En.current),go(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Di]=l,e=(t.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(o=0;o<vi.length;o++)He(vi[o],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Gu(r,l),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},He("invalid",r);break;case"textarea":Yu(r,l),He("invalid",r)}js(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="children"?typeof d=="string"?r.textContent!==d&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,d,e),o=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,d,e),o=["children",""+d]):Pi.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&He("scroll",r)}switch(n){case"input":ao(r),Qu(r,l,!0);break;case"textarea":ao(r),Ku(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Vo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Di]=r,Jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Cs(n,r),n){case"dialog":He("cancel",e),He("close",e),o=r;break;case"iframe":case"object":case"embed":He("load",e),o=r;break;case"video":case"audio":for(o=0;o<vi.length;o++)He(vi[o],e);o=r;break;case"source":He("error",e),o=r;break;case"img":case"image":case"link":He("error",e),He("load",e),o=r;break;case"details":He("toggle",e),o=r;break;case"input":Gu(e,r),o=ws(e,r),He("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),He("invalid",e);break;case"textarea":Yu(e,r),o=ks(e,r),He("invalid",e);break;default:o=r}js(n,o),d=o;for(l in d)if(d.hasOwnProperty(l)){var h=d[l];l==="style"?Id(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pd(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Mi(e,h):typeof h=="number"&&Mi(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Pi.hasOwnProperty(l)?h!=null&&l==="onScroll"&&He("scroll",e):h!=null&&ma(e,l,h,a))}switch(n){case"input":ao(e),Qu(e,r,!1);break;case"textarea":ao(e),Ku(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=ur(Bi.current),ur(En.current),go(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Bt,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(We(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Ft!==null&&t.mode&1&&!(t.flags&128))yf(),Vr(),t.flags|=98560,l=!1;else if(l=go(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(G(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(G(317));l[Sn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(oa(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?st===0&&(st=3):Ja())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Qr(),Js(e,t),e===null&&Li(t.stateNode.containerInfo),gt(t),null;case 10:return za(t.type._context),gt(t),null;case 17:return At(t.type)&&Go(),gt(t),null;case 19:if(We(be),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ci(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Zo(e),a!==null){for(t.flags|=128,ci(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(be,be.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Kr&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304)}else{if(!r)if(e=Zo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Ge)return gt(t),null}else 2*nt()-l.renderingStartTime>Kr&&n!==1073741824&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=be.current,Fe(be,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return ba(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function uv(e,t){switch(_a(t),t.tag){case 1:return At(t.type)&&Go(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),We(Tt),We(xt),Ba(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fa(t),null;case 13:if(We(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(be),null;case 4:return Qr(),null;case 10:return za(t.type._context),null;case 22:case 23:return ba(),null;case 24:return null;default:return null}}var So=!1,wt=!1,cv=typeof WeakSet=="function"?WeakSet:Set,le=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function Zs(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Dc=!1;function dv(e,t){if(Ls=Uo,e=rf(),Ma(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,d=-1,h=-1,g=0,N=0,P=e,E=null;t:for(;;){for(var B;P!==n||o!==0&&P.nodeType!==3||(d=a+o),P!==l||r!==0&&P.nodeType!==3||(h=a+r),P.nodeType===3&&(a+=P.nodeValue.length),(B=P.firstChild)!==null;)E=P,P=B;for(;;){if(P===e)break t;if(E===n&&++g===o&&(d=a),E===l&&++N===r&&(h=a),(B=P.nextSibling)!==null)break;P=E,E=P.parentNode}P=B}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Os={focusedElem:e,selectionRange:n},Uo=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var $=F.memoizedProps,ce=F.memoizedState,S=t.stateNode,w=S.getSnapshotBeforeUpdate(t.elementType===t.type?$:rn(t.type,$),ce);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){tt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return F=Dc,Dc=!1,F}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&Zs(t,n,l)}o=o.next}while(o!==r)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function qs(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eh(e){var t=e.alternate;t!==null&&(e.alternate=null,eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Di],delete t[Bs],delete t[Ym],delete t[Km])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function th(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ea(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vo));else if(r!==4&&(e=e.child,e!==null))for(ea(e,t,n),e=e.sibling;e!==null;)ea(e,t,n),e=e.sibling}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}var pt=null,on=!1;function Fn(e,t,n){for(n=n.child;n!==null;)nh(e,t,n),n=n.sibling}function nh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Fn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?es(e.parentNode,n):e.nodeType===1&&es(e,n),Ai(e)):es(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Fn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Zs(n,t,a),o=o.next}while(o!==r)}Fn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){tt(n,t,d)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Fn(e,t,n),wt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cv),t.forEach(function(r){var o=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,d=a;e:for(;d!==null;){switch(d.tag){case 5:pt=d.stateNode,on=!1;break e;case 3:pt=d.stateNode.containerInfo,on=!0;break e;case 4:pt=d.stateNode.containerInfo,on=!0;break e}d=d.return}if(pt===null)throw Error(G(160));nh(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(g){tt(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{Ei(3,e,e.return),vl(3,e)}catch($){tt(e,e.return,$)}try{Ei(5,e,e.return)}catch($){tt(e,e.return,$)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{Mi(o,"")}catch($){tt(e,e.return,$)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&jd(o,l),Cs(d,a);var g=Cs(d,l);for(a=0;a<h.length;a+=2){var N=h[a],P=h[a+1];N==="style"?Id(o,P):N==="dangerouslySetInnerHTML"?Pd(o,P):N==="children"?Mi(o,P):ma(o,N,P,g)}switch(d){case"input":xs(o,l);break;case"textarea":Cd(o,l);break;case"select":var E=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var B=l.value;B!=null?Lr(o,!!l.multiple,B,!1):E!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Di]=l}catch($){tt(e,e.return,$)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(G(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch($){tt(e,e.return,$)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ai(t.containerInfo)}catch($){tt(e,e.return,$)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ka=nt())),r&4&&Bc(e);break;case 22:if(N=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(g=wt)||N,nn(t,e),wt=g):nn(t,e),yn(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!N&&e.mode&1)for(le=e,N=e.child;N!==null;){for(P=le=N;le!==null;){switch(E=le,B=E.child,E.tag){case 0:case 11:case 14:case 15:Ei(4,E,E.return);break;case 1:Rr(E,E.return);var F=E.stateNode;if(typeof F.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch($){tt(r,n,$)}}break;case 5:Rr(E,E.return);break;case 22:if(E.memoizedState!==null){Uc(P);continue}}B!==null?(B.return=E,le=B):Uc(P)}N=N.sibling}e:for(N=null,P=e;;){if(P.tag===5){if(N===null){N=P;try{o=P.stateNode,g?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=P.stateNode,h=P.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=Md("display",a))}catch($){tt(e,e.return,$)}}}else if(P.tag===6){if(N===null)try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch($){tt(e,e.return,$)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;N===P&&(N=null),P=P.return}N===P&&(N=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Bc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(th(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Mi(o,""),r.flags&=-33);var l=Fc(e);ta(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,d=Fc(e);ea(e,d,a);break;default:throw Error(G(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fv(e,t,n){le=e,ih(e)}function ih(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var o=le,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||So;if(!a){var d=o.alternate,h=d!==null&&d.memoizedState!==null||wt;d=So;var g=wt;if(So=a,(wt=h)&&!g)for(le=o;le!==null;)a=le,h=a.child,a.tag===22&&a.memoizedState!==null?Hc(o):h!==null?(h.return=a,le=h):Hc(o);for(;l!==null;)le=l,ih(l),l=l.sibling;le=o,So=d,wt=g}$c(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,le=l):$c(e)}}function $c(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&jc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jc(t,a,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var N=g.memoizedState;if(N!==null){var P=N.dehydrated;P!==null&&Ai(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}wt||t.flags&512&&qs(t)}catch(E){tt(t,t.return,E)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function Uc(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Hc(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{qs(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{qs(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){le=null;break}var d=t.sibling;if(d!==null){d.return=t.return,le=d;break}le=t.return}}var hv=Math.ceil,tl=Rn.ReactCurrentDispatcher,Qa=Rn.ReactCurrentOwner,Kt=Rn.ReactCurrentBatchConfig,Pe=0,dt=null,ot=null,mt=0,Dt=0,zr=nr(0),st=0,Wi=null,mr=0,yl=0,Ya=0,ji=null,It=null,Ka=0,Kr=1/0,jn=null,nl=!1,na=null,bn=null,ko=!1,Vn=null,rl=0,Ci=0,ra=null,Ro=-1,zo=0;function jt(){return Pe&6?nt():Ro!==-1?Ro:Ro=nt()}function Jn(e){return e.mode&1?Pe&2&&mt!==0?mt&-mt:bm.transition!==null?(zo===0&&(zo=Ud()),zo):(e=ze,e!==0||(e=window.event,e=e===void 0?16:Kd(e.type)),e):1}function un(e,t,n,r){if(50<Ci)throw Ci=0,ra=null,Error(G(185));Gi(e,n,r),(!(Pe&2)||e!==dt)&&(e===dt&&(!(Pe&2)&&(yl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&Pe===0&&!(t.mode&1)&&(Kr=nt()+500,hl&&rr()))}function Rt(e,t){var n=e.callbackNode;bp(e,t);var r=$o(e,e===dt?mt:0);if(r===0)n!==null&&Ju(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ju(n),t===1)e.tag===0?Xm(Wc.bind(null,e)):pf(Wc.bind(null,e)),Gm(function(){!(Pe&6)&&rr()}),n=null;else{switch(Hd(r)){case 1:n=xa;break;case 4:n=Bd;break;case 16:n=Bo;break;case 536870912:n=$d;break;default:n=Bo}n=fh(n,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oh(e,t){if(Ro=-1,zo=0,Pe&6)throw Error(G(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=$o(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=il(e,r);else{t=r;var o=Pe;Pe|=2;var l=sh();(dt!==e||mt!==t)&&(jn=null,Kr=nt()+500,cr(e,t));do try{vv();break}catch(d){lh(e,d)}while(!0);Ra(),tl.current=l,Pe=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=_s(e),o!==0&&(r=o,t=ia(e,o))),t===1)throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!pv(o)&&(t=il(e,r),t===2&&(l=_s(e),l!==0&&(r=l,t=ia(e,l))),t===1))throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:lr(e,It,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ka+500-nt(),10<t)){if($o(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fs(lr.bind(null,e,It,jn),t);break}lr(e,It,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hv(r/1960))-r,10<r){e.timeoutHandle=Fs(lr.bind(null,e,It,jn),r);break}lr(e,It,jn);break;case 5:lr(e,It,jn);break;default:throw Error(G(329))}}}return Rt(e,nt()),e.callbackNode===n?oh.bind(null,e):null}function ia(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=il(e,t),e!==2&&(t=It,It=n,t!==null&&oa(t)),e}function oa(e){It===null?It=e:It.push.apply(It,e)}function pv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Ya,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Wc(e){if(Pe&6)throw Error(G(327));$r();var t=$o(e,0);if(!(t&1))return Rt(e,nt()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=_s(e);r!==0&&(t=r,n=ia(e,r))}if(n===1)throw n=Wi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,It,jn),Rt(e,nt()),null}function Xa(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(Kr=nt()+500,hl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(Pe&6)&&$r();var t=Pe;Pe|=1;var n=Kt.transition,r=ze;try{if(Kt.transition=null,ze=1,e)return e()}finally{ze=r,Kt.transition=n,Pe=t,!(Pe&6)&&rr()}}function ba(){Dt=zr.current,We(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(_a(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Go();break;case 3:Qr(),We(Tt),We(xt),Ba();break;case 5:Fa(r);break;case 4:Qr();break;case 13:We(be);break;case 19:We(be);break;case 10:za(r.type._context);break;case 22:case 23:ba()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Dt=t,st=0,Wi=null,Ya=yl=mr=0,It=ji=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function lh(e,t){do{var n=ot;try{if(Ra(),_o.current=el,qo){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qo=!1}if(pr=0,ct=lt=Je=null,ki=!1,$i=0,Qa.current=null,n===null||n.return===null){st=1,Wi=t,ot=null;break}e:{var l=e,a=n.return,d=n,h=t;if(t=mt,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var g=h,N=d,P=N.tag;if(!(N.mode&1)&&(P===0||P===11||P===15)){var E=N.alternate;E?(N.updateQueue=E.updateQueue,N.memoizedState=E.memoizedState,N.lanes=E.lanes):(N.updateQueue=null,N.memoizedState=null)}var B=_c(a);if(B!==null){B.flags&=-257,Tc(B,a,d,l,t),B.mode&1&&Ic(l,g,t),t=B,h=g;var F=t.updateQueue;if(F===null){var $=new Set;$.add(h),t.updateQueue=$}else F.add(h);break e}else{if(!(t&1)){Ic(l,g,t),Ja();break e}h=Error(G(426))}}else if(Ge&&d.mode&1){var ce=_c(a);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),Tc(ce,a,d,l,t),Ta(Yr(h,d));break e}}l=h=Yr(h,d),st!==4&&(st=2),ji===null?ji=[l]:ji.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=Wf(l,h,t);Ec(l,S);break e;case 1:d=h;var w=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(bn===null||!bn.has(j)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=Vf(l,d,t);Ec(l,R);break e}}l=l.return}while(l!==null)}uh(n)}catch(Q){t=Q,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function sh(){var e=tl.current;return tl.current=el,e===null?el:e}function Ja(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(yl&268435455)||Hn(dt,mt)}function il(e,t){var n=Pe;Pe|=2;var r=sh();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{mv();break}catch(o){lh(e,o)}while(!0);if(Ra(),Pe=n,tl.current=r,ot!==null)throw Error(G(261));return dt=null,mt=0,st}function mv(){for(;ot!==null;)ah(ot)}function vv(){for(;ot!==null&&!Up();)ah(ot)}function ah(e){var t=dh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?uh(e):ot=t,Qa.current=null}function uh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=av(n,t,Dt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=ze,o=Kt.transition;try{Kt.transition=null,ze=1,yv(e,t,n,r)}finally{Kt.transition=o,ze=r}return null}function yv(e,t,n,r){do $r();while(Vn!==null);if(Pe&6)throw Error(G(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Jp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ko||(ko=!0,fh(Bo,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Kt.transition,Kt.transition=null;var a=ze;ze=1;var d=Pe;Pe|=4,Qa.current=null,dv(e,n),rh(n,e),Dm(Os),Uo=!!Ls,Os=Ls=null,e.current=n,fv(n),Hp(),Pe=d,ze=a,Kt.transition=l}else e.current=n;if(ko&&(ko=!1,Vn=e,rl=o),l=e.pendingLanes,l===0&&(bn=null),Gp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nl)throw nl=!1,e=na,na=null,e;return rl&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===ra?Ci++:(Ci=0,ra=e):Ci=0,rr(),null}function $r(){if(Vn!==null){var e=Hd(rl),t=Kt.transition,n=ze;try{if(Kt.transition=null,ze=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,rl=0,Pe&6)throw Error(G(331));var o=Pe;for(Pe|=4,le=e.current;le!==null;){var l=le,a=l.child;if(le.flags&16){var d=l.deletions;if(d!==null){for(var h=0;h<d.length;h++){var g=d[h];for(le=g;le!==null;){var N=le;switch(N.tag){case 0:case 11:case 15:Ei(8,N,l)}var P=N.child;if(P!==null)P.return=N,le=P;else for(;le!==null;){N=le;var E=N.sibling,B=N.return;if(eh(N),N===g){le=null;break}if(E!==null){E.return=B,le=E;break}le=B}}}var F=l.alternate;if(F!==null){var $=F.child;if($!==null){F.child=null;do{var ce=$.sibling;$.sibling=null,$=ce}while($!==null)}}le=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,le=a;else e:for(;le!==null;){if(l=le,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ei(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,le=S;break e}le=l.return}}var w=e.current;for(le=w;le!==null;){a=le;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,le=j;else e:for(a=w;le!==null;){if(d=le,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:vl(9,d)}}catch(Q){tt(d,d.return,Q)}if(d===a){le=null;break e}var R=d.sibling;if(R!==null){R.return=d.return,le=R;break e}le=d.return}}if(Pe=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(al,e)}catch{}r=!0}return r}finally{ze=n,Kt.transition=t}}return!1}function Vc(e,t,n){t=Yr(n,t),t=Wf(e,t,1),e=Xn(e,t,1),t=jt(),e!==null&&(Gi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Vc(e,e,n);else for(;t!==null;){if(t.tag===3){Vc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){e=Yr(n,e),e=Vf(t,e,1),t=Xn(t,e,1),e=jt(),t!==null&&(Gi(t,1,e),Rt(t,e));break}}t=t.return}}function gv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ka?cr(e,0):Ya|=n),Rt(e,t)}function ch(e,t){t===0&&(e.mode&1?(t=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):t=1);var n=jt();e=Tn(e,t),e!==null&&(Gi(e,t,n),Rt(e,n))}function wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),ch(e,n)}var dh;dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)_t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _t=!1,sv(e,t,n);_t=!!(e.flags&131072)}else _t=!1,Ge&&t.flags&1048576&&mf(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ao(e,t),e=t.pendingProps;var o=Wr(t,xt.current);Br(t,n),o=Ua(null,t,r,e,o,n);var l=Ha();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(l=!0,Qo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Oa(t),o.updater=ml,t.stateNode=o,o._reactInternals=t,Gs(t,r,e,n),t=Ks(null,t,r,!0,l,n)):(t.tag=0,Ge&&l&&Ia(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ao(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=kv(r),e=rn(r,e),o){case 0:t=Ys(null,t,r,e,n);break e;case 1:t=zc(null,t,r,e,n);break e;case 11:t=Ac(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,rn(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ys(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),zc(e,t,r,o,n);case 3:e:{if(Kf(t),e===null)throw Error(G(387));r=t.pendingProps,l=t.memoizedState,o=l.element,Sf(e,t),Jo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Yr(Error(G(423)),t),t=Lc(e,t,r,n,o);break e}else if(r!==o){o=Yr(Error(G(424)),t),t=Lc(e,t,r,n,o);break e}else for(Ft=Kn(t.stateNode.containerInfo.firstChild),Bt=t,Ge=!0,ln=null,n=wf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===o){t=An(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&Hs(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Ds(r,o)?a=null:l!==null&&Ds(r,l)&&(t.flags|=32),Yf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Hs(t),null;case 13:return Xf(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ac(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Fe(Xo,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!Tt.current){t=An(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var d=l.dependencies;if(d!==null){a=l.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=Mn(-1,n&-n),h.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var N=g.pending;N===null?h.next=h:(h.next=N.next,N.next=h),g.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Ws(l.return,n,t),d.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(G(341));a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Ws(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Br(t,n),o=Xt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),Rc(e,t,r,o,n);case 15:return Gf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ao(e,t),t.tag=1,At(r)?(e=!0,Qo(t)):e=!1,Br(t,n),Hf(t,r,o),Gs(t,r,o,n),Ks(null,t,r,!0,e,n);case 19:return bf(e,t,n);case 22:return Qf(e,t,n)}throw Error(G(156,t.tag))};function fh(e,t){return Fd(e,t)}function Sv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,r){return new Sv(e,t,n,r)}function Za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kv(e){if(typeof e=="function")return Za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ya)return 11;if(e===ga)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Za(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case va:a=8,o|=8;break;case ms:return e=Yt(12,n,t,o|2),e.elementType=ms,e.lanes=l,e;case vs:return e=Yt(13,n,t,o),e.elementType=vs,e.lanes=l,e;case ys:return e=Yt(19,n,t,o),e.elementType=ys,e.lanes=l,e;case Sd:return gl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wd:a=10;break e;case xd:a=9;break e;case ya:a=11;break e;case ga:a=14;break e;case Bn:a=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Yt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Yt(7,e,r,t),e.lanes=n,e}function gl(e,t,n,r){return e=Yt(22,e,r,t),e.elementType=Sd,e.lanes=n,e.stateNode={isHidden:!1},e}function as(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function us(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ev(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qa(e,t,n,r,o,l,a,d,h){return e=new Ev(e,t,n,d,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Yt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(l),e}function jv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hh(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(At(n))return hf(e,n,t)}return t}function ph(e,t,n,r,o,l,a,d,h){return e=qa(n,r,!0,e,o,l,a,d,h),e.context=hh(null),n=e.current,r=jt(),o=Jn(n),l=Mn(r,o),l.callback=t??null,Xn(n,l,o),e.current.lanes=o,Gi(e,o,r),Rt(e,r),e}function wl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=hh(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xn(o,t,a),e!==null&&(un(e,o,a,l),Io(e,o,a)),a}function ol(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eu(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}function Cv(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}xl.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));wl(e,t,null,null)};xl.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){wl(null,e,null,null)}),t[_n]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Yd(e)}};function nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qc(){}function Nv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var g=ol(a);l.call(g)}}var a=ph(t,r,e,0,null,!1,!1,"",Qc);return e._reactRootContainer=a,e[_n]=a.current,Li(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var d=r;r=function(){var g=ol(h);d.call(g)}}var h=qa(e,0,!1,null,null,!1,!1,"",Qc);return e._reactRootContainer=h,e[_n]=h.current,Li(e.nodeType===8?e.parentNode:e),vr(function(){wl(t,h,n,r)}),h}function kl(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var d=o;o=function(){var h=ol(a);d.call(h)}}wl(t,a,e,o)}else a=Nv(n,t,e,o,r);return ol(a)}Wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(Sa(t,n|1),Rt(t,nt()),!(Pe&6)&&(Kr=nt()+500,rr()))}break;case 13:vr(function(){var r=Tn(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),eu(e,1)}};ka=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}eu(e,134217728)}};Vd=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=jt();un(n,e,t,r)}eu(e,t)}};Gd=function(){return ze};Qd=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};Ps=function(e,t,n){switch(t){case"input":if(xs(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=fl(r);if(!o)throw Error(G(90));Ed(r),xs(r,o)}}}break;case"textarea":Cd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Ad=Xa;Rd=vr;var Pv={usingClientEntryPoint:!1,Events:[Yi,Mr,fl,_d,Td,Xa]},di={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mv={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{al=Eo.inject(Mv),kn=Eo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(t))throw Error(G(200));return jv(e,t,null,n)};Ut.createRoot=function(e,t){if(!nu(e))throw Error(G(299));var n=!1,r="",o=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qa(e,1,!1,null,null,n,!1,r,o),e[_n]=t.current,Li(e.nodeType===8?e.parentNode:e),new tu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!Sl(t))throw Error(G(200));return kl(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=mh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ph(t,null,e,1,n??null,o,!1,l,a),e[_n]=t.current,Li(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new xl(t)};Ut.render=function(e,t,n){if(!Sl(t))throw Error(G(200));return kl(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(G(40));return e._reactRootContainer?(vr(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1};Ut.unstable_batchedUpdates=Xa;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return kl(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vh)}catch(e){console.error(e)}}vh(),md.exports=Ut;var Iv=md.exports,Yc=Iv;hs.createRoot=Yc.createRoot,hs.hydrateRoot=Yc.hydrateRoot;const Ur={},yh="production",Kc={development:{baseUrl:"http://localhost:4000/api",healthUrl:"http://localhost:4000/health"},production:{baseUrl:"https://cfg-server.onrender.com/api",healthUrl:"https://cfg-server.onrender.com/health"}},gh=Kc[yh]||Kc.development,ru=()=>{if(!(Ur!=null&&Ur.VITE_API_BASE_URL))return gh.baseUrl},_v=()=>{if(!(Ur!=null&&Ur.VITE_HEALTH_URL))return gh.healthUrl},Tv=async()=>{try{const e=await fetch(_v(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Health check failed: ${e.status}`);const t=await e.json();return{status:t.status||"unknown",version:t.version||"unknown",commit:t.commit||"unknown",healthy:t.status==="ok"}}catch(e){return console.error("[API Config] Health check error:",e),{status:"error",version:"unknown",commit:"unknown",healthy:!1,error:e.message}}},Av=()=>yh;function Rv({onStart:e}){const[t,n]=M.useState("1"),[r,o]=M.useState("individual"),[l,a]=M.useState("15"),[d,h]=M.useState({status:"checking",version:"...",commit:"...",healthy:!1});M.useEffect(()=>{const E=async()=>{const F=await Tv();h(F),console.log("[StartDialog] Server health:",F)};E();const B=setInterval(E,3e4);return()=>clearInterval(B)},[]);const g=()=>{if(!t||!l){alert("Please fill in all fields");return}const E={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(E)},N=()=>{window.close()},P=()=>d.status==="checking"?"checking":d.healthy?"healthy":"unhealthy";return f.jsx("div",{className:"dialog-overlay",children:f.jsxs("div",{className:"dialog-box",children:[f.jsxs("div",{className:"dialog-header",children:[f.jsx("h2",{children:"The Creative Game"}),f.jsxs("div",{className:`server-health-indicator ${P()}`,title:`Server: ${d.status}
Version: ${d.version}
Commit: ${d.commit}
Environment: ${Av()}`,children:[f.jsx("span",{className:"health-light"}),f.jsx("span",{className:"health-text",children:"Server"})]})]}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"ID:"}),f.jsx("input",{type:"text",value:t,onChange:E=>n(E.target.value)})]}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"Condition:"}),f.jsxs("select",{value:r,onChange:E=>o(E.target.value),children:[f.jsx("option",{value:"individual",children:"individual"}),f.jsx("option",{value:"group",children:"group"})]})]}),f.jsxs("div",{className:"dialog-field",children:[f.jsx("label",{children:"Time (in minutes):"}),f.jsx("input",{type:"number",value:l,onChange:E=>a(E.target.value),min:"1"})]}),f.jsxs("div",{className:"dialog-buttons",children:[f.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),f.jsx("button",{className:"dialog-button ok",onClick:g,children:"OK"}),f.jsx("button",{className:"dialog-button cancel",onClick:N,children:"Cancel"})]})]})})}class Xc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}downloadCSV(){const t=[this.header.join(",")];this.logs.forEach(g=>{const N=this.header.map(P=>{const E=g[P];return E==null||E===""?"":Array.isArray(E)||typeof E=="object"?`"${JSON.stringify(E).replace(/"/g,'""')}"`:`"${String(E).replace(/"/g,'""')}"`});t.push(N.join(","))});const n=t.join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(r),d=new Date().toISOString().replace("T"," ").substring(0,19);o.setAttribute("href",l);const h=this.sessionId&&this.sessionId!==this.subjectId?`_${this.sessionId}`:"";o.setAttribute("download",`${this.subjectId}${h} (${d}).csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}clear(){this.logs=[]}}const zv=.035;class Lv{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=ru(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var n;this.sessionInfo={...t,startedAt:((n=this.sessionInfo)==null?void 0:n.startedAt)||new Date(this.startTime).toISOString()},await this.initializeSession()}async initializeSession(){var n;if(this.sessionInitialized||!((n=this.sessionInfo)!=null&&n.sessionGameId))return;const t={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,metadata:{config:this.sessionInfo}};try{const r=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const l=(await r.json().catch(()=>({}))).message||`Failed to initialize session (${r.status})`;throw r.status===409?(alert(` Session ID Conflict

${l}

Please choose a different Session ID.`),this.stop(),new Error(l)):new Error(l)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(r){throw console.error("[GameTracker] Failed to initialize session:",r),r}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/zv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),d=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(E=>this.relativeToGrid(E)):null),g={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:d,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:d,grid_all_positions:h};(r||t.camera_frame)&&(g.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(g.gallery_shape_number=t.gallery_shape_number,g.gallery=t.gallery,g.gallery_normalized=t.gallery_normalized,g.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(E=>this.relativeToGrid(E)):null),g.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(E=>this.relativeToGrid(E)):null)),this.moves.push(g),this.persistMove(g).catch(E=>{console.error("[GameTracker] Failed to persist move to server:",E)});const N=this.getCurrentBraceletStatus(),P=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:d,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:N,lastKnownPlayer:P,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(E=>({status:E.status,elapsed:E.elapsed.toFixed(2)}))}})}async persistMove(t){var n;if(!(!this.sessionInitialized||!((n=this.sessionInfo)!=null&&n.sessionGameId)))try{const r=await fetch(`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to persist move (${r.status})`)}catch(r){throw console.error("[GameTracker] persistMove error:",r),r}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(d=>d.timestamp>=o&&d.timestamp<=l);if(a.length>0){const d={};a.forEach(g=>{(g.status==="Player A"||g.status==="Player B")&&(d[g.status]=(d[g.status]||0)+1)});const h=Object.keys(d).reduce((g,N)=>d[g]>d[N]?g:N,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}downloadJSON(){var a,d;const t=this.exportToJSON(),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r;const l=((a=this.sessionInfo)==null?void 0:a.sessionGameId)||((d=this.sessionInfo)==null?void 0:d.id)||"game_session";o.download=`${l}_${new Date().toISOString().split("T")[0]}_${Date.now()}.json`,o.click(),URL.revokeObjectURL(r)}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let cs=null;const la=()=>(cs||(cs=new Lv),cs),sn=.07,Ni=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Xe=e=>Math.round(e*1e3)/1e3,Ov=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Xe(l.position[0]-sn),Xe(l.position[1])],[Xe(l.position[0]+sn),Xe(l.position[1])],[Xe(l.position[0]),Xe(l.position[1]-sn)],[Xe(l.position[0]),Xe(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Dv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},sa=e=>e.map(t=>{const n=[],r=[[Xe(t.position[0]-sn),Xe(t.position[1])],[Xe(t.position[0]+sn),Xe(t.position[1])],[Xe(t.position[0]),Xe(t.position[1]-sn)],[Xe(t.position[0]),Xe(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Xe(o.position[0])===l[0]&&Xe(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Fv=e=>{const t=new Set;if(e.forEach((a,d)=>{a.forEach((h,g)=>{h&&t.add(`${d},${g}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,d]=l.shift(),h=`${a},${d}`;o.has(h)||(o.add(h),n.forEach(([g,N])=>{const P=`${a+g},${d+N}`;t.has(P)&&!o.has(P)&&l.push([a+g,d+N])}))}return o.size===t.size},Bv=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Xe(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Xe(l));for(let l=0;l<=.77;l+=sn)r.push(Xe(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const d=n.findIndex(g=>Math.abs(g-l[0])<.001),h=r.findIndex(g=>Math.abs(g-l[1])<.001);d!==-1&&h!==-1&&(o[h][d]=!0)}}),Fv(o)},aa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=Bv(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},bc=e=>{if(e.length===0)return null;try{const t=e.map(N=>N[0]),n=e.map(N=>N[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(N=>{const P=Math.sqrt(Math.pow(N[0]-r,2)+Math.pow(N[1]-o,2));P<l&&(l=P,a=N)});const d=-a[0],h=-a[1],g=e.map(N=>[Xe(N[0]+d),Xe(N[1]+h)]);return g.sort((N,P)=>N[0]-P[0]||N[1]-P[1]),g}catch{return null}},$v=60,Jc=.07,ds=120;function Uv({config:e,interfaceHidden:t=!1}){const[n,r]=M.useState(Ni()),[o,l]=M.useState(null),[a,d]=M.useState({x:0,y:0}),[h,g]=M.useState(!0),[N,P]=M.useState(e.timeSeconds),[E,B]=M.useState(0),[F,$]=M.useState(null),[ce,S]=M.useState(!0),[w,j]=M.useState(""),[R,Q]=M.useState({blockSize:$v,bottomPadding:ds}),K=M.useRef(null),Y=M.useRef(new Xc(e)),T=M.useRef(la()),oe=M.useRef(null),z=M.useRef(Date.now()),J=M.useRef(ds),de=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,ye=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,Se="The experiment is done. Thank you very much for your participation!",Qe=M.useCallback(()=>{const O=K.current;if(!O)return;const H=O.offsetWidth,X=O.offsetHeight;if(!H||!X)return;const ue=J.current||ds;let q=Math.max(1,Math.min(H,X-ue)),ie=Math.max(38,Math.min(q*Jc*.95,q/4)),D=Math.max(ie*2.5,110);q=Math.max(1,Math.min(H,X-D)),ie=Math.max(38,Math.min(q*Jc*.95,q/4)),D=Math.max(ie*2.5,110),J.current=D,Q(v=>{const _=Math.abs(v.blockSize-ie),C=Math.abs(v.bottomPadding-D);return _<.5&&C<.5?v:{blockSize:ie,bottomPadding:D}})},[]);M.useEffect(()=>(j(de),(async()=>{try{T.current.start(),await T.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(H){console.error("[GameCanvas] Failed to initialize tracker:",H),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),()=>{T.current.stop()}),[]),M.useEffect(()=>{Qe()},[Qe,t]),M.useEffect(()=>{const O=()=>{Qe()};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[Qe]),M.useEffect(()=>{if(!h&&N>0){const O=setInterval(()=>{P(H=>H<=1?(clearInterval(O),S(!0),j(Se),setTimeout(()=>{Y.current.downloadCSV(),T.current.downloadJSON()},1e3),0):H-1)},1e3);return()=>clearInterval(O)}},[h,N]),M.useEffect(()=>{r(O=>aa(sa(O),h))},[h]);const Ve=()=>(Date.now()-z.current)/1e3,Te=(O,H)=>{const X=K.current;if(!X)return 0;const ue=X.offsetHeight-J.current,q=Math.min(X.offsetWidth,ue),ie=H==="x"?(X.offsetWidth-q)/2:(X.offsetHeight-J.current-q)/2;return(O-ie)/q-.5},b=(O,H)=>{const X=K.current;if(!X)return 0;const ue=X.offsetHeight-J.current,q=Math.min(X.offsetWidth,ue),ie=H==="x"?(X.offsetWidth-q)/2:(X.offsetHeight-J.current-q)/2;return(O+.5)*q+ie},se=O=>{var q,ie,D,v;const H=K.current.getBoundingClientRect(),X=O.clientX!==void 0?O.clientX:(ie=(q=O.touches)==null?void 0:q[0])==null?void 0:ie.clientX,ue=O.clientY!==void 0?O.clientY:(v=(D=O.touches)==null?void 0:D[0])==null?void 0:v.clientY;return{x:X-H.left,y:ue-H.top}},ae=(O,H)=>{const X=n.find(D=>D.id===H);if(!X||!X.canMove)return;O.preventDefault();const ue=se(O),q=b(X.position[0],"x"),ie=b(X.position[1],"y");oe.current=Date.now(),l(H),d({x:ue.x-q,y:ue.y-ie})},ge=O=>{if(o===null)return;O.preventDefault();const H=se(O),X=Te(H.x-a.x,"x"),ue=Te(H.y-a.y,"y");r(q=>q.map(ie=>ie.id===o?{...ie,position:[X,ue]}:ie))},ke=()=>{try{const O=window.braceletDetectorCanvas,H=window.braceletDetectorVideo;let X=null;if(O&&O.width>0&&O.height>0?X=O:H&&H.videoWidth>0&&H.videoHeight>0&&(X=H),!X)return console.warn("[GameCanvas] No camera source available for frame capture"),null;const ue=document.createElement("canvas"),q=640,ie=480;let D=X.videoWidth||X.width,v=X.videoHeight||X.height;const _=D/v;return D>q&&(D=q,v=D/_),v>ie&&(v=ie,D=v*_),ue.width=Math.floor(D),ue.height=Math.floor(v),ue.getContext("2d").drawImage(X,0,0,ue.width,ue.height),ue.toDataURL("image/jpeg",.6)}catch(O){return console.error("[GameCanvas] Error capturing camera frame:",O),null}},Ye=()=>{if(o===null)return;const O=n.find(_=>_.id===o),H=Ov(n,o),X=Dv(H,O.position),ue=oe.current?(Date.now()-oe.current)/1e3:0,q=n.map(_=>_.id===o?{..._,position:X}:_),ie=ke(),D=window.currentBraceletStatus||"Unknown",v={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:Ve(),unit:o,end_position:X,all_positions:q.map(_=>_.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:ie,player:D};Y.current.write(v),T.current.recordMove(v,ue,ie),r(_=>{const C=_.map(x=>x.id===o?{...x,position:X}:x);return aa(sa(C),h)}),l(null),oe.current=null},Oe=()=>{const O=n.map(v=>v.position),H=bc(O),X=E+1,ue=ke(),q=window.currentBraceletStatus||"Unknown",ie={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:Ve(),unit:null,end_position:null,all_positions:null,gallery_shape_number:X,gallery:O,gallery_normalized:H,camera_frame:ue,player:q};Y.current.write(ie),T.current.recordMove(ie,0,ue);const D=Le();$(D),B(X)},Le=()=>{const O=document.createElement("canvas");O.width=400,O.height=400;const H=O.getContext("2d");H.fillStyle="#000",H.fillRect(0,0,400,400);const X=n.map(q=>q.position),ue=bc(X);return ue&&ue.forEach(q=>{const ie=(q[0]+.5)*400,D=(q[1]+.5)*400;H.fillStyle="green",H.fillRect(ie-15,D-15,30,30)}),O.toDataURL()},Ae=M.useCallback(O=>{O.key==="p"&&h?(g(!1),S(!0),j(ye),z.current=Date.now(),r(Ni()),$(null),B(0),Y.current=new Xc(e),T.current.stop(),T.current=la(),T.current.start(),T.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):O.key==="q"&&!h&&(S(!0),j(Se),setTimeout(()=>{Y.current.downloadCSV(),T.current.downloadJSON()},1e3))},[h,e.id]);M.useEffect(()=>(window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)),[Ae]);const W=()=>{if(!h&&w===ye)try{const O=new(window.AudioContext||window.webkitAudioContext),H=O.createOscillator(),X=O.createGain();H.connect(X),X.connect(O.destination),H.frequency.setValueAtTime(800,O.currentTime),H.frequency.setValueAtTime(600,O.currentTime+.15),X.gain.setValueAtTime(.3,O.currentTime),X.gain.exponentialRampToValueAtTime(.01,O.currentTime+.3),H.start(O.currentTime),H.stop(O.currentTime+.3),console.log("[GameCanvas]  Playing start sound - Real experiment begins!")}catch(O){console.error("[GameCanvas] Error playing sound:",O)}S(!1)},ne=O=>{O.preventDefault()};return f.jsxs("div",{className:"game-canvas",ref:K,style:{"--block-size":`${R.blockSize}px`,"--bottom-padding":`${R.bottomPadding}px`},onMouseMove:ge,onMouseUp:Ye,onMouseLeave:Ye,onTouchMove:ge,onTouchEnd:Ye,onTouchCancel:Ye,onContextMenu:ne,children:[f.jsx("div",{className:"gallery",onClick:Oe,children:f.jsx("div",{className:"gallery-frame",children:F?f.jsx("img",{src:F,alt:"Gallery",className:"gallery-image"}):f.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&f.jsxs("div",{className:"timer",children:["Time: ",Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]}),n.map(O=>f.jsx("div",{className:`block ${O.canMove?"movable":""}`,style:{left:`${b(O.position[0],"x")}px`,top:`${b(O.position[1],"y")}px`,backgroundColor:O.color||"green",cursor:O.canMove?"grab":"default"},onMouseDown:H=>ae(H,O.id),onTouchStart:H=>ae(H,O.id)},O.id)),ce&&f.jsx("div",{className:"message-overlay",onClick:W,children:f.jsxs("div",{className:"message-box",children:[w,f.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var ll={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var p=i[c];if(!(p in u))break e;u=u[p]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(y){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(y||"")+"_"+p++,y)}function u(y,m){this.h=y,n(this,"description",{configurable:!0,writable:!0,value:m})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",p=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function d(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=d(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var g=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(i[p]=c[p])}return i};l("Object.assign",function(i){return i||g});var N=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},P;if(typeof Object.setPrototypeOf=="function")P=Object.setPrototypeOf;else{var E;e:{var B={a:!0},F={};try{F.__proto__=B,E=F.a;break e}catch{}E=!1}P=E?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var $=P;function ce(i,s){if(i.prototype=N(s.prototype),i.prototype.constructor=i,$)$(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}S.prototype.u=function(i){this.i=i};function j(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}S.prototype.return=function(i){this.l={return:i},this.h=this.v};function R(i,s,u){return i.h=u,{value:s}}function Q(i){this.h=new S,this.i=i}function K(i,s){w(i.h);var u=i.h.j;return u?Y(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),T(i))}function Y(i,s,u,c){try{var p=s.call(i.h.j,u);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return i.h.m=!1,p;var y=p.value}catch(m){return i.h.j=null,j(i.h,m),T(i)}return i.h.j=null,c.call(i.h,y),T(i)}function T(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,j(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function oe(i){this.next=function(s){return w(i.h),i.h.j?s=Y(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=T(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=Y(i,i.h.j.throw,s,i.h.u):(j(i.h,s),s=T(i)),s},this.return=function(s){return K(i,s)},this[Symbol.iterator]=function(){return this}}function z(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,p){function y(m){m.done?c(m.value):Promise.resolve(m.value).then(s,u).then(y,p)}y(i.next())})}function J(i){return z(new oe(new Q(i)))}l("Promise",function(i){function s(m){this.i=0,this.j=void 0,this.h=[],this.u=!1;var k=this.l();try{m(k.resolve,k.reject)}catch(A){k.reject(A)}}function u(){this.h=null}function c(m){return m instanceof s?m:new s(function(k){k(m)})}if(i)return i;u.prototype.i=function(m){if(this.h==null){this.h=[];var k=this;this.j(function(){k.m()})}this.h.push(m)};var p=o.setTimeout;u.prototype.j=function(m){p(m,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var m=this.h;this.h=[];for(var k=0;k<m.length;++k){var A=m[k];m[k]=null;try{A()}catch(V){this.l(V)}}}this.h=null},u.prototype.l=function(m){this.j(function(){throw m})},s.prototype.l=function(){function m(V){return function(Z){A||(A=!0,V.call(k,Z))}}var k=this,A=!1;return{resolve:m(this.I),reject:m(this.m)}},s.prototype.I=function(m){if(m===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(m instanceof s)this.L(m);else{e:switch(typeof m){case"object":var k=m!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.F(m):this.s(m)}},s.prototype.F=function(m){var k=void 0;try{k=m.then}catch(A){this.m(A);return}typeof k=="function"?this.M(k,m):this.s(m)},s.prototype.m=function(m){this.v(2,m)},s.prototype.s=function(m){this.v(1,m)},s.prototype.v=function(m,k){if(this.i!=0)throw Error("Cannot settle("+m+", "+k+"): Promise already settled in state"+this.i);this.i=m,this.j=k,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var m=this;p(function(){if(m.D()){var k=o.console;typeof k<"u"&&k.error(m.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var m=o.CustomEvent,k=o.Event,A=o.dispatchEvent;return typeof A>"u"?!0:(typeof m=="function"?m=new m("unhandledrejection",{cancelable:!0}):typeof k=="function"?m=new k("unhandledrejection",{cancelable:!0}):(m=o.document.createEvent("CustomEvent"),m.initCustomEvent("unhandledrejection",!1,!0,m)),m.promise=this,m.reason=this.j,A(m))},s.prototype.H=function(){if(this.h!=null){for(var m=0;m<this.h.length;++m)y.i(this.h[m]);this.h=null}};var y=new u;return s.prototype.L=function(m){var k=this.l();m.T(k.resolve,k.reject)},s.prototype.M=function(m,k){var A=this.l();try{m.call(k,A.resolve,A.reject)}catch(V){A.reject(V)}},s.prototype.then=function(m,k){function A(fe,te){return typeof fe=="function"?function(ve){try{V(fe(ve))}catch(xe){Z(xe)}}:te}var V,Z,me=new s(function(fe,te){V=fe,Z=te});return this.T(A(m,V),A(k,Z)),me},s.prototype.catch=function(m){return this.then(void 0,m)},s.prototype.T=function(m,k){function A(){switch(V.i){case 1:m(V.j);break;case 2:k(V.j);break;default:throw Error("Unexpected state: "+V.i)}}var V=this;this.h==null?y.i(A):this.h.push(A),this.u=!0},s.resolve=c,s.reject=function(m){return new s(function(k,A){A(m)})},s.race=function(m){return new s(function(k,A){for(var V=d(m),Z=V.next();!Z.done;Z=V.next())c(Z.value).T(k,A)})},s.all=function(m){var k=d(m),A=k.next();return A.done?c([]):new s(function(V,Z){function me(ve){return function(xe){fe[ve]=xe,te--,te==0&&V(fe)}}var fe=[],te=0;do fe.push(void 0),te++,c(A.value).T(me(fe.length-1),Z),A=k.next();while(!A.done)})},s});function de(i,s){i instanceof String&&(i+="");var u=0,c=!1,p={next:function(){if(!c&&u<i.length){var y=u++;return{value:s(y,i[y]),done:!1}}return c=!0,{done:!0,value:void 0}}};return p[Symbol.iterator]=function(){return p},p}l("Array.prototype.keys",function(i){return i||function(){return de(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var p=this.length||0;for(0>u&&(u=Math.max(0,p+u)),(c==null||c>p)&&(c=p),c=Number(c),0>c&&(c=Math.max(0,p+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function ye(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",ye),l("Uint8Array.prototype.fill",ye),l("Uint8ClampedArray.prototype.fill",ye),l("Int16Array.prototype.fill",ye),l("Uint16Array.prototype.fill",ye),l("Int32Array.prototype.fill",ye),l("Uint32Array.prototype.fill",ye),l("Float32Array.prototype.fill",ye),l("Float64Array.prototype.fill",ye),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var p=c.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var y=c[u];if(y===s||Object.is(y,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var Se=this||self;function Qe(i,s){i=i.split(".");var u=Se;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function Ve(i){var s;e:{if((s=Se.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var Te=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),p=typeof i=="string"?i.split(""):i,y=0;y<u;y++)y in p&&(c[y]=s.call(void 0,p[y],y,i));return c},b={},se=null;function ae(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),p=0;return ge(i,function(y){c[p++]=y}),p!==u?c.subarray(0,p):c}function ge(i,s){function u(A){for(;c<i.length;){var V=i.charAt(c++),Z=se[V];if(Z!=null)return Z;if(!/^[\s\xa0]*$/.test(V))throw Error("Unknown base64 encoding at char: "+V)}return A}ke();for(var c=0;;){var p=u(-1),y=u(0),m=u(64),k=u(64);if(k===64&&p===-1)break;s(p<<2|y>>4),m!=64&&(s(y<<4&240|m>>2),k!=64&&s(m<<6&192|k))}}function ke(){if(!se){se={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));b[u]=c;for(var p=0;p<c.length;p++){var y=c[p];se[y]===void 0&&(se[y]=p)}}}}var Ye=typeof Uint8Array<"u",Oe=!(Ve("Trident")||Ve("MSIE"))&&typeof Se.btoa=="function";function Le(i){if(!Oe){var s;s===void 0&&(s=0),ke(),s=b[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",p=0,y=0;p<i.length-2;p+=3){var m=i[p],k=i[p+1],A=i[p+2],V=s[m>>2];m=s[(m&3)<<4|k>>4],k=s[(k&15)<<2|A>>6],A=s[A&63],u[y++]=V+m+k+A}switch(V=0,A=c,i.length-p){case 2:V=i[p+1],A=s[(V&15)<<2]||c;case 1:i=i[p],u[y]=s[i>>2]+s[(i&3)<<4|V>>4]+A+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var Ae=RegExp("[-_.]","g");function W(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function ne(i){if(!Oe)return ae(i);Ae.test(i)&&(i=i.replace(Ae,W)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var O;function H(){return O||(O=new Uint8Array(0))}var X={},ue=typeof Uint8Array.prototype.slice=="function",q=0,ie=0;function D(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=d(_(u,i)),s=u.next().value,i=u.next().value,u=s),q=u>>>0,ie=i>>>0}var v=typeof BigInt=="function";function _(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function C(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return I||(I=new C(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)D(Number(i));else if(v)i=BigInt(i),q=Number(i&BigInt(4294967295))>>>0,ie=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");ie=q=0;for(var u=i.length,c=s,p=(u-s)%6+s;p<=u;c=p,p+=6)c=Number(i.slice(c,p)),ie*=1e6,q=1e6*q+c,4294967296<=q&&(ie+=q/4294967296|0,q%=4294967296);s&&(s=d(_(q,ie)),i=s.next().value,s=s.next().value,q=i,ie=s)}return new C(q,ie)}var I;function L(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function U(){return Error("Failed to read varint, encoding is invalid.")}function ee(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function re(){throw Error("Invalid UTF8")}function he(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var pe=void 0,Ee,_e=typeof TextDecoder<"u",Re,Be=typeof TextEncoder<"u",$e;function Ce(i){if(i!==X)throw Error("illegal external caller")}function we(i,s){if(Ce(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function Ne(){return $e||($e=new we(null,X))}function Me(i){Ce(X);var s=i.V;return s=s==null||Ye&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?ne(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:ne(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===we)return{buffer:Me(i)||H(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ke(this,i,s)}function Ke(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw ee(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],p=c&127;if(c&128&&(c=s[u++],p|=(c&127)<<7,c&128&&(c=s[u++],p|=(c&127)<<14,c&128&&(c=s[u++],p|=(c&127)<<21,c&128&&(c=s[u++],p|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw U();return at(i,u),p}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw ee(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Ke(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw L(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw U()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw L(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Xi(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,Me(s[u])||H())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Zr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function El(i){return fn(i,1),i}function xh(i,s){hn(s,(i|0)&-51)}function bi(i,s){hn(s,(i|18)&-41)}var jl={};function Ji(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var qr,iu=[];hn(iu,23),qr=Object.freeze(iu);function Cl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Nl(i){var s=i.length;(s=s?i[s-1]:void 0)&&Ji(s)?s.g=1:(s={},i.push((s.g=1,s)))}function ou(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){Cl(i),ei(i,s,u,c)}function ei(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?ou(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Pl(i,s,u,c){var p=en(i,s);Array.isArray(p)||(p=qr);var y=qe(p);if(y&1||El(p),c)y&2||fn(p,2),u&1||Object.freeze(p);else{c=!(u&2);var m=y&2;u&1||!m?c&&y&16&&!m&&Zr(p,16):(p=El(Array.prototype.slice.call(p)),ei(i,s,p))}return p}function Ml(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&ei(i,s,c),c}function lu(i,s,u,c,p){i.h||(i.h={});var y=i.h[u],m=Pl(i,u,3,p);if(!y){var k=m;y=[];var A=!!(qe(i.o)&16);m=!!(qe(k)&2);var V=k;!p&&m&&(k=Array.prototype.slice.call(k));for(var Z=m,me=0;me<k.length;me++){var fe=k[me],te=s,ve=!1;if(ve=ve===void 0?!1:ve,fe=Array.isArray(fe)?new te(fe):ve?new te:void 0,fe!==void 0){te=fe.o;var xe=ve=qe(te);m&&(xe|=2),A&&(xe|=16),xe!=ve&&hn(te,xe),te=xe,Z=Z||!!(2&te),y.push(fe)}}return i.h[u]=y,A=qe(k),s=A|33,s=Z?s&-9:s|8,A!=s&&(Z=k,Object.isFrozen(Z)&&(Z=Array.prototype.slice.call(Z)),hn(Z,s),k=Z),V!==k&&ei(i,u,k),(p||c&&m)&&fn(y,2),c&&Object.freeze(y),y}return p||(p=Object.isFrozen(y),c&&!p?Object.freeze(y):!c&&p&&(y=Array.prototype.slice.call(y),i.h[u]=y)),y}function Zi(i,s,u){var c=!!(qe(i.o)&2);if(s=lu(i,s,u,c,c),i=Pl(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var p=fu(u,!1);p.j=u}else p=u;u!==p&&(s[c]=p,i[c]=p.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function su(i,s,u,c,p){Cl(i);var y=lu(i,u,s,!1,!1);return u=c??new u,i=Pl(i,s,2,!1),p!=null?(y.splice(p,0,u),i.splice(p,0,u.o)):(y.push(u),i.push(u.o)),u.C()&&Zr(i,8),u}function qi(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,qi(Ml(i,s),u)}var eo;function Sh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Nl(i),i}else{if(Ye&&i!=null&&i instanceof Uint8Array)return Le(i);if(i instanceof we){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=Le(s)}}}return i}function au(i,s,u,c){if(i!=null){if(Array.isArray(i))i=Il(i,s,u,c!==void 0);else if(Ji(i)){var p={},y;for(y in i)p[y]=au(i[y],s,u,c);i=p}else i=s(i,c);return i}}function Il(i,s,u,c){var p=qe(i);c=c?!!(p&16):void 0,i=Array.prototype.slice.call(i);for(var y=0;y<i.length;y++)i[y]=au(i[y],s,u,c);return u(p,i),i}function kh(i){return i.ja===jl?i.toJSON():Sh(i)}function Eh(i,s){i&128&&Nl(s)}function uu(i,s,u){if(u=u===void 0?bi:u,i!=null){if(Ye&&i instanceof Uint8Array)return i.length?new we(new Uint8Array(i),X):Ne();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=Il(i,uu,c&4?bi:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===jl?du(i):i}}function cu(i,s,u,c,p,y,m){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(y=Te(i,du),bi(c,y),Object.freeze(y),c=y),Cl(s),m=c==null?qr:El([]),c!=null){for(y=!!c.length,i=0;i<c.length;i++){var k=c[i];y=y&&!(qe(k.o)&2),m[i]=k.o}y=(y?8:0)|1,i=qe(m),(i&y)!==y&&(Object.isFrozen(m)&&(m=Array.prototype.slice.call(m)),hn(m,i|y)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);ei(s,u,m,p)}else pn(s,u,uu(c,y,m),p)}function du(i){return qe(i.o)&2||(i=fu(i,!0),fn(i.o,2)),i}function fu(i,s){var u=i.o,c=[];fn(c,16);var p=i.constructor.h;if(p&&c.push(p),p=i.B,p){c.length=u.length,c.fill(void 0,c.length,u.length);var y={};c[c.length-1]=y}qe(u)&128&&Nl(c),s=s||i.C()?bi:xh,y=i.constructor,eo=c,c=new y(c),eo=void 0,i.R&&(c.R=i.R.slice()),y=!!(qe(u)&16);for(var m=p?u.length-1:u.length,k=0;k<m;k++)cu(i,c,k-i.G,u[k],!1,y,s);if(p)for(var A in p)cu(i,c,+A,p[A],!0,y,s);return c}function Pt(i,s,u){i==null&&(i=eo),eo=void 0;var c=this.constructor.i||0,p=0<c,y=this.constructor.h,m=!1;if(i==null){i=y?[y]:[];var k=48,A=!0;p&&(c=0,k|=128),hn(i,k)}else{if(!Array.isArray(i)||y&&y!==i[0])throw Error();var V=k=fn(i,0);if((A=(16&V)!==0)&&((m=(32&V)!==0)||(V|=32)),p){if(128&V)c=0;else if(0<i.length){var Z=i[i.length-1];if(Ji(Z)&&"g"in Z){c=0,V|=128,delete Z.g;var me=!0,fe;for(fe in Z){me=!1;break}me&&i.pop()}}}else if(128&V)throw Error();k!==V&&hn(i,V)}this.G=(y?0:-1)-c,this.h=void 0,this.o=i;e:{if(y=this.o.length,c=y-1,y&&(y=this.o[c],Ji(y))){this.B=y,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!p&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=A&&!m&&!0,p=this.i;var te;for(A=0;A<u.length;A++)m=u[A],m<p?(m+=this.G,(c=i[m])?hu(c,s):i[m]=qr):(te||(te=ou(this)),(c=te[m])?hu(c,s):te[m]=qr)}}Pt.prototype.toJSON=function(){return Il(this.o,kh,Eh)},Pt.prototype.C=function(){return!!(qe(this.o)&2)};function hu(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}Pt.prototype.ja=jl,Pt.prototype.toString=function(){return this.o.toString()};function pu(i,s,u){if(u){var c={},p;for(p in u){var y=u[p],m=y.qa;m||(c.J=y.wa||y.oa.W,y.ia?(c.aa=wu(y.ia),m=function(k){return function(A,V,Z){return k.J(A,V,Z,k.aa)}}(c)):y.ka?(c.Z=xu(y.da.P,y.ka),m=function(k){return function(A,V,Z){return k.J(A,V,Z,k.Z)}}(c)):m=c.J,y.qa=m),m(s,i,y.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Xi(s,i)}var to=Symbol();function mu(i,s,u){return i[to]||(i[to]=function(c,p){return s(c,p,u)})}function vu(i){var s=i[to];if(!s){var u=Tl(i);s=function(c,p){return Su(c,p,u)},i[to]=s}return s}function jh(i){var s=i.ia;if(s)return vu(s);if(s=i.va)return mu(i.da.P,s,i.ka)}function Ch(i){var s=jh(i),u=i.da,c=i.oa.U;return s?function(p,y){return c(p,y,u,s)}:function(p,y){return c(p,y,u)}}function yu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ni in u||ti in u||0<u.length&&typeof u[0]=="function")?u:void 0}function gu(i,s,u,c,p,y){s.P=i[0];var m=1;if(i.length>m&&typeof i[m]!="number"){var k=i[m++];u(s,k)}for(;m<i.length;){u=i[m++];for(var A=m+1;A<i.length&&typeof i[A]!="number";)A++;switch(k=i[m++],A-=m,A){case 0:c(s,u,k);break;case 1:(A=yu(i,m))?(m++,p(s,u,k,A)):c(s,u,k,i[m++]);break;case 2:A=m++,A=yu(i,A),p(s,u,k,A,i[m++]);break;case 3:y(s,u,k,i[m++],i[m++],i[m++]);break;case 4:y(s,u,k,i[m++],i[m++],i[m++],i[m++]);break;default:throw Error("unexpected number of binary field arguments: "+A)}}return s}var no=Symbol();function wu(i){var s=i[no];if(!s){var u=_l(i);s=function(c,p){return ku(c,p,u)},i[no]=s}return s}function xu(i,s){var u=i[no];return u||(u=function(c,p){return pu(c,p,s)},i[no]=u),u}var ti=Symbol();function Nh(i,s){i.push(s)}function Ph(i,s,u){i.push(s,u.W)}function Mh(i,s,u,c){var p=wu(c),y=_l(c).P,m=u.W;i.push(s,function(k,A,V){return m(k,A,V,y,p)})}function Ih(i,s,u,c,p,y){var m=xu(c,y),k=u.W;i.push(s,function(A,V,Z){return k(A,V,Z,c,m)})}function _l(i){var s=i[ti];return s||(s=gu(i,i[ti]=[],Nh,Ph,Mh,Ih),ni in i&&ti in i&&(i.length=0),s)}var ni=Symbol();function _h(i,s){i[0]=s}function Th(i,s,u,c){var p=u.U;i[s]=c?function(y,m,k){return p(y,m,k,c)}:p}function Ah(i,s,u,c,p){var y=u.U,m=vu(c),k=Tl(c).P;i[s]=function(A,V,Z){return y(A,V,Z,k,m,p)}}function Rh(i,s,u,c,p,y,m){var k=u.U,A=mu(c,p,y);i[s]=function(V,Z,me){return k(V,Z,me,c,A,m)}}function Tl(i){var s=i[ni];return s||(s=gu(i,i[ni]={},_h,Th,Ah,Rh),ni in i&&ti in i&&(i.length=0),s)}function Su(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,p=u[c];if(!p){var y=u[0];y&&(y=y[c])&&(p=u[c]=Ch(y))}if(!p||!p(s,i,c)){p=s,c=i,y=p.j,Ln(p);var m=p;if(!m.ca){if(p=m.h.h-y,m.h.h=y,m=m.h,p==0)p=Ne();else{if(y=St(m,p),m.S&&m.m)p=m.i.subarray(y,y+p);else{m=m.i;var k=y;p=y+p,p=k===p?H():ue?m.slice(k,p):new Uint8Array(m.subarray(k,p))}p=p.length==0?Ne():new we(p,X)}(y=c.R)?y.push(p):c.R=[p]}}}return i}function ku(i,s,u){for(var c=u.length,p=c%2==1,y=p?1:0;y<c;y+=2)(0,u[y+1])(s,i,u[y]);pu(i,s,p?u[0]:void 0)}function ri(i,s){return{U:i,W:s}}var tn=ri(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,p=i.h,y=c[p],m=c[p+1],k=c[p+2];return c=c[p+3],at(i,i.h+4),m=(y<<0|m<<8|k<<16|c<<24)>>>0,i=2*(m>>31)+1,y=m>>>23&255,m&=8388607,pn(s,u,y==255?m?NaN:1/0*i:y==0?i*Math.pow(2,-149)*m:i*Math.pow(2,y-150)*(m+Math.pow(2,23))),!0},function(i,s,u){if(s=Ml(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?q=ie=0:(ie=0,q=2147483648):isNaN(c)?(ie=0,q=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(ie=0,q=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),ie=0,q=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,ie=0,q=(u|s+127<<23|c&8388607)>>>0)),u=q,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),zh=ri(function(i,s,u){if(i.i!==0)return!1;var c=i.h,p=0,y=i=0,m=c.i,k=c.h;do{var A=m[k++];p|=(A&127)<<y,y+=7}while(32>y&&A&128);for(32<y&&(i|=(A&127)>>4),y=3;32>y&&A&128;y+=7)A=m[k++],i|=(A&127)<<y;if(at(c,k),128>A)c=p>>>0,A=i>>>0,(i=A&2147483648)&&(c=~c+1>>>0,A=~A>>>0,c==0&&(A=A+1>>>0)),c=4294967296*A+(c>>>0);else throw U();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,D(s),dn(i,q,ie)):(u=x(s),dn(i.h,u.i,u.h))))}),Lh=ri(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),Eu=ri(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var p=St(i,c);if(i=i.i,_e){var y=i,m;(m=Ee)||(m=Ee=new TextDecoder("utf-8",{fatal:!0})),i=p+c,y=p===0&&i===y.length?y:y.subarray(p,i);try{var k=m.decode(y)}catch(me){if(pe===void 0){try{m.decode(new Uint8Array([128]))}catch{}try{m.decode(new Uint8Array([97])),pe=!0}catch{pe=!1}}throw!pe&&(Ee=void 0),me}}else{k=p,c=k+c,p=[];for(var A=null,V,Z;k<c;)V=i[k++],128>V?p.push(V):224>V?k>=c?re():(Z=i[k++],194>V||(Z&192)!==128?(k--,re()):p.push((V&31)<<6|Z&63)):240>V?k>=c-1?re():(Z=i[k++],(Z&192)!==128||V===224&&160>Z||V===237&&160<=Z||((y=i[k++])&192)!==128?(k--,re()):p.push((V&15)<<12|(Z&63)<<6|y&63)):244>=V?k>=c-2?re():(Z=i[k++],(Z&192)!==128||(V<<28)+(Z-144)>>30||((y=i[k++])&192)!==128||((m=i[k++])&192)!==128?(k--,re()):(V=(V&7)<<18|(Z&63)<<12|(y&63)<<6|m&63,V-=65536,p.push((V>>10&1023)+55296,(V&1023)+56320))):re(),8192<=p.length&&(A=he(A,p),p.length=0);k=he(A,p)}return pn(s,u,k),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,Be){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Re||(Re=new TextEncoder)).encode(s)}else{for(var p=0,y=new Uint8Array(3*s.length),m=0;m<s.length;m++){var k=s.charCodeAt(m);if(128>k)y[p++]=k;else{if(2048>k)y[p++]=k>>6|192;else{if(55296<=k&&57343>=k){if(56319>=k&&m<s.length){var A=s.charCodeAt(++m);if(56320<=A&&57343>=A){k=1024*(k-55296)+A-56320+65536,y[p++]=k>>18|240,y[p++]=k>>12&63|128,y[p++]=k>>6&63|128,y[p++]=k&63|128;continue}else m--}if(c)throw Error("Found an unpaired surrogate");k=65533}y[p++]=k>>12|224,y[p++]=k>>6&63|128}y[p++]=k&63|128}}s=p===y.length?y:y.subarray(0,p)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),ju=ri(function(i,s,u,c,p){if(i.i!==2)return!1;s=su(s,u,c),u=i.h.j,c=it(i.h)>>>0;var y=i.h.h+c,m=y-u;if(0>=m&&(i.h.j=y,p(s,i,void 0,void 0,void 0),m=y-i.h.h),m)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-m)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=y,i.h.j=u,!0},function(i,s,u,c,p){if(s=Zi(s,c,u),s!=null)for(c=0;c<s.length;c++){var y=i;Wt(y.h,8*u+2);var m=y.h.end();Zt(y,m),m.push(y.i),y=m,p(s[c],i),m=i;var k=y.pop();for(k=m.i+m.h.length()-k;127<k;)y.push(k&127|128),k>>>=7,m.i++;y.push(k),m.i++}});function Al(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Ke(c.h,s,u),s=c}else s=new ir(s,u);try{var p=Tl(i),y=Su(new p.P,s,p);break e}finally{p=s.h,p.i=null,p.m=!1,p.l=0,p.j=0,p.h=0,p.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}y=void 0}return y}}function Rl(i){return function(){var s=new wr;ku(this,s,_l(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,p=c.length,y=0,m=0;m<p;m++){var k=c[m];u.set(k,y),y+=k.length}return s.j=[u],u}}function xr(i){Pt.call(this,i)}ce(xr,Pt);var Cu=[xr,1,Lh,2,tn,3,Eu,4,Eu];xr.prototype.l=Rl(Cu);function zl(i){Pt.call(this,i,-1,Oh)}ce(zl,Pt),zl.prototype.addClassification=function(i,s){return su(this,1,xr,i,s),this};var Oh=[1],Nu=Al([zl,1,ju,Cu]);function Sr(i){Pt.call(this,i)}ce(Sr,Pt);var Pu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=Rl(Pu);function Mu(i){Pt.call(this,i,-1,Dh)}ce(Mu,Pt);var Dh=[1],Iu=Al([Mu,1,ju,Pu]);function ro(i){Pt.call(this,i)}ce(ro,Pt);var _u=[ro,1,tn,2,tn,3,tn,4,tn,5,tn,6,zh],Fh=Al(_u);ro.prototype.l=Rl(_u);function Tu(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Au(i){return Zi(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?qi(en(s,3),""):void 0,displayName:en(s,4)!=null?qi(en(s,4),""):void 0}})}function Ru(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:Ml(i,4)!=null?vn(i,4):void 0}}function zu(i){return i.map(function(s){return Zi(Iu(s),Sr,1).map(Ru)})}function Ll(i,s){this.i=i,this.h=s,this.m=0}function Lu(i,s,u){return Bh(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function Bh(i,s){var u=i.h;if(i.s===void 0){var c=Tu(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),p=Tu(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),y=u.createProgram();if(u.attachShader(y,c),u.attachShader(y,p),u.linkProgram(y),!u.getProgramParameter(y,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(y));c=i.s=y,u.useProgram(c),p=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:p},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(p,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function $h(i){this.h=i}var Uh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Hh(i,s){return s+i}function Ou(i,s){window[i]=s}function Wh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Vh(){return J(function(i){switch(i.h){case 1:return i.s=2,R(i,WebAssembly.instantiate(Uh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Ol(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Hh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=d(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Ol.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Gh(i){var s,u,c,p,y,m,k,A,V,Z,me;return J(function(fe){switch(fe.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,R(fe,Vh(),2)):fe.return();case 2:if(u=fe.i,typeof window=="object")return Ou("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),Ou("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),m=s.filter(function(te){return te.data!==void 0}),k=s.filter(function(te){return te.data===void 0}),A=Promise.all(m.map(function(te){var ve=io(i,te.url);if(te.path!==void 0){var xe=te.path;ve=ve.then(function(Ue){return i.overrideFile(xe,Ue),Promise.resolve(Ue)})}return ve})),V=Promise.all(k.map(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u?Wh(i.locateFile(te.url,i.ha)):Promise.resolve()})).then(function(){var te,ve,xe;return J(function(Ue){if(Ue.h==1)return te=window.createMediapipeSolutionsWasm,ve=window.createMediapipeSolutionsPackedAssets,xe=i,R(Ue,te(ve),2);xe.i=Ue.i,Ue.h=0})}),Z=function(){return J(function(te){return i.h.graph&&i.h.graph.url?te=R(te,io(i,i.h.graph.url),0):(te.h=0,te=void 0),te})}(),R(fe,Promise.all([V,A,Z]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(te){return te.simd===void 0||te.simd&&u||!te.simd&&!u}).map(function(te){return i.locateFile(te.url,i.ha)}),importScripts.apply(null,h(c)),p=i,R(fe,createMediapipeSolutionsWasm(Module),6);case 6:p.i=fe.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,y=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(y),fe.h=4;break;case 7:if(i.m=document.createElement("canvas"),me=i.m.getContext("webgl2",{}),!me&&(me=i.m.getContext("webgl",{}),!me))return alert("Failed to create WebGL canvas context when passing video frame."),fe.return();i.K=me,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,fe.h=0}})}function Qh(i){var s,u,c,p,y,m,k,A;return J(function(V){if(V.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return V.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){V.h=2;return}return i.fa=i.h.graph.url,R(V,io(i,i.h.graph.url),3)}for(V.h!=2&&(s=V.i,i.j.loadGraph(s)),u=d(Object.keys(i.D)),c=u.next();!c.done;c=u.next())p=c.value,i.j.overrideFile(p,i.D[p]);if(i.D={},i.h.listeners)for(y=d(i.h.listeners),m=y.next();!m.done;m=y.next())k=m.value,bh(i,k);A=i.l,i.l={},i.setOptions(A),V.h=0})}e.reset=function(){var i=this;return J(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],p=[],y={},m=d(Object.keys(i)),k=m.next();!k.done;y={X:y.X,Y:y.Y},k=m.next())if(k=k.value,!(k in this.l&&this.l[k]===i[k])){this.l[k]=i[k];var A=s[k];A!==void 0&&(A.onChange&&(y.X=A.onChange,y.Y=i[k],c.push(function(V){return function(){var Z;return J(function(me){if(me.h==1)return R(me,V.X(V.Y),2);Z=me.i,Z===!0&&(u.u=!0),me.h=0})}}(y))),A.graphOptionXref&&(k=Object.assign({},{calculatorName:"",calculatorIndex:0},A.graphOptionXref,{valueNumber:A.type===1?i[k]:0,valueBoolean:A.type===0?i[k]:!1,valueString:A.type===2?i[k]:""}),p.push(k)))}(c.length!==0||p.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(p),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Yh(i){var s,u,c,p,y,m,k;return J(function(A){switch(A.h){case 1:if(!i.u)return A.return();if(!i.F){A.h=2;break}s=d(i.F),u=s.next();case 3:if(u.done){A.h=5;break}return c=u.value,R(A,c(),4);case 4:u=s.next(),A.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(p=new i.i.GraphOptionChangeRequestList,y=d(i.H),m=y.next();!m.done;m=y.next())k=m.value,p.push_back(k);i.j.changeOptions(p),p.delete(),i.H=void 0}i.u=!1,A.h=0}})}e.initialize=function(){var i=this;return J(function(s){return s.h==1?R(s,Gh(i),2):s.h!=3?R(s,Qh(i),3):R(s,Yh(i),0)})};function io(i,s){var u,c;return J(function(p){return s in i.L?p.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(y){return y.arrayBuffer()}),i.L[s]=c,p.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,p,y,m,k,A,V,Z,me;return J(function(fe){switch(fe.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),R(fe,u.I,2)):fe.return();case 2:return R(fe,u.initialize(),3);case 3:for(p=new u.i.PacketDataList,y=d(Object.keys(i)),m=y.next();!m.done;m=y.next())if(k=m.value,A=u.h.inputs[k]){e:{var te=i[k];switch(A.type){case"video":var ve=u.s[A.stream];if(ve||(ve=new Ll(u.i,u.K),u.s[A.stream]=ve),ve.m===0&&(ve.m=ve.i.createTexture()),typeof HTMLVideoElement<"u"&&te instanceof HTMLVideoElement)var xe=te.videoWidth,Ue=te.videoHeight;else typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(xe=te.naturalWidth,Ue=te.naturalHeight):(xe=te.width,Ue=te.height);Ue={glName:ve.m,width:xe,height:Ue},xe=ve.h,xe.canvas.width=Ue.width,xe.canvas.height=Ue.height,xe.activeTexture(xe.TEXTURE0),ve.i.bindTexture2d(ve.m),xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,xe.RGBA,xe.UNSIGNED_BYTE,te),ve.i.bindTexture2d(0),ve=Ue;break e;case"detections":for(ve=u.s[A.stream],ve||(ve=new $h(u.i),u.s[A.stream]=ve),ve.data||(ve.data=new ve.h.DetectionListData),ve.data.reset(te.length),Ue=0;Ue<te.length;++Ue){xe=te[Ue];var De=ve.data,ft=De.setBoundingBox,Vt=Ue,Mt=xe.la,Ie=new ro;if(mn(Ie,1,Mt.ra),mn(Ie,2,Mt.sa),mn(Ie,3,Mt.height),mn(Ie,4,Mt.width),mn(Ie,5,Mt.rotation),pn(Ie,6,Mt.pa),Mt=Ie.l(),ft.call(De,Vt,Mt),xe.ea)for(De=0;De<xe.ea.length;++De){Ie=xe.ea[De],ft=ve.data,Vt=ft.addNormalizedLandmark,Mt=Ue,Ie=Object.assign({},Ie,{visibility:Ie.visibility?Ie.visibility:0});var ht=new Sr;mn(ht,1,Ie.x),mn(ht,2,Ie.y),mn(ht,3,Ie.z),Ie.visibility&&mn(ht,4,Ie.visibility),Ie=ht.l(),Vt.call(ft,Mt,Ie)}if(xe.ba)for(De=0;De<xe.ba.length;++De)ft=ve.data,Vt=ft.addClassification,Mt=Ue,Ie=xe.ba[De],ht=new xr,mn(ht,2,Ie.score),Ie.index&&pn(ht,1,Ie.index),Ie.label&&pn(ht,3,Ie.label),Ie.displayName&&pn(ht,4,Ie.displayName),Ie=ht.l(),Vt.call(ft,Mt,Ie)}ve=ve.data;break e;default:ve={}}}switch(V=ve,Z=A.stream,A.type){case"video":p.pushTexture2d(Object.assign({},V,{stream:Z,timestamp:c}));break;case"detections":me=V,me.stream=Z,me.timestamp=c,p.pushDetectionList(me);break;default:throw Error("Unknown input config type: '"+A.type+"'")}}return u.j.send(p),R(fe,u.I,4);case 4:p.delete(),fe.h=0}})};function Kh(i,s,u){var c,p,y,m,k,A,V,Z,me,fe,te,ve,xe,Ue;return J(function(De){switch(De.h){case 1:if(!u)return De.return(s);for(c={},p=0,y=d(Object.keys(u)),m=y.next();!m.done;m=y.next())k=m.value,A=u[k],typeof A!="string"&&A.type==="texture"&&s[A.stream]!==void 0&&++p;1<p&&(i.M=!1),V=d(Object.keys(u)),m=V.next();case 2:if(m.done){De.h=4;break}if(Z=m.value,me=u[Z],typeof me=="string")return xe=c,Ue=Z,R(De,Xh(i,Z,s[me]),14);if(fe=s[me.stream],me.type==="detection_list"){if(fe){for(var ft=fe.getRectList(),Vt=fe.getLandmarksList(),Mt=fe.getClassificationsList(),Ie=[],ht=0;ht<ft.size();++ht){var Dn=Fh(ft.get(ht)),Jh=vn(Dn,1),Zh=vn(Dn,2),qh=vn(Dn,3),ep=vn(Dn,4),tp=vn(Dn,5,0),oo=void 0;oo=oo===void 0?0:oo,Dn={la:{ra:Jh,sa:Zh,height:qh,width:ep,rotation:tp,pa:qi(en(Dn,6),oo)},ea:Zi(Iu(Vt.get(ht)),Sr,1).map(Ru),ba:Au(Nu(Mt.get(ht)))},Ie.push(Dn)}ft=Ie}else ft=[];c[Z]=ft,De.h=7;break}if(me.type==="proto_list"){if(fe){for(ft=Array(fe.size()),Vt=0;Vt<fe.size();Vt++)ft[Vt]=fe.get(Vt);fe.delete()}else ft=[];c[Z]=ft,De.h=7;break}if(fe===void 0){De.h=3;break}if(me.type==="float_list"){c[Z]=fe,De.h=7;break}if(me.type==="proto"){c[Z]=fe,De.h=7;break}if(me.type!=="texture")throw Error("Unknown output config type: '"+me.type+"'");return te=i.v[Z],te||(te=new Ll(i.i,i.K),i.v[Z]=te),R(De,Lu(te,fe,i.M),13);case 13:ve=De.i,c[Z]=ve;case 7:me.transform&&c[Z]&&(c[Z]=me.transform(c[Z])),De.h=3;break;case 14:xe[Ue]=De.i;case 3:m=V.next(),De.h=2;break;case 4:return De.return(c)}})}function Xh(i,s,u){var c;return J(function(p){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?p.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new Ll(i.i,i.K),i.v[s]=c),p.return(Lu(c,u,i.M))):p.return(void 0)})}function bh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),p=new i.i.StringList,y=d(s.wants),m=y.next();!m.done;m=y.next())p.push_back(m.value);y=i.i.PacketListener.implement({onResults:function(k){for(var A={},V=0;V<s.wants.length;++V)A[c[V]]=k.get(V);var Z=i.listeners[u];Z&&(i.I=Kh(i,A,s.outs).then(function(me){me=Z(me);for(var fe=0;fe<s.wants.length;++fe){var te=A[c[fe]];typeof te=="object"&&te.hasOwnProperty&&te.hasOwnProperty("delete")&&te.delete()}me&&(i.I=me)}))}}),i.j.attachMultiListener(p,y),p.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},Qe("Solution",Ol),Qe("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Du(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Fu(i){var s=this;i=i||{},this.h=new Ol({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Du(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:zu},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:zu},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Au(Nu(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,p,y;return J(function(m){return m.h==1?(c=Du(u),p="third_party/mediapipe/modules/hand_landmark/"+c,R(m,io(s.h,c),2)):(y=m.i,s.h.overrideFile(p,y),m.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Fu.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return J(function(s){return R(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return J(function(u){return R(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},Qe("Hands",Fu),Qe("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Qe("VERSION","0.4.1675469240")}).call(Dl);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function Zc({hidden:e=!1}){const t=M.useRef(null),n=M.useRef(null),r=M.useRef(null),o=M.useRef(null),[l,a]=M.useState(!1),[d,h]=M.useState("None"),[g,N]=M.useState([]),[P,E]=M.useState(null),[B,F]=M.useState(null),[$,ce]=M.useState(null),[S,w]=M.useState({a:null,b:null}),j=M.useRef(null),R=M.useRef(null),Q=(D,v)=>{const _=localStorage.getItem(D);if(_===null)return v;const C=parseFloat(_);return Number.isFinite(C)?C:v},[K,Y]=M.useState(()=>({roiSize:(()=>{const D=Q(et.roiSize,44);return D>10?D:44})(),hueWeight:Q(et.hueWeight,4),satWeight:Q(et.satWeight,2),valWeight:Q(et.valWeight,1),sensitivity:Q(et.sensitivity,0)})),T=M.useRef(K),oe=M.useRef(null),z=M.useRef(!1),J=M.useRef(0),de=M.useRef(null),[ye,Se]=M.useState([]),Qe=M.useRef([]),[Ve,Te]=M.useState(()=>localStorage.getItem(et.selectedCamera)||""),b=M.useCallback(async()=>{try{const v=(await navigator.mediaDevices.enumerateDevices()).filter(_=>_.kind==="videoinput");return Se(v),Qe.current=v,v}catch{return[]}},[]),se=M.useCallback(D=>{},[Ot]),ae=M.useCallback(async(D=null)=>{const v=t.current;if(!v)return;oe.current&&(oe.current.getTracks().forEach(x=>x.stop()),oe.current=null),X();const _=++J.current;de.current=null;const C=D!==null?D:Ve;try{const x=C?{video:{deviceId:{exact:C}}}:{video:!0};if(C){const U=Qe.current.find(ee=>ee.deviceId===C);console.log("[Detector]  Loading SELECTED camera:",{deviceId:C,label:(U==null?void 0:U.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const I=await navigator.mediaDevices.getUserMedia(x);if(!z.current||_!==J.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),I.getTracks().forEach(U=>U.stop());return}oe.current=I;const L=I.getVideoTracks();if(Ot("getUserMedia success. Tracks:",L),L.length>0){const U=L[0];console.log("[Detector]  Camera loaded successfully:",{label:U.label,deviceId:U.getSettings().deviceId,resolution:`${U.getSettings().width}x${U.getSettings().height}`,frameRate:U.getSettings().frameRate})}if(v.srcObject=I,await new Promise(U=>{if(v.readyState>=1&&v.videoWidth>0&&v.videoHeight>0)return U();const re=()=>{v.removeEventListener("loadedmetadata",re),U()};v.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{v.removeEventListener("loadedmetadata",re),U()},1500)}),!z.current||_!==J.current){Ot("Stale request before play(). Stopping stream."),I.getTracks().forEach(U=>U.stop());return}try{await v.play(),Ot("video.play() promise resolved. Video should be playing.")}catch(U){if(console.error("[Detector] video.play() promise rejected:",U),Ot("video.play() promise rejected:",U.name,U.message),_!==J.current){Ot("play() aborted due to newer request."),I.getTracks().forEach(ee=>ee.stop());return}}if(de.current!==_&&(de.current=_,Ot("Initializing MediaPipe for request id",_),Le()),z.current){const U=await b();if(!C||!D){const ee=U.find(re=>re.deviceId);ee&&ee.deviceId&&ee.deviceId!==Ve&&(Te(ee.deviceId),localStorage.setItem(et.selectedCamera,ee.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,b,se,Ve]),ge=(D,v,_)=>{const C=(D||0)*2,x=(v||0)/255,I=(_||0)/255,L=I*x,U=L*(1-Math.abs(C/60%2-1)),ee=I-L;let re=0,he=0,pe=0;C>=0&&C<60?(re=L,he=U,pe=0):C<120?(re=U,he=L,pe=0):C<180?(re=0,he=L,pe=U):C<240?(re=0,he=U,pe=L):C<300?(re=U,he=0,pe=L):(re=L,he=0,pe=U);const Ee=Math.round((re+ee)*255),_e=Math.round((he+ee)*255),Re=Math.round((pe+ee)*255);return`rgb(${Ee}, ${_e}, ${Re})`},ke=D=>D?ge(D.h,D.s,D.v):"#ffffff",Ye=D=>D==="Player A"&&B?ke(B):D==="Player B"&&$?ke($):D==="Red"?"#ff0000":D==="Blue"?"#0000ff":"#ffffff";M.useEffect(()=>{z.current=!0;const D=()=>{try{const C=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");C&&F({h:C.h,s:C.s,v:C.v}),x&&ce({h:x.h,s:x.s,v:x.v})}catch{}},v=C=>{!C||!C.key||(["calibrationA","calibrationB"].includes(C.key)&&D(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(C.key)&&Y(x=>({roiSize:(()=>{const I=Q(et.roiSize,(x==null?void 0:x.roiSize)??44);return I>10?I:(x==null?void 0:x.roiSize)??44})(),hueWeight:Q(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:Q(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:Q(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:Q(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const C=await b();if(!z.current)return;const x=localStorage.getItem(et.selectedCamera);let I="";if(x&&C.some(L=>L.deviceId&&L.deviceId===x)){const L=C.find(U=>U.deviceId===x);I=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(L==null?void 0:L.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const L=C.find(U=>U.deviceId);L&&L.deviceId?(I=L.deviceId,localStorage.setItem(et.selectedCamera,L.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:L.deviceId,label:L.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",L.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}Te(I?L=>L===I?L:I:L=>L||""),D()})(),window.addEventListener("storage",v),()=>{z.current=!1,J.current+=1,de.current=null,o.current&&(o.current.stop(),o.current=null),oe.current&&(oe.current.getTracks().forEach(x=>x.stop()),oe.current=null);const C=t.current;C&&(C.srcObject=null,se(C)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",v)}},[]),M.useEffect(()=>{j.current=B},[B]),M.useEffect(()=>{R.current=$},[$]),M.useEffect(()=>{T.current=K},[K]),M.useEffect(()=>{ae(Ve||null)},[Ve,ae]),M.useEffect(()=>{const D=setInterval(()=>{h(v=>(Oe(v),v))},1e3);return()=>clearInterval(D)},[]);const Oe=D=>{const _={timestamp:new Date().toISOString(),status:D};N(x=>[...x,_]);const C=JSON.parse(localStorage.getItem("braceletDetections")||"[]");C.push(_),localStorage.setItem("braceletDetections",JSON.stringify(C))},Le=async()=>{try{const D=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((_,C)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return _();const I=document.createElement("script");I.id=x,I.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",I.async=!0,I.onload=()=>_(),I.onerror=L=>C(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(I)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),v=new D({locateFile:_=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${_}`});if(v.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),v.onResults(Ae),r.current=v,t.current){const _=t.current;console.log("[Detector]  Starting manual frame capture from video element");let C;const x=async()=>{if(_.readyState>=2&&_.videoWidth>0)try{await v.send({image:_})}catch(I){console.error("[Detector] Error sending frame to MediaPipe:",I)}C=requestAnimationFrame(x)};x(),o.current={stop:()=>{C&&(cancelAnimationFrame(C),console.log("[Detector]  Stopped frame capture"))}}}}catch(D){console.error("MediaPipe initialization error:",D),E(`MediaPipe error: ${D.message}`)}},Ae=D=>{var L;const v=n.current,_=t.current;if(!v||!_)return;const C=v.getContext("2d");v.width=_.videoWidth,v.height=_.videoHeight,C.drawImage(_,0,0,v.width,v.height);let x="None";if(D.multiHandLandmarks&&D.multiHandLandmarks.length>0){Ot("onResults: hands=",D.multiHandLandmarks.length);let U=null,ee=0;if(D.multiHandLandmarks.forEach(re=>{const he=re[0];he.y>ee&&(ee=he.y,U=re)}),D.multiHandLandmarks.forEach(re=>{W(C,re,v.width,v.height)}),U){const re=U[0],he=re.x*v.width,pe=re.y*v.height;C.fillStyle="lime",C.beginPath(),C.arc(he,pe,10,0,2*Math.PI),C.fill(),C.fillStyle="lime",C.font="16px Arial",C.fillText("SELECTED",he-40,pe-15);const _e=Math.max(10,Math.min(300,Math.floor(((L=T.current)==null?void 0:L.roiSize)||60)))/2,Re=Math.max(0,he-_e),Be=Math.max(0,pe-_e),$e=Math.min(v.width,he+_e),Ce=Math.min(v.height,pe+_e);C.strokeStyle="lime",C.lineWidth=3,C.strokeRect(Re,Be,$e-Re,Ce-Be);const we=$e-Re,Ne=Ce-Be;if(we>0&&Ne>0)try{const Me=C.getImageData(Re,Be,we,Ne),rt=j.current,Jt=R.current,Ke=O(Me,rt,Jt);x=Ke.status,w({a:Ke.percentA,b:Ke.percentB}),Ot("Detection result:",x,{roi:{x1:Re,y1:Be,w:we,h:Ne}})}catch(Me){console.warn("[Detector] Failed to get ROI image data:",Me.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:we,height:Ne}),x="None",w({a:null,b:null})}}let I="#ffffff";x==="Player A"&&j.current?I=ke(j.current):x==="Player B"&&R.current&&(I=ke(R.current)),C.fillStyle=I,C.font="bold 32px Arial",C.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=v,window.braceletDetectorVideo=_)},W=(D,v,_,C)=>{D.strokeStyle="white",D.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([I,L])=>{const U=v[I],ee=v[L];D.beginPath(),D.moveTo(U.x*_,U.y*C),D.lineTo(ee.x*_,ee.y*C),D.stroke()}),v.forEach(I=>{D.fillStyle="red",D.beginPath(),D.arc(I.x*_,I.y*C,5,0,2*Math.PI),D.fill()})},ne=D=>{const v=D.data;let _=0,C=0;for(let x=0;x<v.length;x+=4){const I=v[x],L=v[x+1],U=v[x+2],ee=H(I,L,U);(ee[0]>=gn.red.lower1[0]&&ee[0]<=gn.red.upper1[0]||ee[0]>=gn.red.lower2[0]&&ee[0]<=gn.red.upper2[0])&&ee[1]>=gn.red.lower1[1]&&ee[2]>=gn.red.lower1[2]&&_++,ee[0]>=gn.blue.lower[0]&&ee[0]<=gn.blue.upper[0]&&ee[1]>=gn.blue.lower[1]&&ee[2]>=gn.blue.lower[2]&&C++}return{redCount:_,blueCount:C}},O=(D,v,_)=>{var _e,Re,Be,$e;const C=D.data;if(v&&!_)return{status:"Player A",percentA:null,percentB:null};if(_&&!v)return{status:"Player B",percentA:null,percentB:null};const x=((_e=T.current)==null?void 0:_e.hueWeight)??4,I=((Re=T.current)==null?void 0:Re.satWeight)??2,L=((Be=T.current)==null?void 0:Be.valWeight)??1,U=(($e=T.current)==null?void 0:$e.sensitivity)??0;if(v&&_){let Ce=0,we=0,Ne=0;for(let Ke=0;Ke<C.length;Ke+=4){const at=C[Ke],it=C[Ke+1],St=C[Ke+2],[zt,Lt,dn]=H(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-v.h),180-Math.abs(zt-v.h)),On=Math.min(Math.abs(zt-_.h),180-Math.abs(zt-_.h)),wr=Math.abs(Lt-v.s),Zt=Math.abs(Lt-_.s),Xi=Math.abs(dn-v.v),qt=Math.abs(dn-_.v),fn=Ln*x+wr*I+Xi*L,Zr=On*x+Zt*I+qt*L;Math.min(fn,Zr)>180||(fn<=Zr?Ce+=zn:we+=zn,Ne+=zn)}if(Ne===0)return{status:"None",percentA:0,percentB:0};const Me=Ce/Math.max(1e-6,Ne),rt=we/Math.max(1e-6,Ne),Jt=.12*(1+.8*Math.max(0,Math.min(1,U)));return Me>=Jt&&Me>=rt?{status:"Player A",percentA:Me,percentB:rt}:rt>=Jt&&rt>Me?{status:"Player B",percentA:Me,percentB:rt}:{status:"None",percentA:Me,percentB:rt}}const{redCount:ee,blueCount:re}=ne(D),he=ee+re;if(he===0)return{status:"None",percentA:0,percentB:0};const pe=ee/he,Ee=re/he;return pe>=.15&&pe>=Ee?{status:"Player A",percentA:pe,percentB:Ee}:Ee>=.15&&Ee>pe?{status:"Player B",percentA:pe,percentB:Ee}:{status:"None",percentA:pe,percentB:Ee}},H=(D,v,_)=>{D/=255,v/=255,_/=255;const C=Math.max(D,v,_),x=Math.min(D,v,_),I=C-x;let L=0;I!==0&&(C===D?L=60*((v-_)/I%6):C===v?L=60*((_-D)/I+2):L=60*((D-v)/I+4)),L<0&&(L+=360);const U=C===0?0:I/C*255,ee=C*255;return[L/2,U,ee]},X=D=>{},ue=D=>{Te(D),D?localStorage.setItem(et.selectedCamera,D):localStorage.removeItem(et.selectedCamera)},q=()=>{const D=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),v=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),_=URL.createObjectURL(v),C=document.createElement("a");C.href=_,C.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,C.click();const x=D.map(ee=>`${ee.timestamp}: ${ee.status}`).join(`
`),I=new Blob([x],{type:"text/plain"}),L=URL.createObjectURL(I),U=document.createElement("a");U.href=L,U.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,U.click()},ie=()=>{localStorage.removeItem("braceletDetections"),N([])};return f.jsx(f.Fragment,{children:f.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[f.jsxs("div",{className:"detector-header",children:[f.jsx("span",{children:"Bracelet Detector"}),f.jsxs("div",{className:"detector-controls",children:[f.jsx("button",{onClick:q,title:"Download Logs",children:""}),f.jsx("button",{onClick:ie,title:"Clear Logs",children:""}),f.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),f.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{children:"Camera:"}),f.jsxs("select",{value:Ve,onChange:D=>ue(D.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[f.jsx("option",{value:"",children:"System Default"}),ye.map((D,v)=>{var U;const _=!!D.deviceId,C=_?D.deviceId:"",x=_?D.deviceId:`camera-${v}`,I=((U=D.label)==null?void 0:U.trim())||`Camera ${v+1}`,L=_?`  ${D.deviceId.slice(0,8)}`:" (needs permission)";return f.jsxs("option",{value:C,disabled:!_,children:[I,L]},x)})]})]}),f.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),f.jsx("canvas",{ref:n,className:"output_canvas"}),f.jsxs("div",{className:"detector-info",children:[f.jsxs("div",{className:"status-display",children:["Status: ",f.jsx("span",{style:{color:Ye(d),fontWeight:700},children:d})]}),f.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),f.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:B?ke(B):"#444"}}),f.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:S.a==null?"":`${Math.round(Math.max(0,Math.min(1,S.a))*100)}%`})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),f.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:$?ke($):"#444"}}),f.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:S.b==null?"":`${Math.round(Math.max(0,Math.min(1,S.b))*100)}%`})]})]}),f.jsxs("div",{className:"log-count",children:["Logs: ",g?g.length:0]}),f.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[f.jsxs("div",{children:["A: ",B?`h${Math.round(B.h)} s${Math.round(B.s)} v${Math.round(B.v)}`:""]}),f.jsxs("div",{children:["B: ",$?`h${Math.round($.h)} s${Math.round($.s)} v${Math.round($.v)}`:""]})]})]})]})]})})}const fs=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},Hv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,d=a*(1-Math.abs(r/60%2-1)),h=l-a;let g=0,N=0,P=0;r>=0&&r<60?(g=a,N=d,P=0):r<120?(g=d,N=a,P=0):r<180?(g=0,N=a,P=d):r<240?(g=0,N=d,P=a):r<300?(g=d,N=0,P=a):(g=a,N=0,P=d);const E=Math.round((g+h)*255),B=Math.round((N+h)*255),F=Math.round((P+h)*255);return`rgb(${E}, ${B}, ${F})`},qc=e=>e?Hv(e.h,e.s,e.v):"#444";function Wv(){const e=M.useRef(null),t=M.useRef(null),n=M.useRef(null),r=M.useRef(!1),o=M.useRef(0),[l,a]=M.useState(!1),[d,h]=M.useState(""),[g,N]=M.useState(null),[P,E]=M.useState(null),B=(W,ne)=>{const O=localStorage.getItem(W);if(O===null)return ne;const H=parseFloat(O);return Number.isFinite(H)?H:ne},[F,$]=M.useState(()=>{const W=B(wn.roiSize,44);return W>10?W:44}),[ce,S]=M.useState(()=>B(wn.hueWeight,4)),[w,j]=M.useState(()=>B(wn.satWeight,2)),[R,Q]=M.useState(()=>B(wn.valWeight,1)),[K,Y]=M.useState(()=>B(wn.sensitivity,0)),[T,oe]=M.useState(!1),[z,J]=M.useState("idle"),[de,ye]=M.useState(5),Se=M.useRef({A:[],B:[]});M.useEffect(()=>{r.current=!0;try{const W=JSON.parse(localStorage.getItem("calibrationA")||"null"),ne=JSON.parse(localStorage.getItem("calibrationB")||"null");W&&N(W),ne&&E(ne)}catch{}return(async()=>await Qe())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(ne=>ne.stop()),n.current=null);const W=e.current;W&&(W.srcObject=null)}},[]),M.useEffect(()=>{localStorage.setItem(wn.roiSize,String(F))},[F]),M.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(ce))},[ce]),M.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),M.useEffect(()=>{localStorage.setItem(wn.valWeight,String(R))},[R]),M.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(K))},[K]);const Qe=M.useCallback(async()=>{const W=e.current;if(!W)return;n.current&&(n.current.getTracks().forEach(O=>O.stop()),n.current=null);const ne=++o.current;a(!1),h("Requesting camera...");try{const O=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||ne!==o.current){O.getTracks().forEach(H=>H.stop());return}if(n.current=O,W.srcObject=O,await new Promise(H=>{if(W.readyState>=1&&W.videoWidth>0)return H();const ue=()=>{W.removeEventListener("loadedmetadata",ue),H()};W.addEventListener("loadedmetadata",ue,{once:!0}),setTimeout(()=>{W.removeEventListener("loadedmetadata",ue),H()},1500)}),!r.current||ne!==o.current){O.getTracks().forEach(H=>H.stop());return}try{await W.play(),fs("video.play resolved")}catch(H){fs("video.play rejected",H)}a(!0),h("")}catch(O){h(`Camera error: ${(O==null?void 0:O.message)||O}`),fs("getUserMedia error",O)}},[]),Ve=(W,ne,O)=>{W/=255,ne/=255,O/=255;const H=Math.max(W,ne,O),X=Math.min(W,ne,O),ue=H-X;let q=0;ue!==0&&(H===W?q=60*((ne-O)/ue%6):H===ne?q=60*((O-W)/ue+2):q=60*((W-ne)/ue+4)),q<0&&(q+=360);const ie=H===0?0:ue/H*255,D=H*255;return[q/2,ie,D]},Te=()=>{const W=e.current,ne=t.current;if(!W||!ne||W.videoWidth===0)return null;const O=W.videoWidth,H=W.videoHeight;ne.width=O,ne.height=H;const X=ne.getContext("2d");X.drawImage(W,0,0,O,H);const ue=Math.max(10,Math.min(300,Math.floor(F))),q=Math.floor(O/2-ue/2),ie=Math.floor(H/2-ue/2),v=X.getImageData(q,ie,ue,ue).data;let _=0,C=0,x=0,I=0,L=0;for(let Re=0;Re<v.length;Re+=4){const[Be,$e,Ce]=Ve(v[Re],v[Re+1],v[Re+2]),we=Be*2*(Math.PI/180);_+=Math.cos(we),C+=Math.sin(we),x+=$e,I+=Ce,L++}if(L===0)return null;const U=x/L,ee=I/L,re=_/L,he=C/L;let Ee=Math.atan2(he,re)*(180/Math.PI);return Ee<0&&(Ee+=360),{h:Ee/2,s:U,v:ee}},b=W=>{const ne=Te();if(!ne){h("Could not sample video frame.");return}W==="A"?(localStorage.setItem("calibrationA",JSON.stringify(ne)),N(ne),h(`Saved Player A: h${ne.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(ne)),E(ne),h(`Saved Player B: h${ne.h.toFixed(0)}`))},se=W=>{W==="A"?(localStorage.removeItem("calibrationA"),N(null)):(localStorage.removeItem("calibrationB"),E(null)),h("Cleared")},ae=()=>{oe(!0),J("playerA"),ye(5),Se.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};M.useEffect(()=>{if(!(!T||z==="idle"||z==="optimizing"||z==="complete"))if(de>0){const W=setTimeout(()=>{ye(de-1)},1e3);return()=>clearTimeout(W)}else z==="playerA"?(J("switching"),ye(3),h("Switch to Player B... Get ready!")):z==="switching"?(J("playerB"),ye(5),h("Hold Player B bracelet in center square...")):z==="playerB"&&(J("optimizing"),ge())},[T,z,de]),M.useEffect(()=>{if(!T||z==="idle"||z==="switching"||z==="optimizing"||z==="complete")return;const W=setInterval(()=>{const ne=Te();ne&&(z==="playerA"?Se.current.A.push(ne):z==="playerB"&&Se.current.B.push(ne))},200);return()=>clearInterval(W)},[T,z]);const ge=()=>{h("Optimizing parameters...");const W=Se.current.A,ne=Se.current.B;if(W.length===0||ne.length===0){h("Error: Not enough samples collected!"),oe(!1),J("idle");return}const O=ke(W),H=ke(ne),X=Math.min(Math.abs(O.h-H.h),180-Math.abs(O.h-H.h)),ue=Math.abs(O.s-H.s),q=Math.abs(O.v-H.v),ie=X/90,D=ue/255,v=q/255,_=Ye(W),C=Ye(ne),x={h:(_.h+C.h)/2,s:(_.s+C.s)/2,v:(_.v+C.v)/2},I=ie+D+v,L=I>0?ie/I*(1/(1+x.h/20))*6:2,U=I>0?D/I*(1/(1+x.s/50))*4:1,ee=I>0?v/I*(1/(1+x.v/50))*3:.5;S(Math.max(.5,Math.min(6,L))),j(Math.max(.1,Math.min(4,U))),Q(Math.max(.1,Math.min(3,ee)));const re=Oe(W,ne,O,H),he=Math.max(0,Math.min(.8,re*.5));Y(he),localStorage.setItem("calibrationA",JSON.stringify(O)),localStorage.setItem("calibrationB",JSON.stringify(H)),N(O),E(H),J("complete"),h(` Auto-calibration complete! Collected ${W.length+ne.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{oe(!1),J("idle")},3e3)},ke=W=>{const ne=W.map(C=>C.h),O=W.map(C=>C.s).sort((C,x)=>C-x),H=W.map(C=>C.v).sort((C,x)=>C-x);let X=0,ue=0;ne.forEach(C=>{const x=C*2*(Math.PI/180);X+=Math.cos(x),ue+=Math.sin(x)});let ie=Math.atan2(ue/ne.length,X/ne.length)*(180/Math.PI);ie<0&&(ie+=360);const D=ie/2,v=O[Math.floor(O.length/2)],_=H[Math.floor(H.length/2)];return{h:D,s:v,v:_}},Ye=W=>{const ne=W.reduce((H,X)=>({h:H.h+X.h,s:H.s+X.s,v:H.v+X.v}),{h:0,s:0,v:0});ne.h/=W.length,ne.s/=W.length,ne.v/=W.length;const O=W.reduce((H,X)=>({h:H.h+Math.pow(X.h-ne.h,2),s:H.s+Math.pow(X.s-ne.s,2),v:H.v+Math.pow(X.v-ne.v,2)}),{h:0,s:0,v:0});return{h:O.h/W.length,s:O.s/W.length,v:O.v/W.length}},Oe=(W,ne,O,H)=>{let X=0;const ue=Math.min(W.length,ne.length)*2;return W.forEach(q=>{const ie=Le(q,O);Le(q,H)<ie*1.5&&X++}),ne.forEach(q=>{const ie=Le(q,O),D=Le(q,H);ie<D*1.5&&X++}),X/ue},Le=(W,ne)=>{const O=Math.min(Math.abs(W.h-ne.h),180-Math.abs(W.h-ne.h)),H=Math.abs(W.s-ne.s),X=Math.abs(W.v-ne.v);return Math.sqrt(O*O+H*H+X*X)},Ae=()=>{oe(!1),J("idle"),ye(5),h("Generic mode cancelled")};return f.jsxs("div",{className:"calib-root",children:[f.jsxs("div",{className:"calib-header",children:[f.jsx("h2",{children:"Color Calibration"}),f.jsxs("div",{className:"calib-actions",children:[f.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),f.jsx("button",{onClick:Qe,children:"Restart Camera"})]})]}),d&&f.jsx("div",{className:"calib-message",children:d}),f.jsxs("div",{className:"calib-content",children:[f.jsx("div",{children:f.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[f.jsx("div",{className:"label",children:"Live Preview"}),f.jsx("div",{className:"value",style:{marginBottom:8},children:T?`Generic Mode Active: ${z==="playerA"?"Player A":z==="switching"?"Switching...":z==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),f.jsxs("div",{className:"calib-video-wrap",children:[f.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),f.jsx("div",{className:"calib-center-box",style:{width:F,height:F,borderColor:"#22d3ee",borderWidth:T?"4px":"3px",boxShadow:T?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),T&&de>0&&f.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:de})]})]})}),f.jsxs("div",{className:"calib-controls",children:[f.jsxs("div",{className:"calib-block",style:{background:T?"#1a2332":"#0f172a",border:T?"2px solid #22d3ee":"1px solid #1f2937"},children:[f.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),f.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),T?f.jsxs("div",{style:{marginTop:8},children:[f.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[z==="playerA"&&`Player A: Hold bracelet steady... ${de}s`,z==="switching"&&`Switch hands! Get Player B ready... ${de}s`,z==="playerB"&&`Player B: Hold bracelet steady... ${de}s`,z==="optimizing"&&"Optimizing parameters...",z==="complete"&&" Complete!"]}),f.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[z==="playerA"&&`Samples collected: ${Se.current.A.length}`,z==="switching"&&`Player A: ${Se.current.A.length} samples collected`,z==="playerB"&&`Samples collected: ${Se.current.B.length}`]}),z!=="complete"&&f.jsx("button",{onClick:Ae,style:{background:"#ef4444"},children:"Cancel"})]}):f.jsx("div",{className:"buttons",children:f.jsx("button",{onClick:ae,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Detector Settings"}),f.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Detection square size"}),f.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:F,onChange:W=>$(Number(W.target.value))}),f.jsxs("span",{style:{textAlign:"right"},children:[F,"px"]})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Hue weight"}),f.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:ce,onChange:W=>S(Number(W.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:ce.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Saturation weight"}),f.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:W=>j(Number(W.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Value weight"}),f.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:R,onChange:W=>Q(Number(W.target.value))}),f.jsx("span",{style:{textAlign:"right"},children:R.toFixed(1)})]}),f.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[f.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:K,onChange:W=>Y(Number(W.target.value))}),f.jsxs("span",{style:{textAlign:"right"},children:[(K*100).toFixed(0),"%"]})]}),f.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Player A"}),f.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(g)}}),f.jsx("span",{children:g?`h${g.h.toFixed(0)} s${g.s.toFixed(0)} v${g.v.toFixed(0)}`:""})]}),f.jsxs("div",{className:"buttons",children:[f.jsx("button",{onClick:()=>b("A"),disabled:!l,children:"Save A"}),f.jsx("button",{onClick:()=>se("A"),children:"Clear A"})]})]}),f.jsxs("div",{className:"calib-block",children:[f.jsx("div",{className:"label",children:"Player B"}),f.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(P)}}),f.jsx("span",{children:P?`h${P.h.toFixed(0)} s${P.s.toFixed(0)} v${P.v.toFixed(0)}`:""})]}),f.jsxs("div",{className:"buttons",children:[f.jsx("button",{onClick:()=>b("B"),disabled:!l,children:"Save B"}),f.jsx("button",{onClick:()=>se("B"),children:"Clear B"})]})]})]})]}),f.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function wh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var D;const[a,d]=M.useState(e),[h,g]=M.useState(0),[N,P]=M.useState(!1),[E,B]=M.useState(1),[F,$]=M.useState(Ni()),[ce,S]=M.useState(!0),[w,j]=M.useState([]),[R,Q]=M.useState(null),[K,Y]=M.useState(!1),T=M.useRef(null),oe=M.useRef(null),z=M.useRef(null),J=n&&!e,de=["summary-container",r].filter(Boolean).join(" "),ye=(v,_)=>{const C=z.current;if(!C)return 0;const x=C.offsetHeight;return(v+.5)*x},Se=M.useCallback((v,_=null)=>{const C=_||a;if(!C)return;let x=Ni(),I=!0;const L=[];let U=null;for(let ee=0;ee<=v&&ee<C.moves.length;ee++){const re=C.moves[ee];re.phase==="experiment"&&I&&(I=!1,x=Ni());const he=re.all_positions||(re.allPositions?re.allPositions.map(pe=>[pe[0]*.07,pe[1]*.07]):null);if(re.type==="moveblock"&&he)he.length===10&&x.length===10?x=x.map((pe,Ee)=>{const _e=he[Ee];return _e&&Array.isArray(_e)&&_e.length===2?{...pe,position:[_e[0],_e[1]]}:pe}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${he==null?void 0:he.length}`),x=aa(sa(x),I),U=re.blockId!==void 0?re.blockId:re.unit;else if(re.type==="added shape to gallery"&&re.gallery_normalized){const pe=document.createElement("canvas");pe.width=400,pe.height=400;const Ee=pe.getContext("2d");Ee.fillStyle="#000",Ee.fillRect(0,0,400,400),re.gallery_normalized.forEach(_e=>{const Re=(_e[0]+.5)*400,Be=(_e[1]+.5)*400;Ee.fillStyle="green";const $e=60;Ee.fillRect(Re-$e/2,Be-$e/2,$e,$e)}),L.push({number:re.gallery_shape_number,image:pe.toDataURL()}),U=null}}$(x),S(I),j(L),Q(U)},[a]),Qe=v=>{d(v),g(0),P(!1),setTimeout(()=>{Se(0,v)},0)},Ve=v=>{if(!J)return;const _=v.target.files[0];if(!_)return;const C=new FileReader;C.onload=x=>{try{const I=JSON.parse(x.target.result);Qe(I)}catch(I){alert("Failed to parse JSON file: "+I.message)}},C.readAsText(_)};M.useEffect(()=>{e&&Qe(e)},[e]),M.useEffect(()=>{a&&h>=0&&Se(h)},[a,h,Se]),M.useEffect(()=>{const v=()=>{a&&h>=0&&setTimeout(()=>{Se(h)},100)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[a,h,Se]);const Te=v=>{a&&(v<0||v>=a.moves.length||(Se(v),g(v)))},b=()=>{if(!a||N)return;P(!0),g(0),Se(0);let v=0;oe.current=setInterval(()=>{if(v>=a.moves.length){se();return}v++,Se(v),g(v)},1e3/E)},se=()=>{oe.current&&(clearInterval(oe.current),oe.current=null),P(!1)};if(M.useEffect(()=>()=>{oe.current&&clearInterval(oe.current)},[]),M.useEffect(()=>{if(N&&oe.current){clearInterval(oe.current),oe.current=null;const v=h;g(0),P(!1),setTimeout(()=>{g(v),b()},0)}},[E]),!a)return J?f.jsx("div",{className:de,children:f.jsxs("div",{className:"summary-upload",children:[f.jsx("h1",{children:t}),f.jsx("p",{children:"Load a game session JSON file to view the replay"}),f.jsx("input",{ref:T,type:"file",accept:".json",onChange:Ve,style:{display:"none"}}),f.jsx("button",{onClick:()=>{var v;return(v=T.current)==null?void 0:v.click()},children:"Load JSON File"})]})}):null;const ae=a.moves[h],ge=a.moves.length,ke=((D=a.summary)==null?void 0:D.movesByPlayer)||{},Ye=Object.entries(ke||{}),Oe=(v,_=1)=>Number.isFinite(v)?v.toFixed(_):"",Le=a.sessionInfo||{},Ae=Le.subjectId||Le.id||a.subjectId||a.id||null,W=Le.sessionGameId||a.sessionGameId||Ae||null,ne=Le.condition||a.condition||null,O=a.startTime||Le.startedAt||Le.date||null,H=a.endTime||Le.endedAt||null,X=v=>{if(!v)return null;try{const _=new Date(v);if(!Number.isNaN(_.getTime()))return _.toLocaleString()}catch{}return v},ue=[];W&&ue.push({label:"Session ID",value:W}),Ae&&Ae!==W&&ue.push({label:"Participant",value:Ae}),ne&&ue.push({label:"Condition",value:ne});const q=X(O);q&&ue.push({label:"Start",value:q});const ie=X(H);return ie&&ue.push({label:"End",value:ie}),f.jsxs("div",{className:de,children:[f.jsxs("div",{className:"summary-header",children:[f.jsx("h1",{children:t}),ue.length>0&&f.jsx("div",{className:"summary-session-info",children:ue.map(v=>f.jsxs("div",{className:"summary-session-info-item",children:[f.jsx("span",{className:"summary-session-info-label",children:v.label}),f.jsx("span",{className:"summary-session-info-value",children:v.value})]},`${v.label}-${v.value}`))})]}),f.jsxs("div",{className:"summary-main",children:[f.jsxs("div",{className:"summary-left",children:[f.jsx("div",{className:"summary-game-area",children:f.jsxs("div",{className:"game-canvas",ref:z,children:[f.jsx("div",{className:"gallery",children:f.jsx("div",{className:"gallery-frame",children:w.length>0?f.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):f.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),F.map((v,_)=>{const C=v.position||[0,0];return!Array.isArray(C)||C.length!==2||!Number.isFinite(C[0])||!Number.isFinite(C[1])?(console.warn(`Invalid position for block ${v.id}:`,C),null):f.jsx("div",{className:`block ${v.canMove?"movable":""} ${v.id===R?"highlighted":""}`,style:{left:`${ye(C[0])}px`,top:`${ye(C[1])}px`,backgroundColor:v.color||"green",cursor:v.canMove?"grab":"default",zIndex:v.id===R?20:_+1}},v.id)})]})}),f.jsxs("div",{className:"summary-progress",children:[f.jsx("input",{type:"range",min:"0",max:Math.max(0,ge-1),value:h,onChange:v=>Te(parseInt(v.target.value)),style:{width:"100%"}}),f.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",ge,ae&&f.jsxs("span",{className:"move-info",children:[" "," Player: ",ae.player,Array.isArray(ae.position)&&ae.position.length===2&&`  Position: (${ae.position[0]}, ${ae.position[1]})`,Number.isFinite(ae.holdTime)&&`  Hold: ${Oe(ae.holdTime,2)}s`," "," Time: ",Oe(ae.elapsed,1),"s"]})]})]})]}),f.jsxs("div",{className:"summary-right",children:[f.jsxs("div",{className:"summary-stats",children:[f.jsxs("div",{className:"summary-stats-row",children:[f.jsx("span",{className:"summary-stats-label",children:"Duration"}),f.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),f.jsxs("div",{className:"summary-stats-row",children:[f.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),f.jsx("span",{className:"summary-stats-value",children:ge})]}),f.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[f.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),f.jsx("div",{className:"summary-stats-value",children:Ye.length===0?f.jsx("span",{children:""}):Ye.map(([v,_])=>f.jsxs("div",{children:[v,": ",_]},v))})]})]}),f.jsxs("div",{className:"summary-controls",children:[f.jsx("button",{onClick:()=>Te(0),disabled:h===0,children:" First"}),f.jsx("button",{onClick:()=>Te(h-1),disabled:h===0,children:" Previous"}),f.jsx("button",{onClick:N?se:b,children:N?" Pause":" Play"}),f.jsx("button",{onClick:()=>Te(h+1),disabled:h>=ge-1,children:" Next"}),f.jsx("button",{onClick:()=>Te(ge-1),disabled:h>=ge-1,children:" Last"}),f.jsxs("div",{className:"speed-control",children:[f.jsx("label",{children:"Speed:"}),f.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:E,onChange:v=>B(parseFloat(v.target.value))}),f.jsxs("span",{children:[E,"x"]})]}),J&&f.jsxs(f.Fragment,{children:[f.jsx("input",{ref:T,type:"file",accept:".json",onChange:Ve,style:{display:"none"}}),f.jsx("button",{onClick:()=>{var v;return(v=T.current)==null?void 0:v.click()},children:" Load New File"})]})]}),f.jsxs("div",{className:"summary-moves-list",children:[f.jsxs("div",{className:"move-list-header",children:[f.jsx("h2",{children:"Move History"}),l&&f.jsx("button",{className:`edit-mode-toggle ${K?"active":""}`,onClick:()=>Y(!K),children:K?" Done Editing":"Edit Players"})]}),f.jsx("div",{className:"moves-scroll",children:a.moves.map((v,_)=>f.jsxs("div",{className:`move-item ${_===h?"active":""} ${K?"edit-mode":""}`,onClick:()=>!K&&Te(_),children:[f.jsx("div",{className:"move-number",children:_+1}),v.camera_frame&&f.jsx("div",{className:"move-camera-frame",children:f.jsx("img",{src:v.camera_frame,alt:`Camera frame for move ${_+1}`,className:"camera-frame-thumbnail"})}),f.jsxs("div",{className:"move-details",children:[f.jsx("div",{className:"move-type",children:v.type}),K&&l?f.jsxs("div",{className:"move-player-edit",children:[f.jsx("label",{children:"Player:"}),f.jsxs("select",{value:v.player||"Unknown",onChange:C=>{const x=C.target.value;l(v._id,x)},onClick:C=>C.stopPropagation(),children:[f.jsx("option",{value:"Player A",children:"Player A"}),f.jsx("option",{value:"Player B",children:"Player B"}),f.jsx("option",{value:"None",children:"None"}),f.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):f.jsxs("div",{className:"move-player",children:["Player: ",v.player]}),v.blockId!==null&&v.blockId!==void 0||v.unit!==null&&v.unit!==void 0?f.jsxs("div",{className:"move-unit",children:["Block: ",v.blockId!==void 0?v.blockId:v.unit]}):null,Array.isArray(v.position)&&v.position.length===2&&f.jsxs("div",{className:"move-position",children:["Position: (",v.position[0],", ",v.position[1],")"]}),Number.isFinite(v.holdTime)&&v.holdTime>0&&f.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",Oe(v.holdTime,2),"s"]}),f.jsxs("div",{className:"move-time",children:["Time: ",Oe(v.elapsed,1),"s"]})]})]},_))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Vv(){const e=M.useRef(null),t=M.useRef(null),n=M.useRef(null),r=M.useRef(null),o=M.useRef(null),l=M.useRef(null),a=M.useRef(null),d=M.useRef(null),h=M.useRef(null),[g,N]=M.useState(""),[P,E]=M.useState(!1),[B,F]=M.useState({camA:"None",camB:"None",merged:"None"}),[$,ce]=M.useState(!0),[S,w]=M.useState(null),[j,R]=M.useState(null),Q=M.useRef(null),K=M.useRef(null),Y=(v,_)=>{const C=localStorage.getItem(v);if(C===null)return _;const x=parseFloat(C);return Number.isFinite(x)?x:_},[T,oe]=M.useState(()=>({roiSize:(()=>{const v=Y(kt.roiSize,44);return v>10?v:44})(),hueWeight:Y(kt.hueWeight,4),satWeight:Y(kt.satWeight,2),valWeight:Y(kt.valWeight,1),sensitivity:Y(kt.sensitivity,0)})),z=M.useRef(T),[J,de]=M.useState([]),[ye,Se]=M.useState(""),[Qe,Ve]=M.useState("");M.useEffect(()=>{let v=!0;(async()=>{try{const I=(await navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="videoinput");if(I.length===0){N("No cameras found");return}de(I);const L=I.slice(0,2).map(U=>U.deviceId);Se(L[0]||""),Ve(L[1]||L[0]||""),await Te(L[0],e,d),L[1]?await Te(L[1],t,h):await Te(L[0],t,h),await Oe(),await Le("A",e,l),await Le("B",t,a)}catch(x){if(!v)return;N((x==null?void 0:x.message)||String(x))}})();const _=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),I=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),I&&R({h:I.h,s:I.s,v:I.v})}catch{ut("No existing calibrations")}};_();const C=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&_(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&oe(I=>({roiSize:(()=>{const L=Y(kt.roiSize,(I==null?void 0:I.roiSize)??44);return L>10?L:(I==null?void 0:I.roiSize)??44})(),hueWeight:Y(kt.hueWeight,(I==null?void 0:I.hueWeight)??4),satWeight:Y(kt.satWeight,(I==null?void 0:I.satWeight)??2),valWeight:Y(kt.valWeight,(I==null?void 0:I.valWeight)??1),sensitivity:Y(kt.sensitivity,(I==null?void 0:I.sensitivity)??0)})))};return window.addEventListener("storage",C),()=>{if(v=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),d.current&&(d.current.getTracks().forEach(L=>L.stop()),d.current=null),h.current&&(h.current.getTracks().forEach(L=>L.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const I=t.current;I&&(I.srcObject=null),window.removeEventListener("storage",C)}},[]);const Te=async(v,_,C)=>{const x={video:{deviceId:{exact:v}}};ut("Starting camera with deviceId:",v);const I=await navigator.mediaDevices.getUserMedia(x);C.current=I;const L=_.current;if(!L){ut("Video element not found!");return}L.srcObject=I,ut("Stream assigned to video element, waiting for metadata..."),await new Promise(U=>{if(L.readyState>=2&&L.videoWidth>0&&L.videoHeight>0)return ut("Video already ready:",L.videoWidth,"x",L.videoHeight),U();const re=()=>{ut("loadedmetadata event fired:",L.videoWidth,"x",L.videoHeight),L.removeEventListener("loadedmetadata",re),U()};L.addEventListener("loadedmetadata",re,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),L.removeEventListener("loadedmetadata",re),U()},2e3)});try{await L.play(),ut("Video play() succeeded")}catch(U){ut("Video play() failed:",U)}},b=M.useRef(null),se=M.useRef(null),ae=M.useRef(null),ge=M.useRef(!1),ke=async()=>{if(!ge.current){ge.current=!0;try{for(;se.current||ae.current;){const v=o.current;if(!v)break;let _=null,C=null;if(se.current?(_="A",C=se.current,se.current=null):ae.current&&(_="B",C=ae.current,ae.current=null),!!C){b.current=_;try{await v.send({image:C})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{ge.current=!1}}},Ye=(v,_)=>{v==="A"?se.current=_:ae.current=_,Promise.resolve().then(ke)},Oe=async()=>{if(o.current)return o.current;try{const v=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const C=document.getElementById("mp-hands-cdn-script");if(C&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const I=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(I),x())},50);setTimeout(()=>{clearInterval(I),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(C||await new Promise((x,I)=>{const L=document.createElement("script");L.id="mp-hands-cdn-script",L.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",L.async=!0,L.onload=()=>x(),L.onerror=U=>I(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(L)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),_=new v({locateFile:C=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${C}`});return _.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),_.onResults(C=>{const x=b.current;x==="A"?ne(C):x==="B"&&O(C)}),o.current=_,_}catch(v){return console.error("MediaPipe initialization error:",v),N(`MediaPipe error: ${v.message}`),null}},Le=async(v,_,C)=>{if(!await Oe())return;const I=_.current;if(!I){ut(`Video ref for ${v} not found`);return}ut(`Initializing manual frame capture for camera ${v}, video dimensions:`,I.videoWidth,"x",I.videoHeight);let L=null;const U=()=>{const ee=_.current;ee&&ee.readyState>=2&&ee.videoWidth>0&&Ye(v,ee),L=requestAnimationFrame(U)};L=requestAnimationFrame(U),C.current={stop:()=>{L&&(cancelAnimationFrame(L),L=null,ut(`Stopped manual frame capture for camera ${v}`))}},ut(`Manual frame capture started for camera ${v}`)},Ae=M.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),W=M.useRef({wristY:null,player:"None",landmarks:null,wristX:null});M.useEffect(()=>{Q.current=S},[S]),M.useEffect(()=>{K.current=j},[j]),M.useEffect(()=>{z.current=T},[T]);const ne=v=>H(v,n,"A"),O=v=>H(v,r,"B"),H=(v,_,C)=>{var $e;const x=_.current;if(!x)return;const I=x.getContext("2d");if(!I)return;const L=C==="A"?e.current:t.current;if(!L||L.videoWidth===0||L.videoHeight===0){C==="A"?Ae.current={wristY:null,wristX:null,landmarks:null,player:"None"}:W.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=L.videoWidth,x.height=L.videoHeight,I.drawImage(L,0,0,x.width,x.height),I.fillStyle="rgba(0, 0, 0, 0.6)",I.fillRect(x.width-80,5,75,20),I.fillStyle="white",I.font="bold 14px Arial",I.fillText(`Camera ${C}`,x.width-75,20);let U=null,ee=null,re=null,he=[];if(v.multiHandLandmarks&&v.multiHandLandmarks.length>0)for(const Ce of v.multiHandLandmarks){const we=Ce[0],Ne=we.x*x.width,Me=we.y*x.height;he.push({x:Ne,y:Me,landmarks:Ce}),(U===null||($?Me<U:Me>U))&&(U=Me,ee=Ce,re=Ne)}he.forEach(({x:Ce,y:we})=>{I.fillStyle="orange",I.beginPath(),I.arc(Ce,we,8,0,Math.PI*2),I.fill()});let pe="None";if(ee){I.fillStyle="lime",I.beginPath(),I.arc(re,U,10,0,2*Math.PI),I.fill(),I.fillStyle="lime",I.font="16px Arial",I.fillText("SELECTED",re-40,U-15);const we=Math.max(10,Math.min(300,Math.floor((($e=z.current)==null?void 0:$e.roiSize)||60)))/2,Ne=Math.max(0,re-we),Me=Math.max(0,U-we),rt=Math.min(x.width,re+we),Jt=Math.min(x.height,U+we),Ke=Math.max(0,Math.floor(Ne)),at=Math.max(0,Math.floor(Me));let it=Math.floor(rt-Ne),St=Math.floor(Jt-Me);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Ke),St=Math.min(St,x.height-at),it>0&&St>0){I.strokeStyle="lime",I.lineWidth=3,I.strokeRect(Ke,at,it,St);try{const zt=I.getImageData(Ke,at,it,St),Lt=Q.current,dn=K.current;pe=ue(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),pe="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Ke,top:at})}if(he.length>=1){let Ce=he[0].y,we=he[0].y;he.forEach(rt=>{rt.y<Ce&&(Ce=rt.y),rt.y>we&&(we=rt.y)}),I.strokeStyle="yellow",I.setLineDash([6,4]),I.beginPath(),I.moveTo(0,$?Ce:we),I.lineTo(x.width,$?Ce:we),I.stroke(),I.strokeStyle="cyan",I.beginPath(),I.moveTo(0,$?we:Ce),I.lineTo(x.width,$?we:Ce),I.stroke(),I.setLineDash([]);const Ne=$?"A (top)":"A (bottom)",Me=$?"B (bottom)":"B (top)";I.fillStyle="lime",I.font="16px Arial",I.fillText(Ne,6,Math.max(14,($?Ce:we)-6)),I.fillStyle="dodgerblue",I.fillText(Me,6,Math.min(x.height-6,($?we:Ce)+18))}const Ee={wristY:U,wristX:re,landmarks:ee,player:pe};C==="A"?Ae.current=Ee:W.current=Ee;const _e=Ae.current.wristY,Re=W.current.wristY;let Be="None";if(_e!=null||Re!=null){const Ce=$?(Ne,Me)=>Ne==null?Me:Math.min(Ne,Me):(Ne,Me)=>Ne==null?Me:Math.max(Ne,Me);[_e,Re].filter(Ne=>Ne!=null).reduce(Ce,null)===_e?Be=Ae.current.player:Be=W.current.player}F({camA:Ae.current.player,camB:W.current.player,merged:Be})},X=(v,_,C)=>{v/=255,_/=255,C/=255;const x=Math.max(v,_,C),I=Math.min(v,_,C),L=x-I;let U=0;L!==0&&(x===v?U=60*((_-C)/L%6):x===_?U=60*((C-v)/L+2):U=60*((v-_)/L+4)),U<0&&(U+=360);const ee=x===0?0:L/x*255,re=x*255;return[U/2,ee,re]},ue=(v,_,C)=>{var re,he,pe,Ee;const x=v.data;if(_&&!C)return{status:"Player A",percentA:null,percentB:null};if(C&&!_)return{status:"Player B",percentA:null,percentB:null};const I=((re=z.current)==null?void 0:re.hueWeight)??4,L=((he=z.current)==null?void 0:he.satWeight)??2,U=((pe=z.current)==null?void 0:pe.valWeight)??1,ee=((Ee=z.current)==null?void 0:Ee.sensitivity)??0;if(_&&C){let _e=0,Re=0,Be=0;for(let Ne=0;Ne<x.length;Ne+=4){const Me=x[Ne],rt=x[Ne+1],Jt=x[Ne+2],[Ke,at,it]=X(Me,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Ke-_.h),180-Math.abs(Ke-_.h)),Wt=Math.min(Math.abs(Ke-C.h),180-Math.abs(Ke-C.h)),ir=Math.abs(at-_.s),zn=Math.abs(at-C.s),Ln=Math.abs(it-_.v),On=Math.abs(it-C.v),wr=dn*I+ir*L+Ln*U,Zt=Wt*I+zn*L+On*U;Math.min(wr,Zt)>180||(wr<=Zt?_e+=Lt:Re+=Lt,Be+=Lt)}if(Be===0)return{status:"None",percentA:0,percentB:0};const $e=_e/Math.max(1e-6,Be),Ce=Re/Math.max(1e-6,Be),we=.12*(1+.8*Math.max(0,Math.min(1,ee)));return $e>=we&&$e>=Ce?{status:"Player A",percentA:$e,percentB:Ce}:Ce>=we&&Ce>$e?{status:"Player B",percentA:$e,percentB:Ce}:{status:"None",percentA:$e,percentB:Ce}}return{status:"None",percentA:0,percentB:0}},q=(v,_,C)=>{const x=(v||0)*2,I=(_||0)/255,L=(C||0)/255,U=L*I,ee=U*(1-Math.abs(x/60%2-1)),re=L-U;let he=0,pe=0,Ee=0;x>=0&&x<60?(he=U,pe=ee,Ee=0):x<120?(he=ee,pe=U,Ee=0):x<180?(he=0,pe=U,Ee=ee):x<240?(he=0,pe=ee,Ee=U):x<300?(he=ee,pe=0,Ee=U):(he=U,pe=0,Ee=ee);const _e=Math.round((he+re)*255),Re=Math.round((pe+re)*255),Be=Math.round((Ee+re)*255);return`rgb(${_e}, ${Re}, ${Be})`},ie=v=>v?q(v.h,v.s,v.v):"#ffffff",D=async(v,_)=>{try{if(v==="A"){if(Se(_),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}d.current&&(d.current.getTracks().forEach(x=>x.stop()),d.current=null);const C=e.current;C&&(C.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Te(_,e,d),await new Promise(x=>setTimeout(x,200)),await Oe(),await Le("A",e,l),ut("Camera A switched to:",_)}else{if(Ve(_),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const C=t.current;C&&(C.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Te(_,t,h),await new Promise(x=>setTimeout(x,200)),await Oe(),await Le("B",t,a),ut("Camera B switched to:",_)}}catch(C){console.error("[Detector2] Camera switch error:",C),N(`Camera switch error: ${C.message}`)}};return f.jsxs("div",{className:`detector-window ${P?"minimized":""}`,children:[f.jsxs("div",{className:"detector-header",children:[f.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),f.jsxs("div",{className:"detector-controls",children:[f.jsx("button",{onClick:()=>E(!P),children:P?"":""}),f.jsx("button",{onClick:()=>ce(!$),title:"Toggle A criterion",children:$?"A=Top":"A=Bottom"})]})]}),f.jsxs("div",{className:"detector-content",style:{display:P?"none":"block"},children:[f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[f.jsx("span",{children:"Camera A:"}),f.jsx("select",{value:ye,onChange:v=>D("A",v.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:J.map(v=>f.jsx("option",{value:v.deviceId,children:v.label||`Camera ${v.deviceId.slice(0,8)}`},v.deviceId))})]}),f.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),f.jsx("canvas",{ref:n,className:"output_canvas"})]}),f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[f.jsx("span",{children:"Camera B:"}),f.jsx("select",{value:Qe,onChange:v=>D("B",v.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:J.map(v=>f.jsx("option",{value:v.deviceId,children:v.label||`Camera ${v.deviceId.slice(0,8)}`},v.deviceId))})]}),f.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),f.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),f.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[f.jsxs("div",{className:"status-display",children:["Merged: ",f.jsx("strong",{children:B.merged})]}),f.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),f.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:S?ie(S):"#444"}})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[f.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),f.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:j?ie(j):"#444"}})]})]}),f.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[f.jsxs("div",{children:["A: ",S?`h${Math.round(S.h)} s${Math.round(S.s)} v${Math.round(S.v)}`:""]}),f.jsxs("div",{children:["B: ",j?`h${Math.round(j.h)} s${Math.round(j.s)} v${Math.round(j.v)}`:""]})]}),g&&f.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",g]}),f.jsxs("div",{style:{fontSize:12,marginTop:6},children:[f.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const fi=ru(),ed=e=>{var l,a,d,h,g;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((N,P)=>typeof P.elapsed=="number"&&P.elapsed>N?P.elapsed:N,0),r={},o={};return t.forEach(N=>{const P=(N==null?void 0:N.player)||"Unknown";r[P]=(r[P]||0)+1;const E=(N==null?void 0:N.phase)||"unknown";o[E]=(o[E]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((d=(a=e.metadata)==null?void 0:a.config)==null?void 0:d.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((g=e.metadata)==null?void 0:g.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Gv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e},td="adminPassword";function Qv(){var oe;const[e,t]=M.useState([]),[n,r]=M.useState(!0),[o,l]=M.useState(null),[a,d]=M.useState(null),[h,g]=M.useState(null),[N,P]=M.useState(!1),[E,B]=M.useState(null),[F,$]=M.useState(!1),[ce,S]=M.useState(""),[w,j]=M.useState(!1);M.useEffect(()=>{const z=localStorage.getItem(td);z&&S(z)},[]);const R=M.useCallback(async()=>{if(!ce){l("Password required"),r(!1);return}r(!0),l(null),j(!1);try{const z=await fetch(`${fi}/sessions`,{headers:{"x-admin-password":ce}});if(z.status===401||z.status===403)throw j(!0),new Error("Invalid password");if(!z.ok)throw new Error(`Failed to load sessions (${z.status})`);const J=await z.json(),de=Array.isArray(J)?J:[];localStorage.setItem(td,ce),t(de),d(ye=>ye&&de.some(Se=>Se.sessionGameId===ye)?ye:de.length>0?de[0].sessionGameId:null)}catch(z){console.error("[Admin] Error fetching sessions:",z),l(z.message||"Failed to load sessions"),t([]),d(null)}finally{r(!1)}},[ce]);M.useEffect(()=>{R()},[R]),M.useEffect(()=>{if(!a){g(null);return}let z=!1;return(async()=>{if(ce){P(!0),B(null);try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}`,{headers:{"x-admin-password":ce}});if(!de.ok)throw de.status===404?new Error("Session not found"):new Error(`Failed to load session (${de.status})`);const ye=await de.json();z||g(ed(ye))}catch(de){console.error("[Admin] Error fetching session detail:",de),z||(B(de.message||"Failed to load session"),g(null))}finally{z||P(!1)}}})(),()=>{z=!0}},[a]);const Q=z=>{d(z),$(!1)},K=async()=>{if(!a||!ce)return;const z=!F;$(z),P(!0),B(null);try{const J=z?`${fi}/sessions/${encodeURIComponent(a)}/experiment-only`:`${fi}/sessions/${encodeURIComponent(a)}`,de=await fetch(J,{headers:{"x-admin-password":ce}});if(!de.ok)throw new Error(`Failed to load session data (${de.status})`);const ye=await de.json();g(ed(ye))}catch(J){console.error("[Admin] Error loading session data:",J),B(J.message||"Failed to load session data"),$(!z)}finally{P(!1)}},Y=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},T=async(z,J)=>{if(!(!a||!z||!ce))try{const de=await fetch(`${fi}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(z)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":ce},body:JSON.stringify({player:J})});if(!de.ok)throw new Error(`Failed to update player (${de.status})`);g(ye=>ye&&{...ye,moves:ye.moves.map(Se=>Se._id===z?{...Se,player:J}:Se)}),console.log("[Admin] Player updated:",z,J)}catch(de){console.error("[Admin] Error updating player:",de),alert("Failed to update player: "+de.message)}};return f.jsxs("div",{className:"admin-container",children:[f.jsxs("aside",{className:"admin-sidebar",children:[f.jsxs("div",{className:"admin-sidebar-header",children:[f.jsx("h1",{children:"Admin"}),f.jsxs("div",{className:"admin-password-row",children:[f.jsx("input",{type:"password",className:`admin-password-input ${w?"error":""}`,placeholder:"Password",value:ce,onChange:z=>S(z.target.value),onKeyPress:z=>{z.key==="Enter"&&R()}}),f.jsx("button",{className:"admin-refresh-button",onClick:R,disabled:n||!ce,children:n?"Refreshing":"Refresh"})]})]}),o&&f.jsx("div",{className:"admin-error",children:o}),f.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&f.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&f.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(z=>{const J=typeof z.movesCount=="number"?z.movesCount:Array.isArray(z.moves)?z.moves.length:0,de=z.sessionGameId===a;return f.jsxs("button",{className:`admin-session-card ${de?"active":""}`,onClick:()=>Q(z.sessionGameId),children:[f.jsx("div",{className:"admin-session-id",children:z.sessionGameId}),f.jsxs("div",{className:"admin-session-meta",children:[f.jsxs("span",{children:["Participant: ",z.subjectId||""]}),f.jsxs("span",{children:["Condition: ",z.condition||""]})]}),f.jsxs("div",{className:"admin-session-meta",children:[f.jsxs("span",{children:["Moves: ",J]}),f.jsxs("span",{children:["Updated: ",Gv(z.updatedAt)]})]})]},z.sessionGameId)})]})]}),f.jsxs("main",{className:"admin-content",children:[N&&f.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),E&&f.jsx("div",{className:"admin-error admin-error--content",children:E}),!N&&!E&&h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"admin-toolbar",children:[f.jsx("button",{className:`admin-toolbar-button experiment-toggle ${F?"active":""}`,onClick:K,title:F?"Show all moves (including practice)":"Show only experiment phase moves",children:F?"Show All Moves":"Experiment Only"}),f.jsx("button",{className:"admin-toolbar-button edit-players",onClick:Y,title:"Open dedicated editor for player assignments",children:"Edit Players"})]}),f.jsx("div",{className:"admin-summary-wrapper",children:f.jsx(wh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((oe=h.sessionInfo)==null?void 0:oe.sessionGameId)||a||""}${F?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:T})})]}),!N&&!E&&!h&&f.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const nd=ru(),Yv="adminPassword",rd=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Kv({sessionGameId:e}){var R,Q,K,Y;const[t,n]=M.useState(null),[r,o]=M.useState(!0),[l,a]=M.useState(null),[d,h]=M.useState(null),[g,N]=M.useState(null),[P,E]=M.useState("all"),[B,F]=M.useState("");M.useEffect(()=>{const T=localStorage.getItem(Yv);T&&F(T)},[]),M.useEffect(()=>{e&&B&&$()},[e,B]);const $=async()=>{if(B){o(!0),a(null);try{const T=await fetch(`${nd}/sessions/${encodeURIComponent(e)}`,{headers:{"x-admin-password":B}});if(!T.ok)throw new Error(`Failed to load session (${T.status})`);const oe=await T.json();n(oe)}catch(T){console.error("[MoveHistoryEditor] Error loading session:",T),a(T.message)}finally{o(!1)}}},ce=async(T,oe)=>{if(!(!e||!T||!B))try{const z=await fetch(`${nd}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent(T)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":B},body:JSON.stringify({player:oe})});if(!z.ok)throw new Error(`Failed to update player (${z.status})`);n(J=>J&&{...J,moves:J.moves.map(de=>de._id===T?{...de,player:oe}:de)}),console.log("[MoveHistoryEditor] Player updated:",T,oe)}catch(z){console.error("[MoveHistoryEditor] Error updating player:",z),alert("Failed to update player: "+z.message)}},S=((R=t==null?void 0:t.moves)==null?void 0:R.filter(T=>P==="all"?!0:T.phase===P))||[];if(r)return f.jsx("div",{className:"move-editor-container",children:f.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return f.jsx("div",{className:"move-editor-container",children:f.jsxs("div",{className:"move-editor-error",children:[f.jsx("h2",{children:"Error Loading Session"}),f.jsx("p",{children:l}),f.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return f.jsx("div",{className:"move-editor-container",children:f.jsx("div",{className:"move-editor-error",children:"Session not found"})});const w=((Q=t.moves)==null?void 0:Q.filter(T=>T.phase==="practice").length)||0,j=((K=t.moves)==null?void 0:K.filter(T=>T.phase==="experiment").length)||0;return f.jsxs("div",{className:"move-editor-container",children:[f.jsxs("header",{className:"move-editor-header",children:[f.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),f.jsxs("div",{className:"move-editor-title",children:[f.jsx("h1",{children:"Move History Editor"}),f.jsxs("div",{className:"session-info",children:[f.jsxs("span",{className:"session-id",children:["Session: ",e]}),f.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),f.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),f.jsxs("div",{className:"phase-filter",children:[f.jsxs("button",{className:`filter-btn ${P==="all"?"active":""}`,onClick:()=>E("all"),children:["All (",((Y=t.moves)==null?void 0:Y.length)||0,")"]}),f.jsxs("button",{className:`filter-btn ${P==="practice"?"active":""}`,onClick:()=>E("practice"),children:["Practice (",w,")"]}),f.jsxs("button",{className:`filter-btn ${P==="experiment"?"active":""}`,onClick:()=>E("experiment"),children:["Experiment (",j,")"]})]})]}),f.jsxs("div",{className:"move-editor-content",children:[f.jsx("div",{className:"moves-grid",children:S.map((T,oe)=>{var z;return f.jsxs("div",{className:`move-card ${(d==null?void 0:d._id)===T._id?"selected":""}`,onClick:()=>h(T),children:[f.jsxs("div",{className:"move-card-header",children:[f.jsxs("span",{className:"move-number",children:["#",oe+1]}),f.jsx("span",{className:`move-phase ${T.phase}`,children:T.phase})]}),T.camera_frame&&f.jsxs("div",{className:"move-image",onClick:J=>{J.stopPropagation(),N(T.camera_frame)},children:[f.jsx("img",{src:T.camera_frame,alt:`Move ${oe+1}`}),f.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),f.jsxs("div",{className:"move-card-body",children:[f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Type:"}),f.jsx("span",{className:"value",children:T.type})]}),f.jsxs("div",{className:"move-info-row player-row",children:[f.jsx("span",{className:"label",children:"Player:"}),f.jsxs("select",{className:`player-select ${(z=T.player)==null?void 0:z.toLowerCase().replace(" ","-")}`,value:T.player||"Unknown",onChange:J=>ce(T._id,J.target.value),onClick:J=>J.stopPropagation(),children:[f.jsx("option",{value:"Player A",children:"Player A"}),f.jsx("option",{value:"Player B",children:"Player B"}),f.jsx("option",{value:"None",children:"None"}),f.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),T.blockId!==null&&T.blockId!==void 0&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Block:"}),f.jsx("span",{className:"value",children:T.blockId})]}),Array.isArray(T.position)&&T.position.length===2&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Position:"}),f.jsxs("span",{className:"value",children:["(",T.position[0],", ",T.position[1],")"]})]}),f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Time:"}),f.jsxs("span",{className:"value",children:[rd(T.elapsed,1),"s"]})]}),Number.isFinite(T.holdTime)&&T.holdTime>0&&f.jsxs("div",{className:"move-info-row",children:[f.jsx("span",{className:"label",children:"Hold:"}),f.jsxs("span",{className:"value",children:[rd(T.holdTime,2),"s"]})]})]})]},T._id||oe)})}),S.length===0&&f.jsx("div",{className:"no-moves",children:f.jsx("p",{children:"No moves found for selected filter."})})]}),g&&f.jsx("div",{className:"image-modal",onClick:()=>N(null),children:f.jsxs("div",{className:"image-modal-content",onClick:T=>T.stopPropagation(),children:[f.jsx("button",{className:"close-modal",onClick:()=>N(null),children:""}),f.jsx("img",{src:g,alt:"Expanded view"})]})})]})}const Xv=!1;function bv(){const[e,t]=M.useState(!1),[n,r]=M.useState(null),[o,l]=M.useState(null),[a,d]=M.useState(window.location.hash),[h,g]=M.useState(!1);M.useEffect(()=>{const F=()=>{d(window.location.hash)};return window.addEventListener("hashchange",F),()=>window.removeEventListener("hashchange",F)},[]);const N=F=>{r(F),t(!0)},P=()=>{o&&!o.closed&&o.close();const F=window.location.origin+window.location.pathname+"#/detector",$=window.open(F,"BraceletDetector","width=700,height=600,left=100,top=100");l($)};M.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),M.useEffect(()=>(window.secEnd=()=>{try{const F=la();F.stop();const $=F.exportToJSON();localStorage.setItem("lastGameSession",$),F.downloadJSON(),window.location.hash="#/summary",console.log("Experience ended. JSON downloaded and saved. Redirecting to summary...")}catch(F){console.error("Error ending experience:",F),alert("Error ending experience: "+F.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let E=null;const B=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")E=f.jsx(Zc,{});else if(a==="#/calibrate")E=f.jsx(Wv,{});else if(a==="#/detector2")E=f.jsx(Vv,{});else if(a==="#/summary")E=f.jsx(wh,{});else if(a==="#/admin")E=f.jsx(Qv,{});else if(B){const F=decodeURIComponent(B[1]);E=f.jsx(Kv,{sessionGameId:F},F)}else E=e?f.jsxs(f.Fragment,{children:[f.jsx(Uv,{config:n,interfaceHidden:h}),f.jsx(Zc,{hidden:h}),Xv,!h&&f.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[f.jsx("button",{onClick:P,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),f.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),f.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&f.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:f.jsx("button",{onClick:()=>g(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):f.jsx(Rv,{onStart:N});return f.jsx("div",{className:"App",children:E})}hs.createRoot(document.getElementById("root")).render(f.jsx(gp.StrictMode,{children:f.jsx(bv,{})}));
