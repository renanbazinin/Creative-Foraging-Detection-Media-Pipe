(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var od={exports:{}},sl={},ld={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),ip=Symbol.for("react.portal"),op=Symbol.for("react.fragment"),lp=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),ap=Symbol.for("react.provider"),up=Symbol.for("react.context"),cp=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),fp=Symbol.for("react.memo"),hp=Symbol.for("react.lazy"),Bu=Symbol.iterator;function pp(e){return e===null||typeof e!="object"?null:(e=Bu&&e[Bu]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ad=Object.assign,ud={};function Kr(e,t,n){this.props=e,this.context=t,this.refs=ud,this.updater=n||sd}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cd(){}cd.prototype=Kr.prototype;function ua(e,t,n){this.props=e,this.context=t,this.refs=ud,this.updater=n||sd}var ca=ua.prototype=new cd;ca.constructor=ua;ad(ca,Kr.prototype);ca.isPureReactComponent=!0;var Fu=Array.isArray,dd=Object.prototype.hasOwnProperty,da={current:null},fd={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)dd.call(t,r)&&!fd.hasOwnProperty(r)&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var h=Array(f),y=0;y<f;y++)h[y]=arguments[y+2];o.children=h}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return{$$typeof:Vi,type:e,key:l,ref:a,props:o,_owner:da.current}}function mp(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function vp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $u=/\/+/g;function Fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vp(""+e.key):t.toString(36)}function jo(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vi:case ip:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Fl(a,0):r,Fu(o)?(n="",e!=null&&(n=e.replace($u,"$&/")+"/"),jo(o,t,n,"",function(y){return y})):o!=null&&(fa(o)&&(o=mp(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace($u,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Fu(e))for(var f=0;f<e.length;f++){l=e[f];var h=r+Fl(l,f);a+=jo(l,t,n,h,o)}else if(h=pp(e),typeof h=="function")for(e=h.call(e),f=0;!(l=e.next()).done;)l=l.value,h=r+Fl(l,f++),a+=jo(l,t,n,h,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function lo(e,t,n){if(e==null)return e;var r=[],o=0;return jo(e,r,"","",function(l){return t.call(n,l,o++)}),r}function yp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},Co={transition:null},gp={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Co,ReactCurrentOwner:da};function pd(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Kr;Ie.Fragment=op;Ie.Profiler=sp;Ie.PureComponent=ua;Ie.StrictMode=lp;Ie.Suspense=dp;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gp;Ie.act=pd;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ad({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=da.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(h in t)dd.call(t,h)&&!fd.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&f!==void 0?f[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){f=Array(h);for(var y=0;y<h;y++)f[y]=arguments[y+2];r.children=f}return{$$typeof:Vi,type:e.type,key:o,ref:l,props:r,_owner:a}};Ie.createContext=function(e){return e={$$typeof:up,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ap,_context:e},e.Consumer=e};Ie.createElement=hd;Ie.createFactory=function(e){var t=hd.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:cp,render:e}};Ie.isValidElement=fa;Ie.lazy=function(e){return{$$typeof:hp,_payload:{_status:-1,_result:e},_init:yp}};Ie.memo=function(e,t){return{$$typeof:fp,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};Ie.unstable_act=pd;Ie.useCallback=function(e,t){return Ct.current.useCallback(e,t)};Ie.useContext=function(e){return Ct.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return Ct.current.useEffect(e,t)};Ie.useId=function(){return Ct.current.useId()};Ie.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return Ct.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};Ie.useRef=function(e){return Ct.current.useRef(e)};Ie.useState=function(e){return Ct.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return Ct.current.useTransition()};Ie.version="18.3.1";ld.exports=Ie;var P=ld.exports;const wp=rp(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=P,Sp=Symbol.for("react.element"),kp=Symbol.for("react.fragment"),Ep=Object.prototype.hasOwnProperty,jp=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cp={key:!0,ref:!0,__self:!0,__source:!0};function md(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ep.call(t,r)&&!Cp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Sp,type:e,key:l,ref:a,props:o,_owner:jp.current}}sl.Fragment=kp;sl.jsx=md;sl.jsxs=md;od.exports=sl;var d=od.exports,ps={},vd={exports:{}},Ut={},yd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,ie){var te=Y.length;Y.push(ie);e:for(;0<te;){var Se=te-1>>>1,B=Y[Se];if(0<o(B,ie))Y[Se]=ie,Y[te]=B,te=Se;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ie=Y[0],te=Y.pop();if(te!==ie){Y[0]=te;e:for(var Se=0,B=Y.length,de=B>>>1;Se<de;){var ye=2*(Se+1)-1,ge=Y[ye],je=ye+1,U=Y[je];if(0>o(ge,te))je<B&&0>o(U,ge)?(Y[Se]=U,Y[je]=te,Se=je):(Y[Se]=ge,Y[ye]=te,Se=ye);else if(je<B&&0>o(U,te))Y[Se]=U,Y[je]=te,Se=je;else break e}}return ie}function o(Y,ie){var te=Y.sortIndex-ie.sortIndex;return te!==0?te:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,f=a.now();e.unstable_now=function(){return a.now()-f}}var h=[],y=[],C=1,A=null,N=3,L=!1,O=!1,F=!1,he=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var ie=n(y);ie!==null;){if(ie.callback===null)r(y);else if(ie.startTime<=Y)r(y),ie.sortIndex=ie.expirationTime,t(h,ie);else break;ie=n(y)}}function _(Y){if(F=!1,E(Y),!O)if(n(h)!==null)O=!0,Ne(H);else{var ie=n(y);ie!==null&&Te(_,ie.startTime-Y)}}function H(Y,ie){O=!1,F&&(F=!1,S(W),W=-1),L=!0;var te=N;try{for(E(ie),A=n(h);A!==null&&(!(A.expirationTime>ie)||Y&&!fe());){var Se=A.callback;if(typeof Se=="function"){A.callback=null,N=A.priorityLevel;var B=Se(A.expirationTime<=ie);ie=e.unstable_now(),typeof B=="function"?A.callback=B:A===n(h)&&r(h),E(ie)}else r(h);A=n(h)}if(A!==null)var de=!0;else{var ye=n(y);ye!==null&&Te(_,ye.startTime-ie),de=!1}return de}finally{A=null,N=te,L=!1}}var K=!1,X=null,W=-1,pe=5,G=-1;function fe(){return!(e.unstable_now()-G<pe)}function Z(){if(X!==null){var Y=e.unstable_now();G=Y;var ie=!0;try{ie=X(!0,Y)}finally{ie?me():(K=!1,X=null)}}else K=!1}var me;if(typeof w=="function")me=function(){w(Z)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ce=ce.port2;ce.port1.onmessage=Z,me=function(){Ce.postMessage(null)}}else me=function(){he(Z,0)};function Ne(Y){X=Y,K||(K=!0,me())}function Te(Y,ie){W=he(function(){Y(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){O||L||(O=!0,Ne(H))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var ie=3;break;default:ie=N}var te=N;N=ie;try{return Y()}finally{N=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=N;N=Y;try{return ie()}finally{N=te}},e.unstable_scheduleCallback=function(Y,ie,te){var Se=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Se+te:Se):te=Se,Y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=te+B,Y={id:C++,callback:ie,priorityLevel:Y,startTime:te,expirationTime:B,sortIndex:-1},te>Se?(Y.sortIndex=te,t(y,Y),n(h)===null&&Y===n(y)&&(F?(S(W),W=-1):F=!0,Te(_,te-Se))):(Y.sortIndex=B,t(h,Y),O||L||(O=!0,Ne(H))),Y},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(Y){var ie=N;return function(){var te=N;N=ie;try{return Y.apply(this,arguments)}finally{N=te}}}})(gd);yd.exports=gd;var Np=yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=P,$t=Np;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wd=new Set,Pi={};function yr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Pi[e]=t,e=0;e<t.length;e++)wd.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=Object.prototype.hasOwnProperty,Ap=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uu={},Hu={};function Mp(e){return ms.call(Hu,e)?!0:ms.call(Uu,e)?!1:Ap.test(e)?Hu[e]=!0:(Uu[e]=!0,!1)}function Ip(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Tp(e,t,n,r){if(t===null||typeof t>"u"||Ip(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ha=/[\-:]([a-z])/g;function pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ha,pa);vt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ma(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Tp(t,n,o,r)&&(n=null),r||o===null?Mp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Pp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Er=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),va=Symbol.for("react.strict_mode"),vs=Symbol.for("react.profiler"),xd=Symbol.for("react.provider"),Sd=Symbol.for("react.context"),ya=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),gs=Symbol.for("react.suspense_list"),ga=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),kd=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,$l;function hi(e){if($l===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$l=t&&t[1]||""}return`
`+$l+e}var Ul=!1;function Hl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,f=l.length-1;1<=a&&0<=f&&o[a]!==l[f];)f--;for(;1<=a&&0<=f;a--,f--)if(o[a]!==l[f]){if(a!==1||f!==1)do if(a--,f--,0>f||o[a]!==l[f]){var h=`
`+o[a].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=a&&0<=f);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function _p(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=Hl(e.type,!1),e;case 11:return e=Hl(e.type.render,!1),e;case 1:return e=Hl(e.type,!0),e;default:return""}}function ws(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jr:return"Fragment";case Er:return"Portal";case vs:return"Profiler";case va:return"StrictMode";case ys:return"Suspense";case gs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sd:return(e.displayName||"Context")+".Consumer";case xd:return(e._context.displayName||"Context")+".Provider";case ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ga:return t=e.displayName||null,t!==null?t:ws(e.type)||"Memo";case Fn:t=e._payload,e=e._init;try{return ws(e(t))}catch{}}return null}function Rp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ws(t);case 8:return t===va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ed(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zp(e){var t=Ed(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=zp(e))}function jd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ed(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xs(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cd(e,t){t=t.checked,t!=null&&ma(e,"checked",t,!1)}function Ss(e,t){Cd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ks(e,t.type,n):t.hasOwnProperty("defaultValue")&&ks(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ks(e,t,n){(t!=="number"||Oo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Es(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(b(92));if(pi(n)){if(1<n.length)throw Error(b(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function Nd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function bu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function js(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uo,Ad=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ai(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lp=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(e){Lp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yi[t]=yi[e]})});function Md(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yi.hasOwnProperty(e)&&yi[e]?(""+t).trim():t+"px"}function Id(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Md(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Op=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cs(e,t){if(t){if(Op[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(b(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(b(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(b(61))}if(t.style!=null&&typeof t.style!="object")throw Error(b(62))}}function Ns(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Or=null,Dr=null;function Yu(e){if(e=bi(e)){if(typeof As!="function")throw Error(b(280));var t=e.stateNode;t&&(t=fl(t),As(e.stateNode,e.type,t))}}function Td(e){Or?Dr?Dr.push(e):Dr=[e]:Or=e}function _d(){if(Or){var e=Or,t=Dr;if(Dr=Or=null,Yu(e),t)for(e=0;e<t.length;e++)Yu(t[e])}}function Rd(e,t){return e(t)}function zd(){}var Wl=!1;function Ld(e,t,n){if(Wl)return e(t,n);Wl=!0;try{return Rd(e,t,n)}finally{Wl=!1,(Or!==null||Dr!==null)&&(zd(),_d())}}function Mi(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Ms=!1;if(Mn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Ms=!1}function Dp(e,t,n,r,o,l,a,f,h){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var gi=!1,Do=null,Bo=!1,Is=null,Bp={onError:function(e){gi=!0,Do=e}};function Fp(e,t,n,r,o,l,a,f,h){gi=!1,Do=null,Dp.apply(Bp,arguments)}function $p(e,t,n,r,o,l,a,f,h){if(Fp.apply(this,arguments),gi){if(gi){var y=Do;gi=!1,Do=null}else throw Error(b(198));Bo||(Bo=!0,Is=y)}}function gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Od(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ku(e){if(gr(e)!==e)throw Error(b(188))}function Up(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Ku(o),e;if(l===r)return Ku(o),t;l=l.sibling}throw Error(b(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,f=o.child;f;){if(f===n){a=!0,n=o,r=l;break}if(f===r){a=!0,r=o,n=l;break}f=f.sibling}if(!a){for(f=l.child;f;){if(f===n){a=!0,n=l,r=o;break}if(f===r){a=!0,r=l,n=o;break}f=f.sibling}if(!a)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function Dd(e){return e=Up(e),e!==null?Bd(e):null}function Bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=$t.unstable_scheduleCallback,Xu=$t.unstable_cancelCallback,Hp=$t.unstable_shouldYield,Wp=$t.unstable_requestPaint,nt=$t.unstable_now,Vp=$t.unstable_getCurrentPriorityLevel,xa=$t.unstable_ImmediatePriority,$d=$t.unstable_UserBlockingPriority,Fo=$t.unstable_NormalPriority,Gp=$t.unstable_LowPriority,Ud=$t.unstable_IdlePriority,al=null,kn=null;function Qp(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(al,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Kp,bp=Math.log,Yp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(bp(e)/Yp|0)|0}var co=64,fo=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $o(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var f=a&~o;f!==0?r=mi(f):(l&=a,l!==0&&(r=mi(l)))}else a=n&~o,a!==0?r=mi(a):l!==0&&(r=mi(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),o=1<<n,r|=e[n],t&=~o;return r}function Xp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-an(l),f=1<<a,h=o[a];h===-1?(!(f&n)||f&r)&&(o[a]=Xp(f,t)):h<=t&&(e.expiredLanes|=f),l&=~f}}function Ts(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hd(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function Vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function Zp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-an(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Fe=0;function Wd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vd,ka,Gd,Qd,bd,_s=!1,ho=[],Gn=null,Qn=null,bn=null,Ii=new Map,Ti=new Map,Un=[],qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function li(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=bi(t),t!==null&&ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function em(e,t,n,r,o){switch(t){case"focusin":return Gn=li(Gn,e,t,n,r,o),!0;case"dragenter":return Qn=li(Qn,e,t,n,r,o),!0;case"mouseover":return bn=li(bn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Ii.set(l,li(Ii.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Ti.set(l,li(Ti.get(l)||null,e,t,n,r,o)),!0}return!1}function Yd(e){var t=sr(e.target);if(t!==null){var n=gr(t);if(n!==null){if(t=n.tag,t===13){if(t=Od(n),t!==null){e.blockedOn=t,bd(e.priority,function(){Gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function No(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ps=r,n.target.dispatchEvent(r),Ps=null}else return t=bi(n),t!==null&&ka(t),e.blockedOn=n,!1;t.shift()}return!0}function Zu(e,t,n){No(e)&&n.delete(t)}function tm(){_s=!1,Gn!==null&&No(Gn)&&(Gn=null),Qn!==null&&No(Qn)&&(Qn=null),bn!==null&&No(bn)&&(bn=null),Ii.forEach(Zu),Ti.forEach(Zu)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,_s||(_s=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,tm)))}function _i(e){function t(o){return si(o,e)}if(0<ho.length){si(ho[0],e);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&si(Gn,e),Qn!==null&&si(Qn,e),bn!==null&&si(bn,e),Ii.forEach(t),Ti.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&Un.shift()}var Br=Rn.ReactCurrentBatchConfig,Uo=!0;function nm(e,t,n,r){var o=Fe,l=Br.transition;Br.transition=null;try{Fe=1,Ea(e,t,n,r)}finally{Fe=o,Br.transition=l}}function rm(e,t,n,r){var o=Fe,l=Br.transition;Br.transition=null;try{Fe=4,Ea(e,t,n,r)}finally{Fe=o,Br.transition=l}}function Ea(e,t,n,r){if(Uo){var o=Rs(e,t,n,r);if(o===null)es(e,t,r,Ho,n),Ju(e,r);else if(em(o,e,t,n,r))r.stopPropagation();else if(Ju(e,r),t&4&&-1<qp.indexOf(e)){for(;o!==null;){var l=bi(o);if(l!==null&&Vd(l),l=Rs(e,t,n,r),l===null&&es(e,t,r,Ho,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else es(e,t,r,null,n)}}var Ho=null;function Rs(e,t,n,r){if(Ho=null,e=wa(r),e=sr(e),e!==null)if(t=gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Od(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ho=e,null}function Kd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vp()){case xa:return 1;case $d:return 4;case Fo:case Gp:return 16;case Ud:return 536870912;default:return 16}default:return 16}}var Wn=null,ja=null,Po=null;function Xd(){if(Po)return Po;var e,t=ja,n=t.length,r,o="value"in Wn?Wn.value:Wn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Po=o.slice(e,1<r?1-r:void 0)}function Ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function po(){return!0}function qu(){return!1}function Ht(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?po:qu,this.isPropagationStopped=qu,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(Xr),Qi=Ze({},Xr,{view:0,detail:0}),im=Ht(Qi),Gl,Ql,ai,ul=Ze({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(Gl=e.screenX-ai.screenX,Ql=e.screenY-ai.screenY):Ql=Gl=0,ai=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:Ql}}),ec=Ht(ul),om=Ze({},ul,{dataTransfer:0}),lm=Ht(om),sm=Ze({},Qi,{relatedTarget:0}),bl=Ht(sm),am=Ze({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),um=Ht(am),cm=Ze({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dm=Ht(cm),fm=Ze({},Xr,{data:0}),tc=Ht(fm),hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mm[e])?!!t[e]:!1}function Na(){return vm}var ym=Ze({},Qi,{key:function(e){if(e.key){var t=hm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gm=Ht(ym),wm=Ze({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Ht(wm),xm=Ze({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),Sm=Ht(xm),km=Ze({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Em=Ht(km),jm=Ze({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cm=Ht(jm),Nm=[9,13,27,32],Pa=Mn&&"CompositionEvent"in window,wi=null;Mn&&"documentMode"in document&&(wi=document.documentMode);var Pm=Mn&&"TextEvent"in window&&!wi,Jd=Mn&&(!Pa||wi&&8<wi&&11>=wi),rc=" ",ic=!1;function Zd(e,t){switch(e){case"keyup":return Nm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Am(e,t){switch(e){case"compositionend":return qd(t);case"keypress":return t.which!==32?null:(ic=!0,rc);case"textInput":return e=t.data,e===rc&&ic?null:e;default:return null}}function Mm(e,t){if(Cr)return e==="compositionend"||!Pa&&Zd(e,t)?(e=Xd(),Po=ja=Wn=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jd&&t.locale!=="ko"?null:t.data;default:return null}}var Im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Im[e.type]:t==="textarea"}function ef(e,t,n,r){Td(r),t=Wo(t,"onChange"),0<t.length&&(n=new Ca("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xi=null,Ri=null;function Tm(e){ff(e,0)}function cl(e){var t=Ar(e);if(jd(t))return e}function _m(e,t){if(e==="change")return t}var tf=!1;if(Mn){var Yl;if(Mn){var Kl="oninput"in document;if(!Kl){var lc=document.createElement("div");lc.setAttribute("oninput","return;"),Kl=typeof lc.oninput=="function"}Yl=Kl}else Yl=!1;tf=Yl&&(!document.documentMode||9<document.documentMode)}function sc(){xi&&(xi.detachEvent("onpropertychange",nf),Ri=xi=null)}function nf(e){if(e.propertyName==="value"&&cl(Ri)){var t=[];ef(t,Ri,e,wa(e)),Ld(Tm,t)}}function Rm(e,t,n){e==="focusin"?(sc(),xi=t,Ri=n,xi.attachEvent("onpropertychange",nf)):e==="focusout"&&sc()}function zm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(Ri)}function Lm(e,t){if(e==="click")return cl(t)}function Om(e,t){if(e==="input"||e==="change")return cl(t)}function Dm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Dm;function zi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ms.call(t,o)||!cn(e[o],t[o]))return!1}return!0}function ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uc(e,t){var n=ac(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ac(n)}}function rf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function of(){for(var e=window,t=Oo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oo(e.document)}return t}function Aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bm(e){var t=of(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rf(n.ownerDocument.documentElement,n)){if(r!==null&&Aa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=uc(n,l);var a=uc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=Mn&&"documentMode"in document&&11>=document.documentMode,Nr=null,zs=null,Si=null,Ls=!1;function cc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ls||Nr==null||Nr!==Oo(r)||(r=Nr,"selectionStart"in r&&Aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&zi(Si,r)||(Si=r,r=Wo(zs,"onSelect"),0<r.length&&(t=new Ca("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Xl={},lf={};Mn&&(lf=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function dl(e){if(Xl[e])return Xl[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lf)return Xl[e]=t[n];return e}var sf=dl("animationend"),af=dl("animationiteration"),uf=dl("animationstart"),cf=dl("transitionend"),df=new Map,dc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){df.set(e,t),yr(t,[e])}for(var Jl=0;Jl<dc.length;Jl++){var Zl=dc[Jl],$m=Zl.toLowerCase(),Um=Zl[0].toUpperCase()+Zl.slice(1);tr($m,"on"+Um)}tr(sf,"onAnimationEnd");tr(af,"onAnimationIteration");tr(uf,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(cf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hm=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function fc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$p(r,t,void 0,e),e.currentTarget=null}function ff(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var f=r[a],h=f.instance,y=f.currentTarget;if(f=f.listener,h!==l&&o.isPropagationStopped())break e;fc(o,f,y),l=h}else for(a=0;a<r.length;a++){if(f=r[a],h=f.instance,y=f.currentTarget,f=f.listener,h!==l&&o.isPropagationStopped())break e;fc(o,f,y),l=h}}}if(Bo)throw e=Is,Bo=!1,Is=null,e}function Ge(e,t){var n=t[$s];n===void 0&&(n=t[$s]=new Set);var r=e+"__bubble";n.has(r)||(hf(t,e,2,!1),n.add(r))}function ql(e,t,n){var r=0;t&&(r|=4),hf(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[vo]){e[vo]=!0,wd.forEach(function(n){n!=="selectionchange"&&(Hm.has(n)||ql(n,!1,e),ql(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,ql("selectionchange",!1,t))}}function hf(e,t,n,r){switch(Kd(t)){case 1:var o=nm;break;case 4:o=rm;break;default:o=Ea}n=o.bind(null,t,n,e),o=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function es(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var f=r.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;f!==null;){if(a=sr(f),a===null)return;if(h=a.tag,h===5||h===6){r=l=a;continue e}f=f.parentNode}}r=r.return}Ld(function(){var y=l,C=wa(n),A=[];e:{var N=df.get(e);if(N!==void 0){var L=Ca,O=e;switch(e){case"keypress":if(Ao(n)===0)break e;case"keydown":case"keyup":L=gm;break;case"focusin":O="focus",L=bl;break;case"focusout":O="blur",L=bl;break;case"beforeblur":case"afterblur":L=bl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Sm;break;case sf:case af:case uf:L=um;break;case cf:L=Em;break;case"scroll":L=im;break;case"wheel":L=Cm;break;case"copy":case"cut":case"paste":L=dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=nc}var F=(t&4)!==0,he=!F&&e==="scroll",S=F?N!==null?N+"Capture":null:N;F=[];for(var w=y,E;w!==null;){E=w;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,S!==null&&(_=Mi(w,S),_!=null&&F.push(Oi(w,_,E)))),he)break;w=w.return}0<F.length&&(N=new L(N,O,null,n,C),A.push({event:N,listeners:F}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",N&&n!==Ps&&(O=n.relatedTarget||n.fromElement)&&(sr(O)||O[In]))break e;if((L||N)&&(N=C.window===C?C:(N=C.ownerDocument)?N.defaultView||N.parentWindow:window,L?(O=n.relatedTarget||n.toElement,L=y,O=O?sr(O):null,O!==null&&(he=gr(O),O!==he||O.tag!==5&&O.tag!==6)&&(O=null)):(L=null,O=y),L!==O)){if(F=ec,_="onMouseLeave",S="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(F=nc,_="onPointerLeave",S="onPointerEnter",w="pointer"),he=L==null?N:Ar(L),E=O==null?N:Ar(O),N=new F(_,w+"leave",L,n,C),N.target=he,N.relatedTarget=E,_=null,sr(C)===y&&(F=new F(S,w+"enter",O,n,C),F.target=E,F.relatedTarget=he,_=F),he=_,L&&O)t:{for(F=L,S=O,w=0,E=F;E;E=kr(E))w++;for(E=0,_=S;_;_=kr(_))E++;for(;0<w-E;)F=kr(F),w--;for(;0<E-w;)S=kr(S),E--;for(;w--;){if(F===S||S!==null&&F===S.alternate)break t;F=kr(F),S=kr(S)}F=null}else F=null;L!==null&&hc(A,N,L,F,!1),O!==null&&he!==null&&hc(A,he,O,F,!0)}}e:{if(N=y?Ar(y):window,L=N.nodeName&&N.nodeName.toLowerCase(),L==="select"||L==="input"&&N.type==="file")var H=_m;else if(oc(N))if(tf)H=Om;else{H=zm;var K=Rm}else(L=N.nodeName)&&L.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(H=Lm);if(H&&(H=H(e,y))){ef(A,H,n,C);break e}K&&K(e,N,y),e==="focusout"&&(K=N._wrapperState)&&K.controlled&&N.type==="number"&&ks(N,"number",N.value)}switch(K=y?Ar(y):window,e){case"focusin":(oc(K)||K.contentEditable==="true")&&(Nr=K,zs=y,Si=null);break;case"focusout":Si=zs=Nr=null;break;case"mousedown":Ls=!0;break;case"contextmenu":case"mouseup":case"dragend":Ls=!1,cc(A,n,C);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":cc(A,n,C)}var X;if(Pa)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Cr?Zd(e,n)&&(W="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&(Jd&&n.locale!=="ko"&&(Cr||W!=="onCompositionStart"?W==="onCompositionEnd"&&Cr&&(X=Xd()):(Wn=C,ja="value"in Wn?Wn.value:Wn.textContent,Cr=!0)),K=Wo(y,W),0<K.length&&(W=new tc(W,e,null,n,C),A.push({event:W,listeners:K}),X?W.data=X:(X=qd(n),X!==null&&(W.data=X)))),(X=Pm?Am(e,n):Mm(e,n))&&(y=Wo(y,"onBeforeInput"),0<y.length&&(C=new tc("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:y}),C.data=X))}ff(A,t)})}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Mi(e,n),l!=null&&r.unshift(Oi(e,l,o)),l=Mi(e,t),l!=null&&r.push(Oi(e,l,o))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var f=n,h=f.alternate,y=f.stateNode;if(h!==null&&h===r)break;f.tag===5&&y!==null&&(f=y,o?(h=Mi(n,l),h!=null&&a.unshift(Oi(n,h,f))):o||(h=Mi(n,l),h!=null&&a.push(Oi(n,h,f)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Wm=/\r\n?/g,Vm=/\u0000|\uFFFD/g;function pc(e){return(typeof e=="string"?e:""+e).replace(Wm,`
`).replace(Vm,"")}function yo(e,t,n){if(t=pc(t),pc(e)!==t&&n)throw Error(b(425))}function Vo(){}var Os=null,Ds=null;function Bs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,Gm=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(e){return mc.resolve(null).then(e).catch(bm)}:Fs;function bm(e){setTimeout(function(){throw e})}function ts(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),_i(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);_i(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jr,Di="__reactProps$"+Jr,In="__reactContainer$"+Jr,$s="__reactEvents$"+Jr,Ym="__reactListeners$"+Jr,Km="__reactHandles$"+Jr;function sr(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vc(e);e!==null;){if(n=e[Sn])return n;e=vc(e)}return t}e=n,n=e.parentNode}return null}function bi(e){return e=e[Sn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(b(33))}function fl(e){return e[Di]||null}var Us=[],Mr=-1;function nr(e){return{current:e}}function Qe(e){0>Mr||(e.current=Us[Mr],Us[Mr]=null,Mr--)}function Ue(e,t){Mr++,Us[Mr]=e.current,e.current=t}var er={},xt=nr(er),Tt=nr(!1),fr=er;function Wr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _t(e){return e=e.childContextTypes,e!=null}function Go(){Qe(Tt),Qe(xt)}function yc(e,t,n){if(xt.current!==er)throw Error(b(168));Ue(xt,t),Ue(Tt,n)}function pf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(b(108,Rp(e)||"Unknown",o));return Ze({},n,r)}function Qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,fr=xt.current,Ue(xt,e),Ue(Tt,Tt.current),!0}function gc(e,t,n){var r=e.stateNode;if(!r)throw Error(b(169));n?(e=pf(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,Qe(Tt),Qe(xt),Ue(xt,e)):Qe(Tt),Ue(Tt,n)}var Cn=null,hl=!1,ns=!1;function mf(e){Cn===null?Cn=[e]:Cn.push(e)}function Xm(e){hl=!0,mf(e)}function rr(){if(!ns&&Cn!==null){ns=!0;var e=0,t=Fe;try{var n=Cn;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,hl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Fd(xa,rr),o}finally{Fe=t,ns=!1}}return null}var Ir=[],Tr=0,bo=null,Yo=0,Gt=[],Qt=0,hr=null,Nn=1,Pn="";function or(e,t){Ir[Tr++]=Yo,Ir[Tr++]=bo,bo=e,Yo=t}function vf(e,t,n){Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,hr=e;var r=Nn;e=Pn;var o=32-an(r)-1;r&=~(1<<o),n+=1;var l=32-an(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Nn=1<<32-an(t)+o|n<<o|r,Pn=l+e}else Nn=1<<l|n<<o|r,Pn=e}function Ma(e){e.return!==null&&(or(e,1),vf(e,1,0))}function Ia(e){for(;e===bo;)bo=Ir[--Tr],Ir[Tr]=null,Yo=Ir[--Tr],Ir[Tr]=null;for(;e===hr;)hr=Gt[--Qt],Gt[Qt]=null,Pn=Gt[--Qt],Gt[Qt]=null,Nn=Gt[--Qt],Gt[Qt]=null}var Ft=null,Bt=null,be=!1,ln=null;function yf(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,Bt=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:Nn,overflow:Pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,Bt=null,!0):!1;default:return!1}}function Hs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ws(e){if(be){var t=Bt;if(t){var n=t;if(!wc(e,t)){if(Hs(e))throw Error(b(418));t=Yn(n.nextSibling);var r=Ft;t&&wc(e,t)?yf(r,n):(e.flags=e.flags&-4097|2,be=!1,Ft=e)}}else{if(Hs(e))throw Error(b(418));e.flags=e.flags&-4097|2,be=!1,Ft=e}}}function xc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function go(e){if(e!==Ft)return!1;if(!be)return xc(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bs(e.type,e.memoizedProps)),t&&(t=Bt)){if(Hs(e))throw gf(),Error(b(418));for(;t;)yf(e,t),t=Yn(t.nextSibling)}if(xc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Bt=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Ft?Yn(e.stateNode.nextSibling):null;return!0}function gf(){for(var e=Bt;e;)e=Yn(e.nextSibling)}function Vr(){Bt=Ft=null,be=!1}function Ta(e){ln===null?ln=[e]:ln.push(e)}var Jm=Rn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var f=o.refs;a===null?delete f[l]:f[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sc(e){var t=e._init;return t(e._payload)}function wf(e){function t(S,w){if(e){var E=S.deletions;E===null?(S.deletions=[w],S.flags|=16):E.push(w)}}function n(S,w){if(!e)return null;for(;w!==null;)t(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function o(S,w){return S=Zn(S,w),S.index=0,S.sibling=null,S}function l(S,w,E){return S.index=E,e?(E=S.alternate,E!==null?(E=E.index,E<w?(S.flags|=2,w):E):(S.flags|=2,w)):(S.flags|=1048576,w)}function a(S){return e&&S.alternate===null&&(S.flags|=2),S}function f(S,w,E,_){return w===null||w.tag!==6?(w=us(E,S.mode,_),w.return=S,w):(w=o(w,E),w.return=S,w)}function h(S,w,E,_){var H=E.type;return H===jr?C(S,w,E.props.children,_,E.key):w!==null&&(w.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Fn&&Sc(H)===w.type)?(_=o(w,E.props),_.ref=ui(S,w,E),_.return=S,_):(_=Lo(E.type,E.key,E.props,null,S.mode,_),_.ref=ui(S,w,E),_.return=S,_)}function y(S,w,E,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=cs(E,S.mode,_),w.return=S,w):(w=o(w,E.children||[]),w.return=S,w)}function C(S,w,E,_,H){return w===null||w.tag!==7?(w=dr(E,S.mode,_,H),w.return=S,w):(w=o(w,E),w.return=S,w)}function A(S,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=us(""+w,S.mode,E),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case so:return E=Lo(w.type,w.key,w.props,null,S.mode,E),E.ref=ui(S,null,w),E.return=S,E;case Er:return w=cs(w,S.mode,E),w.return=S,w;case Fn:var _=w._init;return A(S,_(w._payload),E)}if(pi(w)||ii(w))return w=dr(w,S.mode,E,null),w.return=S,w;wo(S,w)}return null}function N(S,w,E,_){var H=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return H!==null?null:f(S,w,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case so:return E.key===H?h(S,w,E,_):null;case Er:return E.key===H?y(S,w,E,_):null;case Fn:return H=E._init,N(S,w,H(E._payload),_)}if(pi(E)||ii(E))return H!==null?null:C(S,w,E,_,null);wo(S,E)}return null}function L(S,w,E,_,H){if(typeof _=="string"&&_!==""||typeof _=="number")return S=S.get(E)||null,f(w,S,""+_,H);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case so:return S=S.get(_.key===null?E:_.key)||null,h(w,S,_,H);case Er:return S=S.get(_.key===null?E:_.key)||null,y(w,S,_,H);case Fn:var K=_._init;return L(S,w,E,K(_._payload),H)}if(pi(_)||ii(_))return S=S.get(E)||null,C(w,S,_,H,null);wo(w,_)}return null}function O(S,w,E,_){for(var H=null,K=null,X=w,W=w=0,pe=null;X!==null&&W<E.length;W++){X.index>W?(pe=X,X=null):pe=X.sibling;var G=N(S,X,E[W],_);if(G===null){X===null&&(X=pe);break}e&&X&&G.alternate===null&&t(S,X),w=l(G,w,W),K===null?H=G:K.sibling=G,K=G,X=pe}if(W===E.length)return n(S,X),be&&or(S,W),H;if(X===null){for(;W<E.length;W++)X=A(S,E[W],_),X!==null&&(w=l(X,w,W),K===null?H=X:K.sibling=X,K=X);return be&&or(S,W),H}for(X=r(S,X);W<E.length;W++)pe=L(X,S,W,E[W],_),pe!==null&&(e&&pe.alternate!==null&&X.delete(pe.key===null?W:pe.key),w=l(pe,w,W),K===null?H=pe:K.sibling=pe,K=pe);return e&&X.forEach(function(fe){return t(S,fe)}),be&&or(S,W),H}function F(S,w,E,_){var H=ii(E);if(typeof H!="function")throw Error(b(150));if(E=H.call(E),E==null)throw Error(b(151));for(var K=H=null,X=w,W=w=0,pe=null,G=E.next();X!==null&&!G.done;W++,G=E.next()){X.index>W?(pe=X,X=null):pe=X.sibling;var fe=N(S,X,G.value,_);if(fe===null){X===null&&(X=pe);break}e&&X&&fe.alternate===null&&t(S,X),w=l(fe,w,W),K===null?H=fe:K.sibling=fe,K=fe,X=pe}if(G.done)return n(S,X),be&&or(S,W),H;if(X===null){for(;!G.done;W++,G=E.next())G=A(S,G.value,_),G!==null&&(w=l(G,w,W),K===null?H=G:K.sibling=G,K=G);return be&&or(S,W),H}for(X=r(S,X);!G.done;W++,G=E.next())G=L(X,S,W,G.value,_),G!==null&&(e&&G.alternate!==null&&X.delete(G.key===null?W:G.key),w=l(G,w,W),K===null?H=G:K.sibling=G,K=G);return e&&X.forEach(function(Z){return t(S,Z)}),be&&or(S,W),H}function he(S,w,E,_){if(typeof E=="object"&&E!==null&&E.type===jr&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case so:e:{for(var H=E.key,K=w;K!==null;){if(K.key===H){if(H=E.type,H===jr){if(K.tag===7){n(S,K.sibling),w=o(K,E.props.children),w.return=S,S=w;break e}}else if(K.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Fn&&Sc(H)===K.type){n(S,K.sibling),w=o(K,E.props),w.ref=ui(S,K,E),w.return=S,S=w;break e}n(S,K);break}else t(S,K);K=K.sibling}E.type===jr?(w=dr(E.props.children,S.mode,_,E.key),w.return=S,S=w):(_=Lo(E.type,E.key,E.props,null,S.mode,_),_.ref=ui(S,w,E),_.return=S,S=_)}return a(S);case Er:e:{for(K=E.key;w!==null;){if(w.key===K)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(S,w.sibling),w=o(w,E.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else t(S,w);w=w.sibling}w=cs(E,S.mode,_),w.return=S,S=w}return a(S);case Fn:return K=E._init,he(S,w,K(E._payload),_)}if(pi(E))return O(S,w,E,_);if(ii(E))return F(S,w,E,_);wo(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(S,w.sibling),w=o(w,E),w.return=S,S=w):(n(S,w),w=us(E,S.mode,_),w.return=S,S=w),a(S)):n(S,w)}return he}var Gr=wf(!0),xf=wf(!1),Ko=nr(null),Xo=null,_r=null,_a=null;function Ra(){_a=_r=Xo=null}function za(e){var t=Ko.current;Qe(Ko),e._currentValue=t}function Vs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fr(e,t){Xo=e,_a=_r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},_r===null){if(Xo===null)throw Error(b(308));_r=e,Xo.dependencies={lanes:0,firstContext:e}}else _r=_r.next=e;return t}var ar=null;function La(e){ar===null?ar=[e]:ar.push(e)}function Sf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function Mo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}function kc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jo(e,t,n,r){var o=e.updateQueue;$n=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var h=f,y=h.next;h.next=null,a===null?l=y:a.next=y,a=h;var C=e.alternate;C!==null&&(C=C.updateQueue,f=C.lastBaseUpdate,f!==a&&(f===null?C.firstBaseUpdate=y:f.next=y,C.lastBaseUpdate=h))}if(l!==null){var A=o.baseState;a=0,C=y=h=null,f=l;do{var N=f.lane,L=f.eventTime;if((r&N)===N){C!==null&&(C=C.next={eventTime:L,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var O=e,F=f;switch(N=t,L=n,F.tag){case 1:if(O=F.payload,typeof O=="function"){A=O.call(L,A,N);break e}A=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=F.payload,N=typeof O=="function"?O.call(L,A,N):O,N==null)break e;A=Ze({},A,N);break e;case 2:$n=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,N=o.effects,N===null?o.effects=[f]:N.push(f))}else L={eventTime:L,lane:N,tag:f.tag,payload:f.payload,callback:f.callback,next:null},C===null?(y=C=L,h=A):C=C.next=L,a|=N;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;N=f,f=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(!0);if(C===null&&(h=A),o.baseState=h,o.firstBaseUpdate=y,o.lastBaseUpdate=C,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=A}}function Ec(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(b(191,o));o.call(r)}}}var Yi={},En=nr(Yi),Bi=nr(Yi),Fi=nr(Yi);function ur(e){if(e===Yi)throw Error(b(174));return e}function Da(e,t){switch(Ue(Fi,t),Ue(Bi,e),Ue(En,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:js(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=js(t,e)}Qe(En),Ue(En,t)}function Qr(){Qe(En),Qe(Bi),Qe(Fi)}function Ef(e){ur(Fi.current);var t=ur(En.current),n=js(t,e.type);t!==n&&(Ue(Bi,e),Ue(En,n))}function Ba(e){Bi.current===e&&(Qe(En),Qe(Bi))}var Xe=nr(0);function Zo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function Fa(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var Io=Rn.ReactCurrentDispatcher,is=Rn.ReactCurrentBatchConfig,pr=0,Je=null,lt=null,ct=null,qo=!1,ki=!1,$i=0,Zm=0;function yt(){throw Error(b(321))}function $a(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,o,l){if(pr=l,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Io.current=e===null||e.memoizedState===null?nv:rv,e=n(r,o),ki){l=0;do{if(ki=!1,$i=0,25<=l)throw Error(b(301));l+=1,ct=lt=null,t.updateQueue=null,Io.current=iv,e=n(r,o)}while(ki)}if(Io.current=el,t=lt!==null&&lt.next!==null,pr=0,ct=lt=Je=null,qo=!1,t)throw Error(b(300));return e}function Ha(){var e=$i!==0;return $i=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Je.memoizedState=ct=e:ct=ct.next=e,ct}function Xt(){if(lt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ct===null?Je.memoizedState:ct.next;if(t!==null)ct=t,lt=e;else{if(e===null)throw Error(b(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Je.memoizedState=ct=e:ct=ct.next=e}return ct}function Ui(e,t){return typeof t=="function"?t(e):t}function os(e){var t=Xt(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=lt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var f=a=null,h=null,y=l;do{var C=y.lane;if((pr&C)===C)h!==null&&(h=h.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var A={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};h===null?(f=h=A,a=r):h=h.next=A,Je.lanes|=C,mr|=C}y=y.next}while(y!==null&&y!==l);h===null?a=r:h.next=f,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=h,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Je.lanes|=l,mr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ls(e){var t=Xt(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);cn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function jf(){}function Cf(e,t){var n=Je,r=Xt(),o=t(),l=!cn(r.memoizedState,o);if(l&&(r.memoizedState=o,It=!0),r=r.queue,Wa(Af.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Pf.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(b(349));pr&30||Nf(n,t,o)}return o}function Nf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pf(e,t,n,r){t.value=n,t.getSnapshot=r,Mf(t)&&If(e)}function Af(e,t,n){return n(function(){Mf(t)&&If(e)})}function Mf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function If(e){var t=Tn(e,1);t!==null&&un(t,e,1,-1)}function jc(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=tv.bind(null,Je,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Tf(){return Xt().memoizedState}function To(e,t,n,r){var o=xn();Je.flags|=e,o.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var o=Xt();r=r===void 0?null:r;var l=void 0;if(lt!==null){var a=lt.memoizedState;if(l=a.destroy,r!==null&&$a(r,a.deps)){o.memoizedState=Hi(t,n,l,r);return}}Je.flags|=e,o.memoizedState=Hi(1|t,n,l,r)}function Cc(e,t){return To(8390656,8,e,t)}function Wa(e,t){return pl(2048,8,e,t)}function _f(e,t){return pl(4,2,e,t)}function Rf(e,t){return pl(4,4,e,t)}function zf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lf(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,zf.bind(null,t,e),n)}function Va(){}function Of(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Df(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$a(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bf(e,t,n){return pr&21?(cn(n,t)||(n=Hd(),Je.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function qm(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{Fe=n,is.transition=r}}function Ff(){return Xt().memoizedState}function ev(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$f(e))Uf(t,n);else if(n=Sf(e,t,n,r),n!==null){var o=jt();un(n,e,r,o),Hf(n,t,r)}}function tv(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($f(e))Uf(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,f=l(a,n);if(o.hasEagerState=!0,o.eagerState=f,cn(f,a)){var h=t.interleaved;h===null?(o.next=o,La(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}n=Sf(e,t,o,r),n!==null&&(o=jt(),un(n,e,r,o),Hf(n,t,r))}}function $f(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Uf(e,t){ki=qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}var el={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},nv={readContext:Kt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,zf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ev.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:jc,useDebugValue:Va,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=jc(!1),t=e[0];return e=qm.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,o=xn();if(be){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),dt===null)throw Error(b(349));pr&30||Nf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Cc(Af.bind(null,r,l,e),[e]),r.flags|=2048,Hi(9,Pf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=xn(),t=dt.identifierPrefix;if(be){var n=Pn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$i++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rv={readContext:Kt,useCallback:Of,useContext:Kt,useEffect:Wa,useImperativeHandle:Lf,useInsertionEffect:_f,useLayoutEffect:Rf,useMemo:Df,useReducer:os,useRef:Tf,useState:function(){return os(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return Bf(t,lt.memoizedState,e)},useTransition:function(){var e=os(Ui)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:jf,useSyncExternalStore:Cf,useId:Ff,unstable_isNewReconciler:!1},iv={readContext:Kt,useCallback:Of,useContext:Kt,useEffect:Wa,useImperativeHandle:Lf,useInsertionEffect:_f,useLayoutEffect:Rf,useMemo:Df,useReducer:ls,useRef:Tf,useState:function(){return ls(Ui)},useDebugValue:Va,useDeferredValue:function(e){var t=Xt();return lt===null?t.memoizedState=e:Bf(t,lt.memoizedState,e)},useTransition:function(){var e=ls(Ui)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:jf,useSyncExternalStore:Cf,useId:Ff,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Mo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),o=Jn(e),l=An(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kn(e,l,o),t!==null&&(un(t,e,o,r),Mo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=Jn(e),o=An(n,r);o.tag=2,t!=null&&(o.callback=t),t=Kn(e,o,r),t!==null&&(un(t,e,r,n),Mo(t,e,r))}};function Nc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(o,l):!0}function Wf(e,t,n){var r=!1,o=er,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(o=_t(t)?fr:xt.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,o):er),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function Qs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oa(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Kt(l):(l=_t(t)?fr:xt.current,o.context=Wr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Gs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ml.enqueueReplaceState(o,o.state,null),Jo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function br(e,t){try{var n="",r=t;do n+=_p(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ov=typeof WeakMap=="function"?WeakMap:Map;function Vf(e,t,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nl||(nl=!0,ra=r),bs(e,t)},n}function Gf(e,t,n){n=An(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){bs(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){bs(e,t),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ac(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ov;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=wv.bind(null,e,t,n),t.then(e,e))}function Mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ic(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=An(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var lv=Rn.ReactCurrentOwner,It=!1;function Et(e,t,n,r){t.child=e===null?xf(t,null,n,r):Gr(t,e.child,n,r)}function Tc(e,t,n,r,o){n=n.render;var l=t.ref;return Fr(t,o),r=Ua(e,t,n,r,l,o),n=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(be&&n&&Ma(t),t.flags|=1,Et(e,t,r,o),t.child)}function _c(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Za(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Qf(e,t,l,r,o)):(e=Lo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(a,r)&&e.ref===t.ref)return _n(e,t,o)}return t.flags|=1,e=Zn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(zi(l,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,_n(e,t,o)}return Ys(e,t,n,r,o)}function bf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(zr,Dt),Dt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(zr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ue(zr,Dt),Dt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ue(zr,Dt),Dt|=r;return Et(e,t,o,n),t.child}function Yf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,n,r,o){var l=_t(n)?fr:xt.current;return l=Wr(t,l),Fr(t,o),n=Ua(e,t,n,r,l,o),r=Ha(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(be&&r&&Ma(t),t.flags|=1,Et(e,t,n,o),t.child)}function Rc(e,t,n,r,o){if(_t(n)){var l=!0;Qo(t)}else l=!1;if(Fr(t,o),t.stateNode===null)_o(e,t),Wf(t,n,r),Qs(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,f=t.memoizedProps;a.props=f;var h=a.context,y=n.contextType;typeof y=="object"&&y!==null?y=Kt(y):(y=_t(n)?fr:xt.current,y=Wr(t,y));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==r||h!==y)&&Pc(t,a,r,y),$n=!1;var N=t.memoizedState;a.state=N,Jo(t,r,a,o),h=t.memoizedState,f!==r||N!==h||Tt.current||$n?(typeof C=="function"&&(Gs(t,n,C,r),h=t.memoizedState),(f=$n||Nc(t,n,f,r,N,h,y))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=y,r=f):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,kf(e,t),f=t.memoizedProps,y=t.type===t.elementType?f:rn(t.type,f),a.props=y,A=t.pendingProps,N=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Kt(h):(h=_t(n)?fr:xt.current,h=Wr(t,h));var L=n.getDerivedStateFromProps;(C=typeof L=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(f!==A||N!==h)&&Pc(t,a,r,h),$n=!1,N=t.memoizedState,a.state=N,Jo(t,r,a,o);var O=t.memoizedState;f!==A||N!==O||Tt.current||$n?(typeof L=="function"&&(Gs(t,n,L,r),O=t.memoizedState),(y=$n||Nc(t,n,y,r,N,O,h)||!1)?(C||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,O,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,O,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=O),a.props=r,a.state=O,a.context=h,r=y):(typeof a.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return Ks(e,t,n,r,l,o)}function Ks(e,t,n,r,o,l){Yf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&gc(t,n,!1),_n(e,t,l);r=t.stateNode,lv.current=t;var f=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,l),t.child=Gr(t,null,f,l)):Et(e,t,f,l),t.memoizedState=r.state,o&&gc(t,n,!0),t.child}function Kf(e){var t=e.stateNode;t.pendingContext?yc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yc(e,t.context,!1),Da(e,t.containerInfo)}function zc(e,t,n,r,o){return Vr(),Ta(o),t.flags|=256,Et(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function Js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xf(e,t,n){var r=t.pendingProps,o=Xe.current,l=!1,a=(t.flags&128)!==0,f;if((f=a)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ue(Xe,o&1),e===null)return Ws(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=gl(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Js(n),t.memoizedState=Xs,e):Ga(t,a));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return sv(e,t,a,r,f,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,f=o.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Zn(o,h),r.subtreeFlags=o.subtreeFlags&14680064),f!==null?l=Zn(f,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Js(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Xs,r}return l=e.child,e=l.sibling,r=Zn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ga(e,t){return t=gl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xo(e,t,n,r){return r!==null&&Ta(r),Gr(t,e.child,null,n),e=Ga(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sv(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ss(Error(b(422))),xo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=gl({mode:"visible",children:r.children},o,0,null),l=dr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Gr(t,e.child,null,a),t.child.memoizedState=Js(a),t.memoizedState=Xs,l);if(!(t.mode&1))return xo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(b(419)),r=ss(l,r,void 0),xo(e,t,a,r)}if(f=(a&e.childLanes)!==0,It||f){if(r=dt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Tn(e,o),un(r,e,o,-1))}return Ja(),r=ss(Error(b(421))),xo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=xv.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Bt=Yn(o.nextSibling),Ft=t,be=!0,ln=null,e!==null&&(Gt[Qt++]=Nn,Gt[Qt++]=Pn,Gt[Qt++]=hr,Nn=e.id,Pn=e.overflow,hr=t),t=Ga(t,r.children),t.flags|=4096,t)}function Lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vs(e.return,t,n)}function as(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Jf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=Xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,n,t);else if(e.tag===19)Lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Xe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),as(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}as(t,!0,n,null,l);break;case"together":as(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _o(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function av(e,t,n){switch(t.tag){case 3:Kf(t),Vr();break;case 5:Ef(t);break;case 1:_t(t.type)&&Qo(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ue(Ko,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Xe,Xe.current&1),t.flags|=128,null):n&t.child.childLanes?Xf(e,t,n):(Ue(Xe,Xe.current&1),e=_n(e,t,n),e!==null?e.sibling:null);Ue(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ue(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,bf(e,t,n)}return _n(e,t,n)}var Zf,Zs,qf,eh;Zf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zs=function(){};qf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(En.current);var l=null;switch(n){case"input":o=xs(e,o),r=xs(e,r),l=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":o=Es(e,o),r=Es(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vo)}Cs(n,r);var a;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var f=o[y];for(a in f)f.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Pi.hasOwnProperty(y)?l||(l=[]):(l=l||[]).push(y,null));for(y in r){var h=r[y];if(f=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&h!==f&&(h!=null||f!=null))if(y==="style")if(f){for(a in f)!f.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&f[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(l||(l=[]),l.push(y,n)),n=h;else y==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,f=f?f.__html:void 0,h!=null&&f!==h&&(l=l||[]).push(y,h)):y==="children"?typeof h!="string"&&typeof h!="number"||(l=l||[]).push(y,""+h):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(y)?(h!=null&&y==="onScroll"&&Ge("scroll",e),l||f===h||(l=[])):(l=l||[]).push(y,h))}n&&(l=l||[]).push("style",n);var y=l;(t.updateQueue=y)&&(t.flags|=4)}};eh=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uv(e,t,n){var r=t.pendingProps;switch(Ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return _t(t.type)&&Go(),gt(t),null;case 3:return r=t.stateNode,Qr(),Qe(Tt),Qe(xt),Fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(go(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(la(ln),ln=null))),Zs(e,t),gt(t),null;case 5:Ba(t);var o=ur(Fi.current);if(n=t.type,e!==null&&t.stateNode!=null)qf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(b(166));return gt(t),null}if(e=ur(En.current),go(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Sn]=t,r[Di]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Vu(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":Qu(r,l),Ge("invalid",r)}Cs(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var f=l[a];a==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&yo(r.textContent,f,e),o=["children",""+f]):Pi.hasOwnProperty(a)&&f!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ao(r),Gu(r,l,!0);break;case"textarea":ao(r),bu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Vo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Sn]=t,e[Di]=r,Zf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ns(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<vi.length;o++)Ge(vi[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":Vu(e,r),o=xs(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":Qu(e,r),o=Es(e,r),Ge("invalid",e);break;default:o=r}Cs(n,o),f=o;for(l in f)if(f.hasOwnProperty(l)){var h=f[l];l==="style"?Id(e,h):l==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Ad(e,h)):l==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ai(e,h):typeof h=="number"&&Ai(e,""+h):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Pi.hasOwnProperty(l)?h!=null&&l==="onScroll"&&Ge("scroll",e):h!=null&&ma(e,l,h,a))}switch(n){case"input":ao(e),Gu(e,r,!1);break;case"textarea":ao(e),bu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)eh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(b(166));if(n=ur(Fi.current),ur(En.current),go(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sn]=t,(l=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=t,t.stateNode=r}return gt(t),null;case 13:if(Qe(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&Bt!==null&&t.mode&1&&!(t.flags&128))gf(),Vr(),t.flags|=98560,l=!1;else if(l=go(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(b(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(b(317));l[Sn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),l=!1}else ln!==null&&(la(ln),ln=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?st===0&&(st=3):Ja())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Qr(),Zs(e,t),e===null&&Li(t.stateNode.containerInfo),gt(t),null;case 10:return za(t.type._context),gt(t),null;case 17:return _t(t.type)&&Go(),gt(t),null;case 19:if(Qe(Xe),l=t.memoizedState,l===null)return gt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ci(l,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Zo(e),a!==null){for(t.flags|=128,ci(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(Xe,Xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Yr&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304)}else{if(!r)if(e=Zo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!be)return gt(t),null}else 2*nt()-l.renderingStartTime>Yr&&n!==1073741824&&(t.flags|=128,r=!0,ci(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=Xe.current,Ue(Xe,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Xa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(b(156,t.tag))}function cv(e,t){switch(Ia(t),t.tag){case 1:return _t(t.type)&&Go(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),Qe(Tt),Qe(xt),Fa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ba(t),null;case 13:if(Qe(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(Xe),null;case 4:return Qr(),null;case 10:return za(t.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var So=!1,wt=!1,dv=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function qs(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Oc=!1;function fv(e,t){if(Os=Uo,e=of(),Aa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,f=-1,h=-1,y=0,C=0,A=e,N=null;t:for(;;){for(var L;A!==n||o!==0&&A.nodeType!==3||(f=a+o),A!==l||r!==0&&A.nodeType!==3||(h=a+r),A.nodeType===3&&(a+=A.nodeValue.length),(L=A.firstChild)!==null;)N=A,A=L;for(;;){if(A===e)break t;if(N===n&&++y===o&&(f=a),N===l&&++C===r&&(h=a),(L=A.nextSibling)!==null)break;A=N,N=A.parentNode}A=L}n=f===-1||h===-1?null:{start:f,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ds={focusedElem:e,selectionRange:n},Uo=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var F=O.memoizedProps,he=O.memoizedState,S=t.stateNode,w=S.getSnapshotBeforeUpdate(t.elementType===t.type?F:rn(t.type,F),he);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return O=Oc,Oc=!1,O}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&qs(t,n,l)}o=o.next}while(o!==r)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ea(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function th(e){var t=e.alternate;t!==null&&(e.alternate=null,th(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Di],delete t[$s],delete t[Ym],delete t[Km])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vo));else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}var pt=null,on=!1;function Bn(e,t,n){for(n=n.child;n!==null;)rh(e,t,n),n=n.sibling}function rh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:wt||Rr(n,t);case 6:var r=pt,o=on;pt=null,Bn(e,t,n),pt=r,on=o,pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(on?(e=pt,n=n.stateNode,e.nodeType===8?ts(e.parentNode,n):e.nodeType===1&&ts(e,n),_i(e)):ts(pt,n.stateNode));break;case 4:r=pt,o=on,pt=n.stateNode.containerInfo,on=!0,Bn(e,t,n),pt=r,on=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&qs(n,t,a),o=o.next}while(o!==r)}Bn(e,t,n);break;case 1:if(!wt&&(Rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){tt(n,t,f)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Bn(e,t,n),wt=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function Bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dv),t.forEach(function(r){var o=Sv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,f=a;e:for(;f!==null;){switch(f.tag){case 5:pt=f.stateNode,on=!1;break e;case 3:pt=f.stateNode.containerInfo,on=!0;break e;case 4:pt=f.stateNode.containerInfo,on=!0;break e}f=f.return}if(pt===null)throw Error(b(160));rh(l,a,o),pt=null,on=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(y){tt(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ih(t,e),t=t.sibling}function ih(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),yn(e),r&4){try{Ei(3,e,e.return),vl(3,e)}catch(F){tt(e,e.return,F)}try{Ei(5,e,e.return)}catch(F){tt(e,e.return,F)}}break;case 1:nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return);break;case 5:if(nn(t,e),yn(e),r&512&&n!==null&&Rr(n,n.return),e.flags&32){var o=e.stateNode;try{Ai(o,"")}catch(F){tt(e,e.return,F)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,f=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&Cd(o,l),Ns(f,a);var y=Ns(f,l);for(a=0;a<h.length;a+=2){var C=h[a],A=h[a+1];C==="style"?Id(o,A):C==="dangerouslySetInnerHTML"?Ad(o,A):C==="children"?Ai(o,A):ma(o,C,A,y)}switch(f){case"input":Ss(o,l);break;case"textarea":Nd(o,l);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var L=l.value;L!=null?Lr(o,!!l.multiple,L,!1):N!==!!l.multiple&&(l.defaultValue!=null?Lr(o,!!l.multiple,l.defaultValue,!0):Lr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Di]=l}catch(F){tt(e,e.return,F)}}break;case 6:if(nn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(b(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(F){tt(e,e.return,F)}}break;case 3:if(nn(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_i(t.containerInfo)}catch(F){tt(e,e.return,F)}break;case 4:nn(t,e),yn(e);break;case 13:nn(t,e),yn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=nt())),r&4&&Bc(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(y=wt)||C,nn(t,e),wt=y):nn(t,e),yn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(ae=e,C=e.child;C!==null;){for(A=ae=C;ae!==null;){switch(N=ae,L=N.child,N.tag){case 0:case 11:case 14:case 15:Ei(4,N,N.return);break;case 1:Rr(N,N.return);var O=N.stateNode;if(typeof O.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(F){tt(r,n,F)}}break;case 5:Rr(N,N.return);break;case 22:if(N.memoizedState!==null){$c(A);continue}}L!==null?(L.return=N,ae=L):$c(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{o=A.stateNode,y?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=A.stateNode,h=A.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,f.style.display=Md("display",a))}catch(F){tt(e,e.return,F)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=y?"":A.memoizedProps}catch(F){tt(e,e.return,F)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:nn(t,e),yn(e),r&4&&Bc(e);break;case 21:break;default:nn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nh(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ai(o,""),r.flags&=-33);var l=Dc(e);na(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,f=Dc(e);ta(e,f,a);break;default:throw Error(b(161))}}catch(h){tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hv(e,t,n){ae=e,oh(e)}function oh(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var o=ae,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||So;if(!a){var f=o.alternate,h=f!==null&&f.memoizedState!==null||wt;f=So;var y=wt;if(So=a,(wt=h)&&!y)for(ae=o;ae!==null;)a=ae,h=a.child,a.tag===22&&a.memoizedState!==null?Uc(o):h!==null?(h.return=a,ae=h):Uc(o);for(;l!==null;)ae=l,oh(l),l=l.sibling;ae=o,So=f,wt=y}Fc(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ae=l):Fc(e)}}function Fc(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ec(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ec(t,a,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&_i(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}wt||t.flags&512&&ea(t)}catch(N){tt(t,t.return,N)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function $c(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function Uc(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vl(4,t)}catch(h){tt(t,n,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(h){tt(t,o,h)}}var l=t.return;try{ea(t)}catch(h){tt(t,l,h)}break;case 5:var a=t.return;try{ea(t)}catch(h){tt(t,a,h)}}}catch(h){tt(t,t.return,h)}if(t===e){ae=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ae=f;break}ae=t.return}}var pv=Math.ceil,tl=Rn.ReactCurrentDispatcher,Qa=Rn.ReactCurrentOwner,Yt=Rn.ReactCurrentBatchConfig,ze=0,dt=null,ot=null,mt=0,Dt=0,zr=nr(0),st=0,Wi=null,mr=0,yl=0,ba=0,ji=null,Mt=null,Ya=0,Yr=1/0,jn=null,nl=!1,ra=null,Xn=null,ko=!1,Vn=null,rl=0,Ci=0,ia=null,Ro=-1,zo=0;function jt(){return ze&6?nt():Ro!==-1?Ro:Ro=nt()}function Jn(e){return e.mode&1?ze&2&&mt!==0?mt&-mt:Jm.transition!==null?(zo===0&&(zo=Hd()),zo):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:Kd(e.type)),e):1}function un(e,t,n,r){if(50<Ci)throw Ci=0,ia=null,Error(b(185));Gi(e,n,r),(!(ze&2)||e!==dt)&&(e===dt&&(!(ze&2)&&(yl|=n),st===4&&Hn(e,mt)),Rt(e,r),n===1&&ze===0&&!(t.mode&1)&&(Yr=nt()+500,hl&&rr()))}function Rt(e,t){var n=e.callbackNode;Jp(e,t);var r=$o(e,e===dt?mt:0);if(r===0)n!==null&&Xu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xu(n),t===1)e.tag===0?Xm(Hc.bind(null,e)):mf(Hc.bind(null,e)),Qm(function(){!(ze&6)&&rr()}),n=null;else{switch(Wd(r)){case 1:n=xa;break;case 4:n=$d;break;case 16:n=Fo;break;case 536870912:n=Ud;break;default:n=Fo}n=hh(n,lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lh(e,t){if(Ro=-1,zo=0,ze&6)throw Error(b(327));var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var r=$o(e,e===dt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=il(e,r);else{t=r;var o=ze;ze|=2;var l=ah();(dt!==e||mt!==t)&&(jn=null,Yr=nt()+500,cr(e,t));do try{yv();break}catch(f){sh(e,f)}while(!0);Ra(),tl.current=l,ze=o,ot!==null?t=0:(dt=null,mt=0,t=st)}if(t!==0){if(t===2&&(o=Ts(e),o!==0&&(r=o,t=oa(e,o))),t===1)throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!mv(o)&&(t=il(e,r),t===2&&(l=Ts(e),l!==0&&(r=l,t=oa(e,l))),t===1))throw n=Wi,cr(e,0),Hn(e,r),Rt(e,nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(b(345));case 2:lr(e,Mt,jn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Ya+500-nt(),10<t)){if($o(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fs(lr.bind(null,e,Mt,jn),t);break}lr(e,Mt,jn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-an(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pv(r/1960))-r,10<r){e.timeoutHandle=Fs(lr.bind(null,e,Mt,jn),r);break}lr(e,Mt,jn);break;case 5:lr(e,Mt,jn);break;default:throw Error(b(329))}}}return Rt(e,nt()),e.callbackNode===n?lh.bind(null,e):null}function oa(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=il(e,t),e!==2&&(t=Mt,Mt=n,t!==null&&la(t)),e}function la(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function mv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!cn(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~ba,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Hc(e){if(ze&6)throw Error(b(327));$r();var t=$o(e,0);if(!(t&1))return Rt(e,nt()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=Ts(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=Wi,cr(e,0),Hn(e,t),Rt(e,nt()),n;if(n===6)throw Error(b(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Mt,jn),Rt(e,nt()),null}function Ka(e,t){var n=ze;ze|=1;try{return e(t)}finally{ze=n,ze===0&&(Yr=nt()+500,hl&&rr())}}function vr(e){Vn!==null&&Vn.tag===0&&!(ze&6)&&$r();var t=ze;ze|=1;var n=Yt.transition,r=Fe;try{if(Yt.transition=null,Fe=1,e)return e()}finally{Fe=r,Yt.transition=n,ze=t,!(ze&6)&&rr()}}function Xa(){Dt=zr.current,Qe(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gm(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Ia(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Go();break;case 3:Qr(),Qe(Tt),Qe(xt),Fa();break;case 5:Ba(r);break;case 4:Qr();break;case 13:Qe(Xe);break;case 19:Qe(Xe);break;case 10:za(r.type._context);break;case 22:case 23:Xa()}n=n.return}if(dt=e,ot=e=Zn(e.current,null),mt=Dt=t,st=0,Wi=null,ba=yl=mr=0,Mt=ji=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ar=null}return e}function sh(e,t){do{var n=ot;try{if(Ra(),Io.current=el,qo){for(var r=Je.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qo=!1}if(pr=0,ct=lt=Je=null,ki=!1,$i=0,Qa.current=null,n===null||n.return===null){st=1,Wi=t,ot=null;break}e:{var l=e,a=n.return,f=n,h=t;if(t=mt,f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var y=h,C=f,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var N=C.alternate;N?(C.updateQueue=N.updateQueue,C.memoizedState=N.memoizedState,C.lanes=N.lanes):(C.updateQueue=null,C.memoizedState=null)}var L=Mc(a);if(L!==null){L.flags&=-257,Ic(L,a,f,l,t),L.mode&1&&Ac(l,y,t),t=L,h=y;var O=t.updateQueue;if(O===null){var F=new Set;F.add(h),t.updateQueue=F}else O.add(h);break e}else{if(!(t&1)){Ac(l,y,t),Ja();break e}h=Error(b(426))}}else if(be&&f.mode&1){var he=Mc(a);if(he!==null){!(he.flags&65536)&&(he.flags|=256),Ic(he,a,f,l,t),Ta(br(h,f));break e}}l=h=br(h,f),st!==4&&(st=2),ji===null?ji=[l]:ji.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var S=Vf(l,h,t);kc(l,S);break e;case 1:f=h;var w=l.type,E=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Xn===null||!Xn.has(E)))){l.flags|=65536,t&=-t,l.lanes|=t;var _=Gf(l,f,t);kc(l,_);break e}}l=l.return}while(l!==null)}ch(n)}catch(H){t=H,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function ah(){var e=tl.current;return tl.current=el,e===null?el:e}function Ja(){(st===0||st===3||st===2)&&(st=4),dt===null||!(mr&268435455)&&!(yl&268435455)||Hn(dt,mt)}function il(e,t){var n=ze;ze|=2;var r=ah();(dt!==e||mt!==t)&&(jn=null,cr(e,t));do try{vv();break}catch(o){sh(e,o)}while(!0);if(Ra(),ze=n,tl.current=r,ot!==null)throw Error(b(261));return dt=null,mt=0,st}function vv(){for(;ot!==null;)uh(ot)}function yv(){for(;ot!==null&&!Hp();)uh(ot)}function uh(e){var t=fh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?ch(e):ot=t,Qa.current=null}function ch(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cv(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}else if(n=uv(n,t,Dt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function lr(e,t,n){var r=Fe,o=Yt.transition;try{Yt.transition=null,Fe=1,gv(e,t,n,r)}finally{Yt.transition=o,Fe=r}return null}function gv(e,t,n,r){do $r();while(Vn!==null);if(ze&6)throw Error(b(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(b(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Zp(e,l),e===dt&&(ot=dt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ko||(ko=!0,hh(Fo,function(){return $r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Yt.transition,Yt.transition=null;var a=Fe;Fe=1;var f=ze;ze|=4,Qa.current=null,fv(e,n),ih(n,e),Bm(Ds),Uo=!!Os,Ds=Os=null,e.current=n,hv(n),Wp(),ze=f,Fe=a,Yt.transition=l}else e.current=n;if(ko&&(ko=!1,Vn=e,rl=o),l=e.pendingLanes,l===0&&(Xn=null),Qp(n.stateNode),Rt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nl)throw nl=!1,e=ra,ra=null,e;return rl&1&&e.tag!==0&&$r(),l=e.pendingLanes,l&1?e===ia?Ci++:(Ci=0,ia=e):Ci=0,rr(),null}function $r(){if(Vn!==null){var e=Wd(rl),t=Yt.transition,n=Fe;try{if(Yt.transition=null,Fe=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,rl=0,ze&6)throw Error(b(331));var o=ze;for(ze|=4,ae=e.current;ae!==null;){var l=ae,a=l.child;if(ae.flags&16){var f=l.deletions;if(f!==null){for(var h=0;h<f.length;h++){var y=f[h];for(ae=y;ae!==null;){var C=ae;switch(C.tag){case 0:case 11:case 15:Ei(8,C,l)}var A=C.child;if(A!==null)A.return=C,ae=A;else for(;ae!==null;){C=ae;var N=C.sibling,L=C.return;if(th(C),C===y){ae=null;break}if(N!==null){N.return=L,ae=N;break}ae=L}}}var O=l.alternate;if(O!==null){var F=O.child;if(F!==null){O.child=null;do{var he=F.sibling;F.sibling=null,F=he}while(F!==null)}}ae=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ae=a;else e:for(;ae!==null;){if(l=ae,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ei(9,l,l.return)}var S=l.sibling;if(S!==null){S.return=l.return,ae=S;break e}ae=l.return}}var w=e.current;for(ae=w;ae!==null;){a=ae;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,ae=E;else e:for(a=w;ae!==null;){if(f=ae,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:vl(9,f)}}catch(H){tt(f,f.return,H)}if(f===a){ae=null;break e}var _=f.sibling;if(_!==null){_.return=f.return,ae=_;break e}ae=f.return}}if(ze=o,rr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(al,e)}catch{}r=!0}return r}finally{Fe=n,Yt.transition=t}}return!1}function Wc(e,t,n){t=br(n,t),t=Vf(e,t,1),e=Kn(e,t,1),t=jt(),e!==null&&(Gi(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)Wc(e,e,n);else for(;t!==null;){if(t.tag===3){Wc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){e=br(n,e),e=Gf(t,e,1),t=Kn(t,e,1),e=jt(),t!==null&&(Gi(t,1,e),Rt(t,e));break}}t=t.return}}function wv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>nt()-Ya?cr(e,0):ba|=n),Rt(e,t)}function dh(e,t){t===0&&(e.mode&1?(t=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):t=1);var n=jt();e=Tn(e,t),e!==null&&(Gi(e,t,n),Rt(e,n))}function xv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dh(e,n)}function Sv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(t),dh(e,n)}var fh;fh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,av(e,t,n);It=!!(e.flags&131072)}else It=!1,be&&t.flags&1048576&&vf(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_o(e,t),e=t.pendingProps;var o=Wr(t,xt.current);Fr(t,n),o=Ua(null,t,r,e,o,n);var l=Ha();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(r)?(l=!0,Qo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Oa(t),o.updater=ml,t.stateNode=o,o._reactInternals=t,Qs(t,r,e,n),t=Ks(null,t,r,!0,l,n)):(t.tag=0,be&&l&&Ma(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_o(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Ev(r),e=rn(r,e),o){case 0:t=Ys(null,t,r,e,n);break e;case 1:t=Rc(null,t,r,e,n);break e;case 11:t=Tc(null,t,r,e,n);break e;case 14:t=_c(null,t,r,rn(r.type,e),n);break e}throw Error(b(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Ys(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Rc(e,t,r,o,n);case 3:e:{if(Kf(t),e===null)throw Error(b(387));r=t.pendingProps,l=t.memoizedState,o=l.element,kf(e,t),Jo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=br(Error(b(423)),t),t=zc(e,t,r,n,o);break e}else if(r!==o){o=br(Error(b(424)),t),t=zc(e,t,r,n,o);break e}else for(Bt=Yn(t.stateNode.containerInfo.firstChild),Ft=t,be=!0,ln=null,n=xf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===o){t=_n(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return Ef(t),e===null&&Ws(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Bs(r,o)?a=null:l!==null&&Bs(r,l)&&(t.flags|=32),Yf(e,t),Et(e,t,a,n),t.child;case 6:return e===null&&Ws(t),null;case 13:return Xf(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),Tc(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,Ue(Ko,r._currentValue),r._currentValue=a,l!==null)if(cn(l.value,a)){if(l.children===o.children&&!Tt.current){t=_n(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var f=l.dependencies;if(f!==null){a=l.child;for(var h=f.firstContext;h!==null;){if(h.context===r){if(l.tag===1){h=An(-1,n&-n),h.tag=2;var y=l.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?h.next=h:(h.next=C.next,C.next=h),y.pending=h}}l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Vs(l.return,n,t),f.lanes|=n;break}h=h.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(b(341));a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),Vs(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Fr(t,n),o=Kt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=rn(r,t.pendingProps),o=rn(r.type,o),_c(e,t,r,o,n);case 15:return Qf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rn(r,o),_o(e,t),t.tag=1,_t(r)?(e=!0,Qo(t)):e=!1,Fr(t,n),Wf(t,r,o),Qs(t,r,o,n),Ks(null,t,r,!0,e,n);case 19:return Jf(e,t,n);case 22:return bf(e,t,n)}throw Error(b(156,t.tag))};function hh(e,t){return Fd(e,t)}function kv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new kv(e,t,n,r)}function Za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ev(e){if(typeof e=="function")return Za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ya)return 11;if(e===ga)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Za(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case jr:return dr(n.children,o,l,t);case va:a=8,o|=8;break;case vs:return e=bt(12,n,t,o|2),e.elementType=vs,e.lanes=l,e;case ys:return e=bt(13,n,t,o),e.elementType=ys,e.lanes=l,e;case gs:return e=bt(19,n,t,o),e.elementType=gs,e.lanes=l,e;case kd:return gl(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xd:a=10;break e;case Sd:a=9;break e;case ya:a=11;break e;case ga:a=14;break e;case Fn:a=16,r=null;break e}throw Error(b(130,e==null?e:typeof e,""))}return t=bt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function gl(e,t,n,r){return e=bt(22,e,r,t),e.elementType=kd,e.lanes=n,e.stateNode={isHidden:!1},e}function us(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function cs(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qa(e,t,n,r,o,l,a,f,h){return e=new jv(e,t,n,f,h),t===1?(t=1,l===!0&&(t|=8)):t=0,l=bt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(l),e}function Cv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ph(e){if(!e)return er;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(b(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(b(171))}if(e.tag===1){var n=e.type;if(_t(n))return pf(e,n,t)}return t}function mh(e,t,n,r,o,l,a,f,h){return e=qa(n,r,!0,e,o,l,a,f,h),e.context=ph(null),n=e.current,r=jt(),o=Jn(n),l=An(r,o),l.callback=t??null,Kn(n,l,o),e.current.lanes=o,Gi(e,o,r),Rt(e,r),e}function wl(e,t,n,r){var o=t.current,l=jt(),a=Jn(o);return n=ph(n),t.context===null?t.context=n:t.pendingContext=n,t=An(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(o,t,a),e!==null&&(un(e,o,a,l),Mo(e,o,a)),a}function ol(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eu(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}function Nv(){return null}var vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}xl.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));wl(e,t,null,null)};xl.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){wl(null,e,null,null)}),t[In]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Yd(e)}};function nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gc(){}function Pv(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var y=ol(a);l.call(y)}}var a=mh(t,r,e,0,null,!1,!1,"",Gc);return e._reactRootContainer=a,e[In]=a.current,Li(e.nodeType===8?e.parentNode:e),vr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var f=r;r=function(){var y=ol(h);f.call(y)}}var h=qa(e,0,!1,null,null,!1,!1,"",Gc);return e._reactRootContainer=h,e[In]=h.current,Li(e.nodeType===8?e.parentNode:e),vr(function(){wl(t,h,n,r)}),h}function kl(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var f=o;o=function(){var h=ol(a);f.call(h)}}wl(t,a,e,o)}else a=Pv(n,t,e,o,r);return ol(a)}Vd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(Sa(t,n|1),Rt(t,nt()),!(ze&6)&&(Yr=nt()+500,rr()))}break;case 13:vr(function(){var r=Tn(e,1);if(r!==null){var o=jt();un(r,e,1,o)}}),eu(e,1)}};ka=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}eu(e,134217728)}};Gd=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=jt();un(n,e,t,r)}eu(e,t)}};Qd=function(){return Fe};bd=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};As=function(e,t,n){switch(t){case"input":if(Ss(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=fl(r);if(!o)throw Error(b(90));jd(r),Ss(r,o)}}}break;case"textarea":Nd(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Rd=Ka;zd=vr;var Av={usingClientEntryPoint:!1,Events:[bi,Ar,fl,Td,_d,Ka]},di={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mv={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dd(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Nv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{al=Eo.inject(Mv),kn=Eo}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Av;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(t))throw Error(b(200));return Cv(e,t,null,n)};Ut.createRoot=function(e,t){if(!nu(e))throw Error(b(299));var n=!1,r="",o=vh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qa(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,Li(e.nodeType===8?e.parentNode:e),new tu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=Dd(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return vr(e)};Ut.hydrate=function(e,t,n){if(!Sl(t))throw Error(b(200));return kl(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=vh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=mh(t,null,e,1,n??null,o,!1,l,a),e[In]=t.current,Li(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new xl(t)};Ut.render=function(e,t,n){if(!Sl(t))throw Error(b(200));return kl(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(b(40));return e._reactRootContainer?(vr(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Ut.unstable_batchedUpdates=Ka;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sl(n))throw Error(b(200));if(e==null||e._reactInternals===void 0)throw Error(b(38));return kl(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function yh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yh)}catch(e){console.error(e)}}yh(),vd.exports=Ut;var Iv=vd.exports,Qc=Iv;ps.createRoot=Qc.createRoot,ps.hydrateRoot=Qc.hydrateRoot;const Ur={},gh="development",bc={development:{baseUrl:"http://localhost:4000/api",healthUrl:"http://localhost:4000/health"},production:{baseUrl:"https://cfg-server.onrender.com/api",healthUrl:"https://cfg-server.onrender.com/health"}},wh=bc[gh]||bc.development,El=()=>{if(!(Ur!=null&&Ur.VITE_API_BASE_URL))return wh.baseUrl},Tv=()=>{if(!(Ur!=null&&Ur.VITE_HEALTH_URL))return wh.healthUrl},_v=async()=>{try{const e=await fetch(Tv(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Health check failed: ${e.status}`);const t=await e.json();return{status:t.status||"unknown",version:t.version||"unknown",commit:t.commit||"unknown",healthy:t.status==="ok"}}catch(e){return console.error("[API Config] Health check error:",e),{status:"error",version:"unknown",commit:"unknown",healthy:!1,error:e.message}}},Rv=()=>gh;function zv({onStart:e}){const[t,n]=P.useState("1"),[r,o]=P.useState("individual"),[l,a]=P.useState("15"),[f,h]=P.useState({status:"checking",version:"...",commit:"...",healthy:!1});P.useEffect(()=>{const N=async()=>{const O=await _v();h(O),console.log("[StartDialog] Server health:",O)};N();const L=setInterval(N,3e4);return()=>clearInterval(L)},[]);const y=()=>{if(!t||!l){alert("Please fill in all fields");return}const N={id:t,sessionGameId:t,condition:r,timeSeconds:parseInt(l)*60,date:new Date().toISOString().replace("T"," ").substring(0,19)};e(N)},C=()=>{window.close()},A=()=>f.status==="checking"?"checking":f.healthy?"healthy":"unhealthy";return d.jsx("div",{className:"dialog-overlay",children:d.jsxs("div",{className:"dialog-box",children:[d.jsxs("div",{className:"dialog-header",children:[d.jsx("h2",{children:"The Creative Game"}),d.jsxs("div",{className:`server-health-indicator ${A()}`,title:`Server: ${f.status}
Version: ${f.version}
Commit: ${f.commit}
Environment: ${Rv()}`,children:[d.jsx("span",{className:"health-light"}),d.jsx("span",{className:"health-text",children:"Server"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"ID:"}),d.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value)})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Condition:"}),d.jsxs("select",{value:r,onChange:N=>o(N.target.value),children:[d.jsx("option",{value:"individual",children:"individual"}),d.jsx("option",{value:"group",children:"group"})]})]}),d.jsxs("div",{className:"dialog-field",children:[d.jsx("label",{children:"Time (in minutes):"}),d.jsx("input",{type:"number",value:l,onChange:N=>a(N.target.value),min:"1"})]}),d.jsxs("div",{className:"dialog-buttons",children:[d.jsx("button",{className:"dialog-button",onClick:()=>{window.location.hash="/calibrate"},children:"Calibrate Colors"}),d.jsx("button",{className:"dialog-button ok",onClick:y,children:"OK"}),d.jsx("button",{className:"dialog-button cancel",onClick:C,children:"Cancel"})]})]})})}class Yc{constructor(t){this.subjectId=(t==null?void 0:t.id)||"",this.sessionId=(t==null?void 0:t.sessionGameId)||this.subjectId,this.logs=[],this.header=["date","id","sessionGameId","condition","phase","type","time","unit","end_position","all_positions","gallery_shape_number","gallery","gallery_normalized"]}write(t){this.logs.push(t)}clear(){this.logs=[]}}const Lv=.035;class Ov{constructor(){this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.isTracking=!1,this.trackingWindow=1e3,this.lastKnownPlayer=null,this.sessionInfo=null,this.apiBaseUrl=El(),this.sessionInitialized=!1,this.setupBraceletListener()}setupBraceletListener(){this.braceletInterval=setInterval(()=>{this.recordBraceletStatus()},100)}recordBraceletStatus(){if(!this.isTracking)return;const t=Date.now(),n=(t-this.startTime)/1e3,r=this.getCurrentBraceletStatus();if((r==="Player A"||r==="Player B")&&(this.lastKnownPlayer=r,this.braceletHistory.length>0)){const l=this.braceletHistory[this.braceletHistory.length-1];if(t-l.timestamp<200&&(l.status==="None"||l.status==="Unknown")){l.status=r,l.timestamp=t;return}}this.braceletHistory.push({timestamp:t,elapsed:n,status:r});const o=t-1e4;this.braceletHistory=this.braceletHistory.filter(l=>l.timestamp>=o)}getCurrentBraceletStatus(){return window.currentBraceletStatus?window.currentBraceletStatus:"None"}async setSessionInfo(t={}){var o;const{colorA:n,colorB:r}=this.getCalibrationColors();this.sessionInfo={...t,colorA:n,colorB:r,startedAt:((o=this.sessionInfo)==null?void 0:o.startedAt)||new Date(this.startTime).toISOString()},console.log("[GameTracker] Session info set with colors:",{colorA:n,colorB:r}),await this.initializeSession()}hsvToHex(t){if(!t||typeof t.h>"u")return null;const n=(t.h||0)*2,r=(t.s||0)/255,o=(t.v||0)/255,l=o*r,a=l*(1-Math.abs(n/60%2-1)),f=o-l;let h=0,y=0,C=0;n>=0&&n<60?(h=l,y=a,C=0):n<120?(h=a,y=l,C=0):n<180?(h=0,y=l,C=a):n<240?(h=0,y=a,C=l):n<300?(h=a,y=0,C=l):(h=l,y=0,C=a);const A=N=>{const L=Math.round((N+f)*255).toString(16);return L.length===1?"0"+L:L};return`#${A(h)}${A(y)}${A(C)}`.toUpperCase()}getCalibrationColors(){try{const t=JSON.parse(localStorage.getItem("calibrationA")||"null"),n=JSON.parse(localStorage.getItem("calibrationB")||"null");return{colorA:this.hsvToHex(t),colorB:this.hsvToHex(n)}}catch(t){return console.warn("[GameTracker] Error reading calibration colors:",t),{colorA:null,colorB:null}}}async initializeSession(){var o;if(this.sessionInitialized||!((o=this.sessionInfo)!=null&&o.sessionGameId))return;const{colorA:t,colorB:n}=this.getCalibrationColors(),r={sessionGameId:this.sessionInfo.sessionGameId,subjectId:this.sessionInfo.id,condition:this.sessionInfo.condition,date:this.sessionInfo.date,timeSeconds:this.sessionInfo.timeSeconds,colorA:t,colorB:n,metadata:{config:this.sessionInfo}};console.log("[GameTracker] Initializing session with colors:",{colorA:t,colorB:n});try{const l=await fetch(`${this.apiBaseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){const f=(await l.json().catch(()=>({}))).message||`Failed to initialize session (${l.status})`;throw l.status===409?(alert(` Session ID Conflict

${f}

Please choose a different Session ID.`),this.stop(),new Error(f)):new Error(f)}this.sessionInitialized=!0,console.log("[GameTracker] Session initialized on server:",this.sessionInfo.sessionGameId)}catch(l){throw console.error("[GameTracker] Failed to initialize session:",l),l}}start(){this.isTracking=!0,this.startTime=Date.now(),this.moves=[],this.braceletHistory=[],this.sessionInfo&&(this.sessionInfo.startedAt=new Date(this.startTime).toISOString())}stop(){this.isTracking=!1,this.braceletInterval&&clearInterval(this.braceletInterval)}relativeToGrid(t){if(!t)return null;const n=r=>{const o=r/Lv,l=Math.round(o);return Math.max(-20,Math.min(20,l))};return[n(t[0]),n(t[1])]}async recordMove(t,n=0,r=null){if(!this.isTracking)return;const o=Date.now(),l=(o-this.startTime)/1e3,a=t.player||this.determinePlayer(o),f=t.grid_end_position??(t.end_position?this.relativeToGrid(t.end_position):null),h=t.grid_all_positions??(t.all_positions?t.all_positions.map(N=>this.relativeToGrid(N)):null),y={timestamp:o,elapsed:l,player:a,holdTime:n,blockId:t.unit,position:f,allPositions:h,phase:t.phase,type:t.type,subjectId:t.id,sessionGameId:t.sessionGameId,condition:t.condition,date:t.date,end_position:t.end_position,all_positions:t.all_positions,grid_end_position:f,grid_all_positions:h};(r||t.camera_frame)&&(y.camera_frame=r||t.camera_frame),t.gallery_shape_number!==void 0&&(y.gallery_shape_number=t.gallery_shape_number,y.gallery=t.gallery,y.gallery_normalized=t.gallery_normalized,y.grid_gallery=t.grid_gallery??(t.gallery?t.gallery.map(N=>this.relativeToGrid(N)):null),y.grid_gallery_normalized=t.grid_gallery_normalized??(t.gallery_normalized?t.gallery_normalized.map(N=>this.relativeToGrid(N)):null)),this.moves.push(y),this.persistMove(y).catch(N=>{console.error("[GameTracker] Failed to persist move to server:",N)});const C=this.getCurrentBraceletStatus(),A=this.lastKnownPlayer;console.log("[GameTracker] Move recorded:",{player:a,blockId:t.unit,position:f,holdTime:n.toFixed(2)+"s",elapsed:l.toFixed(2)+"s",phase:t.phase,debug:{currentStatus:C,lastKnownPlayer:A,historyLength:this.braceletHistory.length,recentHistory:this.braceletHistory.slice(-5).map(N=>({status:N.status,elapsed:N.elapsed.toFixed(2)}))}})}async persistMove(t){var r;if(!this.sessionInitialized||!((r=this.sessionInfo)!=null&&r.sessionGameId)){console.warn("[GameTracker] Cannot persist move - session not initialized");return}const n=`${this.apiBaseUrl}/sessions/${encodeURIComponent(this.sessionInfo.sessionGameId)}/moves`;console.log(`[GameTracker] Persisting move to: ${n}`);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){const a=await o.text();throw console.error(`[GameTracker] Server error (${o.status}):`,a),new Error(`Failed to persist move (${o.status}): ${a}`)}const l=await o.json();return console.log("[GameTracker]  Move persisted successfully:",l),l}catch(o){throw console.error("[GameTracker]  persistMove error:",o),o}}determinePlayer(t){const n=this.getCurrentBraceletStatus();if(n==="Player A"||n==="Player B")return n;let r=this.findStatusAtTime(t);if(r&&(r.status==="Player A"||r.status==="Player B"))return r.status;const o=t-this.trackingWindow,l=t+this.trackingWindow,a=this.braceletHistory.filter(f=>f.timestamp>=o&&f.timestamp<=l);if(a.length>0){const f={};a.forEach(y=>{(y.status==="Player A"||y.status==="Player B")&&(f[y.status]=(f[y.status]||0)+1)});const h=Object.keys(f).reduce((y,C)=>f[y]>f[C]?y:C,null);if(h)return h}return this.lastKnownPlayer?this.lastKnownPlayer:n!=="None"?n:"Unknown"}findStatusAtTime(t){if(this.braceletHistory.length===0)return null;let n=null,r=1/0;for(const o of this.braceletHistory){const l=Math.abs(o.timestamp-t);l<r&&l<=1e3&&(r=l,n=o)}return n}exportToJSON(){const t={startTime:new Date(this.startTime).toISOString(),endTime:new Date().toISOString(),duration:(Date.now()-this.startTime)/1e3,sessionInfo:this.sessionInfo,moves:this.moves,braceletHistory:this.braceletHistory,summary:{totalMoves:this.moves.length,movesByPlayer:this.getMovesByPlayer(),movesByPhase:this.getMovesByPhase()}};return JSON.stringify(t,null,2)}getMovesByPlayer(){const t={};return this.moves.forEach(n=>{t[n.player]=(t[n.player]||0)+1}),t}getMovesByPhase(){const t={};return this.moves.forEach(n=>{const r=n.phase||"unknown";t[r]=(t[r]||0)+1}),t}static loadFromJSON(t){try{return JSON.parse(t)}catch(n){return console.error("Failed to parse game JSON:",n),null}}}let ds=null;const Kc=()=>(ds||(ds=new Ov),ds),sn=.07,Ni=()=>[[-.315,0],[-.245,0],[-.175,0],[-.105,0],[-.035,0],[.035,0],[.105,0],[.175,0],[.245,0],[.315,0]].map((t,n)=>({id:n,position:[...t],neighbors:[],canMove:!1})),Ke=e=>Math.round(e*1e3)/1e3,Dv=(e,t)=>{let n=[];e.forEach(l=>{if(l.id!==t){const a=[[Ke(l.position[0]-sn),Ke(l.position[1])],[Ke(l.position[0]+sn),Ke(l.position[1])],[Ke(l.position[0]),Ke(l.position[1]-sn)],[Ke(l.position[0]),Ke(l.position[1]+sn)]];n.push(...a)}});const r=new Set(n.map(l=>`${l[0]},${l[1]}`));n=Array.from(r).map(l=>l.split(",").map(Number));const o=e.map(l=>`${l.position[0]},${l.position[1]}`);return n=n.filter(l=>!o.includes(`${l[0]},${l[1]}`)),n=n.filter(l=>l[0]<.735&&l[0]>-.735&&l[1]<.42&&l[1]>-.49),n},Bv=(e,t)=>{if(e.length===0)return t;let n=1/0,r=e[0];return e.forEach(o=>{const l=Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2));l<n&&(n=l,r=o)}),r},sa=e=>e.map(t=>{const n=[],r=[[Ke(t.position[0]-sn),Ke(t.position[1])],[Ke(t.position[0]+sn),Ke(t.position[1])],[Ke(t.position[0]),Ke(t.position[1]-sn)],[Ke(t.position[0]),Ke(t.position[1]+sn)]];return e.forEach(o=>{r.forEach(l=>{Ke(o.position[0])===l[0]&&Ke(o.position[1])===l[1]&&n.push(o.position)})}),{...t,neighbors:n}}),Fv=e=>{const t=new Set;if(e.forEach((a,f)=>{a.forEach((h,y)=>{h&&t.add(`${f},${y}`)})}),t.size===0)return!0;const n=[[0,1],[1,0],[-1,0],[0,-1]],r=Array.from(t)[0].split(",").map(Number),o=new Set,l=[r];for(;l.length>0;){const[a,f]=l.shift(),h=`${a},${f}`;o.has(h)||(o.add(h),n.forEach(([y,C])=>{const A=`${a+y},${f+C}`;t.has(A)&&!o.has(A)&&l.push([a+y,f+C])}))}return o.size===t.size},$v=(e,t)=>{const n=[];for(let l=-.945;l<=1.015;l+=sn)n.push(Ke(l));const r=[];for(let l=-.7;l<0;l+=sn)r.push(Ke(l));for(let l=0;l<=.77;l+=sn)r.push(Ke(l));const o=Array(r.length).fill(null).map(()=>Array(n.length).fill(!1));return e.forEach((l,a)=>{if(a!==t){const f=n.findIndex(y=>Math.abs(y-l[0])<.001),h=r.findIndex(y=>Math.abs(y-l[1])<.001);f!==-1&&h!==-1&&(o[h][f]=!0)}}),Fv(o)},aa=(e,t)=>{const n=e.map(r=>r.position);return e.map((r,o)=>{const l=$v(n,o);return{...r,canMove:l,color:t&&l?"blue":"green"}})},Xc=e=>{if(e.length===0)return null;try{const t=e.map(C=>C[0]),n=e.map(C=>C[1]),r=(Math.max(...t)+Math.min(...t))/2,o=(Math.max(...n)+Math.min(...n))/2;let l=1/0,a=e[0];e.forEach(C=>{const A=Math.sqrt(Math.pow(C[0]-r,2)+Math.pow(C[1]-o,2));A<l&&(l=A,a=C)});const f=-a[0],h=-a[1],y=e.map(C=>[Ke(C[0]+f),Ke(C[1]+h)]);return y.sort((C,A)=>C[0]-A[0]||C[1]-A[1]),y}catch{return null}},Uv=60,Jc=.07,fs=120;function Hv({config:e,interfaceHidden:t=!1}){const[n,r]=P.useState(Ni()),[o,l]=P.useState(null),[a,f]=P.useState({x:0,y:0}),[h,y]=P.useState(!0),[C,A]=P.useState(e.timeSeconds),[N,L]=P.useState(0),[O,F]=P.useState(null),[he,S]=P.useState(!0),[w,E]=P.useState(""),[_,H]=P.useState(!1),[K,X]=P.useState({blockSize:Uv,bottomPadding:fs}),W=P.useRef(null),pe=P.useRef(new Yc(e)),G=P.useRef(Kc()),fe=P.useRef(null),Z=P.useRef(Date.now()),me=P.useRef(fs),ce=`Welcome to the creative game!

Your task is to move around blocks to create interesting and beautiful figures.

Everytime you have created a figure you like, tap on the gallery in the upper right corner in order to save your figure to the gallery.

The experiment proceeds through ${e.timeSeconds/60} minutes.

Tell the experimenter when you are ready for the practice round.`,Ce=`This was the end of the practice round.

Let the experimenter know when you are ready to begin the actual experiment.`,Ne="The experiment is done. Thank you very much for your participation!",Te=P.useCallback(()=>{const D=W.current;if(!D)return;const J=D.offsetWidth,Q=D.offsetHeight;if(!J||!Q)return;const le=me.current||fs;let z=Math.max(1,Math.min(J,Q-le)),m=Math.max(38,Math.min(z*Jc*.95,z/4)),M=Math.max(m*2.5,110);z=Math.max(1,Math.min(J,Q-M)),m=Math.max(38,Math.min(z*Jc*.95,z/4)),M=Math.max(m*2.5,110),me.current=M,X(k=>{const x=Math.abs(k.blockSize-m),I=Math.abs(k.bottomPadding-M);return x<.5&&I<.5?k:{blockSize:m,bottomPadding:M}})},[]);P.useEffect(()=>(E(ce),(async()=>{try{G.current.start(),await G.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker started")}catch(J){console.error("[GameCanvas] Failed to initialize tracker:",J),setTimeout(()=>{alert("Failed to start session. Please try again with a different Session ID."),window.location.reload()},100)}})(),window.endGameExperience=()=>{S(!0),E(Ne),H(!0),G.current.stop(),console.log("[GameCanvas] Game ended via endGameExperience(). All data saved to server.")},()=>{window.endGameExperience&&delete window.endGameExperience,G.current.stop()}),[]),P.useEffect(()=>{Te()},[Te,t]),P.useEffect(()=>{const D=()=>{Te()};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[Te]),P.useEffect(()=>{if(!h&&C>0){const D=setInterval(()=>{A(J=>J<=1?(clearInterval(D),S(!0),E(Ne),H(!0),console.log("[GameCanvas] Game ended by timer. All data saved to server."),0):J-1)},1e3);return()=>clearInterval(D)}},[h,C]),P.useEffect(()=>{r(D=>aa(sa(D),h))},[h]);const Y=()=>(Date.now()-Z.current)/1e3,ie=(D,J)=>{const Q=W.current;if(!Q)return 0;const le=Q.offsetHeight-me.current,z=Math.min(Q.offsetWidth,le),m=J==="x"?(Q.offsetWidth-z)/2:(Q.offsetHeight-me.current-z)/2;return(D-m)/z-.5},te=(D,J)=>{const Q=W.current;if(!Q)return 0;const le=Q.offsetHeight-me.current,z=Math.min(Q.offsetWidth,le),m=J==="x"?(Q.offsetWidth-z)/2:(Q.offsetHeight-me.current-z)/2;return(D+.5)*z+m},Se=D=>{var z,m,M,k;const J=W.current.getBoundingClientRect(),Q=D.clientX!==void 0?D.clientX:(m=(z=D.touches)==null?void 0:z[0])==null?void 0:m.clientX,le=D.clientY!==void 0?D.clientY:(k=(M=D.touches)==null?void 0:M[0])==null?void 0:k.clientY;return{x:Q-J.left,y:le-J.top}},B=(D,J)=>{const Q=n.find(M=>M.id===J);if(!Q||!Q.canMove)return;D.preventDefault();const le=Se(D),z=te(Q.position[0],"x"),m=te(Q.position[1],"y");fe.current=Date.now(),l(J),f({x:le.x-z,y:le.y-m})},de=D=>{if(o===null)return;D.preventDefault();const J=Se(D),Q=ie(J.x-a.x,"x"),le=ie(J.y-a.y,"y");r(z=>z.map(m=>m.id===o?{...m,position:[Q,le]}:m))},ye=()=>{try{const D=window.braceletDetectorCanvas,J=window.braceletDetectorVideo;let Q=null;if(D&&D.width>0&&D.height>0?Q=D:J&&J.videoWidth>0&&J.videoHeight>0&&(Q=J),!Q)return console.warn("[GameCanvas] No camera source available for frame capture"),null;const le=document.createElement("canvas"),z=640,m=480;let M=Q.videoWidth||Q.width,k=Q.videoHeight||Q.height;const x=M/k;return M>z&&(M=z,k=M/x),k>m&&(k=m,M=k*x),le.width=Math.floor(M),le.height=Math.floor(k),le.getContext("2d").drawImage(Q,0,0,le.width,le.height),le.toDataURL("image/jpeg",.6)}catch(D){return console.error("[GameCanvas] Error capturing camera frame:",D),null}},ge=()=>{if(o===null)return;const D=n.find(x=>x.id===o),J=Dv(n,o),Q=Bv(J,D.position),le=fe.current?(Date.now()-fe.current)/1e3:0,z=n.map(x=>x.id===o?{...x,position:Q}:x),m=ye(),M=window.currentBraceletStatus||"Unknown",k={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"moveblock",time:Y(),unit:o,end_position:Q,all_positions:z.map(x=>x.position),gallery_shape_number:null,gallery:null,gallery_normalized:null,camera_frame:m,player:M};pe.current.write(k),G.current.recordMove(k,le,m),r(x=>{const I=x.map(R=>R.id===o?{...R,position:Q}:R);return aa(sa(I),h)}),l(null),fe.current=null},je=()=>{const D=n.map(k=>k.position),J=Xc(D),Q=N+1,le=ye(),z=window.currentBraceletStatus||"Unknown",m={date:e.date,id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,phase:h?"practice":"experiment",type:"added shape to gallery",time:Y(),unit:null,end_position:null,all_positions:null,gallery_shape_number:Q,gallery:D,gallery_normalized:J,camera_frame:le,player:z};pe.current.write(m),G.current.recordMove(m,0,le);const M=U();F(M),L(Q)},U=()=>{const D=document.createElement("canvas");D.width=400,D.height=400;const J=D.getContext("2d");J.fillStyle="#000",J.fillRect(0,0,400,400);const Q=n.map(z=>z.position),le=Xc(Q);return le&&le.forEach(z=>{const m=(z[0]+.5)*400,M=(z[1]+.5)*400;J.fillStyle="green",J.fillRect(m-15,M-15,30,30)}),D.toDataURL()},ee=P.useCallback(D=>{D.key==="p"&&h?(y(!1),S(!0),E(Ce),Z.current=Date.now(),r(Ni()),F(null),L(0),pe.current=new Yc(e),G.current.stop(),G.current=Kc(),G.current.start(),G.current.setSessionInfo({id:e.id,sessionGameId:e.sessionGameId,condition:e.condition,timeSeconds:e.timeSeconds,date:e.date}),console.log("[GameCanvas] Game tracker restarted for real game")):D.key==="q"&&!h&&(S(!0),E(Ne),H(!0),console.log("[GameCanvas] Game ended manually (q key). All data saved to server."))},[h,e.id]);P.useEffect(()=>(window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)),[ee]);const ue=()=>{if(_&&w===Ne){console.log("[GameCanvas] Game ended - redirecting to start dialog"),window.toggleInterface&&window.toggleInterface(!1),window.location.hash="#/",window.location.reload();return}if(!h&&w===Ce)try{const D=new(window.AudioContext||window.webkitAudioContext),J=D.createOscillator(),Q=D.createGain();J.connect(Q),Q.connect(D.destination),J.frequency.setValueAtTime(800,D.currentTime),J.frequency.setValueAtTime(600,D.currentTime+.15),Q.gain.setValueAtTime(.3,D.currentTime),Q.gain.exponentialRampToValueAtTime(.01,D.currentTime+.3),J.start(D.currentTime),J.stop(D.currentTime+.3),console.log("[GameCanvas] Playing start sound - Real experiment begins!")}catch(D){console.error("[GameCanvas] Error playing sound:",D)}S(!1)},oe=D=>{D.preventDefault()};return d.jsxs("div",{className:"game-canvas",ref:W,style:{"--block-size":`${K.blockSize}px`,"--bottom-padding":`${K.bottomPadding}px`},onMouseMove:de,onMouseUp:ge,onMouseLeave:ge,onTouchMove:de,onTouchEnd:ge,onTouchCancel:ge,onContextMenu:oe,children:[d.jsx("div",{className:"gallery",onClick:je,children:d.jsx("div",{className:"gallery-frame",children:O?d.jsx("img",{src:O,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),!h&&!t&&d.jsxs("div",{className:"timer",children:["Time: ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),n.map(D=>d.jsx("div",{className:`block ${D.canMove?"movable":""}`,style:{left:`${te(D.position[0],"x")}px`,top:`${te(D.position[1],"y")}px`,backgroundColor:D.color||"green",cursor:D.canMove?"grab":"default"},onMouseDown:J=>B(J,D.id),onTouchStart:J=>B(J,D.id)},D.id)),he&&d.jsx("div",{className:"message-overlay",onClick:ue,children:d.jsxs("div",{className:"message-box",children:[w,d.jsx("div",{className:"message-hint",children:"(Click to continue)"})]})})]})}var ll={};(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,u){return i==Array.prototype||i==Object.prototype||(i[s]=u.value),i};function r(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var s=0;s<i.length;++s){var u=i[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var o=r(this);function l(i,s){if(s)e:{var u=o;i=i.split(".");for(var c=0;c<i.length-1;c++){var p=i[c];if(!(p in u))break e;u=u[p]}i=i[i.length-1],c=u[i],s=s(c),s!=c&&s!=null&&n(u,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new u(c+(g||"")+"_"+p++,g)}function u(g,v){this.h=g,n(this,"description",{configurable:!0,writable:!0,value:v})}if(i)return i;u.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",p=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var c=o[s[u]];typeof c=="function"&&typeof c.prototype[i]!="function"&&n(c.prototype,i,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return i});function a(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function f(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}function h(i){if(!(i instanceof Array)){i=f(i);for(var s,u=[];!(s=i.next()).done;)u.push(s.value);i=u}return i}var y=typeof Object.assign=="function"?Object.assign:function(i,s){for(var u=1;u<arguments.length;u++){var c=arguments[u];if(c)for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(i[p]=c[p])}return i};l("Object.assign",function(i){return i||y});var C=typeof Object.create=="function"?Object.create:function(i){function s(){}return s.prototype=i,new s},A;if(typeof Object.setPrototypeOf=="function")A=Object.setPrototypeOf;else{var N;e:{var L={a:!0},O={};try{O.__proto__=L,N=O.a;break e}catch{}N=!1}A=N?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var F=A;function he(i,s){if(i.prototype=C(s.prototype),i.prototype.constructor=i,F)F(i,s);else for(var u in s)if(u!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(s,u);c&&Object.defineProperty(i,u,c)}else i[u]=s[u];i.ya=s.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}S.prototype.u=function(i){this.i=i};function E(i,s){i.l={ma:s,na:!0},i.h=i.s||i.v}S.prototype.return=function(i){this.l={return:i},this.h=this.v};function _(i,s,u){return i.h=u,{value:s}}function H(i){this.h=new S,this.i=i}function K(i,s){w(i.h);var u=i.h.j;return u?X(i,"return"in u?u.return:function(c){return{value:c,done:!0}},s,i.h.return):(i.h.return(s),W(i))}function X(i,s,u,c){try{var p=s.call(i.h.j,u);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return i.h.m=!1,p;var g=p.value}catch(v){return i.h.j=null,E(i.h,v),W(i)}return i.h.j=null,c.call(i.h,g),W(i)}function W(i){for(;i.h.h;)try{var s=i.i(i.h);if(s)return i.h.m=!1,{value:s.value,done:!1}}catch(u){i.h.i=void 0,E(i.h,u)}if(i.h.m=!1,i.h.l){if(s=i.h.l,i.h.l=null,s.na)throw s.ma;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function pe(i){this.next=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.next,s,i.h.u):(i.h.u(s),s=W(i)),s},this.throw=function(s){return w(i.h),i.h.j?s=X(i,i.h.j.throw,s,i.h.u):(E(i.h,s),s=W(i)),s},this.return=function(s){return K(i,s)},this[Symbol.iterator]=function(){return this}}function G(i){function s(c){return i.next(c)}function u(c){return i.throw(c)}return new Promise(function(c,p){function g(v){v.done?c(v.value):Promise.resolve(v.value).then(s,u).then(g,p)}g(i.next())})}function fe(i){return G(new pe(new H(i)))}l("Promise",function(i){function s(v){this.i=0,this.j=void 0,this.h=[],this.u=!1;var j=this.l();try{v(j.resolve,j.reject)}catch(T){j.reject(T)}}function u(){this.h=null}function c(v){return v instanceof s?v:new s(function(j){j(v)})}if(i)return i;u.prototype.i=function(v){if(this.h==null){this.h=[];var j=this;this.j(function(){j.m()})}this.h.push(v)};var p=o.setTimeout;u.prototype.j=function(v){p(v,0)},u.prototype.m=function(){for(;this.h&&this.h.length;){var v=this.h;this.h=[];for(var j=0;j<v.length;++j){var T=v[j];v[j]=null;try{T()}catch(V){this.l(V)}}}this.h=null},u.prototype.l=function(v){this.j(function(){throw v})},s.prototype.l=function(){function v(V){return function(q){T||(T=!0,V.call(j,q))}}var j=this,T=!1;return{resolve:v(this.I),reject:v(this.m)}},s.prototype.I=function(v){if(v===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof s)this.L(v);else{e:switch(typeof v){case"object":var j=v!=null;break e;case"function":j=!0;break e;default:j=!1}j?this.F(v):this.s(v)}},s.prototype.F=function(v){var j=void 0;try{j=v.then}catch(T){this.m(T);return}typeof j=="function"?this.M(j,v):this.s(v)},s.prototype.m=function(v){this.v(2,v)},s.prototype.s=function(v){this.v(1,v)},s.prototype.v=function(v,j){if(this.i!=0)throw Error("Cannot settle("+v+", "+j+"): Promise already settled in state"+this.i);this.i=v,this.j=j,this.i===2&&this.K(),this.H()},s.prototype.K=function(){var v=this;p(function(){if(v.D()){var j=o.console;typeof j<"u"&&j.error(v.j)}},1)},s.prototype.D=function(){if(this.u)return!1;var v=o.CustomEvent,j=o.Event,T=o.dispatchEvent;return typeof T>"u"?!0:(typeof v=="function"?v=new v("unhandledrejection",{cancelable:!0}):typeof j=="function"?v=new j("unhandledrejection",{cancelable:!0}):(v=o.document.createEvent("CustomEvent"),v.initCustomEvent("unhandledrejection",!1,!0,v)),v.promise=this,v.reason=this.j,T(v))},s.prototype.H=function(){if(this.h!=null){for(var v=0;v<this.h.length;++v)g.i(this.h[v]);this.h=null}};var g=new u;return s.prototype.L=function(v){var j=this.l();v.T(j.resolve,j.reject)},s.prototype.M=function(v,j){var T=this.l();try{v.call(j,T.resolve,T.reject)}catch(V){T.reject(V)}},s.prototype.then=function(v,j){function T(ve,re){return typeof ve=="function"?function(Ee){try{V(ve(Ee))}catch(Ae){q(Ae)}}:re}var V,q,ke=new s(function(ve,re){V=ve,q=re});return this.T(T(v,V),T(j,q)),ke},s.prototype.catch=function(v){return this.then(void 0,v)},s.prototype.T=function(v,j){function T(){switch(V.i){case 1:v(V.j);break;case 2:j(V.j);break;default:throw Error("Unexpected state: "+V.i)}}var V=this;this.h==null?g.i(T):this.h.push(T),this.u=!0},s.resolve=c,s.reject=function(v){return new s(function(j,T){T(v)})},s.race=function(v){return new s(function(j,T){for(var V=f(v),q=V.next();!q.done;q=V.next())c(q.value).T(j,T)})},s.all=function(v){var j=f(v),T=j.next();return T.done?c([]):new s(function(V,q){function ke(Ee){return function(Ae){ve[Ee]=Ae,re--,re==0&&V(ve)}}var ve=[],re=0;do ve.push(void 0),re++,c(T.value).T(ke(ve.length-1),q),T=j.next();while(!T.done)})},s});function Z(i,s){i instanceof String&&(i+="");var u=0,c=!1,p={next:function(){if(!c&&u<i.length){var g=u++;return{value:s(g,i[g]),done:!1}}return c=!0,{done:!0,value:void 0}}};return p[Symbol.iterator]=function(){return p},p}l("Array.prototype.keys",function(i){return i||function(){return Z(this,function(s){return s})}}),l("Array.prototype.fill",function(i){return i||function(s,u,c){var p=this.length||0;for(0>u&&(u=Math.max(0,p+u)),(c==null||c>p)&&(c=p),c=Number(c),0>c&&(c=Math.max(0,p+c)),u=Number(u||0);u<c;u++)this[u]=s;return this}});function me(i){return i||Array.prototype.fill}l("Int8Array.prototype.fill",me),l("Uint8Array.prototype.fill",me),l("Uint8ClampedArray.prototype.fill",me),l("Int16Array.prototype.fill",me),l("Uint16Array.prototype.fill",me),l("Int32Array.prototype.fill",me),l("Uint32Array.prototype.fill",me),l("Float32Array.prototype.fill",me),l("Float64Array.prototype.fill",me),l("Object.is",function(i){return i||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}}),l("Array.prototype.includes",function(i){return i||function(s,u){var c=this;c instanceof String&&(c=String(c));var p=c.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var g=c[u];if(g===s||Object.is(g,s))return!0}return!1}}),l("String.prototype.includes",function(i){return i||function(s,u){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(s,u||0)!==-1}});var ce=this||self;function Ce(i,s){i=i.split(".");var u=ce;i[0]in u||typeof u.execScript>"u"||u.execScript("var "+i[0]);for(var c;i.length&&(c=i.shift());)i.length||s===void 0?u[c]&&u[c]!==Object.prototype[c]?u=u[c]:u=u[c]={}:u[c]=s}function Ne(i){var s;e:{if((s=ce.navigator)&&(s=s.userAgent))break e;s=""}return s.indexOf(i)!=-1}var Te=Array.prototype.map?function(i,s){return Array.prototype.map.call(i,s,void 0)}:function(i,s){for(var u=i.length,c=Array(u),p=typeof i=="string"?i.split(""):i,g=0;g<u;g++)g in p&&(c[g]=s.call(void 0,p[g],g,i));return c},Y={},ie=null;function te(i){var s=i.length,u=3*s/4;u%3?u=Math.floor(u):"=.".indexOf(i[s-1])!=-1&&(u="=.".indexOf(i[s-2])!=-1?u-2:u-1);var c=new Uint8Array(u),p=0;return Se(i,function(g){c[p++]=g}),p!==u?c.subarray(0,p):c}function Se(i,s){function u(T){for(;c<i.length;){var V=i.charAt(c++),q=ie[V];if(q!=null)return q;if(!/^[\s\xa0]*$/.test(V))throw Error("Unknown base64 encoding at char: "+V)}return T}B();for(var c=0;;){var p=u(-1),g=u(0),v=u(64),j=u(64);if(j===64&&p===-1)break;s(p<<2|g>>4),v!=64&&(s(g<<4&240|v>>2),j!=64&&s(v<<6&192|j))}}function B(){if(!ie){ie={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),s=["+/=","+/","-_=","-_.","-_"],u=0;5>u;u++){var c=i.concat(s[u].split(""));Y[u]=c;for(var p=0;p<c.length;p++){var g=c[p];ie[g]===void 0&&(ie[g]=p)}}}}var de=typeof Uint8Array<"u",ye=!(Ne("Trident")||Ne("MSIE"))&&typeof ce.btoa=="function";function ge(i){if(!ye){var s;s===void 0&&(s=0),B(),s=Y[s];for(var u=Array(Math.floor(i.length/3)),c=s[64]||"",p=0,g=0;p<i.length-2;p+=3){var v=i[p],j=i[p+1],T=i[p+2],V=s[v>>2];v=s[(v&3)<<4|j>>4],j=s[(j&15)<<2|T>>6],T=s[T&63],u[g++]=V+v+j+T}switch(V=0,T=c,i.length-p){case 2:V=i[p+1],T=s[(V&15)<<2]||c;case 1:i=i[p],u[g]=s[i>>2]+s[(i&3)<<4|V>>4]+T+c}return u.join("")}for(s="";10240<i.length;)s+=String.fromCharCode.apply(null,i.subarray(0,10240)),i=i.subarray(10240);return s+=String.fromCharCode.apply(null,i),btoa(s)}var je=RegExp("[-_.]","g");function U(i){switch(i){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function ee(i){if(!ye)return te(i);je.test(i)&&(i=i.replace(je,U)),i=atob(i);for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}var ue;function oe(){return ue||(ue=new Uint8Array(0))}var D={},J=typeof Uint8Array.prototype.slice=="function",Q=0,le=0;function z(i){var s=0>i;i=Math.abs(i);var u=i>>>0;i=Math.floor((i-u)/4294967296),s&&(u=f(M(u,i)),s=u.next().value,i=u.next().value,u=s),Q=u>>>0,le=i>>>0}var m=typeof BigInt=="function";function M(i,s){return s=~s,i?i=~i+1:s+=1,[i,s]}function k(i,s){this.i=i>>>0,this.h=s>>>0}function x(i){if(!i)return I||(I=new k(0,0));if(!/^-?\d+$/.test(i))return null;if(16>i.length)z(Number(i));else if(m)i=BigInt(i),Q=Number(i&BigInt(4294967295))>>>0,le=Number(i>>BigInt(32)&BigInt(4294967295));else{var s=+(i[0]==="-");le=Q=0;for(var u=i.length,c=s,p=(u-s)%6+s;p<=u;c=p,p+=6)c=Number(i.slice(c,p)),le*=1e6,Q=1e6*Q+c,4294967296<=Q&&(le+=Q/4294967296|0,Q%=4294967296);s&&(s=f(M(Q,le)),i=s.next().value,s=s.next().value,Q=i,le=s)}return new k(Q,le)}var I;function R(i,s){return Error("Invalid wire type: "+i+" (at position "+s+")")}function $(){return Error("Failed to read varint, encoding is invalid.")}function ne(i,s){return Error("Tried to read past the end of the data "+s+" > "+i)}function se(){throw Error("Invalid UTF8")}function we(i,s){return s=String.fromCharCode.apply(null,s),i==null?s:i+s}var xe=void 0,Me,De=typeof TextDecoder<"u",Be,He=typeof TextEncoder<"u",We;function _e(i){if(i!==D)throw Error("illegal external caller")}function Pe(i,s){if(_e(s),this.V=i,i!=null&&i.length===0)throw Error("ByteString should be constructed with non-empty values")}function Re(){return We||(We=new Pe(null,D))}function Le(i){_e(D);var s=i.V;return s=s==null||de&&s!=null&&s instanceof Uint8Array?s:typeof s=="string"?ee(s):null,s==null?s:i.V=s}function rt(i){if(typeof i=="string")return{buffer:ee(i),C:!1};if(Array.isArray(i))return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Uint8Array)return{buffer:i,C:!1};if(i.constructor===ArrayBuffer)return{buffer:new Uint8Array(i),C:!1};if(i.constructor===Pe)return{buffer:Le(i)||oe(),C:!0};if(i instanceof Uint8Array)return{buffer:new Uint8Array(i.buffer,i.byteOffset,i.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Jt(i,s){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ye(this,i,s)}function Ye(i,s,u){u=u===void 0?{}:u,i.S=u.S===void 0?!1:u.S,s&&(s=rt(s),i.i=s.buffer,i.m=s.C,i.l=0,i.j=i.i.length,i.h=i.l)}Jt.prototype.reset=function(){this.h=this.l};function at(i,s){if(i.h=s,s>i.j)throw ne(i.j,s)}function it(i){var s=i.i,u=i.h,c=s[u++],p=c&127;if(c&128&&(c=s[u++],p|=(c&127)<<7,c&128&&(c=s[u++],p|=(c&127)<<14,c&128&&(c=s[u++],p|=(c&127)<<21,c&128&&(c=s[u++],p|=c<<28,c&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128&&s[u++]&128)))))throw $();return at(i,u),p}function St(i,s){if(0>s)throw Error("Tried to read a negative byte length: "+s);var u=i.h,c=u+s;if(c>i.j)throw ne(s,i.j-u);return i.h=c,u}var zt=[];function Lt(){this.h=[]}Lt.prototype.length=function(){return this.h.length},Lt.prototype.end=function(){var i=this.h;return this.h=[],i};function dn(i,s,u){for(;0<u||127<s;)i.h.push(s&127|128),s=(s>>>7|u<<25)>>>0,u>>>=7;i.h.push(s)}function Wt(i,s){for(;127<s;)i.h.push(s&127|128),s>>>=7;i.h.push(s)}function ir(i,s){if(zt.length){var u=zt.pop();Ye(u,i,s),i=u}else i=new Jt(i,s);this.h=i,this.j=this.h.h,this.i=this.l=-1,this.setOptions(s)}ir.prototype.setOptions=function(i){i=i===void 0?{}:i,this.ca=i.ca===void 0?!1:i.ca},ir.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function zn(i){var s=i.h;if(s.h==s.j)return!1;i.j=i.h.h;var u=it(i.h)>>>0;if(s=u>>>3,u&=7,!(0<=u&&5>=u))throw R(u,i.j);if(1>s)throw Error("Invalid field number: "+s+" (at position "+i.j+")");return i.l=s,i.i=u,!0}function Ln(i){switch(i.i){case 0:if(i.i!=0)Ln(i);else e:{i=i.h;for(var s=i.h,u=s+10,c=i.i;s<u;)if(!(c[s++]&128)){at(i,s);break e}throw $()}break;case 1:i=i.h,at(i,i.h+8);break;case 2:i.i!=2?Ln(i):(s=it(i.h)>>>0,i=i.h,at(i,i.h+s));break;case 5:i=i.h,at(i,i.h+4);break;case 3:s=i.l;do{if(!zn(i))throw Error("Unmatched start-group tag: stream EOF");if(i.i==4){if(i.l!=s)throw Error("Unmatched end-group tag");break}Ln(i)}while(!0);break;default:throw R(i.i,i.j)}}var On=[];function wr(){this.j=[],this.i=0,this.h=new Lt}function Zt(i,s){s.length!==0&&(i.j.push(s),i.i+=s.length)}function Ki(i,s){if(s=s.R){Zt(i,i.h.end());for(var u=0;u<s.length;u++)Zt(i,Le(s[u])||oe())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function fn(i,s){return qt?i[qt]|=s:i.A!==void 0?i.A|=s:(Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}}),s)}function Zr(i,s){qt?i[qt]&&(i[qt]&=~s):i.A!==void 0&&(i.A&=~s)}function qe(i){var s;return qt?s=i[qt]:s=i.A,s??0}function hn(i,s){qt?i[qt]=s:i.A!==void 0?i.A=s:Object.defineProperties(i,{A:{value:s,configurable:!0,writable:!0,enumerable:!1}})}function jl(i){return fn(i,1),i}function Sh(i,s){hn(s,(i|0)&-51)}function Xi(i,s){hn(s,(i|18)&-41)}var Cl={};function Ji(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&i.constructor===Object}var qr,ru=[];hn(ru,23),qr=Object.freeze(ru);function Nl(i){if(qe(i.o)&2)throw Error("Cannot mutate an immutable Message")}function Pl(i){var s=i.length;(s=s?i[s-1]:void 0)&&Ji(s)?s.g=1:(s={},i.push((s.g=1,s)))}function iu(i){var s=i.i+i.G;return i.B||(i.B=i.o[s]={})}function en(i,s){return s===-1?null:s>=i.i?i.B?i.B[s]:void 0:i.o[s+i.G]}function pn(i,s,u,c){Nl(i),ei(i,s,u,c)}function ei(i,s,u,c){i.j&&(i.j=void 0),s>=i.i||c?iu(i)[s]=u:(i.o[s+i.G]=u,(i=i.B)&&s in i&&delete i[s])}function Al(i,s,u,c){var p=en(i,s);Array.isArray(p)||(p=qr);var g=qe(p);if(g&1||jl(p),c)g&2||fn(p,2),u&1||Object.freeze(p);else{c=!(u&2);var v=g&2;u&1||!v?c&&g&16&&!v&&Zr(p,16):(p=jl(Array.prototype.slice.call(p)),ei(i,s,p))}return p}function Ml(i,s){var u=en(i,s),c=u==null?u:typeof u=="number"||u==="NaN"||u==="Infinity"||u==="-Infinity"?Number(u):void 0;return c!=null&&c!==u&&ei(i,s,c),c}function ou(i,s,u,c,p){i.h||(i.h={});var g=i.h[u],v=Al(i,u,3,p);if(!g){var j=v;g=[];var T=!!(qe(i.o)&16);v=!!(qe(j)&2);var V=j;!p&&v&&(j=Array.prototype.slice.call(j));for(var q=v,ke=0;ke<j.length;ke++){var ve=j[ke],re=s,Ee=!1;if(Ee=Ee===void 0?!1:Ee,ve=Array.isArray(ve)?new re(ve):Ee?new re:void 0,ve!==void 0){re=ve.o;var Ae=Ee=qe(re);v&&(Ae|=2),T&&(Ae|=16),Ae!=Ee&&hn(re,Ae),re=Ae,q=q||!!(2&re),g.push(ve)}}return i.h[u]=g,T=qe(j),s=T|33,s=q?s&-9:s|8,T!=s&&(q=j,Object.isFrozen(q)&&(q=Array.prototype.slice.call(q)),hn(q,s),j=q),V!==j&&ei(i,u,j),(p||c&&v)&&fn(g,2),c&&Object.freeze(g),g}return p||(p=Object.isFrozen(g),c&&!p?Object.freeze(g):!c&&p&&(g=Array.prototype.slice.call(g),i.h[u]=g)),g}function Zi(i,s,u){var c=!!(qe(i.o)&2);if(s=ou(i,s,u,c,c),i=Al(i,u,3,c),!(c||qe(i)&8)){for(c=0;c<s.length;c++){if(u=s[c],qe(u.o)&2){var p=du(u,!1);p.j=u}else p=u;u!==p&&(s[c]=p,i[c]=p.o)}fn(i,8)}return s}function mn(i,s,u){if(u!=null&&typeof u!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof u+": "+u);pn(i,s,u)}function lu(i,s,u,c,p){Nl(i);var g=ou(i,u,s,!1,!1);return u=c??new u,i=Al(i,s,2,!1),p!=null?(g.splice(p,0,u),i.splice(p,0,u.o)):(g.push(u),i.push(u.o)),u.C()&&Zr(i,8),u}function qi(i,s){return i??s}function vn(i,s,u){return u=u===void 0?0:u,qi(Ml(i,s),u)}var eo;function kh(i){switch(typeof i){case"number":return isFinite(i)?i:String(i);case"object":if(i)if(Array.isArray(i)){if(qe(i)&128)return i=Array.prototype.slice.call(i),Pl(i),i}else{if(de&&i!=null&&i instanceof Uint8Array)return ge(i);if(i instanceof Pe){var s=i.V;return s==null?"":typeof s=="string"?s:i.V=ge(s)}}}return i}function su(i,s,u,c){if(i!=null){if(Array.isArray(i))i=Il(i,s,u,c!==void 0);else if(Ji(i)){var p={},g;for(g in i)p[g]=su(i[g],s,u,c);i=p}else i=s(i,c);return i}}function Il(i,s,u,c){var p=qe(i);c=c?!!(p&16):void 0,i=Array.prototype.slice.call(i);for(var g=0;g<i.length;g++)i[g]=su(i[g],s,u,c);return u(p,i),i}function Eh(i){return i.ja===Cl?i.toJSON():kh(i)}function jh(i,s){i&128&&Pl(s)}function au(i,s,u){if(u=u===void 0?Xi:u,i!=null){if(de&&i instanceof Uint8Array)return i.length?new Pe(new Uint8Array(i),D):Re();if(Array.isArray(i)){var c=qe(i);return c&2?i:s&&!(c&32)&&(c&16||c===0)?(hn(i,c|2),i):(i=Il(i,au,c&4?Xi:u,!0),s=qe(i),s&4&&s&2&&Object.freeze(i),i)}return i.ja===Cl?cu(i):i}}function uu(i,s,u,c,p,g,v){if(i=i.h&&i.h[u]){if(c=qe(i),c&2?c=i:(g=Te(i,cu),Xi(c,g),Object.freeze(g),c=g),Nl(s),v=c==null?qr:jl([]),c!=null){for(g=!!c.length,i=0;i<c.length;i++){var j=c[i];g=g&&!(qe(j.o)&2),v[i]=j.o}g=(g?8:0)|1,i=qe(v),(i&g)!==g&&(Object.isFrozen(v)&&(v=Array.prototype.slice.call(v)),hn(v,i|g)),s.h||(s.h={}),s.h[u]=c}else s.h&&(s.h[u]=void 0);ei(s,u,v,p)}else pn(s,u,au(c,g,v),p)}function cu(i){return qe(i.o)&2||(i=du(i,!0),fn(i.o,2)),i}function du(i,s){var u=i.o,c=[];fn(c,16);var p=i.constructor.h;if(p&&c.push(p),p=i.B,p){c.length=u.length,c.fill(void 0,c.length,u.length);var g={};c[c.length-1]=g}qe(u)&128&&Pl(c),s=s||i.C()?Xi:Sh,g=i.constructor,eo=c,c=new g(c),eo=void 0,i.R&&(c.R=i.R.slice()),g=!!(qe(u)&16);for(var v=p?u.length-1:u.length,j=0;j<v;j++)uu(i,c,j-i.G,u[j],!1,g,s);if(p)for(var T in p)uu(i,c,+T,p[T],!0,g,s);return c}function Pt(i,s,u){i==null&&(i=eo),eo=void 0;var c=this.constructor.i||0,p=0<c,g=this.constructor.h,v=!1;if(i==null){i=g?[g]:[];var j=48,T=!0;p&&(c=0,j|=128),hn(i,j)}else{if(!Array.isArray(i)||g&&g!==i[0])throw Error();var V=j=fn(i,0);if((T=(16&V)!==0)&&((v=(32&V)!==0)||(V|=32)),p){if(128&V)c=0;else if(0<i.length){var q=i[i.length-1];if(Ji(q)&&"g"in q){c=0,V|=128,delete q.g;var ke=!0,ve;for(ve in q){ke=!1;break}ke&&i.pop()}}}else if(128&V)throw Error();j!==V&&hn(i,V)}this.G=(g?0:-1)-c,this.h=void 0,this.o=i;e:{if(g=this.o.length,c=g-1,g&&(g=this.o[c],Ji(g))){this.B=g,this.i=c-this.G;break e}s!==void 0&&-1<s?(this.i=Math.max(s,c+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!p&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(u){s=T&&!v&&!0,p=this.i;var re;for(T=0;T<u.length;T++)v=u[T],v<p?(v+=this.G,(c=i[v])?fu(c,s):i[v]=qr):(re||(re=iu(this)),(c=re[v])?fu(c,s):re[v]=qr)}}Pt.prototype.toJSON=function(){return Il(this.o,Eh,jh)},Pt.prototype.C=function(){return!!(qe(this.o)&2)};function fu(i,s){if(Array.isArray(i)){var u=qe(i),c=1;!s||u&2||(c|=16),(u&c)!==c&&hn(i,u|c)}}Pt.prototype.ja=Cl,Pt.prototype.toString=function(){return this.o.toString()};function hu(i,s,u){if(u){var c={},p;for(p in u){var g=u[p],v=g.qa;v||(c.J=g.wa||g.oa.W,g.ia?(c.aa=gu(g.ia),v=function(j){return function(T,V,q){return j.J(T,V,q,j.aa)}}(c)):g.ka?(c.Z=wu(g.da.P,g.ka),v=function(j){return function(T,V,q){return j.J(T,V,q,j.Z)}}(c)):v=c.J,g.qa=v),v(s,i,g.da),c={J:c.J,aa:c.aa,Z:c.Z}}}Ki(s,i)}var to=Symbol();function pu(i,s,u){return i[to]||(i[to]=function(c,p){return s(c,p,u)})}function mu(i){var s=i[to];if(!s){var u=_l(i);s=function(c,p){return xu(c,p,u)},i[to]=s}return s}function Ch(i){var s=i.ia;if(s)return mu(s);if(s=i.va)return pu(i.da.P,s,i.ka)}function Nh(i){var s=Ch(i),u=i.da,c=i.oa.U;return s?function(p,g){return c(p,g,u,s)}:function(p,g){return c(p,g,u)}}function vu(i,s){var u=i[s];return typeof u=="function"&&u.length===0&&(u=u(),i[s]=u),Array.isArray(u)&&(ni in u||ti in u||0<u.length&&typeof u[0]=="function")?u:void 0}function yu(i,s,u,c,p,g){s.P=i[0];var v=1;if(i.length>v&&typeof i[v]!="number"){var j=i[v++];u(s,j)}for(;v<i.length;){u=i[v++];for(var T=v+1;T<i.length&&typeof i[T]!="number";)T++;switch(j=i[v++],T-=v,T){case 0:c(s,u,j);break;case 1:(T=vu(i,v))?(v++,p(s,u,j,T)):c(s,u,j,i[v++]);break;case 2:T=v++,T=vu(i,T),p(s,u,j,T,i[v++]);break;case 3:g(s,u,j,i[v++],i[v++],i[v++]);break;case 4:g(s,u,j,i[v++],i[v++],i[v++],i[v++]);break;default:throw Error("unexpected number of binary field arguments: "+T)}}return s}var no=Symbol();function gu(i){var s=i[no];if(!s){var u=Tl(i);s=function(c,p){return Su(c,p,u)},i[no]=s}return s}function wu(i,s){var u=i[no];return u||(u=function(c,p){return hu(c,p,s)},i[no]=u),u}var ti=Symbol();function Ph(i,s){i.push(s)}function Ah(i,s,u){i.push(s,u.W)}function Mh(i,s,u,c){var p=gu(c),g=Tl(c).P,v=u.W;i.push(s,function(j,T,V){return v(j,T,V,g,p)})}function Ih(i,s,u,c,p,g){var v=wu(c,g),j=u.W;i.push(s,function(T,V,q){return j(T,V,q,c,v)})}function Tl(i){var s=i[ti];return s||(s=yu(i,i[ti]=[],Ph,Ah,Mh,Ih),ni in i&&ti in i&&(i.length=0),s)}var ni=Symbol();function Th(i,s){i[0]=s}function _h(i,s,u,c){var p=u.U;i[s]=c?function(g,v,j){return p(g,v,j,c)}:p}function Rh(i,s,u,c,p){var g=u.U,v=mu(c),j=_l(c).P;i[s]=function(T,V,q){return g(T,V,q,j,v,p)}}function zh(i,s,u,c,p,g,v){var j=u.U,T=pu(c,p,g);i[s]=function(V,q,ke){return j(V,q,ke,c,T,v)}}function _l(i){var s=i[ni];return s||(s=yu(i,i[ni]={},Th,_h,Rh,zh),ni in i&&ti in i&&(i.length=0),s)}function xu(i,s,u){for(;zn(s)&&s.i!=4;){var c=s.l,p=u[c];if(!p){var g=u[0];g&&(g=g[c])&&(p=u[c]=Nh(g))}if(!p||!p(s,i,c)){p=s,c=i,g=p.j,Ln(p);var v=p;if(!v.ca){if(p=v.h.h-g,v.h.h=g,v=v.h,p==0)p=Re();else{if(g=St(v,p),v.S&&v.m)p=v.i.subarray(g,g+p);else{v=v.i;var j=g;p=g+p,p=j===p?oe():J?v.slice(j,p):new Uint8Array(v.subarray(j,p))}p=p.length==0?Re():new Pe(p,D)}(g=c.R)?g.push(p):c.R=[p]}}}return i}function Su(i,s,u){for(var c=u.length,p=c%2==1,g=p?1:0;g<c;g+=2)(0,u[g+1])(s,i,u[g]);hu(i,s,p?u[0]:void 0)}function ri(i,s){return{U:i,W:s}}var tn=ri(function(i,s,u){if(i.i!==5)return!1;i=i.h;var c=i.i,p=i.h,g=c[p],v=c[p+1],j=c[p+2];return c=c[p+3],at(i,i.h+4),v=(g<<0|v<<8|j<<16|c<<24)>>>0,i=2*(v>>31)+1,g=v>>>23&255,v&=8388607,pn(s,u,g==255?v?NaN:1/0*i:g==0?i*Math.pow(2,-149)*v:i*Math.pow(2,g-150)*(v+Math.pow(2,23))),!0},function(i,s,u){if(s=Ml(s,u),s!=null){Wt(i.h,8*u+5),i=i.h;var c=+s;c===0?0<1/c?Q=le=0:(le=0,Q=2147483648):isNaN(c)?(le=0,Q=2147483647):(c=(u=0>c?-2147483648:0)?-c:c,34028234663852886e22<c?(le=0,Q=(u|2139095040)>>>0):11754943508222875e-54>c?(c=Math.round(c/Math.pow(2,-149)),le=0,Q=(u|c)>>>0):(s=Math.floor(Math.log(c)/Math.LN2),c*=Math.pow(2,-s),c=Math.round(8388608*c),16777216<=c&&++s,le=0,Q=(u|s+127<<23|c&8388607)>>>0)),u=Q,i.h.push(u>>>0&255),i.h.push(u>>>8&255),i.h.push(u>>>16&255),i.h.push(u>>>24&255)}}),Lh=ri(function(i,s,u){if(i.i!==0)return!1;var c=i.h,p=0,g=i=0,v=c.i,j=c.h;do{var T=v[j++];p|=(T&127)<<g,g+=7}while(32>g&&T&128);for(32<g&&(i|=(T&127)>>4),g=3;32>g&&T&128;g+=7)T=v[j++],i|=(T&127)<<g;if(at(c,j),128>T)c=p>>>0,T=i>>>0,(i=T&2147483648)&&(c=~c+1>>>0,T=~T>>>0,c==0&&(T=T+1>>>0)),c=4294967296*T+(c>>>0);else throw $();return pn(s,u,i?-c:c),!0},function(i,s,u){s=en(s,u),s!=null&&(typeof s=="string"&&x(s),s!=null&&(Wt(i.h,8*u),typeof s=="number"?(i=i.h,z(s),dn(i,Q,le)):(u=x(s),dn(i.h,u.i,u.h))))}),Oh=ri(function(i,s,u){return i.i!==0?!1:(pn(s,u,it(i.h)),!0)},function(i,s,u){if(s=en(s,u),s!=null&&s!=null)if(Wt(i.h,8*u),i=i.h,u=s,0<=u)Wt(i,u);else{for(s=0;9>s;s++)i.h.push(u&127|128),u>>=7;i.h.push(1)}}),ku=ri(function(i,s,u){if(i.i!==2)return!1;var c=it(i.h)>>>0;i=i.h;var p=St(i,c);if(i=i.i,De){var g=i,v;(v=Me)||(v=Me=new TextDecoder("utf-8",{fatal:!0})),i=p+c,g=p===0&&i===g.length?g:g.subarray(p,i);try{var j=v.decode(g)}catch(ke){if(xe===void 0){try{v.decode(new Uint8Array([128]))}catch{}try{v.decode(new Uint8Array([97])),xe=!0}catch{xe=!1}}throw!xe&&(Me=void 0),ke}}else{j=p,c=j+c,p=[];for(var T=null,V,q;j<c;)V=i[j++],128>V?p.push(V):224>V?j>=c?se():(q=i[j++],194>V||(q&192)!==128?(j--,se()):p.push((V&31)<<6|q&63)):240>V?j>=c-1?se():(q=i[j++],(q&192)!==128||V===224&&160>q||V===237&&160<=q||((g=i[j++])&192)!==128?(j--,se()):p.push((V&15)<<12|(q&63)<<6|g&63)):244>=V?j>=c-2?se():(q=i[j++],(q&192)!==128||(V<<28)+(q-144)>>30||((g=i[j++])&192)!==128||((v=i[j++])&192)!==128?(j--,se()):(V=(V&7)<<18|(q&63)<<12|(g&63)<<6|v&63,V-=65536,p.push((V>>10&1023)+55296,(V&1023)+56320))):se(),8192<=p.length&&(T=we(T,p),p.length=0);j=we(T,p)}return pn(s,u,j),!0},function(i,s,u){if(s=en(s,u),s!=null){var c=!1;if(c=c===void 0?!1:c,He){if(c&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(s))throw Error("Found an unpaired surrogate");s=(Be||(Be=new TextEncoder)).encode(s)}else{for(var p=0,g=new Uint8Array(3*s.length),v=0;v<s.length;v++){var j=s.charCodeAt(v);if(128>j)g[p++]=j;else{if(2048>j)g[p++]=j>>6|192;else{if(55296<=j&&57343>=j){if(56319>=j&&v<s.length){var T=s.charCodeAt(++v);if(56320<=T&&57343>=T){j=1024*(j-55296)+T-56320+65536,g[p++]=j>>18|240,g[p++]=j>>12&63|128,g[p++]=j>>6&63|128,g[p++]=j&63|128;continue}else v--}if(c)throw Error("Found an unpaired surrogate");j=65533}g[p++]=j>>12|224,g[p++]=j>>6&63|128}g[p++]=j&63|128}}s=p===g.length?g:g.subarray(0,p)}Wt(i.h,8*u+2),Wt(i.h,s.length),Zt(i,i.h.end()),Zt(i,s)}}),Eu=ri(function(i,s,u,c,p){if(i.i!==2)return!1;s=lu(s,u,c),u=i.h.j,c=it(i.h)>>>0;var g=i.h.h+c,v=g-u;if(0>=v&&(i.h.j=g,p(s,i,void 0,void 0,void 0),v=g-i.h.h),v)throw Error("Message parsing ended unexpectedly. Expected to read "+(c+" bytes, instead read "+(c-v)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return i.h.h=g,i.h.j=u,!0},function(i,s,u,c,p){if(s=Zi(s,c,u),s!=null)for(c=0;c<s.length;c++){var g=i;Wt(g.h,8*u+2);var v=g.h.end();Zt(g,v),v.push(g.i),g=v,p(s[c],i),v=i;var j=g.pop();for(j=v.i+v.h.length()-j;127<j;)g.push(j&127|128),j>>>=7,v.i++;g.push(j),v.i++}});function Rl(i){return function(s,u){e:{if(On.length){var c=On.pop();c.setOptions(u),Ye(c.h,s,u),s=c}else s=new ir(s,u);try{var p=_l(i),g=xu(new p.P,s,p);break e}finally{p=s.h,p.i=null,p.m=!1,p.l=0,p.j=0,p.h=0,p.S=!1,s.l=-1,s.i=-1,100>On.length&&On.push(s)}g=void 0}return g}}function zl(i){return function(){var s=new wr;Su(this,s,Tl(i)),Zt(s,s.h.end());for(var u=new Uint8Array(s.i),c=s.j,p=c.length,g=0,v=0;v<p;v++){var j=c[v];u.set(j,g),g+=j.length}return s.j=[u],u}}function xr(i){Pt.call(this,i)}he(xr,Pt);var ju=[xr,1,Oh,2,tn,3,ku,4,ku];xr.prototype.l=zl(ju);function Ll(i){Pt.call(this,i,-1,Dh)}he(Ll,Pt),Ll.prototype.addClassification=function(i,s){return lu(this,1,xr,i,s),this};var Dh=[1],Cu=Rl([Ll,1,Eu,ju]);function Sr(i){Pt.call(this,i)}he(Sr,Pt);var Nu=[Sr,1,tn,2,tn,3,tn,4,tn,5,tn];Sr.prototype.l=zl(Nu);function Pu(i){Pt.call(this,i,-1,Bh)}he(Pu,Pt);var Bh=[1],Au=Rl([Pu,1,Eu,Nu]);function ro(i){Pt.call(this,i)}he(ro,Pt);var Mu=[ro,1,tn,2,tn,3,tn,4,tn,5,tn,6,Lh],Fh=Rl(Mu);ro.prototype.l=zl(Mu);function Iu(i,s,u){if(u=i.createShader(u===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER),i.shaderSource(u,s),i.compileShader(u),!i.getShaderParameter(u,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+i.getShaderInfoLog(u));return u}function Tu(i){return Zi(i,xr,1).map(function(s){var u=en(s,1);return{index:u??0,score:vn(s,2),label:en(s,3)!=null?qi(en(s,3),""):void 0,displayName:en(s,4)!=null?qi(en(s,4),""):void 0}})}function _u(i){return{x:vn(i,1),y:vn(i,2),z:vn(i,3),visibility:Ml(i,4)!=null?vn(i,4):void 0}}function Ru(i){return i.map(function(s){return Zi(Au(s),Sr,1).map(_u)})}function Ol(i,s){this.i=i,this.h=s,this.m=0}function zu(i,s,u){return $h(i,s),typeof i.h.canvas.transferToImageBitmap=="function"?Promise.resolve(i.h.canvas.transferToImageBitmap()):u?Promise.resolve(i.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(i.h.canvas):(i.j===void 0&&(i.j=document.createElement("canvas")),new Promise(function(c){i.j.height=i.h.canvas.height,i.j.width=i.h.canvas.width,i.j.getContext("2d",{}).drawImage(i.h.canvas,0,0,i.h.canvas.width,i.h.canvas.height),c(i.j)}))}function $h(i,s){var u=i.h;if(i.s===void 0){var c=Iu(u,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),p=Iu(u,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),g=u.createProgram();if(u.attachShader(g,c),u.attachShader(g,p),u.linkProgram(g),!u.getProgramParameter(g,u.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+u.getProgramInfoLog(g));c=i.s=g,u.useProgram(c),p=u.getUniformLocation(c,"sampler0"),i.l={O:u.getAttribLocation(c,"aVertex"),N:u.getAttribLocation(c,"aTex"),xa:p},i.v=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.enableVertexAttribArray(i.l.O),u.vertexAttribPointer(i.l.O,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),i.u=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.enableVertexAttribArray(i.l.N),u.vertexAttribPointer(i.l.N,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),u.uniform1i(p,0)}c=i.l,u.useProgram(i.s),u.canvas.width=s.width,u.canvas.height=s.height,u.viewport(0,0,s.width,s.height),u.activeTexture(u.TEXTURE0),i.i.bindTexture2d(s.glName),u.enableVertexAttribArray(c.O),u.bindBuffer(u.ARRAY_BUFFER,i.v),u.vertexAttribPointer(c.O,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,i.u),u.vertexAttribPointer(c.N,2,u.FLOAT,!1,0,0),u.bindFramebuffer(u.DRAW_FRAMEBUFFER?u.DRAW_FRAMEBUFFER:u.FRAMEBUFFER,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.colorMask(!0,!0,!0,!0),u.drawArrays(u.TRIANGLE_FAN,0,4),u.disableVertexAttribArray(c.O),u.disableVertexAttribArray(c.N),u.bindBuffer(u.ARRAY_BUFFER,null),i.i.bindTexture2d(0)}function Uh(i){this.h=i}var Hh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Wh(i,s){return s+i}function Lu(i,s){window[i]=s}function Vh(i){var s=document.createElement("script");return s.setAttribute("src",i),s.setAttribute("crossorigin","anonymous"),new Promise(function(u){s.addEventListener("load",function(){u()},!1),s.addEventListener("error",function(){u()},!1),document.body.appendChild(s)})}function Gh(){return fe(function(i){switch(i.h){case 1:return i.s=2,_(i,WebAssembly.instantiate(Hh),4);case 4:i.h=3,i.s=0;break;case 2:return i.s=0,i.l=null,i.return(!1);case 3:return i.return(!0)}})}function Dl(i){if(this.h=i,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=i&&i.locateFile||Wh,typeof window=="object")var s=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")s=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=s,i.options){s=f(Object.keys(i.options));for(var u=s.next();!u.done;u=s.next()){u=u.value;var c=i.options[u].default;c!==void 0&&(this.l[u]=typeof c=="function"?c():c)}}}e=Dl.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Qh(i){var s,u,c,p,g,v,j,T,V,q,ke;return fe(function(ve){switch(ve.h){case 1:return i.ga?(s=i.h.files===void 0?[]:typeof i.h.files=="function"?i.h.files(i.l):i.h.files,_(ve,Gh(),2)):ve.return();case 2:if(u=ve.i,typeof window=="object")return Lu("createMediapipeSolutionsWasm",{locateFile:i.locateFile}),Lu("createMediapipeSolutionsPackedAssets",{locateFile:i.locateFile}),v=s.filter(function(re){return re.data!==void 0}),j=s.filter(function(re){return re.data===void 0}),T=Promise.all(v.map(function(re){var Ee=io(i,re.url);if(re.path!==void 0){var Ae=re.path;Ee=Ee.then(function(Ve){return i.overrideFile(Ae,Ve),Promise.resolve(Ve)})}return Ee})),V=Promise.all(j.map(function(re){return re.simd===void 0||re.simd&&u||!re.simd&&!u?Vh(i.locateFile(re.url,i.ha)):Promise.resolve()})).then(function(){var re,Ee,Ae;return fe(function(Ve){if(Ve.h==1)return re=window.createMediapipeSolutionsWasm,Ee=window.createMediapipeSolutionsPackedAssets,Ae=i,_(Ve,re(Ee),2);Ae.i=Ve.i,Ve.h=0})}),q=function(){return fe(function(re){return i.h.graph&&i.h.graph.url?re=_(re,io(i,i.h.graph.url),0):(re.h=0,re=void 0),re})}(),_(ve,Promise.all([V,T,q]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return c=s.filter(function(re){return re.simd===void 0||re.simd&&u||!re.simd&&!u}).map(function(re){return i.locateFile(re.url,i.ha)}),importScripts.apply(null,h(c)),p=i,_(ve,createMediapipeSolutionsWasm(Module),6);case 6:p.i=ve.i,i.m=new OffscreenCanvas(1,1),i.i.canvas=i.m,g=i.i.GL.createContext(i.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),i.i.GL.makeContextCurrent(g),ve.h=4;break;case 7:if(i.m=document.createElement("canvas"),ke=i.m.getContext("webgl2",{}),!ke&&(ke=i.m.getContext("webgl",{}),!ke))return alert("Failed to create WebGL canvas context when passing video frame."),ve.return();i.K=ke,i.i.canvas=i.m,i.i.createContext(i.m,!0,!0,{});case 4:i.j=new i.i.SolutionWasm,i.ga=!1,ve.h=0}})}function bh(i){var s,u,c,p,g,v,j,T;return fe(function(V){if(V.h==1){if(i.h.graph&&i.h.graph.url&&i.fa===i.h.graph.url)return V.return();if(i.u=!0,!i.h.graph||!i.h.graph.url){V.h=2;return}return i.fa=i.h.graph.url,_(V,io(i,i.h.graph.url),3)}for(V.h!=2&&(s=V.i,i.j.loadGraph(s)),u=f(Object.keys(i.D)),c=u.next();!c.done;c=u.next())p=c.value,i.j.overrideFile(p,i.D[p]);if(i.D={},i.h.listeners)for(g=f(i.h.listeners),v=g.next();!v.done;v=g.next())j=v.value,Jh(i,j);T=i.l,i.l={},i.setOptions(T),V.h=0})}e.reset=function(){var i=this;return fe(function(s){i.j&&(i.j.reset(),i.s={},i.v={}),s.h=0})},e.setOptions=function(i,s){var u=this;if(s=s||this.h.options){for(var c=[],p=[],g={},v=f(Object.keys(i)),j=v.next();!j.done;g={X:g.X,Y:g.Y},j=v.next())if(j=j.value,!(j in this.l&&this.l[j]===i[j])){this.l[j]=i[j];var T=s[j];T!==void 0&&(T.onChange&&(g.X=T.onChange,g.Y=i[j],c.push(function(V){return function(){var q;return fe(function(ke){if(ke.h==1)return _(ke,V.X(V.Y),2);q=ke.i,q===!0&&(u.u=!0),ke.h=0})}}(g))),T.graphOptionXref&&(j=Object.assign({},{calculatorName:"",calculatorIndex:0},T.graphOptionXref,{valueNumber:T.type===1?i[j]:0,valueBoolean:T.type===0?i[j]:!1,valueString:T.type===2?i[j]:""}),p.push(j)))}(c.length!==0||p.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(p),this.F=(this.F===void 0?[]:this.F).concat(c))}};function Yh(i){var s,u,c,p,g,v,j;return fe(function(T){switch(T.h){case 1:if(!i.u)return T.return();if(!i.F){T.h=2;break}s=f(i.F),u=s.next();case 3:if(u.done){T.h=5;break}return c=u.value,_(T,c(),4);case 4:u=s.next(),T.h=3;break;case 5:i.F=void 0;case 2:if(i.H){for(p=new i.i.GraphOptionChangeRequestList,g=f(i.H),v=g.next();!v.done;v=g.next())j=v.value,p.push_back(j);i.j.changeOptions(p),p.delete(),i.H=void 0}i.u=!1,T.h=0}})}e.initialize=function(){var i=this;return fe(function(s){return s.h==1?_(s,Qh(i),2):s.h!=3?_(s,bh(i),3):_(s,Yh(i),0)})};function io(i,s){var u,c;return fe(function(p){return s in i.L?p.return(i.L[s]):(u=i.locateFile(s,""),c=fetch(u).then(function(g){return g.arrayBuffer()}),i.L[s]=c,p.return(c))})}e.overrideFile=function(i,s){this.j?this.j.overrideFile(i,s):this.D[i]=s},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(i,s){var u=this,c,p,g,v,j,T,V,q,ke;return fe(function(ve){switch(ve.h){case 1:return u.h.inputs?(c=1e3*(s??performance.now()),_(ve,u.I,2)):ve.return();case 2:return _(ve,u.initialize(),3);case 3:for(p=new u.i.PacketDataList,g=f(Object.keys(i)),v=g.next();!v.done;v=g.next())if(j=v.value,T=u.h.inputs[j]){e:{var re=i[j];switch(T.type){case"video":var Ee=u.s[T.stream];if(Ee||(Ee=new Ol(u.i,u.K),u.s[T.stream]=Ee),Ee.m===0&&(Ee.m=Ee.i.createTexture()),typeof HTMLVideoElement<"u"&&re instanceof HTMLVideoElement)var Ae=re.videoWidth,Ve=re.videoHeight;else typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement?(Ae=re.naturalWidth,Ve=re.naturalHeight):(Ae=re.width,Ve=re.height);Ve={glName:Ee.m,width:Ae,height:Ve},Ae=Ee.h,Ae.canvas.width=Ve.width,Ae.canvas.height=Ve.height,Ae.activeTexture(Ae.TEXTURE0),Ee.i.bindTexture2d(Ee.m),Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Ae.RGBA,Ae.UNSIGNED_BYTE,re),Ee.i.bindTexture2d(0),Ee=Ve;break e;case"detections":for(Ee=u.s[T.stream],Ee||(Ee=new Uh(u.i),u.s[T.stream]=Ee),Ee.data||(Ee.data=new Ee.h.DetectionListData),Ee.data.reset(re.length),Ve=0;Ve<re.length;++Ve){Ae=re[Ve];var $e=Ee.data,ft=$e.setBoundingBox,Vt=Ve,At=Ae.la,Oe=new ro;if(mn(Oe,1,At.ra),mn(Oe,2,At.sa),mn(Oe,3,At.height),mn(Oe,4,At.width),mn(Oe,5,At.rotation),pn(Oe,6,At.pa),At=Oe.l(),ft.call($e,Vt,At),Ae.ea)for($e=0;$e<Ae.ea.length;++$e){Oe=Ae.ea[$e],ft=Ee.data,Vt=ft.addNormalizedLandmark,At=Ve,Oe=Object.assign({},Oe,{visibility:Oe.visibility?Oe.visibility:0});var ht=new Sr;mn(ht,1,Oe.x),mn(ht,2,Oe.y),mn(ht,3,Oe.z),Oe.visibility&&mn(ht,4,Oe.visibility),Oe=ht.l(),Vt.call(ft,At,Oe)}if(Ae.ba)for($e=0;$e<Ae.ba.length;++$e)ft=Ee.data,Vt=ft.addClassification,At=Ve,Oe=Ae.ba[$e],ht=new xr,mn(ht,2,Oe.score),Oe.index&&pn(ht,1,Oe.index),Oe.label&&pn(ht,3,Oe.label),Oe.displayName&&pn(ht,4,Oe.displayName),Oe=ht.l(),Vt.call(ft,At,Oe)}Ee=Ee.data;break e;default:Ee={}}}switch(V=Ee,q=T.stream,T.type){case"video":p.pushTexture2d(Object.assign({},V,{stream:q,timestamp:c}));break;case"detections":ke=V,ke.stream=q,ke.timestamp=c,p.pushDetectionList(ke);break;default:throw Error("Unknown input config type: '"+T.type+"'")}}return u.j.send(p),_(ve,u.I,4);case 4:p.delete(),ve.h=0}})};function Kh(i,s,u){var c,p,g,v,j,T,V,q,ke,ve,re,Ee,Ae,Ve;return fe(function($e){switch($e.h){case 1:if(!u)return $e.return(s);for(c={},p=0,g=f(Object.keys(u)),v=g.next();!v.done;v=g.next())j=v.value,T=u[j],typeof T!="string"&&T.type==="texture"&&s[T.stream]!==void 0&&++p;1<p&&(i.M=!1),V=f(Object.keys(u)),v=V.next();case 2:if(v.done){$e.h=4;break}if(q=v.value,ke=u[q],typeof ke=="string")return Ae=c,Ve=q,_($e,Xh(i,q,s[ke]),14);if(ve=s[ke.stream],ke.type==="detection_list"){if(ve){for(var ft=ve.getRectList(),Vt=ve.getLandmarksList(),At=ve.getClassificationsList(),Oe=[],ht=0;ht<ft.size();++ht){var Dn=Fh(ft.get(ht)),Zh=vn(Dn,1),qh=vn(Dn,2),ep=vn(Dn,3),tp=vn(Dn,4),np=vn(Dn,5,0),oo=void 0;oo=oo===void 0?0:oo,Dn={la:{ra:Zh,sa:qh,height:ep,width:tp,rotation:np,pa:qi(en(Dn,6),oo)},ea:Zi(Au(Vt.get(ht)),Sr,1).map(_u),ba:Tu(Cu(At.get(ht)))},Oe.push(Dn)}ft=Oe}else ft=[];c[q]=ft,$e.h=7;break}if(ke.type==="proto_list"){if(ve){for(ft=Array(ve.size()),Vt=0;Vt<ve.size();Vt++)ft[Vt]=ve.get(Vt);ve.delete()}else ft=[];c[q]=ft,$e.h=7;break}if(ve===void 0){$e.h=3;break}if(ke.type==="float_list"){c[q]=ve,$e.h=7;break}if(ke.type==="proto"){c[q]=ve,$e.h=7;break}if(ke.type!=="texture")throw Error("Unknown output config type: '"+ke.type+"'");return re=i.v[q],re||(re=new Ol(i.i,i.K),i.v[q]=re),_($e,zu(re,ve,i.M),13);case 13:Ee=$e.i,c[q]=Ee;case 7:ke.transform&&c[q]&&(c[q]=ke.transform(c[q])),$e.h=3;break;case 14:Ae[Ve]=$e.i;case 3:v=V.next(),$e.h=2;break;case 4:return $e.return(c)}})}function Xh(i,s,u){var c;return fe(function(p){return typeof u=="number"||u instanceof Uint8Array||u instanceof i.i.Uint8BlobList?p.return(u):u instanceof i.i.Texture2dDataOut?(c=i.v[s],c||(c=new Ol(i.i,i.K),i.v[s]=c),p.return(zu(c,u,i.M))):p.return(void 0)})}function Jh(i,s){for(var u=s.name||"$",c=[].concat(h(s.wants)),p=new i.i.StringList,g=f(s.wants),v=g.next();!v.done;v=g.next())p.push_back(v.value);g=i.i.PacketListener.implement({onResults:function(j){for(var T={},V=0;V<s.wants.length;++V)T[c[V]]=j.get(V);var q=i.listeners[u];q&&(i.I=Kh(i,T,s.outs).then(function(ke){ke=q(ke);for(var ve=0;ve<s.wants.length;++ve){var re=T[c[ve]];typeof re=="object"&&re.hasOwnProperty&&re.hasOwnProperty("delete")&&re.delete()}ke&&(i.I=ke)}))}}),i.j.attachMultiListener(p,g),p.delete()}e.onResults=function(i,s){this.listeners[s||"$"]=i},Ce("Solution",Dl),Ce("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Ou(i){return i===void 0&&(i=0),i===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Du(i){var s=this;i=i||{},this.h=new Dl({locateFile:i.locateFile,files:function(u){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Ou(u.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Ru},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Ru},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(u){return u.map(function(c){return Tu(Cu(c))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(u){var c,p,g;return fe(function(v){return v.h==1?(c=Ou(u),p="third_party/mediapipe/modules/hand_landmark/"+c,_(v,io(s.h,c),2)):(g=v.i,s.h.overrideFile(p,g),v.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Du.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(i){this.h.onResults(i)},e.initialize=function(){var i=this;return fe(function(s){return _(s,i.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(i){var s=this;return fe(function(u){return _(u,s.h.send(i),0)})},e.setOptions=function(i){this.h.setOptions(i)},Ce("Hands",Du),Ce("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Ce("VERSION","0.4.1675469240")}).call(Bl);const Ot=(...e)=>{},gn={red:{lower1:[0,120,70],upper1:[10,255,255],lower2:[170,120,70],upper2:[180,255,255]},blue:{lower:[100,150,70],upper:[130,255,255]}},et={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity",selectedCamera:"detectorSelectedCamera"};function Zc({hidden:e=!1}){const t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),[l,a]=P.useState(!1),[f,h]=P.useState("None"),[y,C]=P.useState([]),[A,N]=P.useState(null),[L,O]=P.useState(null),[F,he]=P.useState(null),[S,w]=P.useState({a:null,b:null}),E=P.useRef(null),_=P.useRef(null),H=(z,m)=>{const M=localStorage.getItem(z);if(M===null)return m;const k=parseFloat(M);return Number.isFinite(k)?k:m},[K,X]=P.useState(()=>({roiSize:(()=>{const z=H(et.roiSize,44);return z>10?z:44})(),hueWeight:H(et.hueWeight,4),satWeight:H(et.satWeight,2),valWeight:H(et.valWeight,1),sensitivity:H(et.sensitivity,0)})),W=P.useRef(K),pe=P.useRef(null),G=P.useRef(!1),fe=P.useRef(0),Z=P.useRef(null),[me,ce]=P.useState([]),Ce=P.useRef([]),[Ne,Te]=P.useState(()=>localStorage.getItem(et.selectedCamera)||""),Y=P.useCallback(async()=>{try{const m=(await navigator.mediaDevices.enumerateDevices()).filter(M=>M.kind==="videoinput");return ce(m),Ce.current=m,m}catch{return[]}},[]),ie=P.useCallback(z=>{},[Ot]),te=P.useCallback(async(z=null)=>{const m=t.current;if(!m)return;pe.current&&(pe.current.getTracks().forEach(x=>x.stop()),pe.current=null),D();const M=++fe.current;Z.current=null;const k=z!==null?z:Ne;try{const x=k?{video:{deviceId:{exact:k}}}:{video:!0};if(k){const $=Ce.current.find(ne=>ne.deviceId===k);console.log("[Detector]  Loading SELECTED camera:",{deviceId:k,label:($==null?void 0:$.label)||"Unknown",source:"localStorage or user selection"})}else console.log("[Detector]  Loading DEFAULT camera (no selection saved)");const I=await navigator.mediaDevices.getUserMedia(x);if(!G.current||M!==fe.current){Ot("Stale camera request (unmounted or superseded). Stopping stream."),I.getTracks().forEach($=>$.stop());return}pe.current=I;const R=I.getVideoTracks();if(Ot("getUserMedia success. Tracks:",R),R.length>0){const $=R[0];console.log("[Detector]  Camera loaded successfully:",{label:$.label,deviceId:$.getSettings().deviceId,resolution:`${$.getSettings().width}x${$.getSettings().height}`,frameRate:$.getSettings().frameRate})}if(m.srcObject=I,await new Promise($=>{if(m.readyState>=1&&m.videoWidth>0&&m.videoHeight>0)return $();const se=()=>{m.removeEventListener("loadedmetadata",se),$()};m.addEventListener("loadedmetadata",se,{once:!0}),setTimeout(()=>{m.removeEventListener("loadedmetadata",se),$()},1500)}),!G.current||M!==fe.current){Ot("Stale request before play(). Stopping stream."),I.getTracks().forEach($=>$.stop());return}try{await m.play(),Ot("video.play() promise resolved. Video should be playing.")}catch($){if(console.error("[Detector] video.play() promise rejected:",$),Ot("video.play() promise rejected:",$.name,$.message),M!==fe.current){Ot("play() aborted due to newer request."),I.getTracks().forEach(ne=>ne.stop());return}}if(Z.current!==M&&(Z.current=M,Ot("Initializing MediaPipe for request id",M),ge()),G.current){const $=await Y();if(!k||!z){const ne=$.find(se=>se.deviceId);ne&&ne.deviceId&&ne.deviceId!==Ne&&(Te(ne.deviceId),localStorage.setItem(et.selectedCamera,ne.deviceId))}}}catch(x){console.error("[Detector] Error accessing camera:",x),Ot("getUserMedia error:",x.name,x.message)}},[Ot,Y,ie,Ne]),Se=(z,m,M)=>{const k=(z||0)*2,x=(m||0)/255,I=(M||0)/255,R=I*x,$=R*(1-Math.abs(k/60%2-1)),ne=I-R;let se=0,we=0,xe=0;k>=0&&k<60?(se=R,we=$,xe=0):k<120?(se=$,we=R,xe=0):k<180?(se=0,we=R,xe=$):k<240?(se=0,we=$,xe=R):k<300?(se=$,we=0,xe=R):(se=R,we=0,xe=$);const Me=Math.round((se+ne)*255),De=Math.round((we+ne)*255),Be=Math.round((xe+ne)*255);return`rgb(${Me}, ${De}, ${Be})`},B=z=>z?Se(z.h,z.s,z.v):"#ffffff",de=z=>z==="Player A"&&L?B(L):z==="Player B"&&F?B(F):z==="Red"?"#ff0000":z==="Blue"?"#0000ff":"#ffffff";P.useEffect(()=>{G.current=!0;const z=()=>{try{const k=JSON.parse(localStorage.getItem("calibrationA")||"null"),x=JSON.parse(localStorage.getItem("calibrationB")||"null");k&&O({h:k.h,s:k.s,v:k.v}),x&&he({h:x.h,s:x.s,v:x.v})}catch{}},m=k=>{!k||!k.key||(["calibrationA","calibrationB"].includes(k.key)&&z(),[et.roiSize,et.hueWeight,et.satWeight,et.valWeight,et.sensitivity].includes(k.key)&&X(x=>({roiSize:(()=>{const I=H(et.roiSize,(x==null?void 0:x.roiSize)??44);return I>10?I:(x==null?void 0:x.roiSize)??44})(),hueWeight:H(et.hueWeight,(x==null?void 0:x.hueWeight)??4),satWeight:H(et.satWeight,(x==null?void 0:x.satWeight)??2),valWeight:H(et.valWeight,(x==null?void 0:x.valWeight)??1),sensitivity:H(et.sensitivity,(x==null?void 0:x.sensitivity)??0)})))};return(async()=>{const k=await Y();if(!G.current)return;const x=localStorage.getItem(et.selectedCamera);let I="";if(x&&k.some(R=>R.deviceId&&R.deviceId===x)){const R=k.find($=>$.deviceId===x);I=x,console.log("[Detector]  Found saved camera in localStorage:",{deviceId:x,label:(R==null?void 0:R.label)||"Unknown"})}else{x&&localStorage.removeItem(et.selectedCamera);const R=k.find($=>$.deviceId);R&&R.deviceId?(I=R.deviceId,localStorage.setItem(et.selectedCamera,R.deviceId),console.log("[Detector]  No saved camera found, using system default:",{deviceId:R.deviceId,label:R.label||"Unknown",savedCameraWas:x||"none"}),Ot("Saved camera not found, using default camera:",R.deviceId)):console.log("[Detector]  No camera identifiers available yet (likely awaiting permission).")}Te(I?R=>R===I?R:I:R=>R||""),z()})(),window.addEventListener("storage",m),()=>{G.current=!1,fe.current+=1,Z.current=null,o.current&&(o.current.stop(),o.current=null),pe.current&&(pe.current.getTracks().forEach(x=>x.stop()),pe.current=null);const k=t.current;k&&(k.srcObject=null,ie(k)),r.current&&(r.current.close(),r.current=null),window.removeEventListener("storage",m)}},[]),P.useEffect(()=>{E.current=L},[L]),P.useEffect(()=>{_.current=F},[F]),P.useEffect(()=>{W.current=K},[K]),P.useEffect(()=>{te(Ne||null)},[Ne,te]),P.useEffect(()=>{const z=setInterval(()=>{h(m=>(ye(m),m))},1e3);return()=>clearInterval(z)},[]);const ye=z=>{const M={timestamp:new Date().toISOString(),status:z};C(x=>[...x,M]);const k=JSON.parse(localStorage.getItem("braceletDetections")||"[]");k.push(M),localStorage.setItem("braceletDetections",JSON.stringify(k))},ge=async()=>{try{const z=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function"||(await new Promise((M,k)=>{const x="mp-hands-cdn-script";if(document.getElementById(x))return M();const I=document.createElement("script");I.id=x,I.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",I.async=!0,I.onload=()=>M(),I.onerror=R=>k(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(I)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),m=new z({locateFile:M=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${M}`});if(m.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),m.onResults(je),r.current=m,t.current){const M=t.current;console.log("[Detector]  Starting manual frame capture from video element");let k;const x=async()=>{if(M.readyState>=2&&M.videoWidth>0)try{await m.send({image:M})}catch(I){console.error("[Detector] Error sending frame to MediaPipe:",I)}k=requestAnimationFrame(x)};x(),o.current={stop:()=>{k&&(cancelAnimationFrame(k),console.log("[Detector]  Stopped frame capture"))}}}}catch(z){console.error("MediaPipe initialization error:",z),N(`MediaPipe error: ${z.message}`)}},je=z=>{var R;const m=n.current,M=t.current;if(!m||!M)return;const k=m.getContext("2d");m.width=M.videoWidth,m.height=M.videoHeight,k.drawImage(M,0,0,m.width,m.height);let x="None";if(z.multiHandLandmarks&&z.multiHandLandmarks.length>0){Ot("onResults: hands=",z.multiHandLandmarks.length);let $=null,ne=0;if(z.multiHandLandmarks.forEach(se=>{const we=se[0];we.y>ne&&(ne=we.y,$=se)}),z.multiHandLandmarks.forEach(se=>{U(k,se,m.width,m.height)}),$){const se=$[0],we=se.x*m.width,xe=se.y*m.height;k.fillStyle="lime",k.beginPath(),k.arc(we,xe,10,0,2*Math.PI),k.fill(),k.fillStyle="lime",k.font="16px Arial",k.fillText("SELECTED",we-40,xe-15);const De=Math.max(10,Math.min(300,Math.floor(((R=W.current)==null?void 0:R.roiSize)||60)))/2,Be=Math.max(0,we-De),He=Math.max(0,xe-De),We=Math.min(m.width,we+De),_e=Math.min(m.height,xe+De);k.strokeStyle="lime",k.lineWidth=3,k.strokeRect(Be,He,We-Be,_e-He);const Pe=We-Be,Re=_e-He;if(Pe>0&&Re>0)try{const Le=k.getImageData(Be,He,Pe,Re),rt=E.current,Jt=_.current,Ye=ue(Le,rt,Jt);x=Ye.status,w({a:Ye.percentA,b:Ye.percentB}),Ot("Detection result:",x,{roi:{x1:Be,y1:He,w:Pe,h:Re}})}catch(Le){console.warn("[Detector] Failed to get ROI image data:",Le.message),x="None",w({a:null,b:null})}else console.warn("[Detector] Invalid ROI dimensions:",{width:Pe,height:Re}),x="None",w({a:null,b:null})}}let I="#ffffff";x==="Player A"&&E.current?I=B(E.current):x==="Player B"&&_.current&&(I=B(_.current)),k.fillStyle=I,k.font="bold 32px Arial",k.fillText(`Status: ${x}`,10,40),h(x),typeof window<"u"&&(window.currentBraceletStatus=x,window.braceletDetectorCanvas=m,window.braceletDetectorVideo=M)},U=(z,m,M,k)=>{z.strokeStyle="white",z.lineWidth=2,[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,13],[13,17],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]].forEach(([I,R])=>{const $=m[I],ne=m[R];z.beginPath(),z.moveTo($.x*M,$.y*k),z.lineTo(ne.x*M,ne.y*k),z.stroke()}),m.forEach(I=>{z.fillStyle="red",z.beginPath(),z.arc(I.x*M,I.y*k,5,0,2*Math.PI),z.fill()})},ee=z=>{const m=z.data;let M=0,k=0;for(let x=0;x<m.length;x+=4){const I=m[x],R=m[x+1],$=m[x+2],ne=oe(I,R,$);(ne[0]>=gn.red.lower1[0]&&ne[0]<=gn.red.upper1[0]||ne[0]>=gn.red.lower2[0]&&ne[0]<=gn.red.upper2[0])&&ne[1]>=gn.red.lower1[1]&&ne[2]>=gn.red.lower1[2]&&M++,ne[0]>=gn.blue.lower[0]&&ne[0]<=gn.blue.upper[0]&&ne[1]>=gn.blue.lower[1]&&ne[2]>=gn.blue.lower[2]&&k++}return{redCount:M,blueCount:k}},ue=(z,m,M)=>{var De,Be,He,We;const k=z.data;if(m&&!M)return{status:"Player A",percentA:null,percentB:null};if(M&&!m)return{status:"Player B",percentA:null,percentB:null};const x=((De=W.current)==null?void 0:De.hueWeight)??4,I=((Be=W.current)==null?void 0:Be.satWeight)??2,R=((He=W.current)==null?void 0:He.valWeight)??1,$=((We=W.current)==null?void 0:We.sensitivity)??0;if(m&&M){let _e=0,Pe=0,Re=0;for(let Ye=0;Ye<k.length;Ye+=4){const at=k[Ye],it=k[Ye+1],St=k[Ye+2],[zt,Lt,dn]=oe(at,it,St),Wt=Math.min(1,Math.max(0,Lt/255)),ir=Math.min(1,Math.max(0,dn/255)),zn=Math.max(.05,.5*Wt+.5*ir),Ln=Math.min(Math.abs(zt-m.h),180-Math.abs(zt-m.h)),On=Math.min(Math.abs(zt-M.h),180-Math.abs(zt-M.h)),wr=Math.abs(Lt-m.s),Zt=Math.abs(Lt-M.s),Ki=Math.abs(dn-m.v),qt=Math.abs(dn-M.v),fn=Ln*x+wr*I+Ki*R,Zr=On*x+Zt*I+qt*R;Math.min(fn,Zr)>180||(fn<=Zr?_e+=zn:Pe+=zn,Re+=zn)}if(Re===0)return{status:"None",percentA:0,percentB:0};const Le=_e/Math.max(1e-6,Re),rt=Pe/Math.max(1e-6,Re),Jt=.12*(1+.8*Math.max(0,Math.min(1,$)));return Le>=Jt&&Le>=rt?{status:"Player A",percentA:Le,percentB:rt}:rt>=Jt&&rt>Le?{status:"Player B",percentA:Le,percentB:rt}:{status:"None",percentA:Le,percentB:rt}}const{redCount:ne,blueCount:se}=ee(z),we=ne+se;if(we===0)return{status:"None",percentA:0,percentB:0};const xe=ne/we,Me=se/we;return xe>=.15&&xe>=Me?{status:"Player A",percentA:xe,percentB:Me}:Me>=.15&&Me>xe?{status:"Player B",percentA:xe,percentB:Me}:{status:"None",percentA:xe,percentB:Me}},oe=(z,m,M)=>{z/=255,m/=255,M/=255;const k=Math.max(z,m,M),x=Math.min(z,m,M),I=k-x;let R=0;I!==0&&(k===z?R=60*((m-M)/I%6):k===m?R=60*((M-z)/I+2):R=60*((z-m)/I+4)),R<0&&(R+=360);const $=k===0?0:I/k*255,ne=k*255;return[R/2,$,ne]},D=z=>{},J=z=>{Te(z),z?localStorage.setItem(et.selectedCamera,z):localStorage.removeItem(et.selectedCamera)},Q=()=>{const z=JSON.parse(localStorage.getItem("braceletDetections")||"[]"),m=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),M=URL.createObjectURL(m),k=document.createElement("a");k.href=M,k.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.json`,k.click();const x=z.map(ne=>`${ne.timestamp}: ${ne.status}`).join(`
`),I=new Blob([x],{type:"text/plain"}),R=URL.createObjectURL(I),$=document.createElement("a");$.href=R,$.download=`bracelet_detections_${new Date().toISOString().split("T")[0]}.txt`,$.click()},le=()=>{localStorage.removeItem("braceletDetections"),C([])};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:`detector-window ${l?"minimized":""}`,style:e?{opacity:0,pointerEvents:"none",visibility:"hidden"}:void 0,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:Q,title:"Download Logs",children:""}),d.jsx("button",{onClick:le,title:"Clear Logs",children:""}),d.jsx("button",{onClick:()=>a(!l),children:l?"":""})]})]}),d.jsxs("div",{className:"detector-content",style:{display:l?"none":"block"},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{children:"Camera:"}),d.jsxs("select",{value:Ne,onChange:z=>J(z.target.value),style:{fontSize:11,padding:"3px 6px",flex:1,maxWidth:200},children:[d.jsx("option",{value:"",children:"System Default"}),me.map((z,m)=>{var $;const M=!!z.deviceId,k=M?z.deviceId:"",x=M?z.deviceId:`camera-${m}`,I=(($=z.label)==null?void 0:$.trim())||`Camera ${m+1}`,R=M?`  ${z.deviceId.slice(0,8)}`:" (needs permission)";return d.jsxs("option",{value:k,disabled:!M,children:[I,R]},x)})]})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:"1px",height:"1px"}}),d.jsx("canvas",{ref:n,className:"output_canvas"}),d.jsxs("div",{className:"detector-info",children:[d.jsxs("div",{className:"status-display",children:["Status: ",d.jsx("span",{style:{color:de(f),fontWeight:700},children:f})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:L?B(L):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"A confidence",children:S.a==null?"":`${Math.round(Math.max(0,Math.min(1,S.a))*100)}%`})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:F?B(F):"#444"}}),d.jsx("span",{style:{fontSize:12,opacity:.8,minWidth:36,textAlign:"right"},title:"B confidence",children:S.b==null?"":`${Math.round(Math.max(0,Math.min(1,S.b))*100)}%`})]})]}),d.jsxs("div",{className:"log-count",children:["Logs: ",y?y.length:0]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",L?`h${Math.round(L.h)} s${Math.round(L.s)} v${Math.round(L.v)}`:""]}),d.jsxs("div",{children:["B: ",F?`h${Math.round(F.h)} s${Math.round(F.s)} v${Math.round(F.v)}`:""]})]})]})]})]})})}const hs=(...e)=>{console.log("[Calibrate]",...e)},wn={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"},Wv=(e,t,n)=>{const r=(e||0)*2,o=(t||0)/255,l=(n||0)/255,a=l*o,f=a*(1-Math.abs(r/60%2-1)),h=l-a;let y=0,C=0,A=0;r>=0&&r<60?(y=a,C=f,A=0):r<120?(y=f,C=a,A=0):r<180?(y=0,C=a,A=f):r<240?(y=0,C=f,A=a):r<300?(y=f,C=0,A=a):(y=a,C=0,A=f);const N=Math.round((y+h)*255),L=Math.round((C+h)*255),O=Math.round((A+h)*255);return`rgb(${N}, ${L}, ${O})`},qc=e=>e?Wv(e.h,e.s,e.v):"#444";function Vv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(!1),o=P.useRef(0),[l,a]=P.useState(!1),[f,h]=P.useState(""),[y,C]=P.useState(null),[A,N]=P.useState(null),L=(U,ee)=>{const ue=localStorage.getItem(U);if(ue===null)return ee;const oe=parseFloat(ue);return Number.isFinite(oe)?oe:ee},[O,F]=P.useState(()=>{const U=L(wn.roiSize,44);return U>10?U:44}),[he,S]=P.useState(()=>L(wn.hueWeight,4)),[w,E]=P.useState(()=>L(wn.satWeight,2)),[_,H]=P.useState(()=>L(wn.valWeight,1)),[K,X]=P.useState(()=>L(wn.sensitivity,0)),[W,pe]=P.useState(!1),[G,fe]=P.useState("idle"),[Z,me]=P.useState(5),ce=P.useRef({A:[],B:[]});P.useEffect(()=>{r.current=!0;try{const U=JSON.parse(localStorage.getItem("calibrationA")||"null"),ee=JSON.parse(localStorage.getItem("calibrationB")||"null");U&&C(U),ee&&N(ee)}catch{}return(async()=>await Ce())(),()=>{r.current=!1,o.current+=1,n.current&&(n.current.getTracks().forEach(ee=>ee.stop()),n.current=null);const U=e.current;U&&(U.srcObject=null)}},[]),P.useEffect(()=>{localStorage.setItem(wn.roiSize,String(O))},[O]),P.useEffect(()=>{localStorage.setItem(wn.hueWeight,String(he))},[he]),P.useEffect(()=>{localStorage.setItem(wn.satWeight,String(w))},[w]),P.useEffect(()=>{localStorage.setItem(wn.valWeight,String(_))},[_]),P.useEffect(()=>{localStorage.setItem(wn.sensitivity,String(K))},[K]);const Ce=P.useCallback(async()=>{const U=e.current;if(!U)return;n.current&&(n.current.getTracks().forEach(ue=>ue.stop()),n.current=null);const ee=++o.current;a(!1),h("Requesting camera...");try{const ue=await navigator.mediaDevices.getUserMedia({video:!0});if(!r.current||ee!==o.current){ue.getTracks().forEach(oe=>oe.stop());return}if(n.current=ue,U.srcObject=ue,await new Promise(oe=>{if(U.readyState>=1&&U.videoWidth>0)return oe();const J=()=>{U.removeEventListener("loadedmetadata",J),oe()};U.addEventListener("loadedmetadata",J,{once:!0}),setTimeout(()=>{U.removeEventListener("loadedmetadata",J),oe()},1500)}),!r.current||ee!==o.current){ue.getTracks().forEach(oe=>oe.stop());return}try{await U.play(),hs("video.play resolved")}catch(oe){hs("video.play rejected",oe)}a(!0),h("")}catch(ue){h(`Camera error: ${(ue==null?void 0:ue.message)||ue}`),hs("getUserMedia error",ue)}},[]),Ne=(U,ee,ue)=>{U/=255,ee/=255,ue/=255;const oe=Math.max(U,ee,ue),D=Math.min(U,ee,ue),J=oe-D;let Q=0;J!==0&&(oe===U?Q=60*((ee-ue)/J%6):oe===ee?Q=60*((ue-U)/J+2):Q=60*((U-ee)/J+4)),Q<0&&(Q+=360);const le=oe===0?0:J/oe*255,z=oe*255;return[Q/2,le,z]},Te=()=>{const U=e.current,ee=t.current;if(!U||!ee||U.videoWidth===0)return null;const ue=U.videoWidth,oe=U.videoHeight;ee.width=ue,ee.height=oe;const D=ee.getContext("2d");D.drawImage(U,0,0,ue,oe);const J=Math.max(10,Math.min(300,Math.floor(O))),Q=Math.floor(ue/2-J/2),le=Math.floor(oe/2-J/2),m=D.getImageData(Q,le,J,J).data;let M=0,k=0,x=0,I=0,R=0;for(let Be=0;Be<m.length;Be+=4){const[He,We,_e]=Ne(m[Be],m[Be+1],m[Be+2]),Pe=He*2*(Math.PI/180);M+=Math.cos(Pe),k+=Math.sin(Pe),x+=We,I+=_e,R++}if(R===0)return null;const $=x/R,ne=I/R,se=M/R,we=k/R;let Me=Math.atan2(we,se)*(180/Math.PI);return Me<0&&(Me+=360),{h:Me/2,s:$,v:ne}},Y=U=>{const ee=Te();if(!ee){h("Could not sample video frame.");return}U==="A"?(localStorage.setItem("calibrationA",JSON.stringify(ee)),C(ee),h(`Saved Player A: h${ee.h.toFixed(0)}`)):(localStorage.setItem("calibrationB",JSON.stringify(ee)),N(ee),h(`Saved Player B: h${ee.h.toFixed(0)}`))},ie=U=>{U==="A"?(localStorage.removeItem("calibrationA"),C(null)):(localStorage.removeItem("calibrationB"),N(null)),h("Cleared")},te=()=>{pe(!0),fe("playerA"),me(5),ce.current={A:[],B:[]},h("Hold Player A bracelet in center square...")};P.useEffect(()=>{if(!(!W||G==="idle"||G==="optimizing"||G==="complete"))if(Z>0){const U=setTimeout(()=>{me(Z-1)},1e3);return()=>clearTimeout(U)}else G==="playerA"?(fe("switching"),me(3),h("Switch to Player B... Get ready!")):G==="switching"?(fe("playerB"),me(5),h("Hold Player B bracelet in center square...")):G==="playerB"&&(fe("optimizing"),Se())},[W,G,Z]),P.useEffect(()=>{if(!W||G==="idle"||G==="switching"||G==="optimizing"||G==="complete")return;const U=setInterval(()=>{const ee=Te();ee&&(G==="playerA"?ce.current.A.push(ee):G==="playerB"&&ce.current.B.push(ee))},200);return()=>clearInterval(U)},[W,G]);const Se=()=>{h("Optimizing parameters...");const U=ce.current.A,ee=ce.current.B;if(U.length===0||ee.length===0){h("Error: Not enough samples collected!"),pe(!1),fe("idle");return}const ue=B(U),oe=B(ee),D=Math.min(Math.abs(ue.h-oe.h),180-Math.abs(ue.h-oe.h)),J=Math.abs(ue.s-oe.s),Q=Math.abs(ue.v-oe.v),le=D/90,z=J/255,m=Q/255,M=de(U),k=de(ee),x={h:(M.h+k.h)/2,s:(M.s+k.s)/2,v:(M.v+k.v)/2},I=le+z+m,R=I>0?le/I*(1/(1+x.h/20))*6:2,$=I>0?z/I*(1/(1+x.s/50))*4:1,ne=I>0?m/I*(1/(1+x.v/50))*3:.5;S(Math.max(.5,Math.min(6,R))),E(Math.max(.1,Math.min(4,$))),H(Math.max(.1,Math.min(3,ne)));const se=ye(U,ee,ue,oe),we=Math.max(0,Math.min(.8,se*.5));X(we),localStorage.setItem("calibrationA",JSON.stringify(ue)),localStorage.setItem("calibrationB",JSON.stringify(oe)),C(ue),N(oe),fe("complete"),h(` Auto-calibration complete! Collected ${U.length+ee.length} samples. Optimized parameters for best separation.`),setTimeout(()=>{pe(!1),fe("idle")},3e3)},B=U=>{const ee=U.map(k=>k.h),ue=U.map(k=>k.s).sort((k,x)=>k-x),oe=U.map(k=>k.v).sort((k,x)=>k-x);let D=0,J=0;ee.forEach(k=>{const x=k*2*(Math.PI/180);D+=Math.cos(x),J+=Math.sin(x)});let le=Math.atan2(J/ee.length,D/ee.length)*(180/Math.PI);le<0&&(le+=360);const z=le/2,m=ue[Math.floor(ue.length/2)],M=oe[Math.floor(oe.length/2)];return{h:z,s:m,v:M}},de=U=>{const ee=U.reduce((oe,D)=>({h:oe.h+D.h,s:oe.s+D.s,v:oe.v+D.v}),{h:0,s:0,v:0});ee.h/=U.length,ee.s/=U.length,ee.v/=U.length;const ue=U.reduce((oe,D)=>({h:oe.h+Math.pow(D.h-ee.h,2),s:oe.s+Math.pow(D.s-ee.s,2),v:oe.v+Math.pow(D.v-ee.v,2)}),{h:0,s:0,v:0});return{h:ue.h/U.length,s:ue.s/U.length,v:ue.v/U.length}},ye=(U,ee,ue,oe)=>{let D=0;const J=Math.min(U.length,ee.length)*2;return U.forEach(Q=>{const le=ge(Q,ue);ge(Q,oe)<le*1.5&&D++}),ee.forEach(Q=>{const le=ge(Q,ue),z=ge(Q,oe);le<z*1.5&&D++}),D/J},ge=(U,ee)=>{const ue=Math.min(Math.abs(U.h-ee.h),180-Math.abs(U.h-ee.h)),oe=Math.abs(U.s-ee.s),D=Math.abs(U.v-ee.v);return Math.sqrt(ue*ue+oe*oe+D*D)},je=()=>{pe(!1),fe("idle"),me(5),h("Generic mode cancelled")};return d.jsxs("div",{className:"calib-root",children:[d.jsxs("div",{className:"calib-header",children:[d.jsx("h2",{children:"Color Calibration"}),d.jsxs("div",{className:"calib-actions",children:[d.jsx("button",{onClick:()=>window.location.hash="",children:"Back"}),d.jsx("button",{onClick:Ce,children:"Restart Camera"})]})]}),f&&d.jsx("div",{className:"calib-message",children:f}),d.jsxs("div",{className:"calib-content",children:[d.jsx("div",{children:d.jsxs("div",{className:"calib-block",style:{marginBottom:12},children:[d.jsx("div",{className:"label",children:"Live Preview"}),d.jsx("div",{className:"value",style:{marginBottom:8},children:W?`Generic Mode Active: ${G==="playerA"?"Player A":G==="switching"?"Switching...":G==="playerB"?"Player B":"Processing..."}`:"Place the bracelet color inside the center square to sample accurate HSV."}),d.jsxs("div",{className:"calib-video-wrap",children:[d.jsx("video",{ref:e,className:"calib-video",autoPlay:!0,playsInline:!0,muted:!0}),d.jsx("div",{className:"calib-center-box",style:{width:O,height:O,borderColor:"#22d3ee",borderWidth:W?"4px":"3px",boxShadow:W?"0 0 20px rgba(34, 211, 238, 0.6)":"0 0 0 2000px rgba(0,0,0,0.35)"}}),W&&Z>0&&d.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"72px",fontWeight:"bold",color:"#22d3ee",textShadow:"0 0 20px rgba(34, 211, 238, 0.8), 0 0 40px rgba(34, 211, 238, 0.5)",pointerEvents:"none",zIndex:10},children:Z})]})]})}),d.jsxs("div",{className:"calib-controls",children:[d.jsxs("div",{className:"calib-block",style:{background:W?"#1a2332":"#0f172a",border:W?"2px solid #22d3ee":"1px solid #1f2937"},children:[d.jsx("div",{className:"label",children:" Generic Mode (Auto-Calibration)"}),d.jsx("div",{className:"value",style:{fontSize:13,marginBottom:8},children:"Automatically calibrate both players with optimized parameters. Hold each bracelet in the center square for 5 seconds."}),W?d.jsxs("div",{style:{marginTop:8},children:[d.jsxs("div",{style:{fontSize:16,fontWeight:"bold",color:"#22d3ee",marginBottom:8},children:[G==="playerA"&&`Player A: Hold bracelet steady... ${Z}s`,G==="switching"&&`Switch hands! Get Player B ready... ${Z}s`,G==="playerB"&&`Player B: Hold bracelet steady... ${Z}s`,G==="optimizing"&&"Optimizing parameters...",G==="complete"&&" Complete!"]}),d.jsxs("div",{style:{fontSize:12,opacity:.7,marginBottom:8},children:[G==="playerA"&&`Samples collected: ${ce.current.A.length}`,G==="switching"&&`Player A: ${ce.current.A.length} samples collected`,G==="playerB"&&`Samples collected: ${ce.current.B.length}`]}),G!=="complete"&&d.jsx("button",{onClick:je,style:{background:"#ef4444"},children:"Cancel"})]}):d.jsx("div",{className:"buttons",children:d.jsx("button",{onClick:te,disabled:!l,style:{background:"#22d3ee",color:"#000",fontWeight:"bold"},children:"Start Generic Mode"})})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Detector Settings"}),d.jsxs("div",{className:"value",style:{display:"grid",gap:8},children:[d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Detection square size"}),d.jsx("input",{type:"range",min:"20",max:"240",step:"2",value:O,onChange:U=>F(Number(U.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[O,"px"]})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Hue weight"}),d.jsx("input",{type:"range",min:"0",max:"6",step:"0.1",value:he,onChange:U=>S(Number(U.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:he.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Saturation weight"}),d.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:w,onChange:U=>E(Number(U.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:w.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Value weight"}),d.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:_,onChange:U=>H(Number(U.target.value))}),d.jsx("span",{style:{textAlign:"right"},children:_.toFixed(1)})]}),d.jsxs("label",{style:{display:"grid",gridTemplateColumns:"180px 1fr 60px",alignItems:"center",gap:8},children:[d.jsx("span",{children:"Sensitivity (lower = more sensitive)"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:K,onChange:U=>X(Number(U.target.value))}),d.jsxs("span",{style:{textAlign:"right"},children:[(K*100).toFixed(0),"%"]})]}),d.jsx("div",{style:{fontSize:12,opacity:.7},children:"These settings are saved to local storage and used by the detector (wrist ROI, A/B decision weights, and sensitivity gate)."})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player A"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player A color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(y)}}),d.jsx("span",{children:y?`h${y.h.toFixed(0)} s${y.s.toFixed(0)} v${y.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>Y("A"),disabled:!l,children:"Save A"}),d.jsx("button",{onClick:()=>ie("A"),children:"Clear A"})]})]}),d.jsxs("div",{className:"calib-block",children:[d.jsx("div",{className:"label",children:"Player B"}),d.jsxs("div",{className:"value",style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{title:"Player B color",style:{width:16,height:16,borderRadius:3,border:"1px solid #666",display:"inline-block",background:qc(A)}}),d.jsx("span",{children:A?`h${A.h.toFixed(0)} s${A.s.toFixed(0)} v${A.v.toFixed(0)}`:""})]}),d.jsxs("div",{className:"buttons",children:[d.jsx("button",{onClick:()=>Y("B"),disabled:!l,children:"Save B"}),d.jsx("button",{onClick:()=>ie("B"),children:"Clear B"})]})]})]})]}),d.jsx("canvas",{ref:t,className:"calib-offscreen"})]})}function xh({initialData:e=null,title:t="Game Summary",enableFileUpload:n=!0,className:r="",sessionGameId:o=null,onPlayerUpdate:l=null}){var z;const[a,f]=P.useState(e),[h,y]=P.useState(0),[C,A]=P.useState(!1),[N,L]=P.useState(1),[O,F]=P.useState(Ni()),[he,S]=P.useState(!0),[w,E]=P.useState([]),[_,H]=P.useState(null),[K,X]=P.useState(!1),W=P.useRef(null),pe=P.useRef(null),G=P.useRef(null),fe=n&&!e,Z=["summary-container",r].filter(Boolean).join(" "),me=(m,M)=>{const k=G.current;if(!k)return 0;const x=k.offsetHeight;return(m+.5)*x},ce=P.useCallback((m,M=null)=>{const k=M||a;if(!k)return;let x=Ni(),I=!0;const R=[];let $=null;for(let ne=0;ne<=m&&ne<k.moves.length;ne++){const se=k.moves[ne];se.phase==="experiment"&&I&&(I=!1,x=Ni());const we=se.all_positions||(se.allPositions?se.allPositions.map(xe=>[xe[0]*.07,xe[1]*.07]):null);if(se.type==="moveblock"&&we)we.length===10&&x.length===10?x=x.map((xe,Me)=>{const De=we[Me];return De&&Array.isArray(De)&&De.length===2?{...xe,position:[De[0],De[1]]}:xe}):console.warn(`Position count mismatch: blocks=${x.length}, positions=${we==null?void 0:we.length}`),x=aa(sa(x),I),$=se.blockId!==void 0?se.blockId:se.unit;else if(se.type==="added shape to gallery"&&se.gallery_normalized){const xe=document.createElement("canvas");xe.width=400,xe.height=400;const Me=xe.getContext("2d");Me.fillStyle="#000",Me.fillRect(0,0,400,400),se.gallery_normalized.forEach(De=>{const Be=(De[0]+.5)*400,He=(De[1]+.5)*400;Me.fillStyle="green";const We=60;Me.fillRect(Be-We/2,He-We/2,We,We)}),R.push({number:se.gallery_shape_number,image:xe.toDataURL()}),$=null}}F(x),S(I),E(R),H($)},[a]),Ce=m=>{f(m),y(0),A(!1),setTimeout(()=>{ce(0,m)},0)},Ne=m=>{if(!fe)return;const M=m.target.files[0];if(!M)return;const k=new FileReader;k.onload=x=>{try{const I=JSON.parse(x.target.result);Ce(I)}catch(I){alert("Failed to parse JSON file: "+I.message)}},k.readAsText(M)};P.useEffect(()=>{e&&Ce(e)},[e]),P.useEffect(()=>{a&&h>=0&&ce(h)},[a,h,ce]),P.useEffect(()=>{const m=()=>{a&&h>=0&&setTimeout(()=>{ce(h)},100)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[a,h,ce]);const Te=m=>{a&&(m<0||m>=a.moves.length||(ce(m),y(m)))},Y=()=>{if(!a||C)return;A(!0),y(0),ce(0);let m=0;pe.current=setInterval(()=>{if(m>=a.moves.length){ie();return}m++,ce(m),y(m)},1e3/N)},ie=()=>{pe.current&&(clearInterval(pe.current),pe.current=null),A(!1)};if(P.useEffect(()=>()=>{pe.current&&clearInterval(pe.current)},[]),P.useEffect(()=>{if(C&&pe.current){clearInterval(pe.current),pe.current=null;const m=h;y(0),A(!1),setTimeout(()=>{y(m),Y()},0)}},[N]),!a)return fe?d.jsx("div",{className:Z,children:d.jsxs("div",{className:"summary-upload",children:[d.jsx("h1",{children:t}),d.jsx("p",{children:"Load a game session JSON file to view the replay"}),d.jsx("input",{ref:W,type:"file",accept:".json",onChange:Ne,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var m;return(m=W.current)==null?void 0:m.click()},children:"Load JSON File"})]})}):null;const te=a.moves[h],Se=a.moves.length,B=((z=a.summary)==null?void 0:z.movesByPlayer)||{},de=Object.entries(B||{}),ye=(m,M=1)=>Number.isFinite(m)?m.toFixed(M):"",ge=a.sessionInfo||{},je=ge.subjectId||ge.id||a.subjectId||a.id||null,U=ge.sessionGameId||a.sessionGameId||je||null,ee=ge.condition||a.condition||null,ue=a.startTime||ge.startedAt||ge.date||null,oe=a.endTime||ge.endedAt||null,D=m=>{if(!m)return null;try{const M=new Date(m);if(!Number.isNaN(M.getTime()))return M.toLocaleString()}catch{}return m},J=[];U&&J.push({label:"Session ID",value:U}),je&&je!==U&&J.push({label:"Participant",value:je}),ee&&J.push({label:"Condition",value:ee});const Q=D(ue);Q&&J.push({label:"Start",value:Q});const le=D(oe);return le&&J.push({label:"End",value:le}),d.jsxs("div",{className:Z,children:[d.jsxs("div",{className:"summary-header",children:[d.jsx("h1",{children:t}),J.length>0&&d.jsx("div",{className:"summary-session-info",children:J.map(m=>d.jsxs("div",{className:"summary-session-info-item",children:[d.jsx("span",{className:"summary-session-info-label",children:m.label}),d.jsx("span",{className:"summary-session-info-value",children:m.value})]},`${m.label}-${m.value}`))})]}),d.jsxs("div",{className:"summary-main",children:[d.jsxs("div",{className:"summary-left",children:[d.jsx("div",{className:"summary-game-area",children:d.jsxs("div",{className:"game-canvas",ref:G,children:[d.jsx("div",{className:"gallery",children:d.jsx("div",{className:"gallery-frame",children:w.length>0?d.jsx("img",{src:w[w.length-1].image,alt:"Gallery",className:"gallery-image"}):d.jsx("div",{className:"gallery-placeholder",children:"Gallery"})})}),O.map((m,M)=>{const k=m.position||[0,0];return!Array.isArray(k)||k.length!==2||!Number.isFinite(k[0])||!Number.isFinite(k[1])?(console.warn(`Invalid position for block ${m.id}:`,k),null):d.jsx("div",{className:`block ${m.canMove?"movable":""} ${m.id===_?"highlighted":""}`,style:{left:`${me(k[0])}px`,top:`${me(k[1])}px`,backgroundColor:m.color||"green",cursor:m.canMove?"grab":"default",zIndex:m.id===_?20:M+1}},m.id)})]})}),d.jsxs("div",{className:"summary-progress",children:[d.jsx("input",{type:"range",min:"0",max:Math.max(0,Se-1),value:h,onChange:m=>Te(parseInt(m.target.value)),style:{width:"100%"}}),d.jsxs("div",{className:"progress-info",children:["Move ",h+1," of ",Se,te&&d.jsxs("span",{className:"move-info",children:[" "," Player: ",te.player,Array.isArray(te.position)&&te.position.length===2&&`  Position: (${te.position[0]}, ${te.position[1]})`,Number.isFinite(te.holdTime)&&`  Hold: ${ye(te.holdTime,2)}s`," "," Time: ",ye(te.elapsed,1),"s"]})]})]})]}),d.jsxs("div",{className:"summary-right",children:[d.jsxs("div",{className:"summary-stats",children:[d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Duration"}),d.jsxs("span",{className:"summary-stats-value",children:[Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]}),d.jsxs("div",{className:"summary-stats-row",children:[d.jsx("span",{className:"summary-stats-label",children:"Total Moves"}),d.jsx("span",{className:"summary-stats-value",children:Se})]}),d.jsxs("div",{className:"summary-stats-row summary-stats-column",children:[d.jsx("span",{className:"summary-stats-label",children:"Moves by Player"}),d.jsx("div",{className:"summary-stats-value",children:de.length===0?d.jsx("span",{children:""}):de.map(([m,M])=>d.jsxs("div",{children:[m,": ",M]},m))})]})]}),d.jsxs("div",{className:"summary-controls",children:[d.jsx("button",{onClick:()=>Te(0),disabled:h===0,children:" First"}),d.jsx("button",{onClick:()=>Te(h-1),disabled:h===0,children:" Previous"}),d.jsx("button",{onClick:C?ie:Y,children:C?" Pause":" Play"}),d.jsx("button",{onClick:()=>Te(h+1),disabled:h>=Se-1,children:" Next"}),d.jsx("button",{onClick:()=>Te(Se-1),disabled:h>=Se-1,children:" Last"}),d.jsxs("div",{className:"speed-control",children:[d.jsx("label",{children:"Speed:"}),d.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:N,onChange:m=>L(parseFloat(m.target.value))}),d.jsxs("span",{children:[N,"x"]})]}),fe&&d.jsxs(d.Fragment,{children:[d.jsx("input",{ref:W,type:"file",accept:".json",onChange:Ne,style:{display:"none"}}),d.jsx("button",{onClick:()=>{var m;return(m=W.current)==null?void 0:m.click()},children:" Load New File"})]})]}),d.jsxs("div",{className:"summary-moves-list",children:[d.jsxs("div",{className:"move-list-header",children:[d.jsx("h2",{children:"Move History"}),l&&d.jsx("button",{className:`edit-mode-toggle ${K?"active":""}`,onClick:()=>X(!K),children:K?" Done Editing":"Edit Players"})]}),d.jsx("div",{className:"moves-scroll",children:a.moves.map((m,M)=>d.jsxs("div",{className:`move-item ${M===h?"active":""} ${K?"edit-mode":""}`,onClick:()=>!K&&Te(M),children:[d.jsx("div",{className:"move-number",children:M+1}),m.camera_frame&&d.jsx("div",{className:"move-camera-frame",children:d.jsx("img",{src:m.camera_frame,alt:`Camera frame for move ${M+1}`,className:"camera-frame-thumbnail"})}),d.jsxs("div",{className:"move-details",children:[d.jsx("div",{className:"move-type",children:m.type}),K&&l?d.jsxs("div",{className:"move-player-edit",children:[d.jsx("label",{children:"Player:"}),d.jsxs("select",{value:m.player||"Unknown",onChange:k=>{const x=k.target.value;l(m._id,x)},onClick:k=>k.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}):d.jsxs("div",{className:"move-player",children:["Player: ",m.player]}),m.blockId!==null&&m.blockId!==void 0||m.unit!==null&&m.unit!==void 0?d.jsxs("div",{className:"move-unit",children:["Block: ",m.blockId!==void 0?m.blockId:m.unit]}):null,Array.isArray(m.position)&&m.position.length===2&&d.jsxs("div",{className:"move-position",children:["Position: (",m.position[0],", ",m.position[1],")"]}),Number.isFinite(m.holdTime)&&m.holdTime>0&&d.jsxs("div",{className:"move-hold-time",children:["Hold Time: ",ye(m.holdTime,2),"s"]}),d.jsxs("div",{className:"move-time",children:["Time: ",ye(m.elapsed,1),"s"]})]})]},M))})]})]})]})]})}const ut=(...e)=>{console.log("[Detector2]",...e)},kt={roiSize:"detectorRoiSize",hueWeight:"detectorHueWeight",satWeight:"detectorSatWeight",valWeight:"detectorValWeight",sensitivity:"detectorSensitivity"};function Gv(){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(null),r=P.useRef(null),o=P.useRef(null),l=P.useRef(null),a=P.useRef(null),f=P.useRef(null),h=P.useRef(null),[y,C]=P.useState(""),[A,N]=P.useState(!1),[L,O]=P.useState({camA:"None",camB:"None",merged:"None"}),[F,he]=P.useState(!0),[S,w]=P.useState(null),[E,_]=P.useState(null),H=P.useRef(null),K=P.useRef(null),X=(m,M)=>{const k=localStorage.getItem(m);if(k===null)return M;const x=parseFloat(k);return Number.isFinite(x)?x:M},[W,pe]=P.useState(()=>({roiSize:(()=>{const m=X(kt.roiSize,44);return m>10?m:44})(),hueWeight:X(kt.hueWeight,4),satWeight:X(kt.satWeight,2),valWeight:X(kt.valWeight,1),sensitivity:X(kt.sensitivity,0)})),G=P.useRef(W),[fe,Z]=P.useState([]),[me,ce]=P.useState(""),[Ce,Ne]=P.useState("");P.useEffect(()=>{let m=!0;(async()=>{try{const I=(await navigator.mediaDevices.enumerateDevices()).filter($=>$.kind==="videoinput");if(I.length===0){C("No cameras found");return}Z(I);const R=I.slice(0,2).map($=>$.deviceId);ce(R[0]||""),Ne(R[1]||R[0]||""),await Te(R[0],e,f),R[1]?await Te(R[1],t,h):await Te(R[0],t,h),await ye(),await ge("A",e,l),await ge("B",t,a)}catch(x){if(!m)return;C((x==null?void 0:x.message)||String(x))}})();const M=()=>{try{const x=JSON.parse(localStorage.getItem("calibrationA")||"null"),I=JSON.parse(localStorage.getItem("calibrationB")||"null");x&&w({h:x.h,s:x.s,v:x.v}),I&&_({h:I.h,s:I.s,v:I.v})}catch{ut("No existing calibrations")}};M();const k=x=>{!x||!x.key||(["calibrationA","calibrationB"].includes(x.key)&&M(),[kt.roiSize,kt.hueWeight,kt.satWeight,kt.valWeight,kt.sensitivity].includes(x.key)&&pe(I=>({roiSize:(()=>{const R=X(kt.roiSize,(I==null?void 0:I.roiSize)??44);return R>10?R:(I==null?void 0:I.roiSize)??44})(),hueWeight:X(kt.hueWeight,(I==null?void 0:I.hueWeight)??4),satWeight:X(kt.satWeight,(I==null?void 0:I.satWeight)??2),valWeight:X(kt.valWeight,(I==null?void 0:I.valWeight)??1),sensitivity:X(kt.sensitivity,(I==null?void 0:I.sensitivity)??0)})))};return window.addEventListener("storage",k),()=>{if(m=!1,l.current&&(l.current.stop(),l.current=null),a.current&&(a.current.stop(),a.current=null),f.current&&(f.current.getTracks().forEach(R=>R.stop()),f.current=null),h.current&&(h.current.getTracks().forEach(R=>R.stop()),h.current=null),o.current){try{o.current.close()}catch{}o.current=null}const x=e.current;x&&(x.srcObject=null);const I=t.current;I&&(I.srcObject=null),window.removeEventListener("storage",k)}},[]);const Te=async(m,M,k)=>{const x={video:{deviceId:{exact:m}}};ut("Starting camera with deviceId:",m);const I=await navigator.mediaDevices.getUserMedia(x);k.current=I;const R=M.current;if(!R){ut("Video element not found!");return}R.srcObject=I,ut("Stream assigned to video element, waiting for metadata..."),await new Promise($=>{if(R.readyState>=2&&R.videoWidth>0&&R.videoHeight>0)return ut("Video already ready:",R.videoWidth,"x",R.videoHeight),$();const se=()=>{ut("loadedmetadata event fired:",R.videoWidth,"x",R.videoHeight),R.removeEventListener("loadedmetadata",se),$()};R.addEventListener("loadedmetadata",se,{once:!0}),setTimeout(()=>{ut("Metadata timeout - proceeding anyway"),R.removeEventListener("loadedmetadata",se),$()},2e3)});try{await R.play(),ut("Video play() succeeded")}catch($){ut("Video play() failed:",$)}},Y=P.useRef(null),ie=P.useRef(null),te=P.useRef(null),Se=P.useRef(!1),B=async()=>{if(!Se.current){Se.current=!0;try{for(;ie.current||te.current;){const m=o.current;if(!m)break;let M=null,k=null;if(ie.current?(M="A",k=ie.current,ie.current=null):te.current&&(M="B",k=te.current,te.current=null),!!k){Y.current=M;try{await m.send({image:k})}catch(x){console.error("[Detector2] hands.send error:",x);break}}}}finally{Se.current=!1}}},de=(m,M)=>{m==="A"?ie.current=M:te.current=M,Promise.resolve().then(B)},ye=async()=>{if(o.current)return o.current;try{const m=await(async()=>{try{if(typeof ll.Hands=="function")return ll.Hands}catch{}if(typeof window<"u"&&window.Hands&&typeof window.Hands=="function")return window.Hands;const k=document.getElementById("mp-hands-cdn-script");if(k&&(await new Promise(x=>{if(window.Hands&&typeof window.Hands=="function")return x();const I=setInterval(()=>{window.Hands&&typeof window.Hands=="function"&&(clearInterval(I),x())},50);setTimeout(()=>{clearInterval(I),x()},3e3)}),window.Hands&&typeof window.Hands=="function")||(k||await new Promise((x,I)=>{const R=document.createElement("script");R.id="mp-hands-cdn-script",R.src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js",R.async=!0,R.onload=()=>x(),R.onerror=$=>I(new Error("Failed to load MediaPipe Hands from CDN")),document.head.appendChild(R)}),window.Hands&&typeof window.Hands=="function"))return window.Hands;throw new Error("MediaPipe Hands constructor not available after CDN load")})(),M=new m({locateFile:k=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${k}`});return M.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),M.onResults(k=>{const x=Y.current;x==="A"?ee(k):x==="B"&&ue(k)}),o.current=M,M}catch(m){return console.error("MediaPipe initialization error:",m),C(`MediaPipe error: ${m.message}`),null}},ge=async(m,M,k)=>{if(!await ye())return;const I=M.current;if(!I){ut(`Video ref for ${m} not found`);return}ut(`Initializing manual frame capture for camera ${m}, video dimensions:`,I.videoWidth,"x",I.videoHeight);let R=null;const $=()=>{const ne=M.current;ne&&ne.readyState>=2&&ne.videoWidth>0&&de(m,ne),R=requestAnimationFrame($)};R=requestAnimationFrame($),k.current={stop:()=>{R&&(cancelAnimationFrame(R),R=null,ut(`Stopped manual frame capture for camera ${m}`))}},ut(`Manual frame capture started for camera ${m}`)},je=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null}),U=P.useRef({wristY:null,player:"None",landmarks:null,wristX:null});P.useEffect(()=>{H.current=S},[S]),P.useEffect(()=>{K.current=E},[E]),P.useEffect(()=>{G.current=W},[W]);const ee=m=>oe(m,n,"A"),ue=m=>oe(m,r,"B"),oe=(m,M,k)=>{var We;const x=M.current;if(!x)return;const I=x.getContext("2d");if(!I)return;const R=k==="A"?e.current:t.current;if(!R||R.videoWidth===0||R.videoHeight===0){k==="A"?je.current={wristY:null,wristX:null,landmarks:null,player:"None"}:U.current={wristY:null,wristX:null,landmarks:null,player:"None"};return}x.width=R.videoWidth,x.height=R.videoHeight,I.drawImage(R,0,0,x.width,x.height),I.fillStyle="rgba(0, 0, 0, 0.6)",I.fillRect(x.width-80,5,75,20),I.fillStyle="white",I.font="bold 14px Arial",I.fillText(`Camera ${k}`,x.width-75,20);let $=null,ne=null,se=null,we=[];if(m.multiHandLandmarks&&m.multiHandLandmarks.length>0)for(const _e of m.multiHandLandmarks){const Pe=_e[0],Re=Pe.x*x.width,Le=Pe.y*x.height;we.push({x:Re,y:Le,landmarks:_e}),($===null||(F?Le<$:Le>$))&&($=Le,ne=_e,se=Re)}we.forEach(({x:_e,y:Pe})=>{I.fillStyle="orange",I.beginPath(),I.arc(_e,Pe,8,0,Math.PI*2),I.fill()});let xe="None";if(ne){I.fillStyle="lime",I.beginPath(),I.arc(se,$,10,0,2*Math.PI),I.fill(),I.fillStyle="lime",I.font="16px Arial",I.fillText("SELECTED",se-40,$-15);const Pe=Math.max(10,Math.min(300,Math.floor(((We=G.current)==null?void 0:We.roiSize)||60)))/2,Re=Math.max(0,se-Pe),Le=Math.max(0,$-Pe),rt=Math.min(x.width,se+Pe),Jt=Math.min(x.height,$+Pe),Ye=Math.max(0,Math.floor(Re)),at=Math.max(0,Math.floor(Le));let it=Math.floor(rt-Re),St=Math.floor(Jt-Le);if(it=Math.max(1,it),St=Math.max(1,St),it=Math.min(it,x.width-Ye),St=Math.min(St,x.height-at),it>0&&St>0){I.strokeStyle="lime",I.lineWidth=3,I.strokeRect(Ye,at,it,St);try{const zt=I.getImageData(Ye,at,it,St),Lt=H.current,dn=K.current;xe=J(zt,Lt,dn).status}catch(zt){console.warn("[Detector2] ROI sampling failed:",zt),xe="None"}}else ut("ROI skipped due to zero width/height",{width:it,height:St,left:Ye,top:at})}if(we.length>=1){let _e=we[0].y,Pe=we[0].y;we.forEach(rt=>{rt.y<_e&&(_e=rt.y),rt.y>Pe&&(Pe=rt.y)}),I.strokeStyle="yellow",I.setLineDash([6,4]),I.beginPath(),I.moveTo(0,F?_e:Pe),I.lineTo(x.width,F?_e:Pe),I.stroke(),I.strokeStyle="cyan",I.beginPath(),I.moveTo(0,F?Pe:_e),I.lineTo(x.width,F?Pe:_e),I.stroke(),I.setLineDash([]);const Re=F?"A (top)":"A (bottom)",Le=F?"B (bottom)":"B (top)";I.fillStyle="lime",I.font="16px Arial",I.fillText(Re,6,Math.max(14,(F?_e:Pe)-6)),I.fillStyle="dodgerblue",I.fillText(Le,6,Math.min(x.height-6,(F?Pe:_e)+18))}const Me={wristY:$,wristX:se,landmarks:ne,player:xe};k==="A"?je.current=Me:U.current=Me;const De=je.current.wristY,Be=U.current.wristY;let He="None";if(De!=null||Be!=null){const _e=F?(Re,Le)=>Re==null?Le:Math.min(Re,Le):(Re,Le)=>Re==null?Le:Math.max(Re,Le);[De,Be].filter(Re=>Re!=null).reduce(_e,null)===De?He=je.current.player:He=U.current.player}O({camA:je.current.player,camB:U.current.player,merged:He})},D=(m,M,k)=>{m/=255,M/=255,k/=255;const x=Math.max(m,M,k),I=Math.min(m,M,k),R=x-I;let $=0;R!==0&&(x===m?$=60*((M-k)/R%6):x===M?$=60*((k-m)/R+2):$=60*((m-M)/R+4)),$<0&&($+=360);const ne=x===0?0:R/x*255,se=x*255;return[$/2,ne,se]},J=(m,M,k)=>{var se,we,xe,Me;const x=m.data;if(M&&!k)return{status:"Player A",percentA:null,percentB:null};if(k&&!M)return{status:"Player B",percentA:null,percentB:null};const I=((se=G.current)==null?void 0:se.hueWeight)??4,R=((we=G.current)==null?void 0:we.satWeight)??2,$=((xe=G.current)==null?void 0:xe.valWeight)??1,ne=((Me=G.current)==null?void 0:Me.sensitivity)??0;if(M&&k){let De=0,Be=0,He=0;for(let Re=0;Re<x.length;Re+=4){const Le=x[Re],rt=x[Re+1],Jt=x[Re+2],[Ye,at,it]=D(Le,rt,Jt),St=Math.min(1,Math.max(0,at/255)),zt=Math.min(1,Math.max(0,it/255)),Lt=Math.max(.05,.5*St+.5*zt),dn=Math.min(Math.abs(Ye-M.h),180-Math.abs(Ye-M.h)),Wt=Math.min(Math.abs(Ye-k.h),180-Math.abs(Ye-k.h)),ir=Math.abs(at-M.s),zn=Math.abs(at-k.s),Ln=Math.abs(it-M.v),On=Math.abs(it-k.v),wr=dn*I+ir*R+Ln*$,Zt=Wt*I+zn*R+On*$;Math.min(wr,Zt)>180||(wr<=Zt?De+=Lt:Be+=Lt,He+=Lt)}if(He===0)return{status:"None",percentA:0,percentB:0};const We=De/Math.max(1e-6,He),_e=Be/Math.max(1e-6,He),Pe=.12*(1+.8*Math.max(0,Math.min(1,ne)));return We>=Pe&&We>=_e?{status:"Player A",percentA:We,percentB:_e}:_e>=Pe&&_e>We?{status:"Player B",percentA:We,percentB:_e}:{status:"None",percentA:We,percentB:_e}}return{status:"None",percentA:0,percentB:0}},Q=(m,M,k)=>{const x=(m||0)*2,I=(M||0)/255,R=(k||0)/255,$=R*I,ne=$*(1-Math.abs(x/60%2-1)),se=R-$;let we=0,xe=0,Me=0;x>=0&&x<60?(we=$,xe=ne,Me=0):x<120?(we=ne,xe=$,Me=0):x<180?(we=0,xe=$,Me=ne):x<240?(we=0,xe=ne,Me=$):x<300?(we=ne,xe=0,Me=$):(we=$,xe=0,Me=ne);const De=Math.round((we+se)*255),Be=Math.round((xe+se)*255),He=Math.round((Me+se)*255);return`rgb(${De}, ${Be}, ${He})`},le=m=>m?Q(m.h,m.s,m.v):"#ffffff",z=async(m,M)=>{try{if(m==="A"){if(ce(M),l.current){try{l.current.stop()}catch(x){ut("Stop camA error:",x)}l.current=null}f.current&&(f.current.getTracks().forEach(x=>x.stop()),f.current=null);const k=e.current;k&&(k.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Te(M,e,f),await new Promise(x=>setTimeout(x,200)),await ye(),await ge("A",e,l),ut("Camera A switched to:",M)}else{if(Ne(M),a.current){try{a.current.stop()}catch(x){ut("Stop camB error:",x)}a.current=null}h.current&&(h.current.getTracks().forEach(x=>x.stop()),h.current=null);const k=t.current;k&&(k.srcObject=null),await new Promise(x=>setTimeout(x,100)),await Te(M,t,h),await new Promise(x=>setTimeout(x,200)),await ye(),await ge("B",t,a),ut("Camera B switched to:",M)}}catch(k){console.error("[Detector2] Camera switch error:",k),C(`Camera switch error: ${k.message}`)}};return d.jsxs("div",{className:`detector-window ${A?"minimized":""}`,children:[d.jsxs("div",{className:"detector-header",children:[d.jsx("span",{children:"Bracelet Detector 2 (Two Cameras)"}),d.jsxs("div",{className:"detector-controls",children:[d.jsx("button",{onClick:()=>N(!A),children:A?"":""}),d.jsx("button",{onClick:()=>he(!F),title:"Toggle A criterion",children:F?"A=Top":"A=Bottom"})]})]}),d.jsxs("div",{className:"detector-content",style:{display:A?"none":"block"},children:[d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera A:"}),d.jsx("select",{value:me,onChange:m=>z("A",m.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(m=>d.jsx("option",{value:m.deviceId,children:m.label||`Camera ${m.deviceId.slice(0,8)}`},m.deviceId))})]}),d.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:n,className:"output_canvas"})]}),d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{fontSize:12,opacity:.8,marginBottom:4,display:"flex",alignItems:"center",gap:4},children:[d.jsx("span",{children:"Camera B:"}),d.jsx("select",{value:Ce,onChange:m=>z("B",m.target.value),style:{fontSize:10,padding:"2px 4px",maxWidth:120},children:fe.map(m=>d.jsx("option",{value:m.deviceId,children:m.label||`Camera ${m.deviceId.slice(0,8)}`},m.deviceId))})]}),d.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:"-9999px",left:"-9999px",width:1,height:1}}),d.jsx("canvas",{ref:r,className:"output_canvas"})]})]}),d.jsxs("div",{className:"detector-info",style:{marginTop:8},children:[d.jsxs("div",{className:"status-display",children:["Merged: ",d.jsx("strong",{children:L.merged})]}),d.jsxs("div",{className:"color-swatches",style:{display:"flex",alignItems:"center",gap:12,marginTop:4},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"A"}),d.jsx("span",{title:"Player A calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:S?le(S):"#444"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx("span",{style:{fontSize:12,opacity:.8},children:"B"}),d.jsx("span",{title:"Player B calibrated color",style:{width:14,height:14,borderRadius:3,border:"1px solid #666",display:"inline-block",background:E?le(E):"#444"}})]})]}),d.jsxs("div",{className:"calib-summary",style:{fontSize:12,opacity:.8,marginTop:4,lineHeight:1.4},children:[d.jsxs("div",{children:["A: ",S?`h${Math.round(S.h)} s${Math.round(S.s)} v${Math.round(S.v)}`:""]}),d.jsxs("div",{children:["B: ",E?`h${Math.round(E.h)} s${Math.round(E.s)} v${Math.round(E.v)}`:""]})]}),y&&d.jsxs("div",{style:{color:"#f55",marginTop:4},children:["Camera error: ",y]}),d.jsxs("div",{style:{fontSize:12,marginTop:6},children:[d.jsx("strong",{children:"Note:"})," Detects topmost hand across both cameras. Use A=Top/A=Bottom to switch criterion."]})]})]})]})}const fi=El(),ed=e=>{var l,a,f,h,y;if(!e)return null;const t=Array.isArray(e.moves)?e.moves:[],n=t.reduce((C,A)=>typeof A.elapsed=="number"&&A.elapsed>C?A.elapsed:C,0),r={},o={};return t.forEach(C=>{const A=(C==null?void 0:C.player)||"Unknown";r[A]=(r[A]||0)+1;const N=(C==null?void 0:C.phase)||"unknown";o[N]=(o[N]||0)+1}),{startTime:((l=e.sessionInfo)==null?void 0:l.startedAt)||((f=(a=e.metadata)==null?void 0:a.config)==null?void 0:f.date)||e.createdAt,endTime:((h=e.sessionInfo)==null?void 0:h.endedAt)||e.updatedAt,duration:n,sessionInfo:{...((y=e.metadata)==null?void 0:y.config)||{},...e.sessionInfo||{},sessionGameId:e.sessionGameId,subjectId:e.subjectId,condition:e.condition,date:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt},moves:t,braceletHistory:e.braceletHistory||[],summary:{totalMoves:t.length,movesByPlayer:r,movesByPhase:o}}},Qv=e=>{if(!e)return"";try{const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleString()}catch{}return e},td="adminPassword";function bv(){var fe;const[e,t]=P.useState([]),[n,r]=P.useState(!0),[o,l]=P.useState(null),[a,f]=P.useState(null),[h,y]=P.useState(null),[C,A]=P.useState(!1),[N,L]=P.useState(null),[O,F]=P.useState(!1),[he,S]=P.useState(""),[w,E]=P.useState(!1);P.useEffect(()=>{const Z=localStorage.getItem(td);Z&&S(Z)},[]);const _=P.useCallback(async()=>{if(!he){l("Password required"),r(!1);return}r(!0),l(null),E(!1);try{const Z=await fetch(`${fi}/sessions`,{headers:{"x-admin-password":he}});if(Z.status===401||Z.status===403)throw E(!0),new Error("Invalid password");if(!Z.ok)throw new Error(`Failed to load sessions (${Z.status})`);const me=await Z.json(),ce=Array.isArray(me)?me:[];localStorage.setItem(td,he),t(ce),f(Ce=>Ce&&ce.some(Ne=>Ne.sessionGameId===Ce)?Ce:ce.length>0?ce[0].sessionGameId:null)}catch(Z){console.error("[Admin] Error fetching sessions:",Z),l(Z.message||"Failed to load sessions"),t([]),f(null)}finally{r(!1)}},[he]);P.useEffect(()=>{_()},[_]),P.useEffect(()=>{if(!a){y(null);return}let Z=!1;return(async()=>{if(he){A(!0),L(null);try{const ce=await fetch(`${fi}/sessions/${encodeURIComponent(a)}`,{headers:{"x-admin-password":he}});if(!ce.ok)throw ce.status===404?new Error("Session not found"):new Error(`Failed to load session (${ce.status})`);const Ce=await ce.json();Z||y(ed(Ce))}catch(ce){console.error("[Admin] Error fetching session detail:",ce),Z||(L(ce.message||"Failed to load session"),y(null))}finally{Z||A(!1)}}})(),()=>{Z=!0}},[a]);const H=Z=>{f(Z),F(!1)},K=async()=>{if(!a||!he)return;const Z=!O;F(Z),A(!0),L(null);try{const me=Z?`${fi}/sessions/${encodeURIComponent(a)}/experiment-only`:`${fi}/sessions/${encodeURIComponent(a)}`,ce=await fetch(me,{headers:{"x-admin-password":he}});if(!ce.ok)throw new Error(`Failed to load session data (${ce.status})`);const Ce=await ce.json();y(ed(Ce))}catch(me){console.error("[Admin] Error loading session data:",me),L(me.message||"Failed to load session data"),F(!Z)}finally{A(!1)}},X=()=>{a&&(window.location.hash=`#/admin/edit-moves/${encodeURIComponent(a)}`)},W=()=>{if(!h)return;const Z=JSON.stringify(h,null,2),me=new Blob([Z],{type:"application/json"}),ce=URL.createObjectURL(me),Ce=document.createElement("a");Ce.href=ce;const Ne=`${a}_${new Date().toISOString().split("T")[0]}.json`;Ce.download=Ne,Ce.click(),URL.revokeObjectURL(ce),console.log("[Admin] Downloaded JSON:",Ne)},pe=()=>{if(!h||!h.moves||h.moves.length===0){alert("No moves to export");return}const Z=new Set;h.moves.forEach(te=>{Object.keys(te).forEach(Se=>{Se!=="camera_frame"&&Se!=="__v"&&Z.add(Se)})});const me=Array.from(Z),ce=[me.join(",")];h.moves.forEach(te=>{const Se=me.map(B=>{const de=te[B];return de==null||de===""?"":Array.isArray(de)||typeof de=="object"?`"${JSON.stringify(de).replace(/"/g,'""')}"`:`"${String(de).replace(/"/g,'""')}"`});ce.push(Se.join(","))});const Ce=ce.join(`
`),Ne=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),Te=URL.createObjectURL(Ne),Y=document.createElement("a");Y.href=Te;const ie=`${a}_${new Date().toISOString().split("T")[0]}.csv`;Y.download=ie,Y.click(),URL.revokeObjectURL(Te),console.log("[Admin] Downloaded CSV:",ie)},G=async(Z,me)=>{if(!(!a||!Z||!he))try{const ce=await fetch(`${fi}/sessions/${encodeURIComponent(a)}/moves/${encodeURIComponent(Z)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":he},body:JSON.stringify({player:me})});if(!ce.ok)throw new Error(`Failed to update player (${ce.status})`);y(Ce=>Ce&&{...Ce,moves:Ce.moves.map(Ne=>Ne._id===Z?{...Ne,player:me}:Ne)}),console.log("[Admin] Player updated:",Z,me)}catch(ce){console.error("[Admin] Error updating player:",ce),alert("Failed to update player: "+ce.message)}};return d.jsxs("div",{className:"admin-container",children:[d.jsxs("aside",{className:"admin-sidebar",children:[d.jsxs("div",{className:"admin-sidebar-header",children:[d.jsx("h1",{children:"Admin"}),d.jsxs("div",{className:"admin-password-row",children:[d.jsx("input",{type:"password",className:`admin-password-input ${w?"error":""}`,placeholder:"Password",value:he,onChange:Z=>S(Z.target.value),onKeyPress:Z=>{Z.key==="Enter"&&_()}}),d.jsx("button",{className:"admin-refresh-button",onClick:_,disabled:n||!he,children:n?"Refreshing":"Refresh"})]})]}),o&&d.jsx("div",{className:"admin-error",children:o}),d.jsxs("div",{className:"admin-session-list",children:[n&&e.length===0&&d.jsx("div",{className:"admin-status",children:"Loading sessions"}),!n&&e.length===0&&!o&&d.jsx("div",{className:"admin-status",children:"No sessions found."}),e.map(Z=>{const me=typeof Z.movesCount=="number"?Z.movesCount:Array.isArray(Z.moves)?Z.moves.length:0,ce=Z.sessionGameId===a;return d.jsxs("button",{className:`admin-session-card ${ce?"active":""}`,onClick:()=>H(Z.sessionGameId),children:[d.jsx("div",{className:"admin-session-id",children:Z.sessionGameId}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Participant: ",Z.subjectId||""]}),d.jsxs("span",{children:["Condition: ",Z.condition||""]})]}),d.jsxs("div",{className:"admin-session-meta",children:[d.jsxs("span",{children:["Moves: ",me]}),d.jsxs("span",{children:["Updated: ",Qv(Z.updatedAt)]})]})]},Z.sessionGameId)})]})]}),d.jsxs("main",{className:"admin-content",children:[C&&d.jsx("div",{className:"admin-status admin-status--content",children:"Loading session"}),N&&d.jsx("div",{className:"admin-error admin-error--content",children:N}),!C&&!N&&h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"admin-toolbar",children:[d.jsx("button",{className:`admin-toolbar-button experiment-toggle ${O?"active":""}`,onClick:K,title:O?"Show all moves (including practice)":"Show only experiment phase moves",children:O?"Show All Moves":"Experiment Only"}),d.jsx("button",{className:"admin-toolbar-button edit-players",onClick:X,title:"Open dedicated editor for player assignments",children:"Edit Players"}),d.jsx("div",{className:"admin-toolbar-divider"}),d.jsx("button",{className:"admin-toolbar-button download-json",onClick:W,title:"Download session data as JSON",children:"Download JSON"}),d.jsx("button",{className:"admin-toolbar-button download-csv",onClick:pe,title:"Download moves as CSV",children:"Download CSV"})]}),d.jsx("div",{className:"admin-summary-wrapper",children:d.jsx(xh,{initialData:h,enableFileUpload:!1,className:"embedded-summary",title:`Session ${((fe=h.sessionInfo)==null?void 0:fe.sessionGameId)||a||""}${O?" (Experiment Only)":""}`,sessionGameId:a,onPlayerUpdate:G})})]}),!C&&!N&&!h&&d.jsx("div",{className:"admin-status admin-status--content",children:"Select a session to view its moves."})]})]})}const Yv=()=>localStorage.getItem("adminPassword")||"",nd=async(e,t,n,r,o=!1)=>{const l=El(),a=Yv(),f={sessionGameId:e,moveIds:t,onlyUnknown:o};n&&r&&(f.colorA=n,f.colorB=r);const h=await fetch(`${l}/ai/identify-moves-batch`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":a},body:JSON.stringify(f)});if(!h.ok){const y=await h.json();throw new Error(y.message||"Failed to identify moves")}return h.json()},rd=El(),Kv="adminPassword",id=(e,t=2)=>typeof e!="number"||!Number.isFinite(e)?"":e.toFixed(t);function Xv({sessionGameId:e}){var Y,ie,te,Se;const[t,n]=P.useState(null),[r,o]=P.useState(!0),[l,a]=P.useState(null),[f,h]=P.useState(null),[y,C]=P.useState(null),[A,N]=P.useState("all"),[L,O]=P.useState(""),[F,he]=P.useState(!1),[S,w]=P.useState({}),[E,_]=P.useState("#FF0000"),[H,K]=P.useState("#0000FF"),[X,W]=P.useState(!1);P.useEffect(()=>{const B=localStorage.getItem(Kv);B&&O(B)},[]),P.useEffect(()=>{e&&L&&G()},[e,L]);const pe=B=>{if(!B||typeof B.h>"u")return null;const de=(B.h||0)*2,ye=(B.s||0)/255,ge=(B.v||0)/255,je=ge*ye,U=je*(1-Math.abs(de/60%2-1)),ee=ge-je;let ue=0,oe=0,D=0;de>=0&&de<60?(ue=je,oe=U,D=0):de<120?(ue=U,oe=je,D=0):de<180?(ue=0,oe=je,D=U):de<240?(ue=0,oe=U,D=je):de<300?(ue=U,oe=0,D=je):(ue=je,oe=0,D=U);const J=Q=>{const le=Math.round((Q+ee)*255).toString(16);return le.length===1?"0"+le:le};return`#${J(ue)}${J(oe)}${J(D)}`.toUpperCase()},G=async()=>{if(L){o(!0),a(null);try{const B=await fetch(`${rd}/sessions/${encodeURIComponent(e)}`,{headers:{"x-admin-password":L}});if(!B.ok)throw new Error(`Failed to load session (${B.status})`);const de=await B.json();if(n(de),de.colorA&&de.colorB)_(de.colorA),K(de.colorB),console.log("[MoveHistoryEditor]  Loaded colors from session:",de.colorA,de.colorB);else try{const ye=JSON.parse(localStorage.getItem("calibrationA")||"null"),ge=JSON.parse(localStorage.getItem("calibrationB")||"null");if(ye&&ge){const je=pe(ye),U=pe(ge);je&&U?(_(je),K(U),console.log("[MoveHistoryEditor]  Session has no colors, loaded from localStorage calibration:",je,U)):console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}else console.log("[MoveHistoryEditor]  No calibration found, using default colors (red/blue)")}catch(ye){console.warn("[MoveHistoryEditor] Error reading calibration from localStorage:",ye),console.log("[MoveHistoryEditor]  Using default colors (red/blue)")}}catch(B){console.error("[MoveHistoryEditor] Error loading session:",B),a(B.message)}finally{o(!1)}}},fe=async(B,de)=>{if(!(!e||!B||!L))try{const ye=await fetch(`${rd}/sessions/${encodeURIComponent(e)}/moves/${encodeURIComponent(B)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-admin-password":L},body:JSON.stringify({player:de})});if(!ye.ok)throw new Error(`Failed to update player (${ye.status})`);n(ge=>ge&&{...ge,moves:ge.moves.map(je=>je._id===B?{...je,player:de}:je)}),w(ge=>{const je={...ge};return delete je[B],je}),console.log("[MoveHistoryEditor] Player updated:",B,de)}catch(ye){console.error("[MoveHistoryEditor] Error updating player:",ye),alert("Failed to update player: "+ye.message)}},Z=async()=>{if(!(!e||!L)){he(!0);try{console.log("[MoveHistoryEditor] Starting AI identification for all moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",E,"Player B:",H);const B=await nd(e,[],E,H,!1),de={};B.results.forEach(ye=>{de[ye.moveId]={player:ye.currentPlayer==="A"?"Player A":ye.currentPlayer==="B"?"Player B":"None",confidence:ye.confidence,rawResponse:ye.rawResponse}}),w(de),console.log("[MoveHistoryEditor] AI identification complete:",B.processed,"moves processed"),alert(`AI identified ${B.processed} moves. Review and confirm suggestions below.`)}catch(B){console.error("[MoveHistoryEditor] Error in AI identification:",B),alert("AI identification failed: "+B.message)}finally{he(!1)}}},me=async()=>{if(!(!e||!L)){he(!0);try{console.log("[MoveHistoryEditor] Starting AI identification for unknown moves..."),console.log("[MoveHistoryEditor]  Using colors - Player A:",E,"Player B:",H);const B=await nd(e,[],E,H,!0),de={};B.results.forEach(ye=>{de[ye.moveId]={player:ye.currentPlayer==="A"?"Player A":ye.currentPlayer==="B"?"Player B":"None",confidence:ye.confidence,rawResponse:ye.rawResponse}}),w(de),console.log("[MoveHistoryEditor] AI identification complete:",B.processed,"unknown moves processed"),alert(`AI identified ${B.processed} unknown moves. Review and confirm suggestions below.`)}catch(B){console.error("[MoveHistoryEditor] Error in AI identification:",B),alert("AI identification failed: "+B.message)}finally{he(!1)}}},ce=async B=>{const de=S[B];de&&await fe(B,de.player)},Ce=((Y=t==null?void 0:t.moves)==null?void 0:Y.filter(B=>A==="all"?!0:B.phase===A))||[];if(r)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-loading",children:"Loading session data..."})});if(l)return d.jsx("div",{className:"move-editor-container",children:d.jsxs("div",{className:"move-editor-error",children:[d.jsx("h2",{children:"Error Loading Session"}),d.jsx("p",{children:l}),d.jsx("button",{onClick:()=>window.location.hash="#/admin",children:" Back to Admin"})]})});if(!t)return d.jsx("div",{className:"move-editor-container",children:d.jsx("div",{className:"move-editor-error",children:"Session not found"})});const Ne=((ie=t.moves)==null?void 0:ie.filter(B=>B.phase==="practice").length)||0,Te=((te=t.moves)==null?void 0:te.filter(B=>B.phase==="experiment").length)||0;return d.jsxs("div",{className:"move-editor-container",children:[d.jsxs("header",{className:"move-editor-header",children:[d.jsx("button",{className:"back-button",onClick:()=>window.location.hash="#/admin",children:" Back to Admin"}),d.jsxs("div",{className:"move-editor-title",children:[d.jsx("h1",{children:"Move History Editor"}),d.jsxs("div",{className:"session-info",children:[d.jsxs("span",{className:"session-id",children:["Session: ",e]}),d.jsxs("span",{className:"session-meta",children:["Participant: ",t.subjectId]}),d.jsxs("span",{className:"session-meta",children:["Condition: ",t.condition]})]})]}),d.jsxs("div",{className:"phase-filter",children:[d.jsxs("button",{className:`filter-btn ${A==="all"?"active":""}`,onClick:()=>N("all"),children:["All (",((Se=t.moves)==null?void 0:Se.length)||0,")"]}),d.jsxs("button",{className:`filter-btn ${A==="practice"?"active":""}`,onClick:()=>N("practice"),children:["Practice (",Ne,")"]}),d.jsxs("button",{className:`filter-btn ${A==="experiment"?"active":""}`,onClick:()=>N("experiment"),children:["Experiment (",Te,")"]})]}),d.jsxs("div",{className:"ai-controls",children:[d.jsx("button",{className:"color-picker-toggle",onClick:()=>W(!X),children:" Bracelet Colors"}),X&&d.jsxs("div",{className:"color-picker-panel",children:[d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player A:"}),d.jsx("input",{type:"color",value:E,onChange:B=>_(B.target.value)}),d.jsx("span",{children:E})]}),d.jsxs("div",{className:"color-input-group",children:[d.jsx("label",{children:"Player B:"}),d.jsx("input",{type:"color",value:H,onChange:B=>K(B.target.value)}),d.jsx("span",{children:H})]})]}),d.jsx("button",{className:"ai-btn ai-btn-all",onClick:Z,disabled:F,children:F?" Processing...":" AI Identify All"}),d.jsx("button",{className:"ai-btn ai-btn-unknown",onClick:me,disabled:F,children:F?" Processing...":" AI Identify Unknown"})]})]}),d.jsxs("div",{className:"move-editor-content",children:[d.jsx("div",{className:"moves-grid",children:Ce.map((B,de)=>{var ye;return d.jsxs("div",{className:`move-card ${(f==null?void 0:f._id)===B._id?"selected":""}`,onClick:()=>h(B),children:[d.jsxs("div",{className:"move-card-header",children:[d.jsxs("span",{className:"move-number",children:["#",de+1]}),d.jsx("span",{className:`move-phase ${B.phase}`,children:B.phase})]}),B.camera_frame&&d.jsxs("div",{className:"move-image",onClick:ge=>{ge.stopPropagation(),C(B.camera_frame)},children:[d.jsx("img",{src:B.camera_frame,alt:`Move ${de+1}`}),d.jsx("div",{className:"image-overlay",children:" Click to enlarge"})]}),d.jsxs("div",{className:"move-card-body",children:[d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Type:"}),d.jsx("span",{className:"value",children:B.type})]}),S[B._id]&&d.jsxs("div",{className:"ai-suggestion-banner",children:[d.jsxs("div",{className:"ai-suggestion-content",children:[d.jsx("span",{className:"ai-icon",children:""}),d.jsxs("span",{className:"ai-text",children:["AI suggests: ",d.jsx("strong",{children:S[B._id].player})]})]}),d.jsx("button",{className:"ai-confirm-btn",onClick:ge=>{ge.stopPropagation(),ce(B._id)},children:" Confirm"})]}),d.jsxs("div",{className:"move-info-row player-row",children:[d.jsx("span",{className:"label",children:"Player:"}),d.jsxs("select",{className:`player-select ${(ye=B.player)==null?void 0:ye.toLowerCase().replace(" ","-")}`,value:B.player||"Unknown",onChange:ge=>fe(B._id,ge.target.value),onClick:ge=>ge.stopPropagation(),children:[d.jsx("option",{value:"Player A",children:"Player A"}),d.jsx("option",{value:"Player B",children:"Player B"}),d.jsx("option",{value:"None",children:"None"}),d.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),B.blockId!==null&&B.blockId!==void 0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Block:"}),d.jsx("span",{className:"value",children:B.blockId})]}),Array.isArray(B.position)&&B.position.length===2&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Position:"}),d.jsxs("span",{className:"value",children:["(",B.position[0],", ",B.position[1],")"]})]}),d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Time:"}),d.jsxs("span",{className:"value",children:[id(B.elapsed,1),"s"]})]}),Number.isFinite(B.holdTime)&&B.holdTime>0&&d.jsxs("div",{className:"move-info-row",children:[d.jsx("span",{className:"label",children:"Hold:"}),d.jsxs("span",{className:"value",children:[id(B.holdTime,2),"s"]})]})]})]},B._id||de)})}),Ce.length===0&&d.jsx("div",{className:"no-moves",children:d.jsx("p",{children:"No moves found for selected filter."})})]}),y&&d.jsx("div",{className:"image-modal",onClick:()=>C(null),children:d.jsxs("div",{className:"image-modal-content",onClick:B=>B.stopPropagation(),children:[d.jsx("button",{className:"close-modal",onClick:()=>C(null),children:""}),d.jsx("img",{src:y,alt:"Expanded view"})]})})]})}const Jv=!1;function Zv(){const[e,t]=P.useState(!1),[n,r]=P.useState(null),[o,l]=P.useState(null),[a,f]=P.useState(window.location.hash),[h,y]=P.useState(!1);P.useEffect(()=>{const O=()=>{f(window.location.hash)};return window.addEventListener("hashchange",O),()=>window.removeEventListener("hashchange",O)},[]),P.useEffect(()=>(window.toggleInterface=O=>{y(O),console.log("[App] Interface "+(O?"hidden":"shown"))},()=>{window.toggleInterface&&delete window.toggleInterface}),[]);const C=O=>{r(O),t(!0)},A=()=>{o&&!o.closed&&o.close();const O=window.location.origin+window.location.pathname+"#/detector",F=window.open(O,"BraceletDetector","width=700,height=600,left=100,top=100");l(F)};P.useEffect(()=>()=>{o&&!o.closed&&o.close()},[o]),P.useEffect(()=>(window.secEnd=()=>{try{console.log("[App] secEnd() called - triggering game end"),window.endGameExperience?window.endGameExperience():(console.warn("[App] endGameExperience() not available - game may not be running"),alert("Game is not currently running or already ended."))}catch(O){console.error("Error ending experience:",O),alert("Error ending experience: "+O.message)}},()=>{window.secEnd&&delete window.secEnd}),[]);let N=null;const L=a.match(/^#\/admin\/edit-moves\/(.+)$/);if(a==="#/detector")N=d.jsx(Zc,{});else if(a==="#/calibrate")N=d.jsx(Vv,{});else if(a==="#/detector2")N=d.jsx(Gv,{});else if(a==="#/summary")N=d.jsx(xh,{});else if(a==="#/admin")N=d.jsx(bv,{});else if(L){const O=decodeURIComponent(L[1]);N=d.jsx(Xv,{sessionGameId:O},O)}else N=e?d.jsxs(d.Fragment,{children:[d.jsx(Hv,{config:n,interfaceHidden:h}),d.jsx(Zc,{hidden:h}),Jv,!h&&d.jsxs("div",{style:{position:"fixed",bottom:8,right:8,display:"flex",flexDirection:"column",gap:4,zIndex:9999},children:[d.jsx("button",{onClick:A,style:{background:"#4CAF50",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},title:"Open Bracelet Detector in new window",children:" Detector"}),d.jsx("a",{href:"#/detector2",style:{background:"#222",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none"},children:"Detector2"}),d.jsx("a",{href:"#/admin",style:{background:"#444",color:"#fff",padding:"4px 8px",borderRadius:4,fontSize:12,textDecoration:"none",textAlign:"center"},children:"Admin"})]}),!h&&d.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:9999},children:d.jsx("button",{onClick:()=>y(!0),style:{background:"#555",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:14,border:"none",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Hide"})})]}):d.jsx(zv,{onStart:C});return d.jsx("div",{className:"App",children:N})}ps.createRoot(document.getElementById("root")).render(d.jsx(wp.StrictMode,{children:d.jsx(Zv,{})}));
